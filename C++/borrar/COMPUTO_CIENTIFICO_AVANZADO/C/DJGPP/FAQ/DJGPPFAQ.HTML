<html>


<!-- This HTML file has been created by Texinfo from  ---------
---- djgppfaq.txi, using a special set of macros from ---------
---- `faqmacro.txi' on 13 September 1998.

---- Please don't look at it but through your Web browser:  ---
---- it looks ugly and ain't supposed to be read by humans. ---
---- You HAVE been warned!                                  --->

<head>
<TITLE> DJGPP Frequently-Asked Questions List </TITLE>
</head>
<body>
<H1> DJGPP Frequently-Asked Questions List </H1>
<h2> Edition 2.11, for DJGPP Version 2.01 </h2>
<h2> September 1998 </h2>
<ADDRESS> by Eli Zaretskii </ADDRESS>
<p>
This is the DJGPP Frequently-Asked Questions List.

Copyright (C) 1994, 1995, 1996, 1997, 1998 Eli Zaretskii.

<p>

This is the second edition of the FAQ list,
and is consistent with version 2.01 of DJGPP.

<p>

This FAQ list may be freely distributed with the DJGPP package or any part thereof, provided that this copyright notice is left intact on all copies.

<P>
<P>
<CENTER>
<H1> <A NAME="Top">

DJGPP FAQ List </A></H1><P>
</CENTER>
  In DJGPP (see <A HREF="#DJGPP">DJGPP overview</A>), a 32-bit compiler and programming environment, originally written for Unix machines, meet a 16-bit MS-DOS operating system.  Programmers who work
in this environment have to master a large body of knowledge from both Unix and MS-DOS, especially if they want to use some advanced features, like interrupt handling, directly accessing peripheral
devices, etc.  <p>

  But because the DJGPP project is run by a group of volunteers on their free time, there isn't always enough time (or patience, or money <b>;-)</b> to produce documentation which will describe all the
subtle features and pitfalls a user should know about.  The documentation of DJGPP-specific utilities and features is minimal at times, leaving wide space for confusion, in newcomers and veterans
alike, and making the DJGPP learning curve steeper than it could be.  <p>

  This FAQ list is an attempt to take the sting out of that learning curve, by supplying solutions for problems which are known to puzzle DJGPP users.  (Another solution would be to pay to DJ Delorie
and other people who develop DJGPP to produce more documentation <b>;-)</b>.  <p>

  Some additional places to look for tutorials and other introductory material about DJGPP are listed below.  <p>

  One good place to look for DJGPP features that are often overlooked is the <a href="http://www.delorie.com/djgpp/doc/kb/">DJGPP Knowledge Base</a>.  The Knowledge Base is also available in Info
format; type <samp>info knowledge</samp> from the DOS prompt.  A <cite>User's Guide</cite> is also being written by several contributors; it is currently available
<a href="http://www.delorie.com/djgpp/doc/ug/">from the DJGPP server</a>.  <p>

  <a href="mailto:brennan@rt66.com">Brennan Underwood</a> maintains a <a href="http://brennan.home.ml.org/djgpp/">home page</a>, which is another valuable source for information about DJGPP.  <p>

  You can browse the HTML version of this FAQ list on line at <a href="http://www.delorie.com/djgpp/v2faq/faq.html">DJ Delorie's Web server</a>.  <p>

  Also available from the DJ's server: <a href="http://www.delorie.com/djgpp/v2faq/faq211b.zip">FAQ in several additional formats</a>.  <p>

  A previous version of this FAQ was <a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2/frfaq21b.zip">translated into French</a>, also available
<a href="http://www.delorie.com/djgpp/v2faq/frfaq21.zip">through the WWW</a>.  <p>

  This is Edition 2.11 of the FAQ, last updated 13 September 1998, for DJGPP Version 2.01.  <p>

  The following master menu lists the major topics in this FAQ list, including all the indices.

<p>
<ul>
<li><A HREF="#Urgent"> 1. Urgent--If you are in a hurry.  </A>
<li><A HREF="#DJGPP"> 2. DJGPP--What is DJGPP?  </A>
<li><A HREF="#Requirements"> 3. Requirements--Hardware and software requirements for DJGPP.  </A>
<li><A HREF="#Getting DJGPP"> 4. Getting DJGPP--Where and what to download?  </A>
<li><A HREF="#Docs"> 5. Docs--Where the documentation is and how to read it.  </A>
<li><A HREF="#Trouble"> 6. Trouble--When the compiler (or Make, or Info, or ...) crashes  </A>
<li><A HREF="#Compiler performance"> 7. Compiler performance--How fast is the compiler?  </A>
<li><A HREF="#Compiling"> 8. Compiling--Compile-time and link-time problems.  </A>
<li><A HREF="#Running"> 9. Running--Running compiled programs.  </A>
<li><A HREF="#Graphics"> 10. Graphics--Graphics under DJGPP.  </A>
<li><A HREF="#Floating point"> 11. Floating point--Floating-point programs and FP emulation.  </A>
<li><A HREF="#Debugging"> 12. Debugging--Debugging DJGPP programs.  </A>
<li><A HREF="#Profiling"> 13. Profiling--Optimizing your programs.  </A>
<li><A HREF="#Performance"> 14. Performance--Run-time performance of DJGPP programs.  </A>
<li><A HREF="#Memory"> 15. Memory--Run-time memory issues.  </A>
<li><A HREF="#Command line"> 16. Command line--Command-line arguments handling in DJGPP.  </A>
<li><A HREF="#Converting"> 17. Converting--How to convert DOS code to DJGPP?  </A>
<li><A HREF="#Low-level"> 18. Low-level--Low-level and hardware-oriented programming.  </A>
<li><A HREF="#Legalese"> 19. Legalese--Legal aspects of programming with DJGPP.  </A>
<li><A HREF="#Help"> 20. Help--How to get more help.  </A>
<li><A HREF="#New versions"> 21. New versions--Where are and what's new in latest DJGPP versions.  </A>
<li><A HREF="#Miscellany"> 22. Miscellany--More...  </A>
<li><A HREF="#About"> 23. About--Contributors to this FAQ.  </A>
<li><A HREF="#Topic Index"> 24. Topic Index--Search here by a problem description.  </A>
<li><A HREF="#Program Index"> 25. Program Index--Search here by a program name.  </A>
</ul>
<P>
<P> | <A HREF="#Top"> Previous </A> | <A HREF="#DJGPP"> Next </A> | <A HREF="#Top"> Up </A> | <P>
<P>
<P>
<CENTER>
<H2>

<A NAME="Urgent">

1. If You Are In a Hurry </A></H2><P>
</CENTER>
<em><strong>Q</strong>: Do you really mean I have to read this looongish FAQ list to get my answers? </em> <p>
<em><strong>Q</strong>: I have this problem which I absolutely MUST solve NOW!  What do I do? </em> <p>
<hr> <strong>A</strong>: No, you don't need to read <em>all</em> of the FAQ unless you want to (although this is by all means recommended).  The questions in this document are listed, as much as
possible, in the order they appear when one goes through getting DJGPP, installing it and using it.  To quickly find an answer to your question, first look at the <A HREF="#Top">Table of Contents</A>.
If that doesn't help, try the indices at the end of this manual.  You can look up your question either <A HREF="#Program Index">by program name</A>, or <A HREF="#Topic Index">by topic name</A>.  To
search the indices in Info, press <kbd>i</kbd> (you don't need to go to the Index node for that), then type the string you want to look up, and press &lt;Enter&gt;.  If the first place found by Info
is not what you are after, press <kbd>,</kbd> (comma) repeatedly, to visit the rest of the places which appear in the indices.

If you don't find anything appropriate, search this FAQ for words which are pertinent to your problem(<i><b>Note: </b>Please report any issues that couldn't be found via the indices to the maintainer
of this FAQ, whose name and e-mail address can be found near the end of the FAQ.</i>).  For those in a <em>real</em> hurry, here are some pointers to the most important topics in this FAQ list:

<ul>
<li>How to install DJGPP after downloading it?  <p>

Here's a brief description of the necessary steps:

<ul>
<li> Create a directory for DJGPP and chdir there.  <p>

<li> Unzip all the <samp>*.zip</samp> files preserving the directory structure.  On Windows 9X, use an unzip program which supports long file names.  <p>

<li> Add these two lines to your <samp>AUTOEXEC.BAT</samp> file:

<pre>

      set PATH=C:\DJGPP\BIN;%PATH%
      set DJGPP=C:\DJGPP\DJGPP.ENV

</pre>
If your top DJGPP directory is other than <samp>C:\DJGPP</samp>, <strong>change these two lines accordingly!</strong> <p>

<li> Reboot your machine.
</ul>
<p>

Your installation is now complete.  <p>

<li>How do I compile and link programs?  <p>

Here are several simple commands:

<ul>
<li>Compile a single C source <samp>cprog.c</samp> into <samp>cprog.exe</samp>: <p>

<pre>

      gcc -o cprog.exe cprog.c

</pre>
<p>

<li>Compile a C<tt>++</tt> source <samp>cxxprog.cc</samp> into <samp>cxxprog.exe</samp>: <p>

<pre>

      gxx -o cxxprog.exe cxxprog.cc

</pre>
<p>

<li>Compile several C/C<tt>++</tt> source files into object files: <p>

<pre>

      gcc -c cfile1.c cxxfile2.cc

</pre>
<p>

<li>Link several <samp>*.o</samp> object files into <samp>myprog.exe</samp>: <p>

<pre>

      gxx -o myprog.exe cfile1.o cxxfile2.o

</pre>
</ul>
<p>

To compile with optimizations, add the <samp>-O2</samp> switch to the command line.  In addition, use of the <samp>-Wall</samp> switch is highly recommended: it turns on many useful diagnostic
messages.  <p>

<li>How to ask experienced DJGPP users for help?  <p>

Use the DJGPP News group or mailing list.  For most questions, you will have your answer in a day or two.  See <A HREF="#Totally lost">the details on how to ask the gurus</A>.  <p>

<li>What is the best way to configure my system for DJGPP?  <p>

This depends on your hardware and software.  Detailed instructions are in <A HREF="#Config">system configuration guidelines</A>.  <p>

<li>Some files I need seem to be missing.  Where do I find them?  <p>

Check out <A HREF="#What to download">list of required and optional packages</A>.  <p>

<li>How do I subscribe to or unsubscribe from the DJGPP mailing list?  <p>

See <A HREF="#Subscribing">subscription instructions</A>.  However, it is better to read the <a href="news:comp.os.msdos.djgpp">comp.os.msdos.djgpp</a> news group if you have access to Usenet News.
<p>

<li>How can I search News group/mailing list traffic for some info?  <p>

This FAQ includes <A HREF="#Deja vu">description of DJGPP archive search server</A>.  That search facility is set up by <a href="mailto:dj@delorie.com">DJ Delorie</a>, and you should use it whenever
you have any questions or look for an information on a DJGPP-related subject.
</ul>
<P>
<P> | <A HREF="#Urgent"> Previous </A> | <A HREF="#Requirements"> Next </A> | <A HREF="#Top"> Up </A> | <P>
<P>
<P>
<CENTER>
<H2>

<A NAME="DJGPP">

2. What is DJGPP? </A></H2><P>
</CENTER>
<em><strong>Q</strong>: What is DJGPP? </em> <p>
<hr> <strong>A</strong>: DJGPP is a compiler and a set of tools that let you produce 32-bit protected-mode programs which run on MS-DOS/MS-Windows machines.  <p>

The originator and principal maintainer of DJGPP is <a href="mailto:dj@delorie.com">DJ Delorie</a>; that's where the "DJ" in "DJGPP" comes from.  However, anybody is welcome and encouraged to
contribute.  <p>

Programs compiled with DJGPP, and all development tools provided as part of DJGPP, look on the outside like normal DOS programs, and they rely on MS-DOS and BIOS for file I/O and other basic
functions such as keyboard input, screen cursor position, etc.  DJGPP programs use <dfn>DPMI</dfn> (the DOS Protected Mode Interface) to allow DOS/BIOS calls from protected mode.  Therefore, any
environment that can run DOS programs and provides DPMI services, will run DJGPP programs as well.  Environments that are known to be compatible with DJGPP include MS-DOS, DR-DOS, NWDOS, FreeDOS,
OpenDOS, Windows 3.X, 9X and NT, OS/2, and Linux DOSEmu.  When DJGPP programs run on Windows 9X, they support long filenames.  <p>

It is important to understand that all these environments will treat DJGPP programs as DOS programs which call DPMI services.  DJGPP cannot by itself create Win16 or Win32 applications; however, you
can use the RSXNT package together with DJGPP to achieve this.  See <A HREF="#Windows apps">writing Windows applications with DJGPP</A>.  <p>

Programs compiled with DJGPP can access all the physical memory on your machine and support virtual memory.  All this memory presents a flat address space with no segmentation (you can say goodbye to
far and huge pointers and to memory models), and is only limited by the amount of virtual memory supported by the DPMI server in use.  A typical DPMI server can provide at least 64MB of virtual
memory (if you have enough free disk space).  <p>

DJGPP is free: you don't have to pay anything to download and use it, even if you write commercial programs.  DJGPP doesn't impose any restrictions on programs that you write and compile with it: you
can make them commercial, shareware, freeware, or any other kind.  (There are a few minor exceptions to that rule, see <A HREF="#Application distribution">(un)restrictions on distribution of DJGPP
apps</A>.)  <p>

The core of DJGPP is the MS-DOS port of the GNU C/C<tt>++</tt> compiler, GCC, and auxiliary utilities, such as assembler, linker, librarian, Make, and a hypertext docs browser.  The DJGPP C library
was written specifically for DJGPP, mainly by DJ Delorie himself, with help from a small group of volunteers.  <p>

DJGPP presents a set of tools which are remarkably ANSI- and Posix-compliant(<i><b>Note: </b>Posix is an international standard for a portable operating system.  It specifies facilities of a
compiler, its libraries, and the basic set of development tools.  Posix was originally modeled on Unix systems, but is currently supported by most modern operating systems.</i>).  GCC complies to
ANSI/ISO C Standard; the DJGPP C library is ANSI- and Posix-compliant (however, a small number of Posix features, like the <code>fork</code> system call, are unimplemented); the C<tt>++</tt>
libraries also comply to the latest standards; and the GNU development tools used by DJGPP are all Posix-compliant.  As a result, DJGPP tools provide a complete and coherent Posix layer on top of
Microsoft operating systems, to the degree that even the infamous limitations of DOS and incompatibilities between DOS/Windows and Unix are almost completely concealed from users and developers.  <p>

Here are some of the tasks that DJGPP is said to be good for:

<ul>
<li> learning C and C++ programming and teaching others to program in C/C<tt>++</tt>;
<li> using Unix development tools on MS-DOS and MS-Windows;
<li> writing games(<i><b>Note: </b>For example, the DOS version of the well-known game <samp>Quake</samp> by id Software was compiled with DJGPP.</i>) and graphics programs;
<li> setting up a common development environment for Unix and MS-DOS/MS-Windows;
<li> writing portable DOS/Unix programs;
<li> porting Unix programs to Microsoft operating systems.
</ul>
DJGPP is also used as back-end for programming languages other than C/C<tt>++</tt>.  ADA, Pascal and Fortran compilers have been ported to MS-DOS based on DJGPP (GNU Pascal (<samp>gpc</samp>) and GNU
Fortran (<samp>g77</samp>) are available from the DJGPP archives).  <p>

Starting from v2.0, DJGPP programs do not need a separate extender program, only a DPMI server to run; DJGPP includes a free 32-bit DPMI server which allows for a 32-bit, 4 GByte flat address space
and up to 512 MBytes of virtual memory.

<P>
<P> | <A HREF="#DJGPP"> Previous </A> | <A HREF="#Getting DJGPP"> Next </A> | <A HREF="#Top"> Up </A> | <P>
<P>
<P>
<CENTER>
<H2>

<A NAME="Requirements">

3.  Hardware and Software Requirements </A></H2><P>
</CENTER>
  This chapter describes what are the hardware and software which will allow you to use DJGPP.  Minimum, "reasonable" and optimal system configurations are listed.

<p>
<ul>
<li><A HREF="#Minimum"> 3.1 Minimum--You cannot run DJGPP unless you have this.  </A>
<li><A HREF="#OS2"> 3.2 OS2--But it crashes under OS/2!  </A>
<li><A HREF="#WindowsNT"> 3.3 WindowsNT--Is it compatible with Windows/NT?  </A>
<li><A HREF="#DOSEmu"> 3.4 DOSEmu--Can I run it on Linux?  </A>
<li><A HREF="#i286"> 3.5 i286--Why not?  </A>
<li><A HREF="#Windows apps"> 3.6 Windows apps--Can I write Windows applications with DJGPP?  </A>
<li><A HREF="#Optimal hardware"> 3.7 Optimal hardware--Here is your dream machine description.  </A>
<li><A HREF="#Reasonable hardware"> 3.8 Reasonable hardware--For the rest of us.  </A>
<li><A HREF="#Config"> 3.9 Config--How to configure your system software for DJGPP.  </A>
<li><A HREF="#More than 64MB"> 3.10 More than 64MB--How to set up your system for maximum memory.  </A>
</ul>
<P>
<P> | <A HREF="#Requirements"> Previous </A> | <A HREF="#OS2"> Next </A> | <A HREF="#Requirements"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Minimum">

3.1 The minimum system requirements for using DJGPP </A></H3><P>
</CENTER>
<em><strong>Q</strong>: What are the minimum system requirements for using DJGPP? </em> <p>
<em><strong>Q</strong>: Will DJGPP run on my brand-new Acme i986DX7/500 PC with a SCSI-III 10-Terabyte disk drive under MulticOS/42 v7.99 operating system? </em> <p>
<hr> <strong>A</strong>: DJGPP requires at least 386SX CPU and between 15 and 35 MB of free disk space (see <A HREF="#Disk space">more details on this below</A>), including space for the software
installation and some swap space.  A minimum of 64K of free system memory is enough for DJGPP to run with CWSDPMI as your DPMI host (most other DPMI hosts will require much more), but at least 4MB of
free extended RAM is recommended for reasonably fast compilation of large source files (8MB for compiling large C<tt>++</tt> programs); you might see painfully slow compiles for large sources if you
don't have at least that much.  If your machine doesn't have a numeric co-processor, you will need to install an emulator to run floating-point code (DJGPP provides such an emulator) or link your
applications with a special emulator library (also provided with DJGPP).  <p>

DJGPP will run under native DOS; any other operating system is OK if it includes a DPMI server and supports some kind of "DOS box".  Environments known to run DJGPP besides native DOS: Windows 3.1 &
3.11 DOS box, OS/2 (including Warp) DOS box, Windows 9X/DOS 7, Windows NT (on Intel CPUs), Novell NWDOS 7 and Caldera's OpenDOS (but several people have found the DPMI services of NWDOS and OpendDOS
incompatible with DJGPP, so they should probably be turned off and CWSDPMI used instead), and Linux DOSEmu environment.

<P>
<P> | <A HREF="#Minimum"> Previous </A> | <A HREF="#WindowsNT"> Next </A> | <A HREF="#Requirements"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="OS2">

3.2 Does it really work under OS/2? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: You tell me it will work under OS/2, but I'm experiencing strange crashes after several compilations ... </em> <p>
<em><strong>Q</strong>: DJGPP Make crashes when I run it on OS/2! </em> <p>
<hr> <strong>A</strong>:  There was a bug in the DPMI server of the old OS/2 versions, which was triggered by spawning child processes (like GCC does when it invokes the various compiler passes).
Current versions of OS/2 don't have that bug, so DJGPP programs should run fine under OS/2.  If you can't make this happen, chances are that your setup is incorrect.  One system parameter that can
cause problems with DJGPP (reportedly, Make crashes if it isn't set correctly) is <samp>DPMI_DOS_API</samp>.  Setting it to <samp>ENABLED</samp> instead of the default <samp>AUTO</samp> should solve
the problem.  I'm also told that experimenting with the value of <samp>DPMI_MEMORY_LIMIT</samp> sometimes solves problems on OS/2.  Reportedly, version 4.0 of OS/2 solves problems with DPMI support,
so the above is only required for OS/2 v3.0 or earlier.  <p>

One particular problem with OS/2 v3.0 is that <b><tt>RHIDE</tt></b> 1.4 and later exits after the compilation ends.  This doesn't happen under OS/2 v4.0, so you should upgrade if you have such
problems.  <p>

If the above doesn't help, please post the details of the crashes you see to the DJGPP mailing list (see <A HREF="#Mailing list">how to post to the mailing list</A>), or to the
<a href="news:comp.os.msdos.djgpp">comp.os.msdos.djgpp</a> news group, and somebody will help you.

<P>
<P> | <A HREF="#OS2"> Previous </A> | <A HREF="#DOSEmu"> Next </A> | <A HREF="#Requirements"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="WindowsNT">

3.3 Will it work under Windows/NT? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: What about Windows NT? </em> <p>
<hr> <strong>A</strong>:  Current Windows NT versions support DPMI programs in the DOS box, so DJGPP programs should in general run fine under NT (but see the list of possible problems below).  <p>

The DPMI server built into NT (and Windows 9X) loses selectors with each child program that is invoked by a DJGPP program, so after about two thousand calls to functions from the <code>spawnXX</code>
family you can see an error message like this:

<pre>

       Load error: no DPMI selectors

</pre>
This problem is likely to afflict only DJGPP ports of Unix shells (such as <samp>bash</samp>), since no other DJGPP program, not even <samp>Make</samp>, is likely to call so many child programs
before it exits.  The only known work-around is to exit the shell every now and then, because when all the available selectors are exhausted, the DOS box will crash.  I'm told that <samp>Make</samp>
sometimes fails on long <samp>Makefiles</samp> on Windows 9X, where the selectors are lost at even higher rate than on NT.  If you ever run a very long <samp>Makefile</samp> and see <samp>Make</samp>
crash, just run <samp>Make</samp> again, and it will pick up where the crashed session has left off.  <p>

Note that the long filename API (the special functions of Int 21h which support file names longer than the DOS 8+3 limitation) for DOS box is not supported by current versions of Windows/NT, so you
cannot have long filenames there from DJGPP programs.  An alpha version of an LFN driver for NT which enables long file name support for DJGPP programs, written by Andrew Crabtree, can be downloaded
<a href="http://www.goof.com/pcg/data/djgpp/lfn0106.zip">from Andrew's site</a>.  <p>

The popular DJGPP IDE <b><tt>RHIDE</tt></b> needs a <samp>-M</samp> switch to work on NT (to disable the mouse support which will otherwise crash <b><tt>RHIDE</tt></b>).  <p>

You might have problems with using the SVGA modes of your video card under Windows/NT.  That is because NT doesn't allow direct access to the SVGA registers, without which it is impossible to
recognize the type of the SVGA and employ its capabilities.  For example, a user reported that GRX functions and the <samp>MODETEST.EXE</samp> program thought that only a standard VGA was installed,
whereas he had an S3 card.  There is nothing you can do about this feature of Windows/NT; that is the price you pay for the stability and protection you get under this OS (a runaway program that
accesses hardware registers can wipe out your disk or wedge the entire system cold).  However, I'm told that Windows/NT 4.0 supports <dfn>DirectX</dfn> which is a method of accessing screen, audio
and other peripherals directly, so it might be possible to use full GRX graphics capabilities there.  <p>

Programs that use the "nearptr" facility of DJGPP to access absolute memory addresses (e.g., for memory-mapped devices) won't work on NT, because its DPMI server silently ignores functions that set
huge limits on selectors.  Since the default algorithm which allocates memory from the DPMI server needs to set such huge limit in some rare cases, there's a small probability that a program will
fail or crash even if it doesn't set selector limits in user code.  It is best to use the Unix-style <code>sbrk</code> algorithm in programs that run on Windows/NT.  See the library docs for the
variable <code>_crt0_startup_flags</code> where the <code>_CRT0_FLAG_UNIX_SBRK</code> bit is explained, for more info on this issue.  If you cannot switch to the Unixy <code>sbrk</code> (e.g., if you
don't have access to the program's sources), I'm told that sometimes such problems can be worked around if you run DJGPP programs in a full-screen session; your mileage may vary.  <p>

Some people report that NT servers cause much more problems than NT workstations of the same version and build.  It seems that these problems usually mean that NT installation was done incorrectly
(maybe it is much harder to get it right with a server than with a workstation?).  If you have such problems, try to install a workstation, or re-install the server, and see if that helps.  And if
you gain some insight as to why servers like DJGPP less than workstations, please tell what you've learned.  <p>

The Cygnus Win32 project is another (unrelated to DJGPP) port of GCC and development tools to Windows/NT and Windows 9X platforms, which specifically targets development of Windows programs.  See
<A HREF="#Windows apps"></A>, for more details about the Cygnus ports.

<P>
<P> | <A HREF="#WindowsNT"> Previous </A> | <A HREF="#i286"> Next </A> | <A HREF="#Requirements"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="DOSEmu">

3.4 Can it run under Linux? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: You say it works on Linux, but I seem to be unable to run the compiler from within Make... </em> <p>
<em><strong>Q</strong>: I can run DJGPP on Linux, but Make crashes with SIGFPE on even the simplest Makefiles! </em> <p>
<em><strong>Q</strong>: When I run bash on Linux/DOSEmu, echoing of what I type is very slow. </em> <p>
<hr> <strong>A</strong>:  Versions of Linux which were released before 13 March 1996 need a patch to be able to reliably run nested DJGPP programs.  That patch was posted to the DJGPP mailing list
and can be found by using the search capabilities of the <a href="http://www.delorie.com/djgpp/mail-archives/djgpp/1996/02/26/13:28:52">DJGPP mail archives</a>.

If you prefer to download that patch via ftp, you can find it <a href="ftp://ftp.delorie.com/pub/djgpp/contrib/dpmi-dosemu-djgpp.mail">on the DJGPP ftp server</a>.  <p>

In general, upgrading to DOSEmu version 0.97.10 or later is recommended, at least with versions of Linux kernel earlier than 2.1; in particular, some users report that DJGPP programs sometimes crash
on version 0.66.7 under Linux 2.0.35.  <p>

You might also need to edit the RAM section of the <samp>/etc/dosemu.conf</samp> file to make it comfortable for DJGPP.  I suggest setting <samp>dpmi</samp> and <samp>xms</samp> to 16MB and
<samp>ems</samp> to 4MB.  For example, I'm told that building the Allegro library with the <samp>-O3</samp> optimization switch fails in DOSEmu unless you allocate at least 16MB of DPMI memory to
DOSEmu sessions.  <p>

If DJGPP programs crash with an error message like this(<i><b>Note: </b>The typo in the word <samp>Exception</samp> is in the actual message popped by Linux.</i>):

<pre>

     DPMI: Unhandled Execption 0d - Terminating Client
     It is likely that dosemu is unstable now and should be rebooted

</pre>
then you should add a line saying <samp>secure off</samp> to your <samp>/etc/dosemu.conf</samp> file.

Some users reported that <samp>Make</samp>, and possibly other programs which use floating point computations, crash in DOSEmu environment on systems without an FPU, even if you set the
<var>387</var> and <var>EMU387</var> environment variables correctly (as explained in <A HREF="#Emulation">Setting up the FP emulator</A>, below).  The only known work-around is to not use floating
point or to upgrade your machine hardware.  It is possible that newer versions of Linux might solve this problem too, so try upgrading your Linux software.  <p>

If your only problem is to run GNU Make, get the latest DJGPP port of Make, since ports of Make 3.75 or later can be configured to not issue FP instructions at all.  <p>

If DJGPP programs respond too slow to keyboard input, you might need to tune the <samp>HogThreshold</samp> parameter in the <samp>dosemu.conf</samp> file.  Set it to zero and see if this helps; if
so, further tune it until you get reasonable response time, but still leave Linux with enough cycles for the other programs that run.  <p>

Several users reported that DJGPP programs cannot get input from the keyboard if Caldera's OpendDOS is booted under DOSEmu.  I'm told that adding <samp>rawkeyboard</samp> to <samp>dosemu.conf</samp>
might solve this.  <p>

Some people complain that <b><tt>RHIDE</tt></b> crashes on DOSEmu whenever the mouse is moved.  I'm told that using the <samp>-M</samp> switch when invoking <b><tt>RHIDE</tt></b> solves this problem.
Alternatively, you could try giving DOSEmu access to the serial port to which the mouse is connected, and then using your DOS mouse driver.  To this end, add the following to your
<samp>dosemu.conf</samp>(<i><b>Note: </b>This was reported for DOSEmu version 0.66.7; the format of <samp>dosemu.conf</samp> might be different in version 0.9x.</i>):

<pre>

      serial { mouse com 2 device /dev/mouse }
      mouse {mousesystems device /dev/mouse emulate3buttons }

</pre>
and then load a DOS mouse driver in the DOSEmu <samp>AUTOEXEC.BAT</samp>.  <p>

If you have problems with mounting FAT32 partitions, upgrade the Linux kernel to version 2.0.34 or later.

<P>
<P> | <A HREF="#DOSEmu"> Previous </A> | <A HREF="#Windows apps"> Next </A> | <A HREF="#Requirements"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="i286">

3.5 Can I run it on a 286? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Why can't I run DJGPP on my 286?  It has protected mode also... </em> <p>
<hr> <strong>A</strong>:  True, but the protected mode isn't an issue here.  Gcc doesn't care much about memory protection, but it does care to run on a 32-bit processor, which the 286 isn't.  A 386
or better CPU really <strong>is</strong> required.

<P>
<P> | <A HREF="#i286"> Previous </A> | <A HREF="#Optimal hardware"> Next </A> | <A HREF="#Requirements"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Windows apps">

3.6 MS-Windows applications and DJGPP </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Can I write MS-Windows applications with DJGPP? </em> <p>
<hr> <strong>A</strong>: Currently, you can only run DJGPP programs under Windows as DOS apps (i.e. inside the DOS Box).  If you need to write true Windows apps, you will have to use auxiliary tools
or another compiler.  This section lists some of the possibilities.  <p>

RSXNTDJ is an add-on to DJGPP which allows to develop Win32 programs.  This is targeted for Win32 (Windows 9X and NT) and Win32s (Windows 3.X + Win32s) platforms (but the development environment will
only run on Windows 9X/NT); it supports DJGPP v2.x and includes debugging tools and an IDE, but it needs to be registered (for a small fee) if you want to develop commercial or shareware applications
with it.  <p>

RSXNTDJ supports Win32 console, GUI, DLLs and bound programs (the latter can be run on DOS under the RSX extender, as well as on Windows).  You can download RSXNTDJ
<a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2tk/rsxdj131.zip">from SimTel</a>.  <p>

RSXNTDJ was produced with GCC v2.7.2.1 and DJGPP v2.01.  If you use it with later versions of GCC and DJGPP, you might need to tweak the installation a bit.  People who succeeded in this feat report
that they needed to make the following changes:

<ul>
<li> Add the directory where the pre-processor (<samp>cpp.exe</samp>) is kept to the <code>PATH</code> environment variable.  (Without this, the resource compiler won't work.)

<li> Edit <samp>DJGPP.ENV</samp> to add the directories where the RSXNTDJ libraries are kept to the value of the <code>LIBRARY_PATH</code> variable.

<li> The URL mentioned in the RSXNTDJ help file for the MS Platform SDK header files is no longer valid.  You can find the SDK headers on the
<a href="http://www.microsoft.com/msdownload/platformsdk.html">Microsoft World Wide Web site</a>.  Note that the patches to Windows header files included in the package are outdated by later versions
of those headers released by Microsoft.  You might need to apply the patches manually if the <code>patch</code> utility fails.

<li> I'm also told that the <samp>stdio.h</samp> header supplied with RSXNTDJ defines several inline functions with the <code>extern</code> qualifier, which causes GCC to not compile them into the
object file, and triggers undefined references.  The solution is to define the <code>extern</code> symbol to an empty string in one of the source files which includes the <samp>stdio.h</samp> header.
</ul>
Some people report that they needed to bump up the stack size using the <code>pestack</code> utility, allegedly due to insufficient size of the default stack.  <p>

Note that the version of linker <samp>ld.exe</samp> which comes with RSXNTDJ doesn't print any message if you forget to link in libraries such as <samp>libcomct.a</samp> and <samp>libcomdl.a</samp>.
Instead, the produced executables will die with SIGSEGV when run.  Sometimes, forgetting to <code>#include</code> <samp>windows.h</samp> also produces a program that crashes at run time.  You can use
the stock DJGPP version of <samp>ld.exe</samp> to see the list of the missing functions, and then find out which libraries to add to the link command line (use the <samp>nm</samp> utility to find out
which libraries contain the required external symbols).  <p>

If RSXNTDJ doesn't suit your needs, you can use a few other compilers which target Win32 platforms:

<dl>
<dt> Cygnus GNU-Win32 tools
<dd> This tool-chain includes native Win32 ports of GCC and of many GNU development tools.  It requires you to comply to the GNU License, the GPL, when distributing programs built with these tools.
The tools and the programs you build are native Win32 executables (won't run on DOS, Windows 3.X or Win32s platforms) and Posix-compliant, but you need to distribute a 4MB DLL file with all your
programs.  Also, GNU-Win32 is still in beta phase, and some bugs are still worked on.  You can find GNU-Win32 on the <a href="http://www.cygnus.com/misc/gnu-win32/">Cygnus site</a>, or
<a href="ftp://ftp.cygnus.com/pub/gnu-win32/latest/">via FTP</a>.

<dt> Mingw32 (Minimal GNU-Win32)
<dd> This features native Win32 ports of GCC and EGCS, the experimental version of GCC, but it relies on the Windows C runtime (<samp>CRTDLL.DLL</samp>, which is standard on Windows 9X and
Windows/NT) and doesn't require any additional DLLs like Cygnus ports do; however, you lose the Posix layer.  Since it doesn't use any GPL'ed stuff except GCC and its subprograms, the programs
produced by Mingw32 are <em>free</em>.  For more details, visit the <a href="http://www.xraylith.wisc.edu/~khan/software/gnu-win32/">Mingw32 home page</a>.

<dt> Lcc-Win32 compiler and tools
<dd> This is a Win32 port of a freeware compiler Lcc, not related to GCC.  It doesn't currently support C<tt>++</tt> programs.  The tool-chain includes some additional utilities such as a resource
compiler and a resource browser, an IDE, and a Make utility.  For more information, visit the <a href="http://www.cs.princeton.edu/software/lcc/">Lcc home page</a> and the
<a href="http://www.cs.virginia.edu/~lcc-win32/">lcc-win32 home page</a>.
</dl>
A better (but harder) way would be to volunteer to add Windows support to DJGPP.

<P>
<P> | <A HREF="#Windows apps"> Previous </A> | <A HREF="#Reasonable hardware"> Next </A> | <A HREF="#Requirements"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Optimal hardware">

3.7 Machine you <em>would like</em> to buy... </A></H3><P>
</CENTER>
<em><strong>Q</strong>: What is the optimal system configuration for running DJGPP? </em> <p>
<hr> <strong>A</strong>:  Here is the description of your dream machine (at least for the next 6 months <b>:-)</b>:

<ul>
<li> Hardware:

<ul>
<li> the fastest CPU you can find on the market (a 400 MHz Pentium II, as of this writing) with a 100 MHz memory bus;
<li> at least 512KB second-level (off-chip) cache memory;
<li> 256 MByte RAM;
<li> PCI-based motherboard;
<li> SCSI-II hard disk with bus-mastering controller;
</ul>
<li> Software:

<ul>
<li> DOS, device drivers and TSRs all loaded HIGH, leaving only 5K DOS footprint in lower (under 640K) memory;
<li> 16 MByte RAM disk installed, <code>TMPDIR</code> environment variable points to it (e.g., <kbd>set TMPDIR=e:</kbd>, if E: is the RAM drive letter);
<li> 32 MByte of disk cache, set to delayed-write operation;
</ul>
</ul>
<P>
<P> | <A HREF="#Optimal hardware"> Previous </A> | <A HREF="#Config"> Next </A> | <A HREF="#Requirements"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Reasonable hardware">

3.8 Machine most of us will <em>actually</em> buy ... </A></H3><P>
</CENTER>
<em><strong>Q</strong>: OK, I don't have this much money.  What is the <strong>reasonable</strong> configuration? </em> <p>
<hr> <strong>A</strong>:  If you have the following machine, you should be able to stop worrying about memory and compilation performance:

<ul>
<li> CPU: P133 with 256 KB off-chip cache;
<li> RAM: 32 MByte;
<li> Disk: 12 ms IDE with VLB controller, or SCSI;
<li> 4 MByte RAM disk;
<li> 8 MByte disk cache;
</ul>
This will leave you with about 19 MBytes of free extended RAM.  Note that the RAM disk must be 4 MBytes to hold the output of the preprocessor for some exceedingly large source files (notably, some
GCC source files).  If you don't have that much RAM to spare and still want to compile <em>very</em> large source files, either reduce the disk cache so you can give more to RAM disk, or point
<code>TMPDIR</code> to your hard disk and make the disk cache larger, if you can.

<P>
<P> | <A HREF="#Reasonable hardware"> Previous </A> | <A HREF="#More than 64MB"> Next </A> | <A HREF="#Requirements"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Config">

3.9 How to configure your system for DJGPP? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: How do I configure my system to get optimal performance under DJGPP? </em> <p>
<hr> <strong>A</strong>:  That depends on the amount of RAM you have installed in your machine.  Below are some guidelines to help you.

<ol>
<li> If you have 2 MBytes or less RAM installed:

<ul>
<li> Don't use <strong>any</strong> memory manager.
<li> Use of CWSDPMI as your DPMI host is highly recommended.
<li> Remove any TSR and device drivers you don't absolutely need (like <samp>SETVER.EXE</samp>, <samp>HIMEM.SYS</samp> etc.) from your <samp>CONFIG.SYS</samp> and <samp>AUTOEXEC.BAT.</samp>
<li> Do <strong>not</strong> install disk cache or RAM disk; point your <code>TMPDIR</code> environment variable to a directory on your hard disk.  Put a sufficiently large <samp>BUFFERS=</samp>
statement into your <samp>CONFIG.SYS</samp> (I recommend setting <samp>BUFFERS=40,8</samp>) to make DOS file operations faster.
<li> If you use CWSDPMI as your DPMI host, get the <samp>CWSPARAM</samp> program (from the <samp>csdpmi4b.zip</samp> archive) and set the "Minimum application memory desired before 640K paging"
parameter to 512K or larger.  Depending on how much memory you actually have, you might need to further fine-tune this parameter.  This parameter defines the lowest amount of extended memory CWSDPMI
will use; if your system doesn't have that much free extended RAM, CWSDPMI will use conventional memory instead, where usually there should be around 600K of free RAM.
<li> If you run under Windows, be sure to set the maximum amount of extended memory on your PIF file for the DOS box to a reasonable value.
</ul>
With this configuration, GCC will run out of free physical RAM and start paging when compiling almost any C program and all C<tt>++</tt> programs.  If you are serious about DJGPP development, you
need to buy more RAM <strong>urgently</strong>.

<li> If you have 2-4 MBytes of RAM installed:

<ul>
<li> Don't use <strong>any</strong> memory manager.
<li> Remove any TSR and device driver you don't absolutely need (like <samp>SETVER.EXE</samp>, <samp>HIMEM.SYS</samp>) from your <samp>CONFIG.SYS</samp> and <samp>AUTOEXEC.BAT.</samp>
<li> Get a disk cache which works from conventional memory and configure it to 256K size at most, or don't use a cache at all.
<li> Do <strong>not</strong> install a RAM disk; point your <code>TMPDIR</code> environment variable to a directory on your hard disk.
<li> If you run under Windows, be sure to set the maximum amount of extended memory on your PIF file for the DOS box to a reasonable value.
</ul>
With this configuration, GCC will still run out of free physical RAM and start paging when compiling large C programs and most C<tt>++</tt> programs.  Plan to buy more RAM as soon as you can.

<li> If you have 5-8 MBytes of RAM installed:

<ul>
<li> Use a memory manager such as <samp>EMM386</samp> or <samp>QEMM386</samp>.  Try using the <samp>FRAME=NONE</samp> parameter of the memory manager.  This will disable Expanded Memory (EMS)
services as far as most programs are concerned; if you must use DJGPP together with any program which needs EMS, try to configure that program to use Extended Memory (XMS) instead.
<li> Load DOS, device drivers and TSRs <strong>HIGH</strong>.
<li> Give your disk cache 1 MByte of RAM.  Enable its delayed-write (a.k.a.  write-back) feature.
<li> Do <strong>not</strong> install a RAM disk; point your <code>TMPDIR</code> environment variable to a directory on your hard disk.
<li> If, after configuring your system as above, you still have more than 2.5 MBytes of free RAM left (4 MBytes, if you plan to program in C<tt>++</tt> a lot), enlarge the disk cache size.
<li> If you run under Windows, be sure to set the maximum amount of extended memory on your PIF file for the DOS box to a reasonable value.
</ul>
<li> If you have more than 8 MBytes of RAM:

<ul>
<li> Use a memory manager to load DOS, TSRs and device drivers <strong>HIGH</strong>.

<li> Install at least a 2-MByte-large disk cache, configured to use the delayed- write feature.  If you have plenty of RAM, you can give your cache as much as 8 MBytes of memory.

<li> If you have more than 10 MBytes left, install a RAM disk with a size of at least 1.5 MBytes and point your <code>TMPDIR</code> environment variable to it.  If your RAM disk is less than 4
MBytes, GCC might run out of space there for <em>very</em> large source files (e.g., cccp.c file from the GCC source distribution), but this shouldn't happen unless the size of the source file you
are compiling approaches 1 MByte.  Note that software is available that lets you install a RAM disk even on Windows 9X.

<li> As a general rule of thumb, you should leave at least 8 MBytes of free RAM after installing the disk cache and the RAM disk.  16MB free is even better, especially if you need to run large
programs like <b><tt>RHIDE</tt></b> or Emacs, or to compile large source files.
</ul>
</ol>
Some people disable the delayed-write feature for safety reasons, to avoid losing files due to system crashes.  If you are worried about this, you can usually gain performance without sacrificing
safety by enabling delayed-write together with an option that causes the cache to flush the write-behind data before the system returns to the DOS prompt.  For a <samp>SmartDrv</samp> disk cache,
this is achieved by specifying <samp>/N/F</samp> switches instead of <samp>/X</samp>.  <p>

A tutorial is available from the Web on <a href="http://www.castle.net/~avly/djgpp.html">how to set up and get started with DJGPP</a>.

Using a memory manager, such as <samp>EMM386</samp> or <samp>QEMM</samp>, is not required (DJGPP will run without it), but highly recommended, since it has several advantages:

<ul>
<li> Memory managers provide an API for allocating extended memory called VCPI (the <dfn>Virtual Control Program Interface</dfn>).  Using that API allows CWSDPMI to allocate only as much extended
memory as is needed, leaving the rest for non-DJGPP programs, in case you invoke them from DJGPP programs.  In contrast, without a memory manager, CWSDPMI will allocate all of the available extended
memory o itself, leaving zero to non-DJGPP programs.  This consideration is especially important if you use some DJGPP program, like Bash or Emacs, as your primary system interface.

<li> Without a memory manager, you cannot access UMBs (the <dfn>Upper Memory Blocks</dfn>) which give you more DOS memory to work with.  In particular, CWSDPMI will load itself into UMBs if they are
available.

<li> Memory managers provide the VDS (<dfn>Virtual DMA Services</dfn>) API which allows to write programs that use DMA in protected mode.

<li> Memory managers support the expanded (EMS) memory, which some older DOS programs still use.
</ul>
If your memory manager is <samp>EMM386</samp>, I recommend to put the <samp>NOEMS NOVCPI</samp> parameters on its command line.  This will allow you to use UMBs and up to 128MB of physical memory (if
you have that much installed).  Without these parameters, most versions of <samp>EMM386</samp> limit your physical memory to 32MB.

It is generally not recommended to install DJGPP on a networked drive, since this makes it slower, particularly when linking programs.  If you do install DJGPP on a networked drive, you should
consult your network administrator to configure the network for maximum performance.  For Novell networks, a good place to look for advice is the Novell FAQ (search for a file called
<samp>nov-faq.htm</samp>).

<P>
<P> | <A HREF="#Config"> Previous </A> | <A HREF="#Requirements"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="More than 64MB">

3.10 How to get the most RAM for DJGPP programs? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: How do I set my system so that DJGPP programs could use all of my 256MB of installed physical RAM? </em> <p>
<em><strong>Q</strong>: I have 128MB of memory installed, but <code>go32-v2</code> only reports 32MB, how can I get more? </em> <p>
<hr> <strong>A</strong>: You can have as much as 256MB of physical memory in DJGPP programs, provided that you have at least that much installed, and that you observe the following guidelines:

<ul>
<li> Use CWSDPMI as your DPMI server.  With a possible exception of Qualitas' 386Max, all the other DPMI servers usually cannot support more than 64MB.  (The DPMI server built into Windows usually
won't even let you have more than 64MB physical <em>and</em> virtual memory combined, unless you have more than 64MB installed physically, see below.)

<li> Do <strong>not</strong> install any memory managers: most of them will limit the amount of accessible memory to 64MB (<samp>EMM386</samp> usually limits it to 32MB unless you turn off the VCPI
support using the <samp>NOVCPI NOEMS</samp> parameters on the <samp>EMM386</samp> command line).  Using <samp>HIMEM</samp> from MS-DOS 7 does allow access to more than 64MB.

<li> If you are using <samp>QEMM</samp> (version 8.0 or later), you must include the <samp>USERAM=128M</samp> parameter (here for 128MB of installed memory) on its command line in your
<samp>CONFIG.SYS</samp> and specify the exact amount of memory installed on your machine, otherwise <samp>QEMM</samp> won't support more than 64MB.

<li> Make sure you use the latest release r4 of CWSDPMI.  Previous versions only supported up to 128MB of main memory, and had bugs with more than 64MB.
</ul>
Another possibility is to run your program from the Windows 9X DOS box, after changing the <samp>EMM386</samp> line in your <samp>CONFIG.SYS</samp> like this:

<pre>

      DEVICE=C:\WINDOWS\EMM386.EXE NOEMS L=131072

</pre>
I'm told that this line (here for 128MB of installed memory) together with an "Auto" setting of the DPMI memory for the DOS box allows DJGPP programs to use up to 117MB of memory when running from
the DOS box under Windows 9X.  <p>

If you need to use more than 256MB of physical memory, try to convince <a href="mailto:sandmann@clio.rice.edu">Charles Sandmann</a> to upgrade CWSDPMI.  However, note that breaking the current limit
of 256MB will make CWSDPMI considerably slower (it requires to abandon 16-bit arithmetics and move to 32-bit longs, which causes Turbo C, the compiler used to build CWSDPMI, to generate much slower
code).  Charles says that people who got such customized versions of CWSDPMI were never really happy with its performance, so he advises to consider the 256MB limit a serious reason to switch to
another operating system.  For example, a dual-boot DOS/Linux system will probably do.  Another possibility is to run under OS/2 which features a built-in DPMI 1.0 support which can be configured to
support as much as 512MB of DPMI memory (the user who reported this didn't know how much of this can be physical RAM).

<P>
<P> | <A HREF="#Requirements"> Previous </A> | <A HREF="#Docs"> Next </A> | <A HREF="#Top"> Up </A> | <P>
<P>
<P>
<CENTER>
<H2>

<A NAME="Getting DJGPP">

4. Where and What to Download? </A></H2><P>
</CENTER>
  This chapter explains where and how can you get DJGPP, and recommends which parts of the archive you should download.

<p>
<ul>
<li><A HREF="#Where to find"> 4.1 Where to find--Pick up from your nearest SimTel mirror.  </A>
<li><A HREF="#CCT"> 4.2 CCT--Or look on one of the CCT mirrors.  </A>
<li><A HREF="#How to download"> 4.3 How to download--Anonymous FTP, of course!  </A>
<li><A HREF="#DJGPP by WWW"> 4.4 DJGPP by WWW--For those who use Netscape/Mosaic only.  </A>
<li><A HREF="#What to download"> 4.5 What to download--Look here to decide what packages you need.  </A>
<li><A HREF="#Disk space"> 4.6 Disk space--How much disk storage do you need?  </A>
<li><A HREF="#DJGPP Fatware"> 4.7 DJGPP Fatware--Can I do with less MBytes?  </A>
<li><A HREF="#Uninstall"> 4.8 Uninstall--How to uninstall a DJGPP package.  </A>
</ul>
<P>
<P> | <A HREF="#Getting DJGPP"> Previous </A> | <A HREF="#CCT"> Next </A> | <A HREF="#Getting DJGPP"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Where to find">

4.1 Where can DJGPP be found? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Where can I get DJGPP? </em> <p>
<hr> <strong>A</strong>: Look on any SimTel.NET mirror in the pub/simtelnet/gnu/djgpp/ subdirectory, or on one of the CCT mirrors, world-wide.  <p>

This section lists the SimTel.NET mirrors; see <A HREF="#CCT">below</A>, for the list of CCT sites.

<dl>
<dt> The primary SimTel.NET site is:
<dd> <a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/">ftp.simtel.net</a>(<i><b>Note: </b>ftp.simtel.net is actually several ftp sites arranged in a rotating pattern of IP addresses to help
balance the load and to avoid access problems due to network outages and simultaneous user limits.</i>) <p>

<dt> Here is a list of hosts by countries that offer mirror sites:
<dd>

<dt> Argentina
<dd> <a href="ftp://ftp.satlink.com/pub/mirrors/simtelnet/gnu/djgpp/">ftp.satlink.com</a>
<dt> Australia:
<dd> <a href="ftp://ftp.tas.gov.au/pub/simtelnet/gnu/djgpp/">ftp.tas.gov.au</a>
<dt> Australia:
<dd> <a href="ftp://sunsite.anu.edu.au/pub/pc/simtelnet/gnu/djgpp/">sunsite.anu.edu.au</a>
<dt> Vienna, Austria:
<dd> <a href="ftp://ftp.univie.ac.at/mirror/simtelnet/gnu/djgpp/">ftp.univie.ac.at</a>
<dt> Brussels, Belgium:
<dd> <a href="ftp://ftp.linkline.be/mirror/simtelnet/gnu/djgpp/">ftp.linkline.be</a>
<dt> Sao Paulo, Brazil:
<dd> <a href="ftp://ftp.unicamp.br/pub/simtelnet/gnu/djgpp/">ftp.unicamp.br</a>
<dt> Brazil:
<dd> <a href="ftp://ftp.iis.com.br/pub/simtelnet/gnu/djgpp/">ftp.iis.com.br</a>
<dt> Ottawa, Canada:
<dd> <a href="ftp://ftp.crc.doc.ca/systems/ibmpc/simtelnet/gnu/djgpp/">ftp.crc.doc.ca</a>
<dt> Vancouver, Canada:
<dd> <a href="ftp://ftp.direct.ca/pub/simtelnet/gnu/djgpp/">ftp.direct.ca</a>
<dt> Chile:
<dd> <a href="ftp://sunsite.dcc.uchile.cl/pub/Mirror/simtelnet/gnu/djgpp/">sunsite.dcc.uchile.cl</a>
<dt> Beijing, China:
<dd> <a href="ftp://ftp.pku.edu.cn/pub/simtelnet/gnu/djgpp/">ftp.pku.edu.cn</a>
<dt> Czech Republic:
<dd> <a href="ftp://ftp.eunet.cz/pub/simtelnet/gnu/djgpp/">ftp.eunet.cz</a>
<dt> Prague, Czech Republic:
<dd> <a href="ftp://pub.vse.cz/pub/simtelnet/gnu/djgpp/">pub.vse.cz</a>
<dt> Czech Republic:
<dd> <a href="ftp://ftp.zcu.cz/pub/simtelnet/gnu/djgpp/">ftp.zcu.cz</a>
<dt> Denmark:
<dd> <a href="ftp://ftp.net.uni-c.dk/pub/simtelnet/gnu/djgpp/">ftp.net.uni-c.dk</a>
<dt> Espoo, Finland:
<dd> <a href="ftp://ftp.funet.fi/mirrors/ftp.simtel.net/pub/simtelnet/gnu/djgpp/">ftp.funet.fi</a>
<dt> Neuilly, France:
<dd> <a href="ftp://ftp.grolier.fr/pub/simtelnet/gnu/djgpp/">ftp.grolier.fr</a>
<dt> France:
<dd> <a href="ftp://ftp.lip6.fr/pub/simtelnet/gnu/djgpp/">ftp.lip6.fr</a>
<dt> Germany:
<dd> <a href="ftp://ftp.mpi-sb.mpg.de/pub/simtelnet/gnu/djgpp/">ftp.mpi-sb.mpg.de</a>
<dt> Bochum, Germany:
<dd> <a href="ftp://ftp.rz.ruhr-uni-bochum.de/pub/simtelnet/gnu/djgpp/">ftp.rz.ruhr-uni-bochum.de</a>
<dt> Chemnitz, Germany:
<dd> <a href="ftp://ftp.tu-chemnitz.de/pub/simtelnet/gnu/djgpp/">ftp.tu-chemnitz.de</a>
<dt> Heidelberg, Germany:
<dd> <a href="ftp://ftp.uni-heidelberg.de/pub/simtelnet/gnu/djgpp/">ftp.uni-heidelberg.de</a>
<dt> Magdeburg, Germany:
<dd> <a href="ftp://ftp.uni-magdeburg.de/pub/mirrors/simtelnet/gnu/djgpp/">ftp.uni-magdeburg.de</a>
<dt> Paderborn, Germany:
<dd> <a href="ftp://ftp.uni-paderborn.de/pub/simtelnet/gnu/djgpp/">ftp.uni-paderborn.de</a>
<dt> Trier, Germany:
<dd> <a href="ftp://ftp.uni-trier.de/pub/pc/mirrors/Simtel.net/gnu/djgpp/">ftp.uni-trier.de</a>
<dt> Wuerzburg, Germany:
<dd> <a href="ftp://ftp.rz.uni-wuerzburg.de/pub/pc/simtelnet/gnu/djgpp/">ftp.rz.uni-wuerzburg.de</a>
<dt> Athens, Greece:
<dd> <a href="ftp://ftp.ntua.gr/pub/pc/simtelnet/gnu/djgpp/">ftp.ntua.gr</a>
<dt> Hong Kong:
<dd> <a href="ftp://ftp.cs.cuhk.hk/pub/simtelnet/gnu/djgpp/">ftp.cs.cuhk.hk</a>
<dt> Hong Kong:
<dd> <a href="ftp://ftp.hkstar.com/pub/simtelnet/gnu/djgpp/">ftp.hkstar.com</a>
<dt> Hong Kong:
<dd> <a href="ftp://sunsite.ust.hk/pub/simtelnet/gnu/djgpp/">sunsite.ust.hk</a>
<dt> Hungary:
<dd> <a href="ftp://ftp.iif.hu/pub/simtelnet/gnu/djgpp/">ftp.iif.hu</a>
<dt> Dublin, Ireland:
<dd> <a href="ftp://ftp.heanet.ie/pub/simtelnet/gnu/djgpp/">ftp.heanet.ie</a>
<dt> Dublin, Ireland:
<dd> <a href="ftp://ftp.iol.ie/pub/simtelnet/gnu/djgpp/">ftp.iol.ie</a>
<dt> Rome, Italy:
<dd> <a href="ftp://cis.uniroma2.it/simtelnet/gnu/djgpp/">cis.uniroma2.it</a>
<dt> Italy:
<dd> <a href="ftp://ftp.flashnet.it/pub/simtelnet/gnu/djgpp/">ftp.flashnet.it</a>
<dt> Naples, Italy:
<dd> <a href="ftp://ftp.unina.it/pub/simtelnet/gnu/djgpp/">ftp.unina.it</a>
<dt> Italy:
<dd> <a href="ftp://mcftp.mclink.it/pub/simtelnet/gnu/djgpp/">mcftp.mclink.it</a>
<dt> Saitama, Japan:
<dd> <a href="ftp://ftp.saitama-u.ac.jp/pub/simtelnet/gnu/djgpp/">ftp.saitama-u.ac.jp</a>
<dt> Saitama, Japan:
<dd> <a href="ftp://ftp.riken.go.jp/pub/simtelnet/gnu/djgpp/">ftp.riken.go.jp</a>
<dt> Japan:
<dd> <a href="ftp://ftp.iij.ad.jp/pub/simtelnet/gnu/djgpp/">ftp.iij.ad.jp</a>
<dt> Japan:
<dd> <a href="ftp://ftp.u-aizu.ac.jp/pub/PC/simtelnet/gnu/djgpp/">ftp.u-aizu.ac.jp</a>
<dt> Japan:
<dd> <a href="ftp://ftp.web.ad.jp/pub/simtelnet/gnu/djgpp/">ftp.web.ad.jp</a>
<dt> Latvia:
<dd> <a href="ftp://ftp.lanet.lv/pub/mirror/simtelnet/gnu/djgpp/">ftp.lanet.lv</a>
<dt> Malaysia:
<dd> <a href="ftp://ftp.jaring.my/pub/simtelnet/gnu/djgpp/">ftp.jaring.my</a>
<dt> Mexico:
<dd> <a href="ftp://ftp.gdl.iteso.mx/pub/simtelnet/gnu/djgpp/">ftp.gdl.iteso.mx</a>
<dt> Netherlands:
<dd> <a href="ftp://ftp.euro.net/d5/simtelnet/gnu/djgpp/">ftp.euro.net</a>
<dt> Utrecht, Netherlands:
<dd> <a href="ftp://ftp.nic.surfnet.nl/mirror/simtelnet/gnu/djgpp/">ftp.nic.surfnet.nl</a>
<dt> Bergen, Norway:
<dd> <a href="ftp://ftp.bitcon.no/pub/simtelnet/gnu/djgpp/">ftp.bitcon.no</a>
<dt> Krakow, Poland:
<dd> <a href="ftp://ftp.cyf-kr.edu.pl/pub/mirror/Simtel.Net/gnu/djgpp/">ftp.cyf-kr.edu.pl</a>
<dt> Warsaw, Poland:
<dd> <a href="ftp://ftp.icm.edu.pl/pub/simtelnet/gnu/djgpp/">ftp.icm.edu.pl</a>
<dt> Poznan, Poland:
<dd> <a href="ftp://ftp.man.poznan.pl/pub/simtelnet/gnu/djgpp/">ftp.man.poznan.pl</a>
<dt> Aveiro, Portugal:
<dd> <a href="ftp://ftp.ua.pt/pub/simtelnet/gnu/djgpp/">ftp.ua.pt</a>
<dt> Portugal:
<dd> <a href="ftp://ftp.ip.pt/pub/simtelnet/gnu/djgpp/">ftp.ip.pt</a>
<dt> Bucharest, Romania:
<dd> <a href="ftp://ftp.digiro.net/pub/simtelnet/gnu/djgpp/">ftp.digiro.net</a>
<dt> Timisoara, Romania:
<dd> <a href="ftp://ftp.dnttm.ro/pub/simtelnet/gnu/djgpp/">ftp.dnttm.ro</a>
<dt> Singapore:
<dd> <a href="ftp://ftp.nus.sg/pub/simtelnet/gnu/djgpp/">ftp.nus.sg</a>
<dt> Slovakia:
<dd> <a href="ftp://ftp.uakom.sk/pub/simtelnet/gnu/djgpp/">ftp.uakom.sk</a>
<dt> Slovenia:
<dd> <a href="ftp://ftp.arnes.si/software/simtelnet/gnu/djgpp/">ftp.arnes.si</a>
<dt> Johannesburg, South Africa:
<dd> <a href="ftp://ftp.is.co.za/pub/simtelnet/gnu/djgpp/">ftp.is.co.za</a>
<dt> Stellenbosch, South Africa:
<dd> <a href="ftp://ftp.sun.ac.za/pub/simtelnet/gnu/djgpp/">ftp.sun.ac.za</a>
<dt> South Africa:
<dd> <a href="ftp://ftp.netactive.co.za/pub/simtelnet/gnu/djgpp/">ftp.netactive.co.za</a>
<dt> South Africa:
<dd> <a href="ftp://ftp.saix.net/pub/simtelnet/gnu/djgpp/">ftp.saix.net</a>
<dt> South Korea:
<dd> <a href="ftp://ftp.sogang.ac.kr/pub/simtelnet/gnu/djgpp/">ftp.sogang.ac.kr</a>
<dt> South Korea:
<dd> <a href="ftp://sunsite.snu.ac.kr/pub/simtelnet/gnu/djgpp/">sunsite.snu.ac.kr</a>
<dt> Spain:
<dd> <a href="ftp://ftp.rediris.es/mirror/simtelnet/gnu/djgpp/">ftp.rediris.es</a>
<dt> Stockholm, Sweden:
<dd> <a href="ftp://ftp.sunet.se/pub/simtelnet/gnu/djgpp/">ftp.sunet.se</a>
<dt> Zurich, Switzerland:
<dd> <a href="ftp://sunsite.cnlab-switch.ch/mirror/simtelnet/gnu/djgpp/">sunsite.cnlab-switch.ch</a>
<dt> Chung-Li, Taiwan:
<dd> <a href="ftp://ftp.ncu.edu.tw/Packages/simtelnet/gnu/djgpp/">ftp.ncu.edu.tw</a>
<dt> Taipei, Taiwan:
<dd> <a href="ftp://nctuccca.edu.tw/mirror/simtelnet/gnu/djgpp/">nctuccca.edu.tw</a>
<dt> Nonthaburi, Thailand:
<dd> <a href="ftp://ftp.nectec.or.th/pub/mirrors/simtelnet/gnu/djgpp/">ftp.nectec.or.th</a>
<dt> London, UK:
<dd> <a href="ftp://ftp.demon.co.uk/pub/simtelnet/gnu/djgpp/">ftp.demon.co.uk</a>
<dt> London, UK:
<dd> <a href="ftp://ftp.globalnet.co.uk/pub/simtelnet/gnu/djgpp/">ftp.globalnet.co.uk</a>
<dt> Lancaster, UK:
<dd> <a href="ftp://mic5.hensa.ac.uk/mirrors/simtelnet/gnu/djgpp/">mic5.hensa.ac.uk</a>
<dt> London, UK:
<dd> <a href="ftp://sunsite.doc.ic.ac.uk/packages/simtelnet/gnu/djgpp/">sunsite.doc.ic.ac.uk</a>
<dt> Concord, California, USA:
<dd> <a href="ftp://ftp.cdrom.com/pub/simtelnet/gnu/djgpp/">ftp.cdrom.com</a>
<dt> California, USA:
<dd> <a href="ftp://ftp.digital.com/pub/micro/pc/simtelnet/gnu/djgpp/">ftp.digital.com</a>
<dt> California, USA:
<dd> <a href="ftp://ftp.lib.sonoma.edu/pub/simtelnet/gnu/djgpp/">ftp.lib.sonoma.edu</a>
<dt> Georgia, USA:
<dd> <a href="ftp://ftp.peachnet.edu/pub/mirrors/simtelnet/gnu/djgpp/">ftp.peachnet.edu</a>
<dt> Urbana, Illinois, USA:
<dd> <a href="ftp://uarchive.cso.uiuc.edu/pub/systems/pc/simtelnet/gnu/djgpp/">uarchive.cso.uiuc.edu</a>
<dt> Massachusets, USA
<dd> <a href="ftp://ftp.bu.edu/pub/mirrors/simtelnet/gnu/djgpp/">ftp.bu.edu</a>
<dt> Rochester, Michigan, USA:
<dd> <a href="ftp://OAK.Oakland.Edu/pub/simtelnet/gnu/djgpp/">OAK.Oakland.Edu</a>
<dt> Missouri, USA:
<dd> <a href="ftp://galileo.galilei.com/pub/simtelnet/gnu/djgpp/">galileo.galilei.com</a>
<dt> New York, NY, USA:
<dd> <a href="ftp://ftp.rge.com/pub/systems/simtelnet/gnu/djgpp/">ftp.rge.com</a>
<dt> Oklahoma, USA:
<dd> <a href="ftp://ftp.ou.edu/pub/simtelnet/gnu/djgpp/">ftp.ou.edu</a>
<dt> Corvallis, Oregon, USA:
<dd> <a href="ftp://ftp.orst.edu/pub/simtelnet/gnu/djgpp/">ftp.orst.edu</a>
<dt> Pennsylvania, USA:
<dd> <a href="ftp://ftp.epix.net/pub/simtelnet/gnu/djgpp/">ftp.epix.net</a>
<dt> Virginia, USA:
<dd> <a href="ftp://mirrors.aol.com/pub/simtelnet/gnu/djgpp/">mirrors.aol.com</a> <p>

</dl>
<P>
<P> | <A HREF="#Where to find"> Previous </A> | <A HREF="#How to download"> Next </A> | <A HREF="#Getting DJGPP"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="CCT">

4.2 CCT sites </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Where can I find the nearest CCT site? </em> <p>
<hr> <strong>A</strong>:  Look up the site nearest to you in the list below:

Note that the copyright to the name "SimTel" is owned by Walnut Creek which sponsors the SimTel.NET repository, so the CCT mirrors are in the process of renaming their directories to
<samp>Coast</samp>.  Therefore, if you don't find the directories listed below, replace "SimTel" by "Coast" and try again.  <p>

<dl>
<dt> The primary CCT site is in Detroit, Michigan, USA:
<dd> <a href="ftp://ftp.coast.net/Coast/vendors/djgpp//">ftp.coast.net</a>.  <p>

<dt> Here is a list of hosts by countries that offer mirror sites:
<dd>

<dt> Canberra, Australia:
<dd> <a href="ftp://archie.au/micros/pc/SimTel/vendors/djgpp/">archie.au</a>
<dt> Edmonton, AB, Canada:
<dd> <a href="ftp://ftp.agt.net/pub/SimTel/vendors/djgpp/">ftp.agt.net</a>
<dt> Prague, Czech Republic:
<dd> <a href="ftp://pub.vse.cz/pub/simtel/vendors/djgpp/">pub.vse.cz</a>
<dt> London, England:
<dd> <a href="ftp://src.doc.ic.ac.uk/pub/packages/simtel/vendors/djgpp/">src.doc.ic.ac.uk</a>
<dt> Liverpool, England:
<dd> <a href="ftp://ftp.mersinet.co.uk/pub/ibmpc/coast/vendors/djgpp/">ftp.mersinet.co.uk</a>
<dt> London, England:
<dd> <a href="ftp://ftp.demon.co.uk/pub/mirrors/simtel/vendors/djgpp/">ftp.demon.co.uk</a>
<dt> Chemnitz, Germany:
<dd> <a href="ftp://ftp.tu-chemnitz.de/pub/simtel/vendors/djgpp/">ftp.tu-chemnitz.de</a>
<dt> Mainz, Germany:
<dd> <a href="ftp://ftp.uni-mainz.de/pub/pc/mirrors/simtel/vendors/djgpp/">ftp.uni-mainz.de</a>
<dt> Tuebingen, Germany:
<dd> <a href="ftp://ftp.uni-tuebingen.de/pub/simtel/vendors/djgpp/">ftp.uni-tuebingen.de</a>
<dt> Hong Kong:
<dd> <a href="ftp://ftp.cs.cuhk.hk/pub/simtel/vendors/djgpp/">ftp.cs.cuhk.hk</a>
<dt> Hong Kong:
<dd> <a href="ftp://sunsite.ust.hk/pub/simtel/vendors/djgpp/">sunsite.ust.hk</a>
<dt> Dublin, Ireland:
<dd> <a href="ftp://ftp.hea.ie/pub/simtel/vendors/djgpp/">ftp.hea.ie</a>
<dt> Haifa, Israel:
<dd> <a href="ftp://ftp.technion.ac.il/pub/unsupported/simtel/vendors/djgpp/">ftp.technion.ac.il</a>
<dt> Naples, Italy:
<dd> <a href="ftp://ftp.unina.it/pub/simtel/vendors/djgpp/">ftp.unina.it</a>
<dt> Pisa, Italy:
<dd> <a href="ftp://cnuce-arch.cnr.it/pub/msdos/simtel/vendors/djgpp/">cnuce-arch.cnr.it</a>
<dt> Rome, Italy:
<dd> <a href="ftp://ftp.flashnet.it/mirror/simtel/vendors/djgpp/">ftp.flashnet.it</a>
<dt> Rome, Italy:
<dd> <a href="ftp://cis.utovrm.it/SimTel/vendors/djgpp/">cis.utovrm.it</a>
<dt> Tokyo, Japan:
<dd> <a href="ftp://ftp.crl.go.jp/pub/pc/archives/simtel/vendors/djgpp/">ftp.crl.go.jp</a>
<dt> Tokyo, Japan:
<dd> <a href="ftp://ftp.web.ad.jp/pub/mirrors/Coast/vendors/djgpp/">ftp.web.ad.jp</a>
<dt> Tokyo, Japan:
<dd> <a href="ftp://ring.aist.go.jp/pub/coast/vendors/djgpp/">ring.aist.go.jp</a>
<dt> Tokyo, Japan:
<dd> <a href="ftp://ring.asahi-net.or.jp/pub/coast/vendors/djgpp/">ring.asahi-net.or.jp</a>
<dt> Seoul, Korea:
<dd> <a href="ftp://ftp.kornet.nm.kr/pub/SimTel/vendors/djgpp/">ftp.kornet.nm.kr</a>
<dt> Seoul, Korea:
<dd> <a href="ftp://ftp.nowcom.co.kr/pub/SimTel/vendors/djgpp/">ftp.nowcom.co.kr</a>
<dt> Utrecht, Netherlands:
<dd> <a href="ftp://ftp.nic.surfnet.nl/mirror-archive/software/simtel-vendors/djgpp/">ftp.nic.surfnet.nl</a>
<dt> Poznan, Poland:
<dd> <a href="ftp://ftp.man.poznan.pl/mirror/simtel/vendors/djgpp/">ftp.man.poznan.pl</a>
<dt> Warsaw, Poland:
<dd> <a href="ftp://ftp.icm.edu.pl/pub/simtel/vendors/djgpp/">ftp.icm.edu.pl</a>
<dt> Moscow, Russia:
<dd> <a href="ftp://ftp.radio-msu.net/mirror/Coast/vendors/djgpp/">ftp.radio-msu.net</a>
<dt> Singapore:
<dd> <a href="ftp://ftp.singnet.com.sg/pub/mirrors/SimTel/vendors/djgpp/">ftp.singnet.com.sg</a>
<dt> Slovak Republic:
<dd> <a href="ftp://ftp.uakom.sk/pub/SimTel/vendors/djgpp/">ftp.uakom.sk</a>
<dt> Taipei, Taiwan:
<dd> <a href="ftp://nctuccca.edu.tw/PC/simtel/vendors/djgpp/">nctuccca.edu.tw</a>
<dt> Bangkok, Thailand:
<dd> <a href="ftp://ftp.bu.ac.th/pub/SimTel/vendors/djgpp/">ftp.bu.ac.th</a>
<dt> Sunnyvale, CA, USA:
<dd> <a href="ftp://ftp.drcdrom.com/Coast/vendors/djgpp/">ftp.drcdrom.com</a>
</dl>
Note that DJGPP was moved to the <samp>Coast/vendors/</samp> directory on CCT mirrors.  This is because CCT claims a compilation copyright on its collection, to prevent people from copying the
CD-ROMs which are distributed by CCT.  The GNU GPL prohibits <em>any</em> restrictions, even on compilations.  So, FSF asked for GNU and GNU-related files to be moved to a separate directory to keep
people from accidentally thinking that their rights were being reduced.

<P>
<P> | <A HREF="#CCT"> Previous </A> | <A HREF="#DJGPP by WWW"> Next </A> | <A HREF="#Getting DJGPP"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="How to download">

4.3 How do I download DJGPP? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: How do I download files from these sites? </em> <p>
<hr> <strong>A</strong>: FTP to the nearest site, log in as <kbd>anonymous</kbd>, give your full e-mail address as password, and chdir to the <samp>djgpp</samp> subdirectory (the exact path to it
might be different on different mirrors, check out <A HREF="#Where to find">the DJGPP archive path</A>, for your nearest mirror).  Then issue the <kbd>binary</kbd> command and download the files you
need (see <A HREF="#What to download">the list of required files</A>) with the <samp>get</samp> or <samp>mget</samp> commands.

<P>
<P> | <A HREF="#How to download"> Previous </A> | <A HREF="#What to download"> Next </A> | <A HREF="#Getting DJGPP"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="DJGPP by WWW">

4.4 What if I don't know what <samp>FTP</samp> is? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: What is that <samp>FTP</samp> thing?  I only use <samp>Netscape</samp> and <samp>IE4</samp> for Internet access. </em> <p>
<hr> <strong>A</strong>:  OK, here are some Web sites for use with your Web browser:

<ul>
<li> <a href="http://www.simtel.net/simtel.net/gnu/djgpp/">The main SimTel.NET site</a>.
<li> <a href="http://www.coast.net/Coast/vendors/djgpp/">The main CCT site</a>.
</ul>
You can also convert any of the mirrors' addresses listed in <A HREF="#Where to find">the list of SimTel.NET mirrors</A>, above to a valid URL by prepending <samp>ftp://</samp> to it.  For example,
the URL for FTP from <a href="ftp://ftp.coast.net/Coast/vendors/djgpp/">CCT</a>.  Typing such a URL into your Web browser will cause it to display the directory contents, and you can then click on
individual files to download them.  <p>

Gopher users can get CCT files <a href="gopher://gopher.oakland.edu">with a Gopher client</a>.  <p>

For those of you who only have an e-mail connection to the Internet, CCT files may be also obtained by e-mail from various ftp-mail servers or through the BITNET/EARN file servers.  For details send
a message to the <a href="mailto:listserv@Coast.NET">CCT list server</a> with this command in the message body:

<pre>

      get simtel-mailserver.info

</pre>
Another ftp-mail server is <a href="ftpmail@pub1.bryant.vix.com">ftpmail@pub1.bryant.vix.com</a>.  Send a message with a single word "help" in the body to the above address, to get instructions.

Walnut Creek, the company which maintains the SimTel.NET collection where the DJGPP archives are held, also sells a <cite>DJGPP Development System CDROM</cite>.  It includes
<strong>everything</strong> from the DJGPP sites on SimTel.NET (even the old version 1.12 of DJGPP), some example source code packages to get you started, and a ready-to-run feature, which allows you
to use DJGPP directly from the CDROM; you can also use a provided install program to copy some or all of the packages to your hard disk.  To order the CDROM, go to the
<a href="http://www.cdrom.com/titles/prog/x2ftp.htm">Walnut Creek Web site</a>.  <p>

<a href="mailto:salvador@inti.gov.ar">Salvador Eduardo Tropea (SET)</a>, himself a veteran DJGPP user and developer, sells a low-cost CDROM with all the DJGPP v2 files, plus a lot of related stuff
downloaded from the net.  For information, send email to <a href="mailto:set-soft@usa.net">set-soft@usa.net</a>.

<P>
<P> | <A HREF="#DJGPP by WWW"> Previous </A> | <A HREF="#Disk space"> Next </A> | <A HREF="#Getting DJGPP"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="What to download">

4.5 What Files to Download? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: What's the minimum set of <samp>.zip</samp> files I need to download? </em> <p>
<hr> <strong>A</strong>:  This depends on what you are planning to use DJGPP for.

The following table lists required and recommended files by category.  An alternative method of choosing the files suitable for your needs is to
<a href="http://www.delorie.com/djgpp/">use the DJGPP zip-picker feature</a> which will guide you through the process.

<ul>
<li> To only run DJGPP-compiled programs, you MUST download all of these(<i><b>Note: </b>The version numbers of the packages listed here might not be up to date.  For the latest versions, check out
the DJGPP Mini-FAQ posted weekly to the the <a href="news:comp.os.msdos.djgpp">comp.os.msdos.djgpp</a> news group.  The file LISTINGS.zip available on every DJGPP site includes one file for every zip
that lists all the files inside that zip; download and unzip it on your machine, and you've got a set of files you can search for substrings.  Another place where you can look for the latest versions
of all files is <a href="http://www.delorie.com/djgpp/dl/ofc/">on the DJGPP server</a>, which is also a convenient way of downloading individual files if you have lost them somehow.</i>): <p>

<dl>
<dt> v2/readme.1st
<dd> This explains how to install DJGPP and get started with using it.

<dt> v2/faq211b.zip
<dd> The latest edition of this FAQ list.  Use it whenever you have problems installing and using DJGPP.

<dt> v2/frfaq21b.zip
<dd> The latest version of the FAQ translated into French by <a href="mailto:deef@pobox.oleane.com">Francois Charton</a>.

<dt> v2misc/csdpmi4b.zip
<dd> CWSDPMI, the DJGPP free DPMI server.  DJGPP programs cannot run without DPMI services, which provide a way to run 32-bit protected-mode programs under real-mode MS-DOS.  (If you can get DPMI
services in your environment, like if you run under Windows, QDPMI, or OS/2, you don't need CWSDPMI, but I recommend downloading it nonetheless so you can try it in case you have trouble with other
DPMI servers.)

<dt> v2misc/pmode11b.zip
<dd> This is an alternative DPMI server, PMODE/DJ.  Its memory footprint is smaller than CWSDPMI and it can be bundled with DJGPP programs to make a stand-alone executable that doesn't require a DPMI
server to run.  PMODE/DJ doesn't support virtual memory and its implementation of the DPMI spec is a bit more restricted than that of CWSDPMI, but it is faster, and therefore more appropriate for
high-performance interrupt handling.

</dl>
<p>

<li> For developing C programs (no C<tt>++</tt>), you MUST download all of the above, plus the following: <p>

<dl>
<dt> v2gnu/bnu281b.zip
<dd> The GNU Binutils, including <code>as</code>, the GNU assembler; <code>ld</code>, the GNU linker; and their docs.  GCC calls these utilities during compilation.

<dt> v2/djdev201.zip
<dd> C header files and libraries, library reference, minimal development environment, DJGPP-specific utilities and their documentation.  Required to compile/link programs.

<dt> v2gnu/gcc281b.zip
<dd> The GNU C Compiler binaries and docs (including the docs for the C<tt>++</tt> compiler).

<dt> v2gnu/txi312b.zip
<dd> Info, a stand-alone program to read GNU hypertext documentation files, and an environment to produce such files.  Without <samp>info</samp>, you cannot read the C library reference and the docs
included with the ported GNU software packages.  This package also includes the <samp>install-info</samp> utility, which helps to install Info docs of optional utilities that you download.  It also
includes several files required to format Texinfo docs for printing.
</dl>
<p>

<li> For developing C<tt>++</tt> programs, you will need all of the above, plus the following: <p>

<dl>
<dt> v2gnu/gpp281b.zip
<dd> The GNU C<tt>++</tt> compiler binary (the docs are part of the gccNNNb.zip package, see above), the C<tt>++</tt> header files and standard C<tt>++</tt> class libraries, including the STL, and
their docs.

<dt> v2gnu/lgp2811b.zip
<dd> Additional GNU C<tt>++</tt> class libraries.  This library is now deprecated and no longer maintained.  I suggest not to use it.

<dt> v2gnu/obc281b.zip
<dd> If you want to develop Objective-C programs, you will need this file, which includes the Objective-C compiler and header files.  More information about Objective-C is available
<a href="http://www.virtualschool.edu/lang/objectivec/">from Brad Cox's home page</a>.
</dl>
<p>

<li> The following are some optional packages which you might want: <p>

<ul>
<li> Debugging: <p>

<dl>
<dt> v2gnu/gdb416b.zip
<dd> GDB, the GNU Debugger and its docs.  (Note that the <code>djdev</code> distribution includes two simpler, assembly-level debuggers, <code>edebug</code> and <code>fsdb.</code>  The latter
presents a user interface similar to that of Turbo Debugger.)
</dl>
<p>

<li> Additional development tools (consider getting at least the Make distribution): <p>

<dl>
<dt> v2gnu/mak377b.zip
<dd> GNU Make program with its docs.  (Make is a program that can automatically compile/link a program given the description of dependencies between the various source and object files, on a special
file called <samp>Makefile</samp>.)  You should install Make 3.75 or later if you use DJGPP v2.01 (previous ports of Make have subtle incompatibilities with v2.01 tools).  The DJGPP port of Make
supports Unix-style shells (as well as DOS <samp>COMMAND.COM</samp> and its <samp>4DOS/NDOS</samp> replacements) and can be used to run Unix Makefiles if you install a Unix-style shell (e.g.,
<samp>bash</samp>) and auxiliary utilities.  It also supports long filenames on Windows 9X and MS-DOS pathnames with drive letters.

<dt> v2apps/rhide14b.zip
<dd> The <b><tt>RHIDE</tt></b> integrated development environment for DJGPP (similar to Borland IDE), written by <a href="mailto:robert.hoehne@gmx.net">Robert Hoehne</a>.  The latest version features
an integrated debugger, based on GDB code; a stand-alone version of GDB with a Turbo Vision interface (but not all GDB features can be used); and support for user interface in languages other than
English (using a port of GNU <samp>Gettext</samp> library).  Latest developments and beta versions of <b><tt>RHIDE</tt></b> are available
<a href="http://www.tu-chemnitz.de/~sho/rho/rhide.html">from its home page</a>.

<dt> v2/djlsr201.zip
<dd> The sources of the DJGPP C library and utilities written specifically for DJGPP.  If you can afford the disk space (it requires about 10MB), I recommend installing or at least downloading it, so
you can easily fix possible library bugs.

<dt> v2gnu/bsh1147b.zip
<dd> Bash (<samp>Bourne-Again SHell</samp>), the GNU shell, and its docs.  If you mostly work in Unix environment, you will feel right at home using <samp>bash</samp> as your interactive shell.  It
is also great as a batch shell for running Unix-born shell scripts and Makefiles when these are too complex to convert them to MSDOS.  If you install <samp>bash</samp>, you should also install
auxiliary utilities (Fileutils, Textutils, Sh-utils, Grep, Diffutils, Findutils, Sed and Gawk) as these are usually invoked from many shell scripts and Makefiles.

<dt> v2gnu/bsn125b.zip
<dd> Bison, a Yacc-like parser generator, and its docs.  You will need it if you intend to build a compiler or a parser for some language.

<dt> v2gnu/dif271b.zip
<dd> GNU Diffutils (diff, cmp, diff3, sdiff), and their docs.  If you need to submit patches or changes to DJGPP or GNU sources, you will need the GNU <samp>diff</samp> program from this package.
<samp>diff</samp> is also required by almost all configuration-management packages, such as <b><tt>RCS</tt></b>.

<dt> v2gnu/emacs.README
<dd> <dt> v2gnu/em1934*.zip
<dd> GNU Emacs, the most powerful, customizable, extensible programmer's editor known today.  The DJGPP port supports mouse, menu bar, pop-up menus, color syntax highlighting, reading Info
documentation and compilation from within the editor, long filenames on Windows 9X, and much more.  Emacs can and should be used as an integrated development environment (another alternative is
<b><tt>RHIDE</tt></b>, see above).  Please read the file <samp>emacs.README</samp> before you begin downloading the rest.

<dt> v2gnu/fil316b.zip
<dd> GNU Fileutils, including <samp>ls</samp>, <samp>rm</samp>, <samp>cp</samp>, <samp>mv</samp>, and others.  Highlights of the latest port: <samp>ls</samp> supports colorization of files (like on
Linux), <samp>ln -s</samp> knows about DJGPP-style "symlinks" (see <A HREF="#Symlinks">symlink feature of DJGPP</A>, elsewhere in this document), <samp>install -s</samp> will strip executables on the
fly, and all the utilities support long filenames on Windows 9X and numbered backups (even on plain DOS).  This package is a must if you want to run Unix shell scripts, as they use some of these
utilities <em>a lot</em>.

<dt> v2gnu/find41b.zip
<dd> GNU Findutils, including <samp>find</samp>, <samp>xargs</samp>, and <samp>locate</samp>.  These programs are used to process a group of files which share some common attributes, like the file
name pattern, read/write permissions, file time-stamps, etc.  Since DOS has its own, incompatible program called <samp>find.exe</samp>, you will need either to make sure DJGPP's <samp>bin</samp>
subdirectory is before the <samp>C:\DOS</samp> directory (for DOS and Windows 3.X) and <samp>C:\WINDOWS\COMMAND</samp> directory (for Windows 9X) on your <code>PATH</code>, or to rename the DOS
<samp>find</samp> program to some other name.

<dt> v2gnu/flx254b.zip
<dd> Flex, a Lex-like lexical analyzer generator, and its docs.  Required to build compilers or programs which break streams of characters into lexical tokens.

<dt> v2gnu/gwk302b.zip
<dd> GNU Awk, an interpreter for a powerful text-processing language with many built-in functions.  Gawk is also invoked by many shell scripts, so if you use Bash or need to run shell scripts, you
should download Gawk.

<dt> v2gnu/grep22b.zip
<dd> GNU Grep package and its docs.  The programs of this package are used to search for strings or regular expressions within files.  You will also need this if you use Emacs (which has commands
that invoke Grep) or if you want to run Unix shells and Makefiles.

<dt> v2gnu/idu32b.zip
<dd> GNU Id-utils and their docs.  These utilities are used to quickly search for tokens in all the files that comprise a directory tree (e.g., a large project).  They are similar to
<samp>Grep</samp>, but much faster, and their notion of a token is sensitive to the source language of the scanned file.

<dt> v2gnu/pat25b.zip
<dd> GNU Patch program and docs.  Required to apply patches to sources given a source-level patch-file generated by <samp>diff</samp>.

<dt> v2gnu/perl54b.zip
<dd> Perl, a powerful scripting and text-processing language implemented as an interpreter.  Many sophisticated scripts, like <code>texi2html</code>(<i><b>Note: </b>Like its name suggests,
<code>texi2html</code> converts a Texinfo source to HTML.</i>), use Perl.

<dt> v2gnu/sed302b.zip
<dd> GNU Sed (a batch editor) program and its docs.  Many ported packages require it during the build process on MSDOS.

<dt> v2gnu/shl112b.zip
<dd> GNU Sh-utils.  A must if you use the port of <samp>bash</samp> or want to run Unix Makefiles, but some utilities (such as <samp>env</samp> or <samp>test</samp>) can also be very useful on their
own right.

<dt> v2gnu/txt122b.zip
<dd> GNU Textutils.  Includes many useful programs, such as <samp>sort</samp>, <samp>wc</samp>, <samp>cat</samp>, <samp>join</samp>, <samp>paste</samp>, <samp>od</samp>, and <samp>uniq</samp>.  Unix
shell scripts and Makefiles call some of these <em>a lot</em>, so you should install this package if you run them.

</dl>
<p>

<li> Developing text-mode and graphics GUI applications: <p>

<dl>
<dt> v2tk/grx23.zip
<dd> A graphics library for DJGPP.  Note that it is still in development, so some advanced features might not work.  GRX is quite portable to other operating systems: it is known to work with several
DOS compilers, including Borland and Watcom; on Linux with svgalib and X11, and on several Unix platforms with X11R5 or later version of X-Windows.  Also, GRX is the only library that supports
printing out graphics images (check out the <samp>addons/print</samp> directory in the GRX distribution).  A significant drawback of GRX is that its docs is <em>very</em> outdated and incomplete.

<a href="mailto:hsc@techfak.uni-kiel.de">Hartmut Schirmer</a> is the current maintainer of GRX.  GRX is distributed under the GNU Library License (a.k.a. LGPL).

<dt> v2tk/bcc2grx.zip
<dd> The interface library to convert Borland graphics calls into calls to GRX library functions.

<dt> v2tk/alleg30.zip
<dd> A powerful game-writing and graphics library.  This is an alternative to GRX (see above), even if you don't need to develop a game.  It is somewhat less portable than GRX to other operating
systems, but its documentation is significantly better and up-to-date.  Unlike GRX, Allegro is <em>not</em> under LGPL, it is free.  A port of Allegro to Win32 and to Linux is in the works (initial
versions are available).

By popular demand, Allegro now has its mailing list.  To post a message to the list, send email to <a href="mailto:allegro@canvaslink.com">allegro@canvaslink.com</a>.  To subscribe, send a message to
<a href="mailto:listserv@canvaslink.com">listserv@canvaslink.com</a> with the text "subscribe allegro {your full name}".  Another related resource is the
<a href="http://www.talula.demon.co.uk/allegro/">Allegro home page</a>.

<dt> v2tk/pdc22.zip
<dd> A public-domain Curses library, for programming text-mode user-interfaces which are portable to Unix or ported from Unix.

Lately, a new version 2.3 of PDCurses was released.  It is available <a href="ftp://ftp.lightlink.com/pub/hessling/PDCurses/">via FTP</a>.
</dl>
<p>

</ul>
Note that all of the packages have source distributions (<samp>...s.zip</samp>) which you can download in case you discover a bug, or want to know more about how the tools work.  <p>

For description of additional files not mentioned here, get the file <samp>00_index.txt</samp>; it contains a full list of the distribution files and a short description of every file.
</ul>
<P>
<P> | <A HREF="#What to download"> Previous </A> | <A HREF="#DJGPP Fatware"> Next </A> | <A HREF="#Getting DJGPP"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Disk space">

4.6 How much disk space will I need? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Wow, that's a lot of files.  How much disk storage will I need? </em> <p>
<hr> <strong>A</strong>:  The following lists the approximate disk space required for several major configurations, and additional storage required for some optional packages:

<pre>

     Execution-only environment..................300 KBytes
     Developing C programs.......................15 MBytes
     Developing C++ programs.....................20 MBytes
     Developing Objective-C programs.............16 MBytes
     Additional storage for RHIDE................4 MBytes
     Additional storage for DJGPP sources........6 MBytes
     Additional storage for GDB..................1.1 MBytes
     Additional storage for Emacs................30 MBytes
     Additional storage for Flex.................280 KBytes
     Additional storage for Bison................310 KBytes
     Additional storage for Diffutils............560 KBytes
     Additional storage for Make.................650 KBytes
     Additional storage for Patch................180 KBytes
     Additional storage for Sed..................200 KBytes
     Additional storage for Graphics libraries...4 MBytes

</pre>
Note that the above lists only approximate numbers.  In particular, the disk cluster size can significantly change the actual disk space required by some of the distributions (those with a large
number of files).  The numbers above are for disks which have 8KB or smaller clusters.  <p>

In addition to the space for installing the software, you will need some free disk space for the swap file.  You should leave enough free disk space to make the total virtual memory at least 20
MBytes; that will be enough for most applications.  Invoke the <samp>go32-v2.exe</samp> program without arguments to see how much DPMI memory and swap space DJGPP applications can use.  Depending on
your DPMI host, you might need to review its virtual memory settings in addition to leaving free disk space; CWSDPMI only requires that enough free disk space be available, but other DPMI hosts have
special settings to specify how much virtual memory they let their clients use, as explained in <A HREF="#How much memory">how to set up memory</A>, below.

<P>
<P> | <A HREF="#Disk space"> Previous </A> | <A HREF="#Uninstall"> Next </A> | <A HREF="#Getting DJGPP"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="DJGPP Fatware">

4.7 Can I get away with less megabytes? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: The above table means that I need more than 17 MBytes for C/C<tt>++</tt> development environment; that's about 7 1.44MB diskettes to hold even the compressed archive!!  Seems
to me DJGPP is afflicted by the <strong>fatware</strong> disease... </em> <p>
<em><strong>Q</strong>: Pulling that many megabytes through the net from my overloaded SimTel.NET mirror is almost impossible.  Can't you prepare a ZIP archive which only includes stuff I can't do
without? </em> <p>
<hr> <strong>A</strong>: There are a number of shareware/freeware programs floating around which allow formatting DOS diskettes to almost twice their usual capacity, so you can use less floppies.
One such program is <a href="ftp://ftp.simtel.net/pub/simtelnet/msdos/diskutil/2m30.zip">2M</a>.  <p>

To make downloading DJGPP easier, download and compile the <samp>BatchFTP</samp> program.  It allows you to submit a script of FTP commands and will repeatedly try to login into the FTP site you
specify until the script is successfully completed.  It is smart enough to understand the messages which the FTP server sends to you (like <samp>login refused</samp> etc.) and also is nice to the
remote server by sleeping for some time between login attempts.  <samp>BatchFTP</samp> is free software and can be found on
<a href="ftp://oak.oakland.edu/pub/unix-c/networks/batchftp.tar.Z">many FTP sites</a>.  <p>

<samp>BatchFTP</samp> is a Unix program; those who access the net from their PC (not by dialing into some Unix host with a shell account), can use one of the available programs for automated FTP
access.  <p>

As for the minimal DJGPP installation, volunteers are welcome to prepare such an archive and make it publicly available, in the same spirit as <samp>EZ-GCC</samp> did for DJGPP v1.x.

<P>
<P> | <A HREF="#DJGPP Fatware"> Previous </A> | <A HREF="#Getting DJGPP"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Uninstall">

4.8 How to uninstall a DJGPP package. </A></H3><P>
</CENTER>
<em><strong>Q</strong>: How can I uninstall a certain package? </em> <p>
<em><strong>Q</strong>: How can I install a newer version of some package without leaving traces of the older installation? </em> <p>
<hr> <strong>A</strong>:  The <samp>*.mft</samp> files in the <samp>manifest</samp> subdirectory hold the lists of all the files included in every package you install.  For example, when you unzip
<samp>gcc281b.zip</samp>, it puts a file called <samp>gcc281b.mft</samp> into the <samp>manifest</samp> subdirectory.  The easiest way to remove all those files is to use the <samp>*.mft</samp> files
as response files to a command which deletes files.  For example:

<pre>

       rm -f @manifest/gcc281b.mft

</pre>
The <code>rm</code> program is part of the GNU Fileutils package, available as <samp>v2gnu/fil316b.zip</samp> from the usual DJGPP FTP sites.

When you install a new version of a package, it is best to uninstall the previous version first, like in the above example, and then install the new one.

<P>
<P> | <A HREF="#Getting DJGPP"> Previous </A> | <A HREF="#Trouble"> Next </A> | <A HREF="#Top"> Up </A> | <P>
<P>
<P>
<CENTER>
<H2>

<A NAME="Docs">

5. The DJGPP Documentation </A></H2><P>
</CENTER>
  This chapter explains where to find and how to read DJGPP documentation, and how to solve occasional problems with the docs system.

<p>
<ul>
<li><A HREF="#Where is the docs"> 5.1 Where is the docs--Where to find the docs and how to read them.  </A>
<li><A HREF="#No Info"> 5.2 No Info--For those who can't stand Info.  </A>
<li><A HREF="#Printed docs"> 5.3 Printed docs--Where to find a printed manual.  </A>
<li><A HREF="#Cannot find docs"> 5.4 Cannot find docs--For some programs it's tricky ...  </A>
<li><A HREF="#Man pages"> 5.5 Man pages--How to read these.  </A>
<li><A HREF="#Last resort"> 5.6 Last resort--Look in the source, of course!  </A>
</ul>
<P>
<P> | <A HREF="#Docs"> Previous </A> | <A HREF="#No Info"> Next </A> | <A HREF="#Docs"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Where is the docs">

5.1 Where are the documentation files? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I don't see any documentation files... </em> <p>
<hr> <strong>A</strong>:  The documentation files are in the <samp>info/</samp> subdirectory of your main DJGPP installation directory.  You will need a program to read these docs, which are
hypertext structured files.  You have several choices:

<ol>
<li> Use the stand-alone <samp>Info</samp> reader.  <p>

<a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2gnu/txi312b.zip">Texinfo</a> includes <samp>INFO.EXE</samp> and its docs.  Unzip it and type <kbd>info &lt;Enter&gt;</kbd>.  It will bring up a
(hopefully) self-explanatory online help system.  Confused?  Press <kbd>?</kbd> to see the list of all Info commands.  Still confused?  Press <kbd>h</kbd> to have <samp>Info</samp> take you on a
guided tour through its commands and features.  <p>

<li> Use the <samp>Info</samp> command of your favorite editor.  <p>

If you use Emacs, you already know about <samp>Info.</samp>  (What's that?  You don't?  Type <kbd>C-h &lt;i&gt;</kbd> and you will get the top-level menu of all the Info topics.)  RHIDE also has an
integrated Info reader, which is the core of its help system.  <p>

<li> Get and install TkInfo, a graphical browser for Info documentation that runs on MS-Windows and uses a port of Tcl/Tk.  TkInfo is free and available
<a href="http://math-www.uni-paderborn.de/~axel/tkinfo/">from the Web</a>.

</ol>
<P>
<P> | <A HREF="#Where is the docs"> Previous </A> | <A HREF="#Printed docs"> Next </A> | <A HREF="#Docs"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="No Info">

5.2 How to read the docs without <samp>Info?</samp> </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I'm too old/lazy/busy to learn yet another browser, and I despise uGNUsable programs like Emacs.  How in the world can I read the DJGPP docs?? </em> <p>
<hr> <strong>A</strong>:  Info files are almost plain ASCII files, so you should be able to view them with your favorite text file browser or editor.  You will lose the hypertext structure and you
might have a hard time finding the next chapter (hint: look up the name of the Next node at the beginning of this node, then use the search commands of the browser, or the Grep program, to find that
name), but other than that you will see all the text.  <p>

You can also produce pure ASCII files yourself, if you have their Texinfo sources.  These are usually called <samp>*.txi</samp> or <samp>*.texi</samp> and should be included with the source
distribution of every package.  (You can use the <a href="http://www.delorie.com/djgpp/dl/ofc/">DJGPP server's downloading services</a>, to download individual files.)  To produce an ASCII file
<samp>foo.txt</samp> from the Texinfo file <samp>foo.txi</samp>, invoke the <samp>Makeinfo</samp> program like this:

<pre>

      makeinfo --no-split --no-headers --output=foo.txt foo.txi

</pre>
<samp>Makeinfo</samp> is one of the programs which come with the <a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2gnu/txi312b.zip">GNU Texinfo distribution</a>.  <p>

If you prefer reading the docs through the Web, point your Web browser to the <a href="http://www.delorie.com/gnu/docs/">docs page of the DJGPP Web site</a>.

<P>
<P> | <A HREF="#No Info"> Previous </A> | <A HREF="#Cannot find docs"> Next </A> | <A HREF="#Docs"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Printed docs">

5.3 How to print the docs? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I like my docs the old way: printed on paper, right near my workplace.  How can I print the documentation files which come with DJGPP? </em> <p>
<hr> <strong>A</strong>: Most of the DJGPP packages already have their docs converted to a printable format, look for the files named <samp>*d.zip</samp> at the same place where you got the binary
<samp>*b.zip</samp> distribution.  For example, the ready-to-print docs of GCC 2.8.1 should be in the <samp>v2gnu/gcc281d.zip</samp> archive.  These distributions include a <samp>.dvi</samp> and a
<samp>.ps</samp> file.  The latter can be printed directly on a PostScript printer.  If you don't have access to such a printer, you can use the <samp>.dvi</samp> file in conjunction with a <dfn>DVI
driver</dfn> for your printer to produce a printed copy of the docs.  A DVI driver is a program that reads the <samp>.dvi</samp> file and translates it into commands for a particular printer device
which cause it to print the document.  DJGPP ports of DVI drivers for LaserJet series of printers are available
<a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2apps/tex/dvlj26.zip">on SimTel.NET mirrors in the v2apps/tex directory</a>.  Drivers for DeskJet series are also available from there, in the
<samp>dvdjNNb.zip</samp> archive.  For other devices, download and install the Ghostscript interpreter which supports a lot of popular printers.  <p>

If some package doesn't have a ready <samp>*d.zip</samp> archive, you will need to get and install a program called <i>T</i>e<i>X</i> or its work-alike, like em<i>T</i>e<i>X</i>.  A DJGPP port of
<i>T</i>e<i>X</i> is available <a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2apps/tex/TeX.README">on SimTel.NET</a>.  Install <i>T</i>e<i>X</i>, then run the <code>texi2dvi</code> shell
script(<i><b>Note: </b>You will need to install the port of Bash and some auxiliary utilities to be able to run shell scripts; <code>texi2dvi</code> itself is part of the GNU Texinfo distribution and
comes with the <samp>v2gnu/txiNNNb.zip</samp> archive.</i>) on the docs' <em>source</em> files (called <samp>*.txi</samp> or <samp>*.texi</samp>) which you get with the source distribution of every
package you download.  <i>T</i>e<i>X</i> produces a <samp>.dvi</samp> file which you can then print using one of the available DVI drivers, as explained above.  To convert a <samp>.dvi</samp> file
into PostScript, use the <samp>DVIPS</samp> program; you can find it as dvps566.zip on the above-mentioned site, together with the <i>T</i>e<i>X</i> port.  <p>

If <i>T</i>e<i>X</i> won't run, check that you have the file <samp>texinfo.tex</samp> which defines the <i>T</i>e<i>X</i> macros specific to Texinfo files.  If you don't, get the latest GNU or DJGPP
Texinfo distribution which includes that file.  <p>

If you'd like to produce printed docs of the library reference, <i>T</i>e<i>X</i> might complain that it cannot find a file named <samp>libc2.tex</samp>.  This file is generated from all the
<samp>*.txh</samp> files in the DJGPP source distribution (<samp>djlsr201.zip</samp>).  In order to build this file, you need to install <samp>djlsr201.zip</samp> and the C<tt>++</tt> compiler, then
go to the <samp>src/libc</samp> directory and type this from the DOS command prompt:

<pre>

       make -C ../mkdoc
       make doc

</pre>
If the above command fails due to unresolved externals, you will need to edit the file <samp>makefile</samp> in the <samp>mkdoc</samp> directory.  It has a line which calls <samp>ld</samp> (the
linker), where you should change <samp>-lgcc -lc</samp> into <samp>-lgcc -lc -lgcc</samp>.  Save <samp>makefile</samp> and try the above commands again.  <p>

Note that some documentation files (notably, the one for GCC and Emacs) will produce voluminous print-outs.  <em>You have been warned!</em> <p>

DJGPP comes with a program called <samp>TEXI2PS</samp> which can convert *.txi files to a crude PostScript; try it if you don't care much about the appearance of the printed docs.  Its advantage is
that you don't need to install any additional packages, just to fetch the Texinfo sources of the docs.  <p>

Finally, if you don't mind paying for the printed documentation, the Free Software Foundation sells printed copies of manuals for GNU packages.  You can contact
<a href="mailto:fsforder@gnu.org">the FSF</a> for details.  <p>

For those who prefer reading docs with a Web browser, many GNU manuals in <samp>HTML</samp> (hypertext) format, suitable for reading with your Web browser, can be viewed at the
<a href="http://www.delorie.com/gnu/docs/">DJGPP Web site</a>.  The <samp>*d.zip</samp> archives also include the docs converted to <samp>HTML</samp>, which you can browse locally on your machine.

<P>
<P> | <A HREF="#Printed docs"> Previous </A> | <A HREF="#Man pages"> Next </A> | <A HREF="#Docs"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Cannot find docs">

5.4 Some docs are nowhere to be found... </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I looked in my <samp>info/</samp> subdirectory, but I can't find docs for some of the utilities, like <b><tt>SED</tt></b> or <b><tt>GPROF</tt></b>. </em> <p>
<em><strong>Q</strong>: STL, the C<tt>++</tt> Standard Template Library, seems to be undocumented... </em> <p>
<hr> <strong>A</strong>: <b><tt>SED</tt></b> and <b><tt>GPROF</tt></b> are documented in the latest GNU releases, <samp>v2gnu/sed302b.zip</samp> and <samp>v2gnu/bnu281b.zip</samp>.  Download the
latest releases, and you will get the missing docs.

The STL documentation is not included in the GNU GCC distribution (it appears that nobody has bothered to write a free documentation for it).  But you can find the STL docs
<a href="http://www.sgi.com/Technology/STL/">on the net</a>; this includes the full documentation and a tutorial.  Many books that describe C<tt>++</tt> programming also include documentation of
large parts of the STL.

If you have some other package without any docs, try downloading the source archive (<samp>*s.zip</samp>) for that package and look inside it, usually in the directory called <samp>man/</samp> or
<samp>doc/</samp>.  Omitting documentation from the binary (<samp>*b.zip</samp>) distribution is generally considered a bug, so if you find the docs in source distribution only, please report these
cases on the <a href="news:comp.os.msdos.djgpp">comp.os.msdos.djgpp</a> news group, so that next binary release could fix this.

<P>
<P> | <A HREF="#Cannot find docs"> Previous </A> | <A HREF="#Last resort"> Next </A> | <A HREF="#Docs"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Man pages">

5.5 What are these <samp>foo.1</samp> files? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Some docs files are called <samp>foo.1</samp> or <samp>bar.man</samp> or <samp>baz.nroff</samp>, and they seem to be written in some weird format which is very difficult to
read.  How can I convert them to readable text files? </em> <p>
<hr> <strong>A</strong>: That weird format is the <samp>troff</samp> format which is used for writing Unix <dfn>manual pages</dfn>.  The Unix command <samp>man</samp> converts them to formatted text
files which are usually displayed with a program like <samp>more</samp> or <samp>less</samp> (and here <samp>less</samp> is considered to be more than <samp>more</samp> <b>:-)</b>).  The formatted
file includes bold and underlined letters produced by over-typing using Backspace characters.  <p>

DJGPP binary <samp>*b.zip</samp> distributions include such man pages already formatted and ready to be browsed.  To browse formatted man pages, you will need to install a clone for the Unix
<samp>man</samp> command.  One such clone is available <a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2apps/man12b.zip">from the DJGPP sites</a>.  <p>

<samp>man</samp> knows how to find a manual page file, and will format it if it isn't formatted already, but to browse these files you will need a program that can page through a text file and which
understands how to show bold and underlined letters instead of backspace-over-typed characters.  I suggest to download the
<a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2gnu/lss332b.zip">DJGPP port of GNU Less</a>, which uses colors to show bold and underlined letters.  <p>

Having installed <samp>man</samp> and Less, you should be able to view <samp>*.1</samp> files like e.g. <samp>patch.1</samp> with several alternative tools:

<ul>
<li> Using the <samp>man</samp> command itself: simply typing <kbd>man patch</kbd> from the DOS prompt will cause <samp>man</samp> to look for the man page <samp>patch.1</samp> and pipe it to Less.
<p>

<li> Using the stand-alone Info reader: type <kbd>info patch</kbd>, and Info will invoke <samp>man</samp> as its back-end and display the manual page found by <samp>man</samp>.  <p>

Using Info to display man pages has an advantage of displaying the Info version of documentation if it is available, and the man page version if it's not.  So, by using Info, you don't need to bother
to remember which version of the docs is available for every topic.  Info also knows about special sections in man pages, such as "SEE ALSO", which refer to other man pages, and treats them as
hypertext links (i.e., you can press &lt;TAB&gt; to move between the references and press &lt;Enter&gt; to display the man page under cursor).  <p>

<li> Emacs, the GNU editor, can also display man pages.  Type <kbd>M-x man RET patch RET</kbd>, and Emacs will display the <samp>patch</samp> man page highlighted with colors.  (You will need to
install <b><tt>SED</tt></b> and Gawk, since Emacs invokes them when processing the man page.)  Emacs also supports the special sections like "SEE ALSO".
</ul>
Note that all of these alternatives <em>require</em> <samp>man</samp> and Less to be installed.  <p>

The binary distribution of the DJGPP port of <samp>bash</samp> includes a simple <b><tt>SED</tt></b> script called <samp>man2txt.sh</samp> which will convert formatted man pages into plain text; you
can then read them with any text browser or editor.  To convert, invoke Sed like so:

<pre>

       sed -f man2txt.sh &lt; file.1 &gt; file.txt

</pre>
If you want to be able to browse <em>unformatted</em> man pages, get and install the <a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2gnu/gro110b.zip">DJGPP port of Groff</a>.
<samp>man</samp> will automatically call Groff if it finds an unformatted page, so all the ways mentioned above to browse man pages will work with unformatted pages as well, once you install Groff.
<p>

Note that, for GNU packages, the man pages aren't always updated on a regular basis.  If you need more up-to-date information, see the Info files.

<P>
<P> | <A HREF="#Man pages"> Previous </A> | <A HREF="#Docs"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Last resort">

5.6 What if the docs don't say enough? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: OK, I've got the docs and have read them, but I still can't figure out some details. </em> <p>
<hr> <strong>A</strong>:  Some ported packages include DJGPP-specific or MSDOS-specific <samp>README</samp> files (named <samp>README.dj</samp>, <samp>README.dos</samp> or some such), which explain
DOS-specific issues; you should read them before any serious use of the package, or in case of any problems.  If this doesn't help, download the sources and look there, or ask on the net--either the
DJGPP News group or appropriate GNU News groups.

<P>
<P> | <A HREF="#Docs"> Previous </A> | <A HREF="#Compiler performance"> Next </A> | <A HREF="#Top"> Up </A> | <P>
<P>
<P>
<CENTER>
<H2>

<A NAME="Trouble">

6. When the Compiler (or <samp>Make</samp>, or <samp>Info</samp>, or ...) Crashes... </A></H2><P>
</CENTER>
  This chapter explains how to deal with certain problems which may prevent DJGPP programs from running on your machine.  The first 12 items on the next menu describe specific problems; if yours isn't
solved with these techniques, read the description of <A HREF="#General trouble">the general debugging procedure</A>.

<p>
<ul>
<li><A HREF="#Programs hang"> 6.1 Programs hang--Some DJGPP programs hang.  </A>
<li><A HREF="#No DPMI"> 6.2 No DPMI--You must have or install a DPMI server.  </A>
<li><A HREF="#Buggy DPMI"> 6.3 Buggy DPMI--It might crash all of your v2.x programs.  </A>
<li><A HREF="#GCC optimizations"> 6.4 GCC optimizations--GCC sometimes crashes when optimizing.  </A>
<li><A HREF="#Missing subprograms"> 6.5 Missing subprograms--GCC says <strong>"cannot exec as"</strong>.  </A>
<li><A HREF="#Internal error"> 6.6 Internal error--GCC says <strong>"Internal compiler error"</strong>.  </A>
<li><A HREF="#Unknown filetype"> 6.7 Unknown filetype--GCC says <strong>"Unknown filetype"</strong>.  </A>
<li><A HREF="#Make hangs"> 6.8 Make hangs--Compiler hangs, but only under Make.  </A>
<li><A HREF="#Info cannot find Top"> 6.9 Info cannot find Top--Info won't display some files.  </A>
<li><A HREF="#Info crashes"> 6.10 Info crashes--Info crashes upon startup.  </A>
<li><A HREF="#Bash crashes"> 6.11 Bash crashes--Possible reasons for Bash to crash.  </A>
<li><A HREF="#Linker accesses other drives"> 6.12 Linker accesses other drives-- </A>
<li><A HREF="#General trouble"> 6.13 General trouble--Look here for any problem not covered above.  </A>
<li><A HREF="#Redirect"> 6.14 Redirect--How to redirect GCC messages to a file.  </A>
<li><A HREF="#Deja vu"> 6.15 Deja vu--Look up your problem in the DJGPP archives.  </A>
<li><A HREF="#Totally lost"> 6.16 Totally lost--When nothing seems to help, ask on the net.  </A>
</ul>
<P>
<P> | <A HREF="#Trouble"> Previous </A> | <A HREF="#No DPMI"> Next </A> | <A HREF="#Trouble"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Programs hang">

6.1 GCC or some other DJGPP programs hang </A></H3><P>
</CENTER>
<em><strong>Q</strong>: When I try to compile anything, GCC just hangs! </em> <p>
<em><strong>Q</strong>: Some programs, like Info and Less, hang on my Windows 9X machine after some time, requiring to close the DOS box.  Help!! </em> <p>
<em><strong>Q</strong>: Bash hangs on Windows 9X after the first DJGPP program I run from it! </em> <p>
<hr> <strong>A</strong>: If you are using GCC 2.8.1, and if only GCC hangs, then chances are that you have set the <code>DJGPP</code> environment variable incorrectly, or didn't set it at all, or
messed up your <samp>DJGPP.ENV</samp> file by editing it.  Refer to <A HREF="#Missing headers or libraries">what to do if GCC hangs</A>, later in this FAQ, for details about possible problems with
setting <code>DJGPP</code>.  When <code>DJGPP</code> is not set, or points to a non-existent directory, the first release of GCC 2.8.1 would enter an endless loop (the <samp>NTDVM</samp> process on
Windows/NT will go nuts allocating memory, as a result of this).  <p>

The latest uploads of the GCC 2.8.1 binary (<samp>v2gnu/gcc281b.zip</samp>) were modified to prevent them from hanging.  This version aborts with an error message instead of hanging.  You should
upgrade to the latest binaries of GCC, and also set your <code>DJGPP</code> variable correctly.  <p>

Some people fail to read the release notes which come with GCC 2.8.1, and install it incorrectly.  If you installed GCC 2.8.1 recently and it began to hang, now is the time to read those instructions
again (they are installed as <samp>gnu/gcc-2.81/problems.txt</samp>).  In particular, GCC 2.8.1 comes with a modified version of <samp>DJGPP.ENV</samp> which you should install over the stock version.
<p>

If interactive programs like Bash, Less, Info, Emacs, and <b><tt>RHIDE</tt></b> are those which hang, and if it only happens after running another DJGPP program from within those programs, then your
Windows 9X installation is afflicted by a subtle bug whereby programs which call function 1680h of the Interrupt 2Fh (to release the rest of their time slice when they are idle) hang after they spawn
another DJGPP program.  A modified version of the library function <code>__dpmi_yield</code>, which works around that bug in Windows, is available (it will be part of DJGPP v2.02 release), and latest
uploads of the binaries for the affected programs should be free from this problem.  If you cannot find a pre-compiled binary that works, get the sources and rebuild the program with a fixed version
of <code>__dpmi_yield</code>.

<P>
<P> | <A HREF="#Programs hang"> Previous </A> | <A HREF="#Buggy DPMI"> Next </A> | <A HREF="#Trouble"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="No DPMI">

6.2 GCC says "No DPMI" </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I'm trying to run <samp>gcc</samp>, but all I get is a message saying "Load error: no DPMI - Get csdpmi*.zip".  What am I doing wrong? </em> <p>
<hr> <strong>A</strong>: You don't have a DPMI server installed, and DJGPP v2 requires it to run.  You can either use one of the commercial DPMI servers (e.g., run GCC in a DOS box from Windows) or
download and install CWSDPMI (<samp>v2misc/csdpmi4b.zip</samp> from SimTel.NET mirrors) which is a free DPMI server written for DJGPP.  <p>

If you already have CWSDPMI installed, and these messages still appear, it might be because of a messed up <code>PATH</code> setting.  The DJGPP startup code looks for <samp>cwsdpmi.exe</samp> along
the <code>PATH</code>, and, being optimized for size, it might not be robust enough to cope with all possible cases of weirdness in the value of <code>PATH</code>.  Try to copy
<samp>cwsdpmi.exe</samp> into the same directory as the program you are invoking, and if that helps, change your <code>PATH</code> as appropriate.  <p>

If you see the message "Load error: no DPMI - Get csdpmi*.zip" on Windows/NT, it most probably means that you have disabled the DPMI services built into NT.  One way this might happen is if you edit
the <samp>autoexec.nt</samp> file and remove the line which loads <samp>dosx.exe</samp>, or change some of the parameters on that line.  You cannot use CWSDPMI on NT, so your only bet is to restore
NT's built-in DPMI services.

<P>
<P> | <A HREF="#No DPMI"> Previous </A> | <A HREF="#GCC optimizations"> Next </A> | <A HREF="#Trouble"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Buggy DPMI">

6.3 Buggy DPMI host or junk in DJGPP.ENV can crash v2.x programs </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I cannot run v2 applications: they all hang or reboot my system, while v1.x apps run OK.  Is this what v2 is all about--getting me out of the DJGPP community? </em> <p>
<hr> <strong>A</strong>: No, believe it or not, we don't want to oust you.  Your problems might be caused by a buggy <dfn>DPMI</dfn> (see <A HREF="#DPMI Spec">DOS Protected Mode Interface</A>) host
installed on your machine.  One DPMI host which is particularly known to be a source of trouble is the one which comes with Novell NWDOS (and also Caldera's OpenDOS, which is a derivative of NWDOS).
Please see if DJGPP programs run when you disable DPMI services of your usual configuration (DJGPP programs will then use the CWSDPMI host supplied with DJGPP).  To turn off the DPMI host built into
Novell NWDOS and Caldera's OpenDOS, either remove the <samp>DPMI=TRUE</samp> parameter from the EMM386 command line, or type <samp>DPMI OFF</samp> from the DOS command prompt.  <p>

Another DPMI host which is known to cause problems in DJGPP is Quarterdeck's QDPMI which comes with QEMM 7.5.  It was reported to cause <samp>Info</samp> and all DJGPP debuggers to crash.  If you use
QDPMI, upgrade to the version 7.53 or later (patches for that version are available from the Quarterdeck's ftp site), or disable QDPMI and use CWSDPMI.

<P>
<P> | <A HREF="#Buggy DPMI"> Previous </A> | <A HREF="#Missing subprograms"> Next </A> | <A HREF="#Trouble"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="GCC optimizations">

6.4 GCC can crash during optimization </A></H3><P>
</CENTER>
<em><strong>Q</strong>: When I compile my program, the compiler crashes, but the problem seems to go away if I compile without optimization. </em> <p>
<em><strong>Q</strong>: The compiler prints "Virtual memory exhausted" and dies while compiling some long functions with some optimization options, such as -funroll-loops or -fforce-addr. </em> <p>
<hr> <strong>A</strong>:  For some programs, this can be caused by an insufficient stack.  Some source files make <samp>cc1.exe</samp> or <samp>cc1plus.exe</samp> need preposterously large amounts of
stack space, but only when you turn on optimizations.  (One user reported that an innocent-looking C source file required 700KB of stack before <samp>cc1.exe</samp> was able to compile it with
optimizations!)  Try stubediting the compiler to enlarge its stack, as described elsewhere in this FAQ, <A HREF="#Internal error">how to enlarge the stack</A>, before you try any other remedies in
this section.  <p>

If GCC reports that it has exhausted virtual memory, you should first see if your DPMI memory plus the swap space is large enough (run <samp>go32-v2</samp> with no arguments to display the available
memory) and make more memory available.  Some programs really need large amounts of memory to compile and/or link.  For example, linking <samp>cc1.exe</samp> is known to consume more than 12MB of
memory.  On Windows 9X, be sure to set the amount of DPMI memory available to the DOS box to the maximum value of 65535K (64MB) in the DOS box property sheets, under <samp>Memory</samp>, as explained
in <A HREF="#Windows9X alloc">how to enlarge memory in the DOS box</A>.  <p>

Some users have reported that GCC seems to run out of virtual memory if TMPDIR environment variable points to a RAM disk which doesn't have enough free space.  Changing TMPDIR to point to a hard disk
would reportedly save the day in those cases.  <p>

Compiling with PGCC or EGCS variants of the GNU compiler can also sometimes run out of virtual memory.  These two compilers are memory hogs, especially when compiling C<tt>++</tt> programs, and at
high optimization levels.  One particular case is when your program makes use of many STL classes.  Try compiling without optimizations.  I'm told that sometimes omitting the -Wall switch prevents
the compiler from using up too much memory (that sounds awfully like a bug to me), so try that as well.  <p>

One user reported that optimization switches force GCC to use a math co-processor, which can cause it to crash on a machine that lacks a numeric processor.  Be sure you didn't delete the
<samp>emu387.dxe</samp> file from your <samp>bin</samp> subdirectory, when you compile on such machines, and that your emulation-related setup is right.  See <A HREF="#Emulation">how to set up FP
emulation</A>, for details.  <p>

GCC can sometimes crash when optimizing, especially when compiling C<tt>++</tt> programs, in particular if your code has some syntactic or semantic bug.  (This is usually a genuine GCC bug, not
something special to DJGPP.)  Upgrade to the latest version of GCC.  If that doesn't help, then narrow the offending code fragment using the <code>#if 0 ...  #endif</code> paradigm.  If this fragment
includes an error, correct it and try again; if it is syntactically and semantically correct, then rewrite it as equivalent, but syntactically different one.  <p>

A GCC switch can sometimes help you zero in on the code fragment that causes GCC to crash.  If you add <samp>-Q</samp> to the GCC command line, it will print the name of every function it compiles.
The function that makes it crash is probably the one whose name is the last one printed, or the one after that.  <p>

As an extreme measure, don't optimize at all, if that's the only way to make your program compile.  <p>

Another reason for crashes could be some problem with your system hardware or the BIOS (like if you set an incorrect number of wait states when accessing memory).  To check, try running the same
compilation on another machine, or review your BIOS settings.  <p>

Yet another cause for such crashes can be connected with excess memory usage that GCC needs when compiling certain programs, which makes some DPMI hosts fail.  For details about this, see
<A HREF="#Internal error">CWSDPMI allocation problems</A>, below.

<P>
<P> | <A HREF="#GCC optimizations"> Previous </A> | <A HREF="#Internal error"> Next </A> | <A HREF="#Trouble"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Missing subprograms">

6.5 Why does GCC say "cannot exec <code>as</code>"? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: When I try compiling a program, GCC aborts saying "Installation problem, cannot exec `as': No such file or directory (ENOENT)".  What does that mean? </em> <p>
<em><strong>Q</strong>: When I try compiling a program, GCC aborts saying "Installation problem, cannot exec `cpp': No such file".  Huh? </em> <p>
<hr> <strong>A</strong>: This usually means that GCC couldn't find some program it needs to run to compile your source.  Check the <code>COMPILER_PATH</code> environment variable or what the
<code>COMPILER_PATH</code> line in the <samp>DJGPP.ENV</samp> file says, and make sure they point to the directory where DJGPP programs reside.  Also check that the named directory has all the
required programs: <samp>cpp.exe</samp>, <samp>cc1.exe</samp>, <samp>cc1plus.exe</samp>, <samp>cxxfilt.exe</samp>, <samp>gasp.exe</samp>, <samp>as.exe</samp>, <samp>ld.exe</samp>, and (for
Objective-C) <samp>cc1obj.exe.</samp>  A typical case is when people fail to install the <a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2gnu/bnu281b.zip">Binutils package</a> and GCC cannot
find <samp>as.exe</samp> (the assembler) and <samp>ld.exe</samp> (the linker).  You can use the <samp>-v</samp> switch to GCC to see what programs it invokes and which one of them causes the fatal
error.  <p>

Beginning with version 2.8.0 of GCC, the place where the pre-processor, <samp>cpp.exe</samp>, and the C and C<tt>++</tt> compilers, <samp>cc1.exe</samp> and <samp>cc1plus.exe</samp>, are installed,
has changed: they are no more in the same directory as <samp>gcc.exe</samp> itself.  If you are using GCC version 2.8.0 or later, and the compiler cannot find <samp>cpp.exe</samp>, read the
installation instructions carefully: the file <samp>problems.txt</samp> explains how to change the settings on <samp>DJGPP.ENV</samp> so that GCC will find the pre-processor.

<P>
<P> | <A HREF="#Missing subprograms"> Previous </A> | <A HREF="#Unknown filetype"> Next </A> | <A HREF="#Trouble"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Internal error">

6.6 What does "Internal compiler error" mean? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: During compilation, GCC prints "Fatal: Error in DJGPP installation.  Environment variable DJGPP is not defined" and then aborts... </em> <p>
<em><strong>Q</strong>: GCC aborts with "Internal compiler error" when compiling a large C<tt>++</tt> program. </em> <p>
<em><strong>Q</strong>: GCC behaves erratically when compiling programs, sometimes crashes with register dump, sometimes compiles okay, sometimes reports "Internal compiler error".  Why is this
happening? </em> <p>
<em><strong>Q</strong>: When I try to compile any program, GCC prints "Abort!" and doesn't compile anything... </em> <p>
<em><strong>Q</strong>: The compiler crashes or dies with "Virtual memory exhausted" when I compile my simple program! </em> <p>
<hr> <strong>A</strong>: The fatal error message about <code>DJGPP</code> not being defined means just that--that your <code>DJGPP</code> environment variable is not defined.  The other two messages
you could see are:

<pre>

      Environment variable DJGPP point to file `XXYYZZ'
      which doesn't exist

</pre>
or

<pre>

      Environment variable DJGPP points to wrong or corrupt file `ABCDEFG'

</pre>
(In both cases, you will see an actual file name instead of <code>XXYYZZ</code> and <code>ABCDEFG</code>.)  These messages mean that <code>DJGPP</code> points to a non-existing directory, or to a
file whose contents are too messed up.  Beginning  with version 2.8.1, GCC refuses to work when the <code>DJGPP</code> variable doesn't point to the actual path name of a valid <samp>DJGPP.ENV</samp>
file, because GCC uses the value of the <code>DJGPP</code> variable to find out where to look for its subprograms like <samp>cpp.exe</samp>, <samp>cc1.exe</samp>, etc.  To solve this, set the
<code>DJGPP</code> variable as the installation instructions (in the file <samp>readme.1st</samp>) describe.  Also, make sure you didn't mess up the beginning of the <samp>DJGPP.ENV</samp> file,
where the value of the <code>DJDIR</code> variable is computed (when in doubt, compare it with the stock <samp>DJGPP.ENV</samp> from the <samp>djdevNNN.zip</samp> distribution).  <p>

A possible cause for the "Abort!" message is that the <code>TMPDIR</code> environment variable points to a non-writable directory.  If you don't set <code>TMPDIR</code> from your
<samp>AUTOEXEC.BAT</samp> or from the DOS prompt, the DJGPP startup code sets it to the <samp>tmp</samp> subdirectory of the main DJGPP installation directory.  If DJGPP is installed on a read-only
drive, like CD-ROM or an unwritable networked drive, this default will not work.  To solve this, set <code>TMPDIR</code> to point to a writable temporary directory.  If <code>TMPDIR</code> is not set
at all, GCC tries to use <code>TEMP</code> and <code>TMP</code>, in that order, so make sure these also point to a valid directory.  <p>

Internal compiler errors (a.k.a. bugs) can also cause GCC to print "Abort!".  This FAQ describes a procedure that allows you to find the spot in the sources where the compiler aborts, see
<A HREF="#GCC optimizations">use of the -Q switch</A>, above.  Once you find the offending code, you could rewrite it and/or submit a bug report to the GCC maintainers.  <p>

When GCC aborts with a message such as "Internal compiler error" or "Exiting due to signal SIGSEGV", it might mean a genuine bug in GCC (which should be reported to FSF), but it can also happen when
GCC requests additional chunk of memory, and the DPMI server fails to allocate it because it exhausts available memory for its internal tables.  Old releases of CWSDPMI could fail like this if an
application asks for a large number of small memory chunks.  Beginning with release 2, CWSDPMI defines a larger (6KB) default heap that is configurable by CWSPARAM program to be anywhere between 3K
and 40K bytes, without recompiling CWSDPMI.  You should upgrade to the latest CWSDPMI if you experience such problems, and if that doesn't help, bump up the size of CWSDPMI heap using CWSPARAM.  <p>

Some innocent-looking programs are known to cause GCC to gobble preposterous amounts of memory, which could cause it to crash or abort after printing "Virtual memory exhausted".  One particular case
of such programs is when you initialize very large arrays.  For example, to compile a source which initializes a char array of 300,000 elements requires more than 60MB(!) of memory.  You should avoid
such constructs in your programs.  <p>

Some programs require very large amounts of stack to compile.  DJGPP programs have a fixed-size stack that is by default 256KB.  If the compiler, <samp>cc1.exe</samp> or <samp>cc1plus.exe</samp>,
doesn't have enough stack to compile a program, it will overflow its stack and crash, or hang, or die with "Internal compiler error".  You can enlarge the stack size of any DJGPP program by running
the <samp>stubedit</samp> program, like this:

<pre>

       stubedit cc1.exe minstack=512k

</pre>
I recommend to enlarge the maximum stack size of <samp>cc1.exe</samp> to at least 512K bytes and that of <samp>cc1plus.exe</samp> to at least 1MB.  Some people report that they needed to enlarge both
the heap of CWSDPMI and the stack of the C<tt>++</tt> compiler to make such problems go away.  <p>

Note that the problems with insufficient stack size have nothing to do with the total available memory as reported by <code>go32-v2</code>.  A compiler can crash because of insufficient stack size
even though it has gobs of memory available to it.  When in doubt, always enlarge the compiler stack size.  <p>

Sometimes, GCC can crash due to problems with your system hardware.  In particular, bad memory chips can cause GCC to behave erratically, since the compiler is a memory-intensive program.  One cause
of problems with accessing memory is incorrect setting of the wait states in your BIOS setup, or too aggressive CPU cache mode that your motherboard cannot support reliably.  Try to play with your
BIOS setup and see if that helps.  <p>

For a program that you wrote, another work-around for the cases where a program crashes due to failure of CWSDPMI to allocate more RAM is to use an alternative algorithm for <code>sbrk</code>, by
putting the following somewhere in your program:

<pre>

       #include &lt;crt0.h&gt;
       int _crt0_startup_flags = _CRT0_FLAG_UNIX_SBRK;

</pre>
Note that the Unix algorithm for <code>sbrk</code> might cause trouble in programs that install hardware interrupts handlers.

<P>
<P> | <A HREF="#Internal error"> Previous </A> | <A HREF="#Make hangs"> Next </A> | <A HREF="#Trouble"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Unknown filetype">

6.7 What does "Unknown filetype" mean? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I get error messages saying "Unknown filetype" from GCC. </em> <p>
<em><strong>Q</strong>: Since a few days ago, whenever I try to run most of the DJGPP programs, they print a message "C:\DJGPP\BIN\prog.exe: not COFF" and just terminate.  Help!!! </em> <p>
<hr> <strong>A</strong>:  It might be that your DJGPP programs and/or <samp>STUBIFY.EXE</samp> are infected by a virus.  (This is <em>not</em> a joke!  It did happen to a few of us and can happen
even to you.)  As the DOS stub prepended to the DJGPP programs is very short, many viruses cannot attach themselves to it without overwriting the beginning of the DJGPP COFF image which specifies
vital information such as location and length of various program sections, therefore triggering this error from the code in the stub that loads the COFF image.  <p>

Another possible cause of the "Unknown filetype" message is that you mix a v2.0 <samp>gcc.exe</samp> driver with <samp>cc1plus.exe</samp>, <samp>cc1.exe</samp> or other programs from an old v1.x
distribution.

<P>
<P> | <A HREF="#Unknown filetype"> Previous </A> | <A HREF="#Info cannot find Top"> Next </A> | <A HREF="#Trouble"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Make hangs">

6.8 Compiler hangs, but only when invoked from Make </A></H3><P>
</CENTER>
<em><strong>Q</strong>: My compiles run OK from the command line, but hang or crash when I invoke the compiler from Make. </em> <p>
<em><strong>Q</strong>: When I try to compile something, I get a message "16-bit DPMI not supported". </em> <p>
<hr> <strong>A</strong>: Be sure you aren't inadvertently invoking some 16-bit programs, such as Borland's Make or <samp>cpp.exe</samp> from Borland C.  GCC cannot run them, and cannot run under
Borland's Make (because Borland's programs are 16-bit DPMI clients, and the DPMI 0.9 spec doesn't allow mixing them with 32-bit DPMI clients such as DJGPP programs).  It might be that another program
called <samp>make.exe</samp> or <samp>cpp.exe</samp> is found earlier on your <code>PATH</code> than the Make and the preprocessor which came with DJGPP.  Moving DJGPP's <samp>bin</samp> directory to
the beginning of your <code>PATH</code> will usually solve these problems.  <p>

Note that if you try to mix 16-bit and 32-bit DPMI clients in Windows DOS box (like use Borland's Make to run GCC, or invoking Borland's <samp>cpp.exe</samp> under GCC), the DOS box will usually
crash.  So this problem is not specific to CWSDPMI.  <p>

If you <em>must</em> use a non-DJGPP compiler or another utility together with DJGPP programs, one solution would be to find a version of that utility that doesn't use the 16-bit DPMI services.  For
example, many DOS compilers have a real-mode version that won't conflict with DJGPP.  <p>

If you use Make compiled under DJGPP v1.x, you will also experience all kinds of trouble when invoking programs compiled under DJGPP v2.  That's because v1.x programs cannot spawn v2 programs
directly (the v1.x program sees that the child is a DJGPP program and tries to call <samp>go32</samp> to run it, but v1's <samp>go32</samp> cannot run v2 programs).  The result usually will be that
the child either crashes or silently exits.  If that's your problem, be sure to upgrade your <samp>Make</samp> to the port distributed with v2. (Note that v2.x programs generally know how to spawn
both v1.x and v2.x programs.)  You can use <samp>go32-v2</samp> to work around this limitation (see <A HREF="#go32-v2">description of go32-v2</A>, below), but I suggest doing that only if you
absolutely cannot upgrade to v2's <samp>Make</samp>.  <p>

Some users report that v1.x programs might sometimes hang or reboot the machine when invoked from v2.x Make.  The reason for this is a known bug in the versions of <samp>go32-v2.exe</samp> program
distributed with DJGPP v2.0 and 2.01: it would not restore the keyboard handler after the COFF image it runs exits.  To work around that bug, don't touch the keyboard throughout the entire run of
Make.

<P>
<P> | <A HREF="#Make hangs"> Previous </A> | <A HREF="#Info crashes"> Next </A> | <A HREF="#Trouble"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Info cannot find Top">

6.9 Info doesn't like some files </A></H3><P>
</CENTER>
<em><strong>Q</strong>: When I run the Info browser, it tells me it cannot find the node "Top". </em> <p>
<em><strong>Q</strong>: Sometimes, when I mistype the name of the Info topic, <samp>info.exe</samp> seems to hang... </em> <p>
<hr> <strong>A</strong>:  Check your installation of info files.  The file <samp>DJGPP.ENV</samp> in the root of your DJGPP installation mentions the variable <code>INFOPATH</code> which should point
to the directory where Info looks for its files.  It must find there a file named <samp>DIR</samp>, the file you are trying to read, and other files with <samp>.iNN</samp> or <samp>.NN</samp>
extension, where <samp>NN</samp> is a number.  Also, make sure you didn't edit the beginning of <samp>DJGPP.ENV</samp>, where the value of <code>%DJDIR%</code> is computed; if you did, try the
original <samp>DJGPP.ENV</samp>.  <p>

Also, the <code>DJGPP</code> environment variable should be set to point to the full pathname of the file <samp>DJGPP.ENV</samp>.  See <A HREF="#Missing headers or libraries">problems with DJGPP
variable setting</A>, for a description of some frequent problems with setting the <code>DJGPP</code> variable.  <p>

Assuming the above checks OK, and all the necessary info files are indeed installed in those directories (did you remember to give that <samp>-d</samp> switch to <samp>PKUNZIP</samp> when unzipping
all DJGPP packages?), it might be that you have an old version of <samp>info.exe</samp>.  Upgrading to version 3.12 or later should solve several problems which cause Info to complain about the "Top"
node, or at least make its error messages more self-explaining.  <p>

Another possibility is that the file <samp>DIR</samp> or the Info file that you want to browse is corrupted.  For example, it might be a compressed file, but without the telltale <samp>.gz</samp> or
similar extension that tells <samp>info.exe</samp> to decompress it.  You could examine the offending file(s) with a text editor, and re-install them as needed.  <p>

If you invoke Info with a name of a topic that is non-existent or not installed on your system, and you don't have a <code>man</code> command or its clone installed, versions of Info before 3.12
would wait for 15 seconds before they print an error message and exit.  If you think Info is wedged, wait for 15 seconds and see what happens then.  The DJGPP port of Texinfo 3.12 removes this
misfeature, so upgrade if you can.

<P>
<P> | <A HREF="#Info cannot find Top"> Previous </A> | <A HREF="#Bash crashes"> Next </A> | <A HREF="#Trouble"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Info crashes">

6.10 Info Crashes During Startup </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Whenever I invoke <samp>info.exe</samp>, it immediately crashes!  How can I use DJGPP without reading all those wonderful docs?? </em> <p>
<hr> <strong>A</strong>: One possible reason for this is a bug in <code>EMM386</code> shipped with some versions of DOS 6.x.  This bug is only triggered if your system loads the
<code>DISPLAY.SYS</code> driver, usually to display non-US characters supported by national code pages.  In addition, this bug causes Info to crash only if it is run in 35- or 40-line display mode;
any other display size avoids the problem.  (The default display mode is 40 lines, as set in the <samp>[info]</samp> section of <samp>DJGPP.ENV</samp>.)  So either switching to another display size,
or removing either <code>EMM386</code> or <code>DISPLAY.SYS</code> from <samp>CONFIG.SYS</samp>, should prevent Info from crashing.  <p>

If you use DJGPP v2.0, yet another cause of crashes in <samp>Info</samp> might be trailing whitespace in the <samp>DJGPP.ENV</samp> file.  The telltale signs of this failure are a stack dump that is
bogus or doesn't start with your `main' function, or a series of SIGSEGV that won't stop.  Actually, this is a bug in the DJGPP v2.0 startup code, so any v2.0 program could crash in this way, but
since the last section of stock v2.0 <samp>DJGPP.ENV</samp> belongs to <samp>Info</samp>, it is the one which suffers most from this bug.  Make sure your <samp>DJGPP.ENV</samp> doesn't have a
<kbd>^Z</kbd> character at the end (some DOS editors put it if you edit the file), and doesn't end with a blank line.  Alternatively, upgrade to DJGPP v2.01 or later, where that bug is fixed.

<P>
<P> | <A HREF="#Info crashes"> Previous </A> | <A HREF="#Linker accesses other drives"> Next </A> | <A HREF="#Trouble"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Bash crashes">

6.11 Why does Bash crash? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Bash crashes on me when I invoke shell scripts... </em> <p>
<em><strong>Q</strong>: Why does Bash say "pipe error: Access denied" when I try to run two programs via a pipe? </em> <p>
<em><strong>Q</strong>: When I run certain complex shell scripts, Bash sometimes prints a message saying "Cannot make a child for command substitution: (null)".  What gives?? </em> <p>
<hr> <strong>A</strong>: If Bash crashes when you invoke shell scripts, check whether those scripts have <samp>#!/bin/sh</samp> on their first line.  If they do, the most probable reason for the
crashes is that you don't have <samp>sh.exe</samp> anywhere on your <code>PATH</code> (it does <em>not</em> have to be in <samp>/bin</samp>!).  Either copy <samp>bash.exe</samp> into
<samp>sh.exe</samp>, or create a "symlink" to <samp>bash.exe</samp>, like this:

<pre>

      ln -s c:/djgpp/bin/bash.exe c:/djgpp/bin/sh.exe

</pre>
(replace <samp>c:/djgpp</samp> with the actual pathname of your DJGPP installation).  <p>

Error messages about pipes and command substitution usually mean that your <code>TMPDIR</code> environment variable points to an invalid drive.  Old ports of Bash had problems with
<code>`command`</code> substitution, so make sure you have the latest binaries.

<P>
<P> | <A HREF="#Bash crashes"> Previous </A> | <A HREF="#General trouble"> Next </A> | <A HREF="#Trouble"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Linker accesses other drives">

6.12 Why does the Linker Access my CD Drive? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Why is it that every time I link a program, the CD-ROM drive is accessed? </em> <p>
<hr> <strong>A</strong>: This is a bug in Binutils 2.7 and in an early release of Binutils 2.8.1: the linker would always try to look for its script <samp>djgpp.djl</samp> in a certain directory on
the <samp>D:</samp> or <samp>E:</samp> drive (the former in Binutils 2.7, the latter in 2.8.1), no matter which disk uses that letter (these accesses usually go unnoticed with hard disks, but are
visible with CD-ROMs, Zip drives, or other slower devices).  Download and install the latest <samp>bnuNNNb.zip</samp> archive you can find on SimTel.NET mirrors, and the problem should go away.  <p>

You can see which directories on what drives does the linker try to access by passing the <samp>-verbose</samp> option to the linker.  Here's an example:

<pre>

      gcc -o hello.exe hello.o -Xlinker --verbose &gt; linker.log

</pre>
This redirects the linker log to a file which you can then examine.  Since the list of directories accessed by the linker doesn't depend on the program being linked, you can try this with any trivial
program.

<P>
<P> | <A HREF="#Linker accesses other drives"> Previous </A> | <A HREF="#Redirect"> Next </A> | <A HREF="#Trouble"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="General trouble">

6.13 Other kinds of trouble </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I've installed DJGPP just like explained in the <samp>README.*</samp> files, but when I run gcc, my machine crashes/hangs/needs cold boot. </em> <p>
<em><strong>Q</strong>: I get errors I can't figure out when I try to compile something. </em> <p>
<hr> <strong>A</strong>:  Add the <samp>-v</samp> switch to the GCC command line and run it again.  It will print all the subprograms (compiler passes) it is running.  Then you can see which
subprogram caused the error, or where your machine crashes.  This might give you a hint on what's wrong.  <p>

One cause of such problems might be that your system is set up inefficiently.  If GCC doesn't get enough free RAM, it will run very slowly, and you might think it crashed when in fact it didn't.
(This kind of problem usually happens on memory-starved machines.)  Invoking <code>go32-v2</code> with no arguments will report the amount of memory available to DJGPP programs; large programs might
require up to 20MBytes to compile, sometimes more.  If you run from the DOS box on Windows 9X, set its DPMI memory property to 65535KB (64MB) and try again.  Check out the <A HREF="#Config">system
configuration advice</A>, earlier in this FAQ list, for other suggestions about your system configuration.  <p>

Sometimes, if the <code>TMPDIR</code> environment variable points to a full disk, GCC may hang or crash as well.  Make sure you have enough free disk space where <code>TMPDIR</code> points.

<P>
<P> | <A HREF="#General trouble"> Previous </A> | <A HREF="#Deja vu"> Next </A> | <A HREF="#Trouble"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Redirect">

6.14 I cannot keep up with the error messages </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I want to read all the error messages that GCC throws at me, but there are so many that I can't keep up.  How can I redirect them to a file? </em> <p>
<em><strong>Q</strong>: When I add <samp>-v</samp> to the GCC command line, how can I put all the voluminous output into a file, so I don't miss anything when reporting a problem? </em> <p>
<em><strong>Q</strong>: I have this nifty graphics program which bombs from time to time, but the registers and traceback info are hidden by the graphics display.  How can I see it? </em> <p>
<hr> <strong>A</strong>:  Error messages are usually written to <code>stderr</code>, and stock <samp>COMMAND.COM</samp> cannot redirect it.  There are several alternatives to do that:

<ol>
<li> You can use a shell smarter then <samp>COMMAND.COM</samp>, such as <samp>4DOS</samp> or <samp>bash</samp>, which knows how to redirect standard error stream to a file.  4DOS is shareware and can
be found <a href="ftp://ftp.simtel.net/pub/simtelnet/msdos/4dos/4dos601.zip">on SimTel.NET</a>, while <samp>bash</samp> is available from the <samp>v2gnu</samp> directory of DJGPP archives
<a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2gnu/bsh1147b.zip">on SimTel.NET</a>.

<li> You can also run your program under any one of the programs which save all screen output of programs they spawn in a file.  I suggest using a program called <samp>SCRIPT</samp>, which is similar
to its Unix namesake.  It has an advantage of saving everything which goes to screen <em>and</em> showing it on the screen at the same time.  You can find
<a href="ftp://ftp.simtel.net/pub/simtelnet/msdos/screen/script11.zip">SCRIPT on SimTel.NET</a>.

<li> Or you can use the <samp>REDIR</samp> program which comes with DJGPP.  It also redirects standard output and/or standard error to a file, but you don't get a chance to look at the output while
the program runs.  Here's how to run GCC with <samp>REDIR</samp>:

<pre>

       redir -o gcc.log -eo gcc -v ...

</pre>
(put the rest of the GCC command line instead of the dots).  The messages printed by GCC will be written to the file <samp>gcc.log</samp>.

</ol>
<P>
<P> | <A HREF="#Redirect"> Previous </A> | <A HREF="#Totally lost"> Next </A> | <A HREF="#Trouble"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Deja vu">

6.15 How to search DJGPP archives for similar problems </A></H3><P>
</CENTER>
<em><strong>Q</strong>: OK, I have all this voluminous output of <samp>gcc -v</samp>, but I still have no clue. </em> <p>
<hr> <strong>A</strong>:  Your problem might be one which has already been posted and solved on the DJGPP News group.  <a href="mailto:dj@delorie.com">DJ Delorie</a> has set up a searchable News group
archive on <a href="http://www.delorie.com/djgpp/mail-archives/">his Web server</a>.  You can search the <em>entire</em> mailing list archives in just a few seconds.  DJ's archives are always up to
date, as they receive and store all posted messages automatically, but the index is updated every 24 hours, so the last day might not be searchable yet.  To search the DJGPP archives, point your Web
browser to the above URL and specify a list of keywords pertinent to your problem.  You will get a list of messages which include those keywords; clicking on any of the messages will get the full
text of that message.

<P>
<P> | <A HREF="#Deja vu"> Previous </A> | <A HREF="#Trouble"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Totally lost">

6.16 How to ask DJGPP gurus for help </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I've read this monstrously-large FAQ, searched the news group archives, but didn't find anything helpful.  I am totally lost.  <strong>Help!!!</strong> </em> <p>
<em><strong>Q</strong>: I don't have time to download all these messages, not to mention looking through them.  Can't you DJGPP gurus help me?  <strong>Please??</strong> </em> <p>
<hr> <strong>A</strong>:  DJGPP News group is famous for its outstanding user support.  To get a fast and effective solution to your problem, you will have to supply the relevant info about your
system, and describe exactly how things went wrong for you.  To gather this info, do the following:

<ul>
<li> At the DOS command prompt, type <kbd>set > environ.lst</kbd>, then press &lt;Enter&gt;.

<li> Invoke the <samp>go32-v2</samp> program (it's in your <samp>bin/</samp> subdirectory) and save its output.

<li> Post to the <a href="news:comp.os.msdos.djgpp">comp.os.msdos.djgpp</a> news group or send electronic mail to the <a href="mailto:djgpp@delorie.com">DJGPP mailing list</a> and put into your
message the description of your calamity, the contents of the file <samp>ENVIRON.LST</samp>, the output of <samp>go32-v2</samp>, the contents of your <samp>AUTOEXEC.BAT</samp> and
<samp>CONFIG.SYS</samp>, and what GCC printed during compilation with the <samp>-v</samp> switch (if your problem is that GCC won't work).

<li> If your problem involves a program that crashes and prints a stack dump, please post that stack dump in its entirety; do <strong>not</strong> omit any details from the crash dump.  It's best to
run <code>symify</code> on the stack dump, and post the output of <code>symify</code>:

<pre>

       symify -o dumpfile yourprog

</pre>
(See <A HREF="#Crash traceback">detailed description of symify</A>, for more details.  <p>

<li> Allow for 2-3 days (more on weekends) for all the reply messages to come in, then act according to what they recommend.
</ul>
Be warned that you might get several dozen messages in reply to your request; this is not meant to overflow your mailbox or sabotage your relationship with your system manager, it's just the usual
friendly response of fellow DJGPP'ers to your lonely cry for help.  Some of the replies might suggest what you already checked and reported in your original message, or even miss the point
altogether.  Be ready for this and don't flame us for trying to help you as much as we can.

<P>
<P> | <A HREF="#Trouble"> Previous </A> | <A HREF="#Compiling"> Next </A> | <A HREF="#Top"> Up </A> | <P>
<P>
<P>
<CENTER>
<H2>

<A NAME="Compiler performance">

7. Compiler and Linker Performance </A></H2><P>
</CENTER>
  This chapter deals with speed of compilation and linking under DJGPP, and how they could be improved.

  If you already know whether the compiler or the linker is the slow part, go to the appropriate section; if not, add <samp>-v</samp> to your GCC command line and run it again.  With the
<samp>-v</samp> switch, GCC will print all the programs it invokes, and you will be able to tell which one is taking most of the time.

<p>
<ul>
<li><A HREF="#Slow compiler"> 7.1 Slow compiler--Are your compiles slow?  </A>
<li><A HREF="#Slow linker"> 7.2 Slow linker--How to boost the linking speed.  </A>
</ul>
<P>
<P> | <A HREF="#Compiler performance"> Previous </A> | <A HREF="#Slow linker"> Next </A> | <A HREF="#Compiler performance"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Slow compiler">

7.1 Slow Compilation </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Why GCC is compiling sooo slooowww? </em> <p>
<hr> <strong>A</strong>:  That depends on what you mean by "slow".  The following table gives "normal" gcc compilation speed, in source lines per second, on a 166-MHz Pentium:

<pre>

                 |  Without optimization  |  With -O2
      -----------+------------------------+------------
      C++ source |        800             |   400
      -----------+------------------------+------------
      C   source |        1800            |   1000

</pre>
<p>

On machines faster or slower than P166, scale these numbers accordingly.  For example, i486/DX2-66 is about 4 times slower than P166.  When comparing to this table, don't forget to count header files
your program <code>#include's</code> in the total line count.  And <strong>don't</strong> check compilation speed on very short programs (like the classic <samp>"Hello, world!"</samp>), because the
overhead of loading the multiple passes of the compiler will completely hide the compiler performance.  It is also useful to run the compilation twice in succession, especially if you have a disk
cache installed, to prevent the overhead of the first load from skewing the results.  <p>

If your results are close to these (deviations of a few percent are considered "close" here), then that's as fast as you can get with GCC.  If they are <em>significantly</em> lower, you may indeed
have a problem; read on.  <p>

First, check to see if GCC pages to disk when it compiles.  This is manifested by a heavy disk traffic which won't go away even if you have a large write-back disk cache installed.  To be sure,
disable the virtual memory services for your DPMI host (for <samp>CWSDPMI</samp>, load it before your program with the <samp>-s-</samp> switch, or use the <samp>CWSPARAM</samp> program to point the
swap file to a non-existent drive), or use or <samp>CWSDPR0</samp> or <samp>PMODE/DJ</samp> as the DPMI host, and then run the compilation again; if the compiler aborts with an error message saying
there isn't enough memory, then it <em>was</em> paging in your original environment.  <p>

If paging does happen, you need to free more extended memory.  If you have a RAM disk, make it smaller, or don't use it at all (it only makes compiles run about 10% faster), or make your disk cache
smaller (but don't discard the disk cache altogether); if you have other programs which use extended RAM, make them use less of it.  Failing all of the above, buy more RAM (see
<A HREF="#Reasonable hardware">the description of reasonable configuration</A>).  Also see <A HREF="#Config">recommendations for optimal software configuration</A>.  <p>

If GCC doesn't page, check the settings of your disk cache.  If you don't use a cache, install one--this can slash your compilation times by as much as 30%, more so when compiling a large number of
small files.  If you already have a cache, enable its delayed-write (a.k.a. write-back, a.k.a.  staggered-write) operation.  Some people disable the delayed-write feature for safety reasons, to avoid
losing files due to system crashes.  If you are worried about this, you can usually gain performance without sacrificing safety by enabling delayed-write together with an option that causes the cache
to flush the write-behind data before the system returns to the DOS prompt.  (For <samp>SmartDrv</samp> disk cache, this is achieved by specifying <samp>/N/F</samp> switches instead of
<samp>/X</samp>.)  GCC usually gains a lot when you set up your cache in such a way, because each compiler pass (pre-processor, compiler, assembler) must write temporary files that are used by the
following passes.  <p>

It is also worthwhile to check the settings of your system BIOS.  In particular, the following items should be checked against your motherboard vendor recommendations:

<pre>

     Internal and external CPU cache....set to Enable
     CPU cache scheme...................set to Write-back, if possible
     DRAM and SRAM wait states..........vendor-recommended optimal values

</pre>
Incorrect or suboptimal settings of the above items can explain as much as 30% performance degradation on 486 machines, and as much as 500% (!) if you have a Pentium CPU.

<P>
<P> | <A HREF="#Slow compiler"> Previous </A> | <A HREF="#Compiler performance"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Slow linker">

7.2 Slow Linking </A></H3><P>
</CENTER>
<em><strong>Q</strong>: The compiler finishes in a few seconds, but then the linker grinds away for more than a minute, even on a very short program... </em> <p>
<hr> <strong>A</strong>:  Try linking the trivial <samp>"Hello, world!"</samp> program; it should take no more than 7-10 seconds on a 486, 3-5 seconds on a Pentium.  If you see much slower linking on
your system, then the following advice might help you.  <p>

A few users have reported that they got much faster linking after they've stub-edited <samp>ld.exe</samp> to decrease the transfer buffer size to 4KB or even 2KB.  This speedup effect is usually seen
when DJGPP is installed on a networked drive or on a compressed disk, and sometimes when you run DJGPP from a DOS emulator (such as OS/2 DOS box); when DJGPP is installed on a local disk drive on
plain DOS or Windows, linking speed is not affected by the size of transfer buffer.  The reason for this seems to be the large number of calls to <code>fseek</code> function issued by the linker,
which defeats the benefits of aggressive buffering imposed by the default 16KB size of the transfer buffer.  (DJGPP v2.02 will introduce a heuristic into the buffering of <code>stdio</code>
functions, whereby the size of the buffer for each <code>FILE *</code> stream adapts itself to the behavior of that stream--grows when the stream is read sequentially, and shrinks when it is seeked.
This should eliminate the need for stubediting <samp>ld.exe</samp> and other similar programs.)  <p>

If you use a disk cache, make sure you enable its write-back (a.k.a.  delayed-write) operation.  Some people disable the delayed-write feature for safety reasons, to avoid losing files due to system
crashes.  If you are worried about this, you can usually gain performance without sacrificing safety by enabling delayed-write together with an option that causes the cache to flush the write-behind
data before the system returns to the DOS prompt.  For <samp>SmartDrv</samp> disk cache, this is achieved by specifying <samp>/N/F</samp> switches instead of <samp>/X</samp>.  <p>

For very large (several MBytes) executables which are built from a large number of small source files, the link (as opposed to the compilation) stage might be the one which needs more RAM than you
have free, and thus be the bottleneck of the time it takes to build your program.  Check that the size of the executable isn't larger than the amount of your free RAM.  If it is, then it might make
sense to use a smaller (or even no) disk cache, and allow the linker as much physical RAM as it needs.  Make sure that the linker wasn't stub-edited to make its transfer buffer too small.  <p>

Another reason for slow linking might be that the <samp>DJGPP.ENV</samp> file by default sets <code>TMPDIR</code> to a <samp>tmp/</samp> subdirectory of the main DJGPP installation directory; if
DJGPP is installed on a networked drive, this means all your temporary files go back and forth through the network (and networked disks are usually not cached on your PC).  In such cases, setting
<code>TMPDIR</code> to a directory on your local drive, or to a RAM disk, would probably make linking faster.  <p>

Generally, it is not recommended to install DJGPP on a networked drive.  If you have to, you should configure your network interface for best performance.  Consult your network administrator.

<P>
<P> | <A HREF="#Compiler performance"> Previous </A> | <A HREF="#Running"> Next </A> | <A HREF="#Top"> Up </A> | <P>
<P>
<P>
<CENTER>
<H2>

<A NAME="Compiling">

8. Compile-time and Link-time Problems </A></H2><P>
</CENTER>
  Being of a Unix origin, GCC has a somewhat different flavor of command-line syntax and its peculiar compilation and link algorithms.  It also has a plethora of optional switches, some of them obscure
or semi-documented.  These are known to confuse users, especially those who had previous experience with DOS-based C compilers.  <p>

  This chapter explains how to solve some of those problems which tend to appear when compiling and linking your programs.

<p>
<ul>
<li><A HREF="#Missing headers or libraries"> 8.1 Missing headers or libraries--GCC can't find header files/libraries.  </A>
<li><A HREF="#Missing C++ headers"> 8.2 Missing C++ headers--GCC can't find C<tt>++</tt> header files.  </A>
<li><A HREF="#C++ comments"> 8.3 C++ comments--Avoid C<tt>++</tt> comments in C programs.  </A>
<li><A HREF="#Which language"> 8.4 Which language--GCC resolves it by looking at filename                                  extensions.  </A>
<li><A HREF="#Objective C"> 8.5 Objective C--Can't use ObjC 2.6.0.  </A>
<li><A HREF="#DJGPP-specific"> 8.6 DJGPP-specific--How to write DJGPP-specific fragments.  </A>
<li><A HREF="#Unresolved externals"> 8.7 Unresolved externals--Where are those library functions?  </A>
<li><A HREF="#Which library"> 8.8 Which library--Which library has which functions?  </A>
<li><A HREF="#Libraries order"> 8.9 Libraries order--Which libraries to put first?  </A>
<li><A HREF="#Still unresolved"> 8.10 Still unresolved--C<tt>++</tt> misses complex and iostream functions.  </A>
<li><A HREF="#djgpp_first_ctor"> 8.11 djgpp_first_ctor--Why are these unresolved?  </A>
<li><A HREF="#Large image"> 8.12 Large image--Static arrays bloat C<tt>++</tt> program image.  </A>
<li><A HREF="#Large executable"> 8.13 Large executable--Why is DJGPP .EXE so large?  </A>
<li><A HREF="#Linker script"> 8.14 Linker script--Problems with it can cause linker to fail.  </A>
<li><A HREF="#No EXE"> 8.15 No EXE--Novell Netware fails STUBIFY.  </A>
<li><A HREF="#Large object files"> 8.16 Large object files--Linker fails for large objects/libraries.  </A>
<li><A HREF="#Allegro"> 8.17 Allegro--Problems building Allegro library.  </A>
<li><A HREF="#NULL redefined"> 8.18 NULL redefined--Some C<tt>++</tt> headers redefine NULL.  </A>
<li><A HREF="#C++ exceptions"> 8.19 C++ exceptions--GCC before 2.8.1 doesn't support them.  </A>
<li><A HREF="#Assembly output"> 8.20 Assembly output--How to generate assembly code with GCC.  </A>
<li><A HREF="#movedata.h"> 8.21 movedata.h--This header triggers compiler errors.  </A>
<li><A HREF="#Libraries"> 8.22 Libraries--How to create object libraries.  </A>
</ul>
<P>
<P> | <A HREF="#Compiling"> Previous </A> | <A HREF="#Missing C++ headers"> Next </A> | <A HREF="#Compiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Missing headers or libraries">

8.1 GCC can't find headers or libraries </A></H3><P>
</CENTER>
<em><strong>Q</strong>: When I run the compiler it says it couldn't find header files and/or libraries.  But the headers and libraries are all there, so why won't it find them? </em> <p>
<em><strong>Q</strong>: When I link my programs, ld.exe complains that it cannot open crt0.o, although that file exists in the lib subdirectory... </em> <p>
<em><strong>Q</strong>: I tried to compile a program, but GCC complained about missing header files <samp>netdb.h</samp> and <samp>socket.h</samp>.  Can somebody please mail me those headers? </em>
<p>
<em><strong>Q</strong>: Why does GCC complain that it "cannot open -lgcc: File format not recognized"? </em> <p>
<hr> <strong>A</strong>: When a compiler complains about missing files, you need first to find out whether they at all exist on your system.  For C header files, look in the <samp>include</samp>
directory and its subdirectories; for C<tt>++</tt> header files, look in the <samp>lang/cxx</samp> directory and its subdirectories; for libraries look in the <samp>lib</samp> directory.  Some header
files and object files which are specific to a certain GCC version install into the <samp>lib/gcc-lib/djgpp/X.YZ</samp> directory (where <samp>X.YZ</samp> is the GCC version number, e.g. 2.81), so
look there as well.  <p>

If a header file indeed is not there, and you cannot find it in the <samp>djdevNNN.zip</samp> and <samp>gppNNNb.zip</samp> distributions, it probably means that header belongs to a package which
isn't part of the basic DJGPP distribution.  You need to find that package and install it.  It is important to understand that if a package is missing, getting hold of the header files like
<samp>socket.h</samp> is not enough: you need the library of the functions whose declarations and prototypes are in the header.  <p>

If the header or the library <em>does</em> in fact exist on your machine, then in order for the compiler to find them, you should have the following variable set in your environment(<i><b>Note:
</b>The example uses Unix-style forward slashes, but DOS-style backslashes can also be used.</i>):

<pre>

      set DJGPP=c:/djgpp/djgpp.env

</pre>
and it should point to the correct path of the file <samp>DJGPP.ENV</samp> on your system; the file itself is in
<a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2/djdev201.zip">djdev201.zip</a> in the DJGPP distribution.  In the above example it is assumed to be in the <samp>C:/DJGPP</samp> directory,
but you should set it as appropriate for your installation.  <p>

Most of the problems with "missing" files, including the highly-confusing message about <samp>-lgcc</samp> ("File format not recognized"), are usually caused by having the <code>DJGPP</code> variable
set incorrectly.  The following describes some problems with defining <code>DJGPP</code> which pop up frequently on the DJGPP forum.  <p>

Sometimes, people make errors in their <samp>AUTOEXEC.BAT</samp> that cause the <var>DJGPP</var> variable to be defined incorrectly, or not defined at all (some of the more common errors are listed
below).  To check what is the actual setting, type from the DOS prompt:

<pre>

      set > env.lst

</pre>
then examine the contents of the file <samp>env.lst</samp>.  You should see there a line like this:

<pre>

      DJGPP=c:/djgpp/djgpp.env

</pre>
If a line such as this isn't there, you should investigate the cause for this (see below for some of the possibilities).  <p>

Many problems with setting <var>DJGPP</var> happen when people put excess blanks around the <kbd>=</kbd> character, which has the effect of defining "DJGPP " (with the blank) which is not the same as
"DJGPP" (without blanks).  You should make sure there are no such excess blanks, or DJGPP won't find its files.  <p>

Another possible cause of <var>DJGPP</var> variable not being set is that you invoke another batch file from your <samp>AUTOEXEC.BAT</samp> before the line that sets <var>DJGPP</var>.  Make sure such
batch files are invoked with the <code>CALL</code> statement, because otherwise the subsidiary batch file will never return to process the rest of <samp>AUTOEXEC.BAT</samp> (that's a "feature" of DOS
batch file processing).  <p>

The code that processes <samp>DJGPP.ENV</samp> assumes that this file resides in the main DJGPP installation directory.  If that assumption is wrong, the compiler (and some other DJGPP programs)
might fail to find some of the files or auxiliary programs they need.  <em>Do NOT move DJGPP.ENV to any other directory!</em> <p>

Note that if you run DJGPP on Windows/NT, you <strong>cannot</strong> use long names of the directories in the pathname of <samp>DJGPP.ENV</samp> when you set the above variable in the environment;
you should use their 8+3 aliases instead.  That's because Windows/NT doesn't support the LFN API for DOS programs, so the DJGPP startup code won't be able to find the <samp>DJGPP.ENV</samp> file
using its long pathname.  For example, the following setting <strong>won't work</strong> on Windows/NT because <samp>Development</samp> is longer than 8 characters:

<pre>

      set DJGPP=c:/Programs/Development/Djgpp/djgpp.env

</pre>
If the DJGPP variable is set correctly, then check the following possible causes of this misbehavior:

<ul>
<li> You have edited the file <samp>DJGPP.ENV</samp> in a way that invalidated some of the settings there; try restoring the original file from the distribution to see if that fixes your problems.
Be sure you are familiar with the syntax of <samp>DJGPP.ENV</samp> before you edit it.  The DJGPP server has a page with a
<a href="http://www.delorie.com/djgpp/doc/kb/kb_7.html#SEC7">description of the <samp>DJGPP.ENV</samp> syntax</a>

The syntax of <samp>DJGPP.ENV</samp> is also described in the <cite>DJGPP Knowledge Base</cite>, which comes with the <samp>djdev</samp> distribution.

<li> Some older versions of Novell Netware cause the linker to fail if the libraries or the startup file <samp>crt0.o</samp> reside on a networked drive.  This is due to a peculiarity of Novell that
happens to fail the library function <code>stat</code> in some cases.  The exact reason of the failure has been identified, and the library which comes with DJGPP v2.01 includes a version of
<samp>stat</samp> that works around that problem, so the linker from v2.01 is free of this bug, and upgrading will solve this.  Another solution would be to upgrade your Novell software; version 4.x
is reportedly free of this problem, even if you use DJGPP v2.0.

<li> You renamed the <samp>gcc.exe</samp> driver to some other name.  In this case, you should edit the file <samp>DJGPP.ENV</samp> to add a section named after the new name of GCC, which is an exact
duplicate of the section called <samp>[gcc]</samp>.  DJGPP start-up code uses this file to find environment variables which it should put into the environment before the <code>main</code> function is
called, but it searches for the relevant variables using the actual name of the program, so when you rename the executable, it can't find its section and doesn't put the necessary variables into the
environment.

<li> Your <samp>FILES=</samp> setting in <samp>CONFIG.SYS</samp> is insufficient, so GCC runs out of available handles.

You should have at least <samp>FILE=15</samp> in your <samp>CONFIG.SYS</samp>, more on Windows.  See <A HREF="#File handles">details about FILES= directive</A>.

<li> Your DJGPP directory is on a networked drive, and the network redirector doesn't have enough available handles in its configuration.

Presumably, there should be a parameter in some configuration file or a command-line argument to one of the network drivers which sets the number of files that can be open simultaneously on a
networked drive; you should set it to be at least 15.

<li> You passed the <samp>-B</samp> switch to GCC.  This overrides the default location of <samp>crt0.o</samp> and if you follow <samp>-B</samp> with a directory other than that where
<samp>crt0.o</samp> resides, the linker won't find it.

You should not need to use the <samp>-B</samp> or <samp>-L</samp> switches at all if your installation is correct and the <code>DJGPP</code> variable points to the main installation directory,
because GCC should be able to figure out all the linker switches itself.  If linking fails without explicit <samp>-L</samp> or <samp>-B</samp>, check out above for the possible causes.
</ul>
<P>
<P> | <A HREF="#Missing headers or libraries"> Previous </A> | <A HREF="#C++ comments"> Next </A> | <A HREF="#Compiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Missing C++ headers">

8.2 GCC can't find C<tt>++</tt> headers </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I installed all the packages, but GCC complains it can't find <samp>iostream.h</samp>, <samp>_string.h</samp> and other C<tt>++</tt> headers.  Where can I find those header
files? </em> <p>
<em><strong>Q</strong>: GCC complains about being unable to find <samp>Complex.h</samp>, <samp>Regex.h</samp> and other header files which start with a capital letter, and I indeed don't see them in
my <samp>lang/cxx/</samp> directory.  Where are they? </em> <p>
<em><strong>Q</strong>: My C<tt>++</tt> program needs header files whose filenames exceed the 8+3 DOS filename restrictions, like <samp>stdiostream.h</samp> and <samp>streambuf.h</samp>, and GCC
cannot find those files.  How in the world can I write portable C<tt>++</tt> programs?? </em> <p>
<hr> <strong>A</strong>:  All C<tt>++</tt> include files are packaged as part of the
<a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2gnu/gpp281b.zip">GNU C<tt>++</tt> compiler distribution zip file</a>, so if you didn't install it, GCC won't find them.  Files whose names
usually start with a capital letter, on MS-DOS have an underscore `_' prepended so they can be distinguished from <samp>complex.h</samp>, <samp>regex.h</samp> and the like under case-insensitive DOS.
Change <code>Complex.h</code> to <code>_Complex.h</code>, and <code>String.h</code> to <code>_String.h</code> in your source, and GCC will find them.  The same goes for the header
<code>iostreamP.h</code>--you should use <code>_iostreamP.h</code> instead.  If you don't have the underscore <kbd>_</kbd> on your keyboard, you might find using <code>strclass.h</code> instead of
<code>_String.h</code> easier.  <p>

Another possibility to handle header files like <code>Complex.h</code> in a portable way is to pass the <samp>-remap</samp> switch (supported by GCC 2.8.0 and later) to the pre-processor; see the
<samp>cpp</samp> docs and the <samp>README.DJGPP</samp> file in the GCC distribution, for more info about this feature.  <p>

The most probable cause of problems with header files whose names exceed the DOS 8+3 limits is that you are compiling on Windows 9X, but the <dfn>Long File Names</dfn> (a.k.a. LFN) support is
disabled.  DJGPP v2.01 comes with LFN disabled by default on the <samp>DJGPP.ENV</samp> file.  To enable it, set the environment variable <code>LFN</code> to <samp>y</samp>, like this:

<pre>

       set LFN=y

</pre>
If the problems with long names of header files aren't solved by this, it is possible that you unpacked the DJGPP distribution with a program which doesn't support long file names.  The solution is
to install DJGPP again using a different unzip program.  <p>

If you have problems with header files with long filenames, and you run under Windows NT, it usually means that you used an unzip program which supports long file names on NT; unzip again using a DOS
unzip program.  Alternatively, you could install an LFN driver for Windows NT, see <A HREF="#WindowsNT">LFN driver for NT</A>, earlier in this FAQ.  <p>

Another possible cause for problems with C<tt>++</tt> include files is that your source file has a <samp>.c</samp> extension.  GCC then thinks that this is a C program and doesn't instruct the
preprocessor to search the include directories specific to C<tt>++</tt>.  Rename your file to <samp>.cc</samp> or <samp>.cpp</samp> extension, or call GCC with the <samp>-x c++</samp> switch, and the
header files will be found.  A full list of extension rules which GCC uses to determine the source language can be found in the <A HREF="#Which language">list of language-specific suffixes</A>,
elsewhere in this FAQ.

<P>
<P> | <A HREF="#Missing C++ headers"> Previous </A> | <A HREF="#Which language"> Next </A> | <A HREF="#Compiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="C++ comments">

8.3 GCC barfs on C<tt>++</tt>-style comments in C programs </A></H3><P>
</CENTER>
<em><strong>Q</strong>: My C program compiles OK with Borland's C, but GCC complains about "parse error before `/' " at a line where I have a "//"-style comment. </em> <p>
<hr> <strong>A</strong>: That's because // isn't a comment neither in ANSI C nor in K&R C.  Borland and Microsoft C compilers support it as an extension.  GCC also supports this extension (beginning
with version 2.7.0), but using the <samp>-ansi</samp> or <samp>-traditional</samp> switches to GCC disables this extension.  In general, it's a bad practice to use this extension in a portable
program until such time as the ANSI C standard includes it.  If it's a C<tt>++</tt> program, then rename it to have a suffix which will cause gcc to compile it as such (see
<A HREF="#Which language">list of language-specific suffixes</A>), or use <samp>-x c++</samp> switch.  If it's a C program, but you want to compile it as C<tt>++</tt> anyway, try <samp>-x c++</samp>;
it can help, but can also get you in more trouble, because C<tt>++</tt> has its own rules.  For example, the following program will print 10 if compiled as a C program, but 5 if compiled as
C<tt>++</tt>(<i><b>Note: </b>While admittedly perverse, this little monstrosity was written with the sole purpose of demonstrating that C and C<tt>++</tt> have quite different semantics under certain
circumstances.</i>):

<pre>

         #include &lt;stdio.h&gt;
     
         int
         main ()
         {
           printf ("%d \n" 10    //*
     		     / 2    //*/
     		       1
     		       );
           return 0;
         }

</pre>
If you must have both <samp>-ansi</samp> and C<tt>++</tt>-style comments, use <samp>-lang-c-c++-comments</samp> preprocessor switch.  Gcc doesn't accept the <samp>-lang-XXX</samp> switches on its
command line, so you will have to use the <samp>-Wp</samp> option, like this:

<pre>

      gcc -c -Wp,-lang-c-c++-comments myprog.c

</pre>
Alternatively, you can add <samp>-lang-c-c++-comments</samp> to the <code>*cpp:</code> section of your <samp>lib/specs</samp> file (but that will make it permanent).  <p>

Bottom line: until the future ANSI/ISO C standard includes this as part of the C language, it's best to change those <code>//</code> comments to C-style ones, if you really mean to write a C program.
The following <b><tt>SED</tt></b> command will convert a C program with C<tt>++</tt>-style comments into a valid C source, provided you don't have the string "//" in a character string:

<pre>

      sed "s?//\(.*\)?/*\1 */?" file.c &gt; newfile.c

</pre>
<b><tt>SED</tt></b> can be found with the DJGPP archives on SimTel.NET, in the <samp>v2gnu</samp> directory.

<P>
<P> | <A HREF="#C++ comments"> Previous </A> | <A HREF="#Objective C"> Next </A> | <A HREF="#Compiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Which language">

8.4 How does GCC recognize the source language? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I type <kbd>GCC PROG.CC</kbd> and GCC complains that it can't recognize <samp>PROG.CC</samp>'s file format.  How come a C<tt>++</tt> compiler doesn't recognize a C<tt>++</tt>
source?? </em> <p>
<em><strong>Q</strong>: I type <kbd>GCC PROG.C</kbd> to compile a C program which I already remember to pass compilation without a single warning, and suddenly it gives all kinds of strange error
messages and unresolved externals. </em> <p>
<hr> <strong>A</strong>:  That's because you typed your source file extension in <em>UPPER</em> case.  GCC is <em>not</em> case-insensitive about filenames like DOS is, and it uses the file's
extension to determine how to compile a file.  Valid extensions are:

<dl>
<dt> .C
<dt> .cxx
<dt> .cpp
<dd> C<tt>++</tt> source (passed through cpp).

<dt> .c
<dd> C source that must be passed through cpp first.

<dt> .i
<dd> Raw C source (no cpp pass).

<dt> .ii
<dd> Raw C<tt>++</tt> source (not to be preprocessed).

<dt> .m
<dd> Objective-C source.

<dt> .S
<dd> Assembler that must be passed through cpp first.

<dt> .s
<dd> Raw assembler source (no cpp pass).
</dl>
Any other file is passed to the linker, under the assumption that it's an object file.  <p>

In the examples above, <samp>PROG.C</samp> is taken as a C<tt>++</tt> program, not a C one, and <samp>PROG.CC</samp> is passed to the linker as if it were an object file.  You can see what GCC does
by adding the <samp>-v</samp> switch to the GCC command line; if you see that it's invoking <samp>cc1plus.exe</samp> (the C<tt>++</tt> compiler) instead of <samp>cc1.exe</samp> (the C compiler), or
calling <samp>ld.exe</samp> (the linker) on a source file, then you'd know this is your problem.  If you have problems keeping up with the verbose GCC output caused by <samp>-v</samp>, see
<A HREF="#Redirect">how to capture GCC output</A>, earlier in this FAQ.  <p>

You can override the default rules gcc uses to decide how each input file should be treated, using the <samp>-x LANGUAGE</samp> switch.  For instance, the command

<pre>

      gcc -x c++ prog.c

</pre>
compiles <samp>prog.c</samp> as C<tt>++</tt> source.  See <A HREF="http://www.delorie.com/gnu/docs/gcc-2.7.2.2/gcc_8.html#SEC11">the "Overall Options" section of the "The GNU C Compiler Manual"</A>,
for more info on <samp>-x</samp> options.

<P>
<P> | <A HREF="#Which language"> Previous </A> | <A HREF="#DJGPP-specific"> Next </A> | <A HREF="#Compiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Objective C">

8.5 Problems with Objective C </A></H3><P>
</CENTER>
<em><strong>Q</strong>: How do I tell gcc my .cc file is to be compiled as Objective-C source? </em> <p>
<em><strong>Q</strong>: I compile an Objective-C program, but get unresolved symbols. </em> <p>
<em><strong>Q</strong>: I can't compile the Objective-C test program which came with DJGPP. </em> <p>
<hr> <strong>A</strong>:  Give your sources the <samp>.m</samp> extension, or use <samp>-x objective-c</samp> switch to GCC, so it will <em>know</em> you mean to compile with Objective C.  <p>

Objective-C was broken in GCC 2.6.0.  The problem manifests itself by unresolved modules.  If you use that version, you'll have to upgrade to version 2.6.3 or higher.

<P>
<P> | <A HREF="#Objective C"> Previous </A> | <A HREF="#Unresolved externals"> Next </A> | <A HREF="#Compiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="DJGPP-specific">

8.6 Writing codes fragments which are specific to DJGPP </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I must put a DJGPP-specific code fragment into my program.  What symbol should I use in the <code>#ifdef</code> directive to make it only visible under DJGPP? </em> <p>
<hr> <strong>A</strong>:  Use <code>__DJGPP__</code>, like this:

<pre>

         #ifdef __DJGPP__
         ... DJGPP-specific code ...
         #else
         ... not seen under DJGPP ...
         #endif

</pre>
<code>__DJGPP__</code> has the value of the DJGPP major revision number, so you can write code fragments which have different behavior under different versions of DJGPP:

<pre>

         #ifdef __DJGPP__
         #if __DJGPP__ > 2
         .... will work only in DJGPP v3.x and later ...
         #else
         .... get here for DJGPP v2.x ...
         #endif
         #else
         .... get here in DJGPP v1.x or non-DJGPP environment
         #endif

</pre>
If you need to distinguish between minor DJGPP revision numbers, use the symbol <code>__DJGPP_MINOR__</code>.  For example:

<pre>

         #if defined(__DJGPP__) && __DJGPP__ == 2 && __DJGPP_MINOR__ == 1
         .... will work only in DJGPP v2.01 ....
         #endif

</pre>
Another DJGPP-specific pre-processor symbol which DJGPP defines is <code>__GO32__</code>; but it is only provided for compatibility with previous versions of DJGPP (v1.x) and its use should be
discouraged.

<P>
<P> | <A HREF="#DJGPP-specific"> Previous </A> | <A HREF="#Which library"> Next </A> | <A HREF="#Compiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Unresolved externals">

8.7 Unresolved externals when linking programs </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Why do I get so many unresolved symbols when linking my programs? </em> <p>
<em><strong>Q</strong>: Why does GCC complain that it cannot open -lstdcx? </em> <p>
<em><strong>Q</strong>: Why do I get "Undefined reference to yywrap" when linking programs produced by Flex? </em> <p>
<hr> <strong>A</strong>: By default, GCC instructs the linker to only look in two libraries: <samp>libgcc.a</samp> and <samp>libc.a.</samp>  Some functions aren't included there, so the linker can't
find them.  If you need to link against some optional library, say <samp>libxy.a</samp>, put the library into the DJGPP <samp>lib/</samp> subdirectory and append a <samp>-lxy</samp> to the link
command line.  The Standard C<tt>++</tt> Template classes are in <samp>libstdcxx.a</samp> (it's called <samp>libstdc++.a</samp> on Unix); append <samp>-lstdcxx</samp>.  To use the additional GNU
C<tt>++</tt> classes in the <samp>libgpp.a</samp> library (it's called <samp>libg++.a</samp> on Unix systems), append <samp>-lgpp</samp>.  Flex-generated lexical analyzers call functions in the
<samp>libfl.a</samp> library; you need to append <samp>-lfl</samp> when linking them.  <p>

When linking C<tt>++</tt> programs, you can use either one of the <samp>gxx</samp>, <samp>gpp</samp>, or <samp>g++</samp> commands (the latter on Windows 9X only) instead of <samp>gcc</samp>; they
will then instruct the linker to also scan the C<tt>++</tt> libraries automatically, so you don't have to remember doing that yourself.  <p>

Another reason for undefined references when linking C<tt>++</tt> programs is that you mix GCC and <samp>libstdcxx.a</samp> from different releases: they are usually incompatible.  <p>

An error message about missing <samp>-lstdcx</samp> usually means that the linker cannot find the standard C<tt>++</tt> library, <samp>libstdcxx.a</samp>.  Look into your <samp>lib/</samp>
subdirectory to see if it's there; if not, unzip it from the <samp>gppNNNb.zip</samp> file.  If <samp>libstdcxx.a</samp> exists but the linker still complains, you most probably have a problem
related to long file names on Windows 9X (<samp>libstdcxx.a</samp> exceeds the DOS 8+3 limits).  For a quick fix, try to <samp>set LFN=y</samp> in the environment and see if that helps.  If that
doesn't help, make sure you unpacked <samp>gppNNNb.zip</samp> with an unzip program which supports long file names.  This issue is further complicated if you use <b><tt>RHIDE</tt></b>, and is
described in full in the file <samp>gnu/gcc-2.81/problems.txt</samp> which comes with the GCC distribution (and which you should have read before installing it).  Bottom line is that you need to add
a line either to <samp>rhide.env</samp> or to <samp>DJGPP.ENV</samp> which says this:

<pre>

      RHIDE_TYPED_LIBS_DJGPP.cc=stdcxx

</pre>
When you add this line, make sure neither it nor the <samp>[rhide]</samp> line have trailing whitespace, otherwise <b><tt>RHIDE</tt></b> will not recognize these lines.  <p>

If your program uses a lot of floating-point math, or needs math functions beyond those specified in the ANSI/ISO standard, consider appending <kbd>-lm</kbd> to your link command line.  The basic
math functions required by ANSI/ISO standard are included in the <samp>libc.a</samp> library, but <samp>libm.a</samp> includes higher quality versions of these functions, and also some functions not
included in the default library, like Gamma function and Bessel functions, support for Posix-compliant behavior in case of errors (e.g., it math functions from <samp>libm.a</samp> always set
<code>errno</code>), a <code>matherr</code> facility, etc.

<P>
<P> | <A HREF="#Unresolved externals"> Previous </A> | <A HREF="#Libraries order"> Next </A> | <A HREF="#Compiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Which library">

8.8 How not to lose your head with all these libraries </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I'm lost with all those different libraries.  How in the world can I find out which functions are included in which library? </em> <p>
<hr> <strong>A</strong>:  You can use the <samp>nm</samp> program to check what functions are included in a library.  Run it with the <samp>-C</samp> option and with the library as its argument and
look in the output for the name of your function (the <samp>-C</samp>, or <samp>-demangle</samp> option makes the function names look closer to what they are called in the source file).  Functions
which have their code included in the library have a capital <code>T</code> before their name.  For example, the following is a fragment from the listing produced by <samp>nm</samp>:

<pre>

         c:\djgpp\lib> nm --demangle libc.a
         .
         .
         .
         stdio.o:
         000000e4 b .bss
         000000e4 d .data
         00000000 t .text
         00000098 t L12
         0000001e t L3
         00000042 t L6
         0000004d t L7
         0000006a t L9
         00000000 t __gnu_compiled_c
     	     U _filbuf
     	     U _flsbuf
         00000000 T clearerr
         000000ac T feof
         000000c2 T ferror
         000000d8 T fileno
         0000000c T getc
         00000052 T getchar
         0000002a T putc
         0000007c T putchar
         00000000 t gcc2_compiled.
         .
         .
         .

</pre>
Here we see that the module <samp>stdio.o</samp> defines the functions <code>clearerr</code>, <code>feof</code>, <code>ferror</code>, <code>fileno</code>, <code>getc</code>, <code>getchar</code>,
<code>putc</code> and <code>putchar</code>, and calls functions <code>_filbuf</code> and <code>_flsbuf</code> which aren't defined on this module.  <p>

Alternatively, you can call <samp>nm</samp> with the <samp>-s</samp> or <samp>-print-armap</samp>, which will print an index of what symbols are included in what modules.  For instance, for
<samp>libc.a</samp>, we will see:

<pre>

         c:\djgpp\lib> nm --print-armap libc.a
         .
         .
         .
         _feof in stdio.o
         _ferror in stdio.o
         _fileno in stdio.o
         .
         .
         .

</pre>
which tells us that the functions <code>feof</code>, <code>ferror</code> and <code>fileno</code> are defined in the module <samp>stdio.o.</samp> <p>

<samp>nm</samp> is fully described in the GNU docs. See <A HREF="http://www.delorie.com/gnu/docs/binutils-2.7/binutils_6.html#SEC5">the "nm" section of the "GNU Binutils Manual"</A>.

<P>
<P> | <A HREF="#Which library"> Previous </A> | <A HREF="#Still unresolved"> Next </A> | <A HREF="#Compiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Libraries order">

8.9 DJGPP uses a one-pass linker </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I give all the libraries to gcc, but I still get unresolved externals when I link.  What gives? </em> <p>
<hr> <strong>A</strong>:  <samp>Ld</samp> is a one-pass linker:  it only scans each library once looking for unresolved externals it saw <em>until that point</em>.  This means the relative position
of object files and libraries' names on the command line is significant.  You should put all the libraries <em>after</em> all the object files, and in this order:

<pre>

      -lgpp -lstdcxx -lm

</pre>
E.g., to link files main.o and sub.o into a C<tt>++</tt> library, use the following command line:

<pre>

      gcc -o main.exe main.o sub.o -lgpp -lstdcxx

</pre>
or, if you compile and link in one command:

<pre>

      gcc -o main.exe main.cc sub.cc -lgpp -lstdcxx -lm

</pre>
If you have any libraries of your own, put them <em>before</em> the above system libraries, like this:

<pre>

      gcc -o main.exe main.cc sub.cc -lmylib -lgpp -lstdcxx -lm

</pre>
When you use the <samp>gxx</samp>, the <samp>gpp</samp> or <samp>g++</samp> compilation drivers to compile a C<tt>++</tt> program, it automatically names the C<tt>++</tt> libraries in the correct
order.  (<samp>gpp</samp> and <samp>gxx</samp> are the alternative names for <samp>g++</samp> on DOS, which doesn't allow the <samp>+</samp> character in file names.)  <p>

You can also force the linker to repeatedly scan a group of libraries until all externals are resolved.  To this end, put the names of these libraries between the <samp>-(</samp> and the
<samp>-)</samp> options (if you invoke GCC to link, use the <samp>-Wl</samp> or <samp>-Xlinker</samp> options to pass switches to the linker).  Check out the linker docs for more info about <samp>-(
... -)</samp> groups.  <p>

If your installation tree is different from the default, i.e., if you keep the libraries <strong>not</strong> in the default <samp>lib/</samp> subdirectory, then you should add that directory to the
line in the <samp>[gcc]</samp> section of your <samp>DJGPP.ENV</samp> file which starts with <samp>LIBRARY_PATH</samp>, or put into your environment a variable called <code>LIBRARY_PATH</code> and
point it to the directory where you keep the libraries.  Note that if you invoke the linker by itself (not through the gcc driver), then <code>LIBRARY_PATH</code> will have no effect, because this
variable is only known to the gcc driver.  So if you must call <samp>ld</samp> directly, use the <samp>-L</samp> option to tell it where to look for the libraries.

<P>
<P> | <A HREF="#Libraries order"> Previous </A> | <A HREF="#djgpp_first_ctor"> Next </A> | <A HREF="#Compiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Still unresolved">

8.10 Some functions still not found in C<tt>++</tt> programs </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I put all the libraries in the above order, but the linker still can't find some C<tt>++</tt> functions from <samp>complex.h</samp> and <samp>iostream.h.</samp> </em> <p>
<em><strong>Q</strong>: I get many undefined references to symbols like <code>__eh_pc</code>, <code>terminate</code>, and <code>__throw</code>... </em> <p>
<hr> <strong>A</strong>:  Some C<tt>++</tt> functions are declared <code>inline</code> and defined on header files.  However, GCC won't inline them unless you compile with optimizations enabled, so
it tries to find the compiled version of the functions in the library.  Workaround: compile with <samp>-O</samp>.  <p>

Another cause of missing external symbols might be that your versions of <samp>libgcc.a</samp> and the compiler aren't in sync.  These cases usually produce undefined references to symbols such as
<code>__throw</code> and <code>__eh_pc</code>.  You should only use <samp>libgcc.a</samp> from the same distribution where you got the compiler binaries.  The reason for these problems is that the
setup for supporting C<tt>++</tt> exceptions is subtly different in each version of the compiler.  <p>

For C<tt>++</tt> programs, be sure to compile all of your object files and libraries with the same version of the compiler.  If you cannot recompile some of the old C<tt>++</tt> object files or
libraries, try using the <samp>-fno-exceptions -fno-rtti</samp> switches to GCC, it helps sometimes.  <p>

If you call C functions from a C<tt>++</tt> program, you need to make sure the prototype of the C function is declared with the <code>extern "C"</code> qualifier.  DJGPP header files take care about
this, but headers you get with third-party libraries might not.  Failure to use <code>extern "C"</code> will cause the linker to look for a C<tt>++</tt> function instead of a C function, which will
fail because names of C<tt>++</tt> functions are mangled by the compiler.

<P>
<P> | <A HREF="#Still unresolved"> Previous </A> | <A HREF="#Large image"> Next </A> | <A HREF="#Compiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="djgpp_first_ctor">

8.11 Unresolved djgpp_first_ctor </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I do everything like your praised FAQ says, but the linker complains about unresolved symbols with strange names like <samp>djgpp_first_ctor</samp>,
<samp>djgpp_last_dtor</samp>, etc.  I looked in every library with <code>nm</code>, and I cannot find these creatures.  Where in the world are they?? </em> <p>
<hr> <strong>A</strong>: These symbols are defined by the <samp>djgpp.djl</samp> linker script that should be in your <samp>lib/</samp> subdirectory.  When you call <samp>gcc</samp> to link a
program, it invokes <samp>ld.exe</samp> with the option <samp>-Tdjgpp.djl.</samp>  If you invoke <samp>ld</samp> directly (this is generally not recommended), be sure to include that switch.  If you
did invoke it through <samp>gcc</samp>, maybe your linker is set up incorrectly.  Add <samp>-v</samp> to the GCC switches and check that the command line that GCC gives to LD includes that switch,
that your <samp>lib/</samp> subdirectory includes that script file, and that the script file is intact and includes the definition of the above symbols.  <p>

Another reason might be that you have edited your <samp>DJGPP.ENV</samp> file in a way that prevents the linker from finding its <samp>djgpp.djl</samp> script.  <p>

Mixing an old v1.x installation with a v2.x one can also cause such problems.  Be sure to delete the entire v1.x tree, or rename it, before installing the v2.x distribution.

<P>
<P> | <A HREF="#djgpp_first_ctor"> Previous </A> | <A HREF="#Large executable"> Next </A> | <A HREF="#Compiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Large image">

8.12 C<tt>++</tt> programs yield large <samp>.exe</samp> file </A></H3><P>
</CENTER>
<em><strong>Q</strong>: It seems that declaring a large <code>static</code> array has the effect of bloating the program image on disk by that many bytes.  Surely there is a more compact way of
telling the loader to set the next N bytes of RAM to zero? </em> <p>
<hr> <strong>A</strong>:  This only happens in C<tt>++</tt> programs and is a (mis-)feature of GCC.  You can use the <samp>-fconserve-space</samp> switch to GCC to prevent this from happening, but it
also turns off the diagnostics of duplicate definitions, which, if uncaught, might cause your program to crash.  Thus, this switch isn't recommended for programs which haven't been completely
debugged (if there is such a creature).  The <samp>-fconserve-space</samp> switch is described in the GCC docs, see <A HREF="http://www.delorie.com/gnu/docs/gcc-2.7.2.2/gcc_11.html#SEC14">the "C++
Dialect Options" section of the "GNU C Compiler Manual"</A>.  <p>

If the problems with using this switch doesn't deter you, you can even add this switch to your <samp>lib/specs</samp> file to make it permanent.

<P>
<P> | <A HREF="#Large image"> Previous </A> | <A HREF="#Linker script"> Next </A> | <A HREF="#Compiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Large executable">

8.13 Why are DJGPP <samp>.exe</samp> files so large? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I compiled a trivial "Hello world" program and got a 80KB executable file.  That's ridiculously bloated! </em> <p>
<em><strong>Q</strong>: I switched to GCC 2.8.1, and my C<tt>++</tt> executables are considerably larger than when compiled with GCC 2.7.2.1! </em> <p>
<hr> <strong>A</strong>:  Did you link with <samp>-s</samp> switch to <samp>gcc</samp>, or run <samp>strip</samp> on the output of the linker?  If not, the executable includes the debugging symbols,
which makes it quite a lot larger.  (It is not recommended to strip the symbols except when distributing production programs, because this makes debugging very hard indeed; that is why
<samp>-s</samp> is not passed to gcc by default.)  <p>

C<tt>++</tt> programs could be further bloated because the release of Binutils 2.8.1 was configured in a way that caused the assembler to put into the symbol table local labels generated when
compiling code that uses exceptions.  Later uploads of GNU Binutils should solve this problem, so consider upgrading to the latest <samp>bnuNNNb.zip</samp>.  <p>

Judging code sizes by looking at the size of "Hello" programs is meaningless, since most of the power of protected-mode programming goes wasted in such programs.  There is no point in switching the
processor to protected mode (which requires a lot of code) just to print a 15-byte string and exit.  The overhead induced by the code needed to set up the protected-mode environment is additive; the
larger the program, the smaller the overhead relative to the program size.  <p>

Apart from getting to protected-mode, the DJGPP startup code also includes such functionality as wildcard expansion, long command-line support, and loading the environment from a disk file; these
usually aren't available with other DOS protected-mode compilers.  Exception and signal handling (not available at all in v1.x), FPU detection and emulator loading (which were part of
<samp>go32</samp> in v1.x), are now also part of the startup code.  <p>

If your program doesn't need parts of the startup code, it can be made smaller by defining certain functions with empty bodies.  These functions are <code>__crt0_glob_function</code>,
<code>__crt0_load_environment_file</code>, and <code>__crt0_setup_arguments.</code> By defining empty substitutes for all three of these, you can make the "Hello" program be 28KB on disk.  These
functions are documented in the DJGPP libc reference, which see.  Here's an example of definitions for these functions that will make the startup code as small as it gets(<i><b>Note: </b>If you
define an empty substitute for <code>__crt0_setup_arguments</code>, you don't need to define a substitute for <code>__crt0_glob_function</code>.</i>):

<pre>

       char **__crt0_glob_function (char *arg) { return 0; }
       void   __crt0_load_environment_file (char *progname) { }
       void   __crt0_setup_arguments (void) { }

</pre>
Note that if you define an empty substitute for <code>__crt0_setup_arguments</code>, your program will not be able to access its command-line arguments via the <code>argv[]</code> array.  So this is
only recommended for programs which don't accept any arguments at all.  <p>

You can make your program image still smaller by compressing it with a compressor called <a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2misc/mlp107b.zip"><b><tt>DJP</tt></b></a>.
<b><tt>DJP</tt></b> is a DJGPP-specific executable file compressor.  It is fast and has no memory overhead.  It also knows about DJGPP <dfn>Dynamically Loaded Modules</dfn> (DLM) technology.  (Note
that <b><tt>DJP</tt></b> before version 1.06 was incompatible with Binutils 2.8.1 and later(<i><b>Note: </b>In particular, running <code>strip</code> on a program and then compressing it with
<b><tt>DJP</tt></b> would produce a program that crashes upon startup.</i>), so you should always use the latest <b><tt>DJP</tt></b> version available on SimTel.NET mirrors.)

<P>
<P> | <A HREF="#Large executable"> Previous </A> | <A HREF="#No EXE"> Next </A> | <A HREF="#Compiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Linker script">

8.14 Linker complains about <samp>djgpp.lnk</samp> </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I run DJGPP under Windows 9X, but the linker complains about <samp>djgpp.lnk</samp> file... </em> <p>
<hr> <strong>A</strong>:  Do you use DJGPP v2.0 on Windows 9X and have a shortcut to DJGPP in your current directory?  If so, and if you call that shortcut <code>djgpp</code>, Windows will create a
file <samp>djgpp.lnk</samp> in your working directory.  In that case, when <samp>ld.exe</samp> looks for its linking script, it will find this shortcut instead, and will be totally confused by its
format and contents.  In DJGPP v2.01 and later, the linker script is called <samp>djgpp.djl</samp>, so that this conflict doesn't exist after you upgrade.

<P>
<P> | <A HREF="#Linker script"> Previous </A> | <A HREF="#Large object files"> Next </A> | <A HREF="#Compiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="No EXE">

8.15 Linker fails to produce the EXE program under Novell </A></H3><P>
</CENTER>
<em><strong>Q</strong>: When I link my program, it fails to produce the .EXE executable, but only if I do this on a networked drive... </em> <p>
<em><strong>Q</strong>: I run STUBIFY on a networked drive under Novell, but it doesn't produce a .EXE file.  How come? </em> <p>
<hr> <strong>A</strong>:  You might have another copy of the file with the same name that GCC is creating in another directory somewhere on your networked drive.  If that other directory is on your
PATH, it is searched by Novell when the linker and <samp>STUBIFY</samp> try to create the executable file, because that file doesn't exist in the current directory.  So what might actually happen is
that the linker and <samp>STUBIFY</samp> are overwriting the files they find on your PATH instead of creating new files in the current directory.

You can verify that this indeed is the problem by searching your networked disks for files with the same name as those you are trying to build, and looking at their time stamps.  If that is indeed
the problem, then you have several possible ways of solving it:

<ol>
<li> You can remove the other files, rename them, or move them to another directory that isn't searched by Novell.

<li> You can rename the program you are trying to link.

<li> You can change the way Novell searches for files (a.k.a. <dfn>the search mode</dfn>), so that it won't look in the directories on your PATH.

<li> You can change your access rights to the directory on the PATH where the other files reside, so that you won't have write privileges to that directory.

<li> You can change the search mode for <samp>STUBIFY</samp> and the linker (or for any other program that gives you that trouble) by running commands like these:

<pre>

       SMODE stubify.exe 2
       SMODE ld.exe 2

</pre>
</ol>
<P>
<P> | <A HREF="#No EXE"> Previous </A> | <A HREF="#Allegro"> Next </A> | <A HREF="#Compiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Large object files">

8.16 Linker fails for large object files or large libraries </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Whenever I define very large static arrays in my program, the linker fails saying "could not read symbols: Bad value".  Huh?? </em> <p>
<em><strong>Q</strong>: I have some large libraries that I cannot link because the linker fails on them with a message saying "memory exhausted".  I have plenty of virtual memory on my system, so why
would ld fail? </em> <p>
<hr> <strong>A</strong>:  This is a known bug in <samp>ld.exe</samp> from GNU Binutils 2.5.2.  Please upgrade to DJGPP v2.01 which comes with Binutils 2.7.  If you can't upgrade, or if the latest
<samp>ld.exe</samp> exhibits such bugs, these are your alternatives for a work-around:

<ul>
<li> In case of a large library, split it into several smaller ones.

<li> For a module that defines large data structures, move some of the static data to other files, or allocate the space at runtime with <code>calloc</code>.
</ul>
<samp>ld.exe</samp> from GNU Binutils 2.7 (which comes with DJGPP v2.01) doesn't have most of these problems, but there are still some cases where you might see such messages.  One such case is the
<samp>POVRAY</samp> package, where the failure is caused by an object file called <samp>_pmlite.o</samp> in the <samp>pmode.a</samp> library.  The problem here is that <samp>_pmlite.o</samp> is a
TASM-compiled file, processed by <samp>EMXAOUT</samp>.  <samp>EMXAOUT</samp> produces <samp>a.out</samp> object files which <samp>ld.exe</samp> cannot link if they are in a library.  Either taking
that object file out of the library, or processing the original <samp>_pmlite.obj</samp> with another tool (such as <samp>OBJ2BFD</samp> or <samp>OBJ2COFF</samp>) will solve these problems.  Note
however, that the authors of <samp>OBJ2COFF</samp> have explicitly forbidden commercial use of their tool.

<P>
<P> | <A HREF="#Large object files"> Previous </A> | <A HREF="#NULL redefined"> Next </A> | <A HREF="#Compiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Allegro">

8.17 Building Allegro library fails </A></H3><P>
</CENTER>
<em><strong>Q</strong>: When I try to build the Allegro library, liballeg.a, I get some cryptic message about register-opcode mismatch.  What am I doing wrong? </em> <p>
<em><strong>Q</strong>: It seems I miss one of the source files from the Allegro distribution, because Make cannot find it when I try to build Allegro. </em> <p>
<em><strong>Q</strong>: I can't build Allegro: it keeps telling me that I "need to install gcc2721b.zip".  But I already have GCC installed! </em> <p>
<hr> <strong>A</strong>:  You should get the latest version of Allegro that is available <a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2tk/alleg30.zip">from SimTel.NET</a> or
<a href="http://www.talula.demon.co.uk/allegro/">from Shawn Hargreaves' site</a>.

Versions of Allegro before 3.0 are known to have bugs such as above.

<P>
<P> | <A HREF="#Allegro"> Previous </A> | <A HREF="#C++ exceptions"> Next </A> | <A HREF="#Compiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="NULL redefined">

8.18 C<tt>++</tt> compiler says "NULL redefined" </A></H3><P>
</CENTER>
<em><strong>Q</strong>: When I compile a C<tt>++</tt> program which includes some standard C header files, the compiler prints error messages about redefinition of <code>NULL</code>... </em> <p>
<hr> <strong>A</strong>:  This is because GCC 2.8.1 comes with C<tt>++</tt> header files which redefine <code>NULL</code> in a way that conflicts with the DJGPP headers.  It's a bug in the GNU
C<tt>++</tt> headers, but until it is fixed, you will need to make sure you include the C<tt>++</tt> headers <em>after</em> the C headers.  If that doesn't help in your case, you will need to hack
your headers to reconcile them.

<P>
<P> | <A HREF="#NULL redefined"> Previous </A> | <A HREF="#Assembly output"> Next </A> | <A HREF="#Compiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="C++ exceptions">

8.19 C<tt>++</tt> exceptions support </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I've written a program that uses C<tt>++</tt> exceptions, but instead of catching an exception, the program prints "Abort!" and dies... </em> <p>
<em><strong>Q</strong>: When linking C<tt>++</tt> programs, I get messages about undefined references to <code>__EH_FRAME_BEGIN__</code> and such likes.  Huh? </em> <p>
<em><strong>Q</strong>: I cannot compile C<tt>++</tt> programs that include the header <samp>math.h</samp>: the compiler complains about redefinition of class exception! </em> <p>
<hr> <strong>A</strong>: C<tt>++</tt> exceptions were not fully supported in DJGPP before version 2.8.1 of GCC.  Either upgrade to the latest version or compile with the
<samp>-fsjlj-exceptions</samp> switch to GCC.  GCC support of exceptions before v2.8.0, was minimal, so even this special switch won't work with previous versions.  If you still use GCC 2.7.2.1 and
cannot upgrade, you need to compile with the <samp>-frtti</samp> compiler switch and include the <samp>typeinfo</samp> header in your program.  <p>

Note that exception support with <samp>-fsjlj-exceptions</samp> is very slow, since it has a significant runtime overhead, even if the exception doesn't occur.  <p>

If you already use GCC 2.8.1, these problems could happen if you failed to replace the <samp>specs</samp> file with the version which comes with the GCC 2.8.1 distribution.  Read the file
<samp>README.DJGPP</samp> in the GCC distribution, for more details.  <p>

Exception support in GCC is generally not stable enough yet, so you need to treat with some suspicion code produced by GCC 2.8.1 for programs that use exceptions.  <p>

Undefined references to symbols like <code>__EH_FRAME_BEGIN__</code> are a symptom of using an old linker script <samp>djgpp.djl</samp>.  You should remove this file from your <samp>lib</samp>
subdirectory, which lets GCC use the new version that installs into the <samp>lib/gcc-lib/djgpp/X.YZ/</samp> directory (where <samp>X.YZ</samp> is the GCC version number).  Again,
<samp>README.DJGPP</samp> in the GCC distribution has more on this.  <p>

If GCC complains about "Redefinition of class exception" when you compile C<tt>++</tt> programs which include the header <samp>math.h</samp>, you need to replace that header.  GCC 2.8.1 comes with a
header <samp>exception</samp> that conflicts with <samp>math.h</samp> from DJGPP v2.01, which defines a <code>struct exception</code>.  Version 2.02 of DJGPP will correct <samp>math.h</samp>, and a
corrected version is included in the <samp>gcc281b.zip</samp> distribution.  The corrected <samp>math.h</samp> is installed into the <samp>lib/gcc-lib/djgpp/2.81/include</samp> directory, so either
delete or rename the old version in the <samp>include</samp> directory, or copy the corrected version into <samp>include</samp>.  Another solution is to compile with the <samp>-posix</samp> or
<samp>-ansi</samp> compiler switch, which cause <samp>math.h</samp> to not define <code>struct exception</code>.

<P>
<P> | <A HREF="#C++ exceptions"> Previous </A> | <A HREF="#movedata.h"> Next </A> | <A HREF="#Compiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Assembly output">

8.20 How to get GCC to generate assembly code </A></H3><P>
</CENTER>
<em><strong>Q</strong>: How can I peek at the assembly code generated by GCC? </em> <p>
<em><strong>Q</strong>: How can I create a file where I can see the C code and its assembly translation together? </em> <p>
<hr> <strong>A</strong>: Use the <samp>-S</samp> (note: <em>capital</em> S) switch to GCC, and it will emit the assembly code to a file with a <samp>.s</samp> extension.  For example, the following
command:

<pre>

       gcc -O2 -S -c foo.c

</pre>
will leave the generated assembly code on the file <samp>foo.s</samp>.

If you want to see the C code together with the assembly it was converted to, use a command line like this:

<pre>

      gcc -c -Wa,-a,-ad [other GCC options] foo.c > foo.lst

</pre>
which will output the combined C/assembly listing to the file <samp>foo.lst</samp>.  <p>

If you need to both get the assembly code <em>and</em> to compile/link the program, you can either give the <samp>-save-temps</samp> option to GCC (which will leave all the temporary files including
the <samp>.s</samp> file in the current directory), or use the <samp>-Wa,aln=foo.s</samp> option which instructs the assembler to output the assembly translation of the C code (together with the hex
machine code and some additional info) to the file named after the <samp>=</samp>.

<P>
<P> | <A HREF="#Assembly output"> Previous </A> | <A HREF="#Libraries"> Next </A> | <A HREF="#Compiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="movedata.h">

8.21 What's wrong with <samp>sys/movedata.h</samp>? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Whenever I try to compile a program that includes the <samp>sys/movedata.h</samp> header file, I get "parse error" messages from the compiler.  Can't you guys make your system
headers right? </em> <p>
<hr> <strong>A</strong>: This is a bug in the <samp>sys/movedata.h</samp> header file which comes with DJGPP v2.01.  The bug will be fixed in v2.02, but in the meantime you should always include the
<samp>sys/types.h</samp> header before <samp>sys/movedata.h</samp> in your programs.

<P>
<P> | <A HREF="#movedata.h"> Previous </A> | <A HREF="#Compiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Libraries">

8.22 How do I create a library of object files? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I would like to distribute my package as a library that can be linked into programs, but I'm unsure how to go about it... </em> <p>
<hr> <strong>A</strong>: First, you need to compile all your sources into object <samp>.o</samp> files, like this:

<pre>

      gcc -c -Wall -O2 file1.c
      gcc -c -Wall -O2 file2.c
      gcc -c -Wall -O2 file3.c
      ...

</pre>
The only GCC switch in this example that's required is <samp>-c</samp>, the rest are just recommended for better code generation and diagnostics.  <p>

Once you have the object files ready, use the <code>ar</code> ("Archiver") utility to create a library, let's say we'll call it <samp>libacme.a</samp>, like this:

<pre>

      ar rvs libacme.a file1.o file2.o file3.o ...

</pre>
The <samp>rvs</samp> flags tell <samp>ar</samp> to put named files in to the library, replacing any previous versions of these files if necessary, print the names of object files as it puts them into
the library, and add an object-file index to the library, which makes it link faster.  <p>

If you use <b><tt>RHIDE</tt></b>, you can create a library by specifying a file with a <samp>.a</samp> extension as the main target in the project (choose <samp>Project | Main Target Name</samp> and
enter a file name such as <samp>libfoo.a</samp>).  <p>

The library is now ready to use.  The simplest way to force the compiler to use it while linking is to mention its name in the link command line, like this:

<pre>

      gcc -o myprog.exe myprog.c libacme.a

</pre>
This is better than just listing in the command line all the object files in the library, since the latter will cause the linker to link in <strong>all</strong> the object files, even those which
aren't used by the program.  <p>

The name of the library which begins with a <samp>lib</samp> and ends with a <samp>.a</samp> extension is a convention used for convenience.  When the link command line includes an argument
<samp>-lXXYYZZ</samp>, GCC (and all Unix compilers) will look for a file <samp>libXXYYZZ.a</samp> in every directory they search by default.  So, if your library <samp>libacme.a</samp> is installed
in the DJGPP <samp>lib</samp> subdirectory, the user can instruct GCC to look into it by appending <samp>-lacme</samp> to the link command line.  Other systems might be configured to look for
different names when a switch such as <samp>-lfoo</samp> is mentioned.  For example, Linux might look in <samp>/usr/lib</samp> for a file <samp>libfoo.so.4.1</samp>, while Alpha/VMS will look for
<samp>SYS$GNU:[LIBRARIES]FOO.LIB;19</samp>.  Windows 98, of course, will look for something monstrously long like <samp>C:\Windows\Program Files\Vendors\GNU\gcc\libraries\foo.lib</samp>.  If you
don't follow this convention, you will need to type the full name of the library file.  <p>

If you need to update a certain object file in a library, use the same command <kbd>ar rvs library-name object-name</kbd> as above, but only with the name(s) of the object file(s) you need to replace.
<p>

<code>ar</code> is documented in the Binutils docs.  To read, type this from the DOS prompt:

<pre>

      info binutils ar

</pre>
<P>
<P> | <A HREF="#Compiling"> Previous </A> | <A HREF="#Graphics"> Next </A> | <A HREF="#Top"> Up </A> | <P>
<P>
<P>
<CENTER>
<H2>

<A NAME="Running">

9. Running Compiled Programs </A></H2><P>
</CENTER>
  This chapter discusses various problems which may happen when running DJGPP programs under different environments, and gives solutions to them.

<p>
<ul>
<li><A HREF="#v2.x crash"> 9.1 v2.x crash--Program which was OK in v1.x bombs in v2.0.  </A>
<li><A HREF="#Crash traceback"> 9.2 Crash traceback--How to make sense out of stack dumps.  </A>
<li><A HREF="#File data corrupted"> 9.3 File data corrupted--The DOS <em>TEXT</em>/<em>BINARY</em> file issue.  </A>
<li><A HREF="#Screen IO"> 9.4 Screen IO--Beware of the buffering!  </A>
<li><A HREF="#Distributing"> 9.5 Distributing--DJGPP programs are <strong>not</strong> self-contained.  </A>
<li><A HREF="#File handles"> 9.6 File handles--How many file handles can your program use.  </A>
</ul>
<P>
<P> | <A HREF="#Running"> Previous </A> | <A HREF="#Crash traceback"> Next </A> | <A HREF="#Running"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="v2.x crash">

9.1 My program crashes only in v2.0! </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I have this program which runs fine when compiled with DJGPP v1.12, but crashes and burns in v2.  Isn't it obvious that you guys blew it with v2? </em> <p>
<em><strong>Q</strong>: My v2 program crashes, but only under CWSDPMI; it runs OK under other DPMI hosts like Windows, OS/2 or QDPMI.  Is this a bug in CWSDPMI? </em> <p>
<hr> <strong>A</strong>:  Not necessarily so, it could still be a bug in your program which just went unnoticed until now.  One area where such things can happen is use of uninitialized memory.  In
v1.x, memory first allocated to the stack or by a call to <code>malloc</code> is always zeroed, but v2 doesn't behave this way, so your program might exhibit erratic behavior or crash with
<code>SIGSEGV</code> because of such bugs.  In particular, if the program behaves differently depending on which program was run before it, you might suspect bugs of this kind.  <p>

To check whether this is the source of your grief, include the header <code>crt0.h</code> in your <code>main</code> and set <code>_crt0_startup_flags</code> to
<code>_CRT0_FLAG_FILL_SBRK_MEMORY</code>; this will fill the memory with zeroes when it is first allocated.  If the program will run OK after recompilation, then this is probably the cause of your
problem.  To make spotting uninitialized memory simpler, you can set <code>_crt0_startup_flags</code> to <code>_CRT0_FLAG_FILL_DEADBEEF</code> <i>(don't laugh!)</i>; this will cause the sbrk()'ed
memory to be filled with the value <code>0xdeadbeef</code> (<code>-559038737</code> in signed decimal or <code>3735928559</code> in unsigned decimal) which should be easy to spot with a debugger.
Any variable which has this value was used without initializing it first.  <p>

Another possible cause of problems will most probably be seen only under CWSDPMI; its telltale sign is a message "Page fault at ..." that is printed when a program crashes, and an error code of 4 or
6.  Unlike other DPMI hosts, CWSDPMI supports some DPMI 1.0 extensions which allow DJGPP to capture and disallow illegal dereference of pointers which point to addresses less than 1000h (a.k.a.
<dfn>NULL pointer protection</dfn>).  This feature can be disabled by setting the <code>_CRT0_FLAG_NULLOK</code> bit in <code>_crt0_startup_flags</code>; if this makes SIGSEGV crashes go away, your
program is using such illegal pointers; the stack trace printed when the program crashes should be a starting point to debug this.  See <A HREF="#Crash dump">how to debug SIGSEGV</A>, for more
details about these problems.  <p>

An insufficient stack size can also be a cause of your program's demise, see <A HREF="#Stack size">setting the stack size</A>, below.

<P>
<P> | <A HREF="#v2.x crash"> Previous </A> | <A HREF="#File data corrupted"> Next </A> | <A HREF="#Running"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Crash traceback">

9.2 What is that gibberish printed when my program crashes? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: My program dies with a cryptic message like "Segmentation violation" or "Unsupported DOS request" or "General Protection Fault" and prints some funny-looking numbers.  Can't I
get some decent human-readable traceback information, so I could pinpoint where in the program did the problem happen? </em> <p>
<hr> <strong>A</strong>:  Those "funny-looking numbers" <em>are</em> the traceback.  They describe the sequence of function calls which led to the fatal error by giving you the addresses where each
function was called.  You can have these addresses translated to source line numbers by using the <samp>SYMIFY</samp> program.  <samp>SYMIFY</samp> is included in the
<a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2/djdev201.zip">basic DJGPP development environment distribution</a>, and should be in your <samp>bin/</samp> subdirectory.  To
<dfn>symify</dfn> the traceback, make sure that your program was compiled with the <samp>-g</samp> switch, linked <strong>without</strong> the <samp>-s</samp> switch and <strong>not</strong>
stripped.  Now invoke your program and do whatever it takes to make it crash.  Then, with the traceback still on the screen, type this from the DOS command line:

<pre>

      symify your-program-name

</pre>
Symify then walks through the crash traceback by reading back from video memory, and matches the hex addresses to the source files and line numbers of the program.  It then writes back the list of
source files and line numbers right next to their hex addresses.  Now you can start debugging.  More info about this is available in <A HREF="#Crash dump">how to analyze crash dumps</A>.  <p>

One problem with this translation is that it relies on info generated by GCC that maps the instruction addresses to source line numbers.  This usually works okay, but one notable exception is when
you use inline assembly.  In this case, GCC only records the last line of the inline assembly block, which might be way off if the block is large.  <p>

You can ask <samp>SYMIFY</samp> to put the stack trace into a file (so you can consult it later, e.g., from your editor while fixing the bug), by giving it an output file, like this:

<pre>

      symify -o problem.dmp yourprog

</pre>
You can also save the raw stack trace (without source info) to a disk file and submit it to <samp>SYMIFY</samp> later, like this:

<pre>

      symify -i core.dmp yourprog

</pre>
This comes in handy when your program grabs the screen (e.g., for some graphics) and the stack trace can't be seen.  You can then <A HREF="#Redirect">redirect the stack trace to a file</A>, e.g.,
with the <samp>REDIR</samp> program which comes with DJGPP.  <p>

But what if you <em>didn't</em> compile your program with <samp>-g</samp>, and you aren't sure how to recreate the problem which crashed it, after you recompile?  Well, you can submit the stack dump
<em>after</em> you recompile your program.  Just press that PrintScreen key or otherwise save the stack trace, then submit it to <samp>SYMIFY</samp> from a file as described above, after you've
recompiled the program.  Be sure to give gcc all the compilation switches (sans <samp>-s</samp>) that you gave it when you originally compiled your program (in addition to <samp>-g</samp>), including
the optimization switches, or else the addresses shown in the stack trace might be invalid.  <p>

If all you have from the crash is the program counter, the eight-digit hex number after "eip=", you can still find out the corresponding source line using GDB.  Assuming that the EIP value is
<samp>NNNNNNNN</samp>, type this at the GDB prompt:

<pre>

      list *0xNNNNNNNN

</pre>
<P>
<P> | <A HREF="#Crash traceback"> Previous </A> | <A HREF="#Screen IO"> Next </A> | <A HREF="#Running"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="File data corrupted">

9.3 Reading and writing binary files </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I'm reading/writing data files, but the data gets corrupted. </em> <p>
<em><strong>Q</strong>: My program crashes when I read data files, but the same program on Unix works OK. </em> <p>
<em><strong>Q</strong>: When I read a file I get only a small portion of it. </em> <p>
<em><strong>Q</strong>: I'm trying to open an existing binary file for read/write using the <code>fstream</code> class, but no mater what I do, the file is always truncated after I write to it...
</em> <p>
<hr> <strong>A</strong>:  Are your data files binary?  The default file type in DOS is "text", even when you use the <code>read</code> and <code>write</code> library functions.  Text files get their
newlines converted to <samp>CR-LF</samp> pairs on write and vice versa on read; reading in "text" mode stops at the first <samp>^Z</samp> character.  Reading binary files as text will therefore
corrupt the data and fail to read all the data you need.  You must tell the system that a file is binary through the <code>b</code> flag in <code>fopen</code>, or <code>O_BINARY</code> in
<code>open</code>, or use the <code>setmode</code> library function.  <p>

Note that the above distinction between binary and text files is written into the ANSI/ISO C standard, so programs that rely on the Unix behavior whereby there's no such distinction, are strictly
speaking not portable.  <p>

You can also use the low-level <code>_read</code> and <code>_write</code> library functions which give you the direct interface to the DOS file I/O; they always use binary I/O.  <p>

Problems with read/write access to binary files via <code>fstream</code> class in C<tt>++</tt> programs are due to a bug in the GNU iostream library.  This bug causes truncation of files, even if you
never write to the file.  The library distributed with GCC version 2.8.1 is free of that bug, so upgrade.  A workaround is to do something like this:

<pre>

      fstream inFile;
      int fd = open ("foobar", O_RDWR | O_BINARY);
      inFile.open (fd);

</pre>
<P>
<P> | <A HREF="#File data corrupted"> Previous </A> | <A HREF="#Distributing"> Next </A> | <A HREF="#Running"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Screen IO">

9.4 Buffered screen I/O surprises </A></H3><P>
</CENTER>
<em><strong>Q</strong>: My program prompts the user to enter data from the keyboard, then reads its response.  When compiled with a 16-bit compiler like BCC or MSC it works as expected, but with gcc
the prompt doesn't show, or is printed much later in the program. </em> <p>
<em><strong>Q</strong>: Help!  I cannot make `gotoxy' work!  The text I print appears on the screen in incorrect locations after I use `gotoxy'! </em> <p>
<em><strong>Q</strong>: Why does the text appear in the default colors even though I call `textcolor' and `textbackground'? </em> <p>
<hr> <strong>A</strong>:  Do you write to screen using buffered I/O (<code>fprintf</code>, <code>fputs</code> and the like) functions, or send your output to the C<tt>++</tt> <code>cout</code>
stream?  Then what you see is the effect of the buffering of the standard output streams.  The buffer is not written to screen until it's full, or until a newline is output, which might produce very
unpleasant and unexpected behavior when used in interactive programs.  <p>

It is usually a bad idea to use buffered I/O in interactive programs; you should instead use screen-oriented functions like <code>cprintf</code> and <code>cputs.</code>  If you must use buffered I/O,
you should be sure that both <code>stdout</code> and <code>stderr</code> are line-buffered or unbuffered (you can change the buffering by calling the <code>setvbuf</code> library function); another
solution would be to <code>fflush</code> the output stream before calling any input function, which will ensure all pending output is written to the operating system.  While this will generally work
under DOS and DJGPP, note that in some cases the operating system might further buffer your output, so sometimes a call like <code>sync</code> would be needed to actually cause the output be
delivered to the screen.  <p>

The functions that set text attributes only affect the screen-oriented output (a.k.a. <dfn>conio</dfn>) functions (<code>cputs</code>, <code>cprintf</code> etc.), the text written by
<code>fprintf</code> and other <dfn>stdio</dfn> functions doesn't change.  This is unlike some 16-bit DOS compilers where <code>stdio</code> functions can also print colored text.

<P>
<P> | <A HREF="#Screen IO"> Previous </A> | <A HREF="#File handles"> Next </A> | <A HREF="#Running"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Distributing">

9.5 What do DJGPP programs need to run? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: When I copy my DJGPP application program to another PC where no DJGPP is installed, I can't run it.  It complains that it cannot find DPMI (??).  Do I really need all of your
multi-megabyte installation to run compiled programs? </em> <p>
<hr> <strong>A</strong>:  No, you don't.  You can either (a) bring the <samp>CWSDPMI.EXE</samp> free DPMI host to the target machine and put it in the same directory as your compiled program or
somewhere along the <code>PATH</code>, or (b) install another DPMI host (such as QDPMI, 386Max, Windows, etc.) on the target machine.  <p>

If your program could be run on a machine which lacks a floating-point processor, you should also distribute an emulator, or link your program with an emulator library.  See
<A HREF="#Emulation">floating-point emulation issues</A>.  <p>

<samp>PMODE/DJ</samp> can be bound with your program, so that you have a single self-sufficient executable, but remember that <samp>PMODE/DJ</samp> doesn't support virtual memory, so such programs
will only run on machines with enough free physical RAM.

<P>
<P> | <A HREF="#Distributing"> Previous </A> | <A HREF="#Running"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="File handles">

9.6 How many file handles can DJGPP use? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: The library reference tells me that DJGPP programs can use up to 255 file handles, but my program can only use much less, about 30... </em> <p>
<em><strong>Q</strong>: I put a <samp>FILES=60</samp> directive in my <samp>CONFIG.SYS</samp>, but my programs cannot use more than 42 when they run on Windows.  Why is that? </em> <p>
<hr> <strong>A</strong>: It's no wonder you are confused: this is one of the most complicated issues related to the DOS filesystem.  I cannot discuss all the details here(<i><b>Note: </b>Those who
want <em>all</em> the details should consult a good book about DOS internals, such as <cite>Undocumented DOS, 2nd ed.</cite> by Andrew Schullman, or Geoff Chappel's <cite>DOS Internals</cite>.</i>),
but I will try to explain at least those aspects which directly affect a typical DJGPP user.  <p>

It is true that DJGPP library lets you open up to 255 handles--but only if the operating system allows it.  The operating system further limits this number, depending on several factors.  <p>

First, if you create new handles by calling the <code>dup</code> library function (or the underlying function 45h of the DOS Interrupt 21h), you can always have up to 255 such handles, even if the
<samp>FILES=</samp> directive sets a much smaller count.  All such handles refer to the same file or device and moving the file pointer using one handle moves all the rest of them.  <p>

In nested programs (that is, programs that were invoked by other programs), this is a bit more complicated.  By default, any handle that is open in the parent program is <dfn>inherited</dfn> by the
child, unless the parent sets the special <code>O_NOINHERIT</code> bit when it opens the file.  Thus, if the parent had 10 files open when it invoked the child, the child program will have 10 less
available handles--245--to work with, even if it only calls <code>dup</code>(<i><b>Note: </b>All DOS programs get the default 20-handle table when they start; DOS only copies the first 20 handles
into the child, so it is not possible to inherit more than 20 handles.  The expansion of the default 20-handle table to 255 handles is a special feature of the DJGPP library, and it only happens when
the programs exhausts all of the 20 handles while it runs.  Therefore, when all of the first 20 handles are taken up by files inherited from the parent program, the child program can fail to start
because the DJGPP stub loader needs one free handle to open and read the COFF executable into memory.  The stub cannot use the enlarged 255-handle table, since it cannot call the DJGPP library.  Such
problems indeed happen in programs compiled with DJGPP v2.01; v2.02 fixes this bug.</i>).  <p>

The <samp>FILES=</samp> directive comes into play when you call <code>open</code> or any of its brethren to create handles.  Unlike the handles created by <code>dup</code>, <code>open</code> (and the
underlying functions 3Dh or 6Ch of Interrupt 21h) create handles that are <em>independent</em> of each other, even if you open the same file over and over again.  The operating system will not let
you create more such handles than the limit set by the <samp>FILES=</samp> directive.  This is because the <samp>FILES=</samp> directive sets the number of entries in the SFT, the <dfn>System File
Table</dfn> maintained by DOS, where all the information about every open file is kept(<i><b>Note: </b>Each handle created by a call to <code>open</code> uses up one slot in the SFT, whereas a handle
created by <code>dup</code> just increments the use count of a slot that was already in use.</i>).  So, if your <samp>CONFIG.SYS</samp> specifies <samp>FILES=60</samp>, you cannot <code>open</code>
more than 60 files.  After that, a call to <code>open</code> will fail with <code>ENFILE</code> (Too many open files in system).  <p>

In practice, you won't even be able to get 60 handles if you have <samp>FILES=60</samp> in your <samp>CONFIG.SYS</samp>, since several handles are always preconnected.  On plain DOS, 5 handles are
already open when a program starts.  These correspond to standard input, standard output, and standard error streams, and the other 2 handles are connected to the AUX and PRN devices.  So, if you
have <samp>FILES=60</samp>, DOS will only let you open up to 55 independent handles.  <p>

The plot thickens even more if you run DJGPP programs on Windows.  Since Windows itself uses up 10-15 handles in the System Virtual Machine (VM), it tries to make it up for the DOS programs by adding
private file tables to each DOS box with additional handles, beyond those maintained in the SFT.  The default is to add a private table with 10 handles to each DOS box, but the
<samp>PerVMFiles=</samp> entry in the <samp>[386Enh]</samp> section of the <samp>SYSTEM.INI</samp> file can override that.  So on Windows, you need to consider the <samp>PerVMFiles=</samp> setting as
well, and the resulting limit on open handles is less predictable since the number of handles used by Windows isn't constant (for example, it depends on how many fonts are loaded by Windows programs
at any given moment).  <p>

If your system loads <samp>SHARE.EXE</samp> during bootstrap, things become even more complicated.  <samp>SHARE.EXE</samp> prevents Windows from adding private file tables (because it couldn't spy on
files open via those private handles), so you get 10-15 less handles than what the <samp>FILES=</samp> directive says, and sometimes even less than that.  That is how somebody who has
<samp>FILES=60</samp> on their <samp>CONFIG.SYS</samp> could only get 42 handles on Windows.  If you are looking for reasons not to load <samp>SHARE.EXE</samp>, here you have another one.

<P>
<P> | <A HREF="#Running"> Previous </A> | <A HREF="#Floating point"> Next </A> | <A HREF="#Top"> Up </A> | <P>
<P>
<P>
<CENTER>
<H2>

<A NAME="Graphics">

10. Writing and Running Graphics Programs </A></H2><P>
</CENTER>
  This chapter discusses some problems and explains some subtle points related to graphics programming under DJGPP.  <p>

Another important source of related information is a tutorial on <a href="http://remus.rutgers.edu/~avly/djgpp.html">graphics programming with DJGPP</a>.

<p>
<ul>
<li><A HREF="#Which driver"> 10.1 Which driver--What driver to use with your SVGA?  </A>
<li><A HREF="#Direct access"> 10.2 Direct access--Under protected-mode it is (almost) forbidden.  </A>
<li><A HREF="#Graphics and Windows"> 10.3 Graphics and Windows--Windows can get into the way of your programs.  </A>
</ul>
<P>
<P> | <A HREF="#Graphics"> Previous </A> | <A HREF="#Direct access"> Next </A> | <A HREF="#Graphics"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Which driver">

10.1 What GRX driver to use with your SVGA </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Why won't GRX work with my SVGA adapter in any resolution but the standard VGA? </em> <p>
<em><strong>Q</strong>: How do I tell GRX which driver to use with my SVGA? </em> <p>
<hr> <strong>A</strong>:  In order for GRX to work with your SVGA, you should set the <code>GRX20DRV</code> environment variable, like this:

<pre>

       set GRX20DRV=et4000 gw 1024 gh 768 nc 256

</pre>
To set that variable, you need to know the chip-set on your adapter; refer to your SVGA documentation.  Currently, GRX supports the following chip-sets:

<dl>
<dt> ati28800
<dd> The ATI 28800 chip-set.

<dt> cl5426
<dd> Cirrus Logic CL-GD5426 or higher (like CL-GD5428) chip-set.

<dt> et4000
<dd> Tseng Labs ET4000 chip-set.

<dt> mach64
<dd> The ATI Mach-64 SVGA.

<dt> stdega
<dd> The standard EGA adapter.

<dt> stdvga
<dd> The standard VGA adapter.

<dt> VESA
<dd> For any VESA-compatible adapter.
</dl>
After you set the <code>GRX20DRV</code> variable, run <samp>modetest.exe</samp> to see what modes you have available.  <p>

If your chip-set is not one of the above, try the <samp>VESA</samp> driver because many adapters support the VESA BIOS extensions.  If yours doesn't, try installing a VESA BIOS emulator, like
<a href="ftp://ftp.simtel.net/pub/simtelnet/msdos/graphics/univbe51.zip">UNIVBE</a>.  The latest version of UNIVBE and related software is always available
<a href="http://www.scitechsoft.com/">from SciTech Web site</a>.

<P>
<P> | <A HREF="#Which driver"> Previous </A> | <A HREF="#Graphics and Windows"> Next </A> | <A HREF="#Graphics"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Direct access">

10.2 Accessing the video memory </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I try to access the video memory at <code>0xa0000</code>, but my program crashes with SIGSEGV... </em> <p>
<em><strong>Q</strong>: How can I access the text-mode video memory of my VGA? </em> <p>
<hr> <strong>A</strong>:  Absolute addresses of memory-mapped devices are mapped differently under DJGPP than what you might be used to under other DOS development environments.  That's because DJGPP
is a protected-mode environment, in which you can't just poke any address:  that's what protected mode is all about!  To access such absolute addresses, use the so-called "farptr" functions like
<code>_farpeekb</code> and <code>_farpokew</code>; they are described in the C Library reference.  See <A HREF="#Xfer">more details on using "farptr" functions to access absolute addresses in low
memory</A>, below.  <p>

For text-mode screen updates, you can use the <code>ScreenUpdate</code> and <code>ScreenUpdateLine</code> library functions to quickly update the screen from a text buffer.  <p>

Using the <code>_farpeekX/_farpokeX</code> paradigm to access memory isn't much slower than direct access (they compile into 2 machine instructions when optimizations are enabled).  But if you need
even faster access (and don't want to write it in assembly), see <A HREF="#Fat DS">using the "nearptr" access facilities</A>, as described below.  <p>

If your video card supports the VBE 2.0 standard, you can access the linear frame buffer as a normal array in memory.  For an example of such a technique, see the
<a href="ftp://ftp.neosoft.com/pub/users/s/sandmann/vbe.zip">VBE example code by Charles Sandmann</a>.  You can also reach this file
<a href="http://www.rt66.com/~brennan/djgpp/vbe.zip">via the Web</a>.

Some examples of how to access video memory from DJGPP programs are available <a href="http://brennan.home.ml.org/djgpp/">from Brennan Underwood's Web page</a>.

<P>
<P> | <A HREF="#Direct access"> Previous </A> | <A HREF="#Graphics"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Graphics and Windows">

10.3 Graphics screen restoring under Windows </A></H3><P>
</CENTER>
<em><strong>Q</strong>: When I switch away from my DJGPP program under Windows 3.X, then switch back to it, graphics mode is down, or my screen is all messed up.  Why? </em> <p>
<em><strong>Q</strong>: I cannot run my program which uses Allegro: Windows 9X says the program would work better in DOS Mode... </em> <p>
<hr> <strong>A</strong>:  Windows 3.X only saves the VGA screen in standard VGA modes (1..13h) when you task-switch away from a DOS application.  In any other mode it only saves/restores the video
mode <em>number</em>, but not the actual screen contents.  Your application is most likely still in the proper video mode (if not, it's probably the fault of the Windows driver for your SVGA card),
but the video memory is messed up.  The beauty of all this is that your program has no way of knowing that the screen has been taken away and then returned to it.  <p>

The only reasonable thing to do is to dedicate a "hotkey" in your application (e.g., <kbd>Alt-R</kbd>) whose action is to redraw the entire screen.  If you do that, it's best to start all the way
from the beginning, e.g. with a call to <code>GrSetMode</code> (if you use GRX), as there are a few bad Windows video drivers which do not restore SVGA graphics modes properly upon the switch back.
<p>

Windows 9X <em>does</em> save and restore the SVGA state, but only if you task-switch with the <kbd>Alt-&lt;TAB&gt;</kbd> key.  If the switch happens because of anything else, like a window popping
up, or you pressing the <samp>Start</samp> button, there's nothing your application can do to ensure it restores correctly, because it just never gets moved back into focus.  As soon as the user
tries to restore it, Windows 9X comes up with this message:

<pre>

      This application cannot be restored and will be terminated.

</pre>
To prevent Windows 9X from getting in your way when running graphics programs, like popping up messages that suggest to run the program in DOS Mode, just disable one or more of the relevant
properties for that program.  Here's a detailed procedure to disable them all:

<ul>
<li> Right-click on the program's <samp>.exe</samp> file in the <samp>Explorer</samp> or in <samp>My Computer</samp>, then click on <samp>Properties</samp>.

<li> Click on the <samp>Program</samp> tab, then press the <samp>Advanced</samp> button, and change the advanced properties as follows:

<ul>
<li> uncheck the <samp>Suggest DOS Mode as necessary</samp> option;
<li> check the <samp>DOS Mode</samp> option;
<li> uncheck the <samp>Warn before entering DOS Mode</samp> option;
<li> check the <samp>Prevent MS DOS programs from detecting Windows</samp> option;
<li> uncheck the <samp>DOS Mode</samp> option.
</ul>
<li> Finally, click the <samp>OK</samp> button twice.
</ul>
Programs which use latest versions of Allegro should not usually trigger warning messages from Windows, so upgrade to the latest Allegro version if you keep getting such warnings.

<P>
<P> | <A HREF="#Graphics"> Previous </A> | <A HREF="#Debugging"> Next </A> | <A HREF="#Top"> Up </A> | <P>
<P>
<P>
<CENTER>
<H2>

<A NAME="Floating point">

11. Floating Point Issues and FP Emulation </A></H2><P>
</CENTER>
  This chapter deals with issues pertaining to floating-point code and floating-point emulation under DJGPP.

<p>
<ul>
<li><A HREF="#Emulation"> 11.1 Emulation--What are your emulation options.  </A>
<li><A HREF="#Other emulators"> 11.2 Other emulators--You can't use them.  </A>
<li><A HREF="#OS2 emulation"> 11.3 OS2 emulation--It doesn't serve DJGPP programs.  </A>
<li><A HREF="#-msoft-float"> 11.4 -msoft-float--This GCC switch isn't supported.  </A>
<li><A HREF="#Numeric exceptions"> 11.5 Numeric exceptions--Don't give us these NaN's!  </A>
<li><A HREF="#Emulator accuracy"> 11.6 Emulator accuracy--Not always as good as we'd like.  </A>
<li><A HREF="#SIGFPE with ObjC"> 11.7 SIGFPE with ObjC--Objective C cannot run without FPU.  </A>
<li><A HREF="#SIGFPE in ldexp"> 11.8 SIGFPE in ldexp--Some libm functions bomb.  </A>
</ul>
<P>
<P> | <A HREF="#Floating point"> Previous </A> | <A HREF="#Other emulators"> Next </A> | <A HREF="#Floating point"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Emulation">

11.1 Floating-point code without 80387 </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I don't have an 80387.  How do I compile and run floating point programs? </em> <p>
<em><strong>Q</strong>: What shall I install on a target machine which lacks hardware floating-point support? </em> <p>
<hr> <strong>A</strong>: Programs which use floating point computations and could be run on machines without an 80387 should either be linked with the <samp>libemu.a</samp> emulation library (add
<samp>-lemu</samp> to your link command line) or be allowed to dynamically load the <samp>emu387.dxe</samp> file at run-time if needed.  Linking with libemu makes distribution simpler at a price of
adding about 20KB to the size of the program <samp>.exe</samp> file (the emulator functions will be used only if no hardware floating point support is detected at runtime).  You should
<strong>always</strong> do one of the above when you distribute floating-point programs.  <p>

A few users reported that the emulation won't work for them unless they explicitly tell DJGPP there is no x87 hardware, like this:

<pre>

       set 387=N
       set emu387=c:/djgpp/bin/emu387.dxe

</pre>
This is probably due to some subtle bug in the emulator setup code.  This code is hard to debug, because the people who developed it have machines with hardware FP processors.  Volunteers with
FPU-less machines are needed to help debug the above problem.  If you have access to a system without an FPU and are willing to fix this problem, write to
<a href="mailto:sandmann@clio.rice.edu">Charles Sandmann</a> and ask him for guidance.  <p>

There is an alternative FP emulator called <samp>WMEMU</samp> (get the file <samp>v2misc/wmemu2b.zip</samp>).  It mimics a real coprocessor more closely, but is larger in size and is distributed under
the GNU General Public License (which generally means you need to distribute its source if you distribute <samp>wmemu387.dxe</samp>, or distribute the source or objects to your entire program, if you
link it with <samp>libwmemu.a</samp>).  Its advantage is that with <samp>WMEMU</samp>, you can debug FP apps on a non-FPU machine.  (But you will need to get the sources and recompile it, since it
was compiled with a beta release of DJGPP and will cause unresolved externals if you try linking against <samp>libwmemu.a</samp> without recompiling it.)  Note, however, that even <samp>WMEMU</samp>
doesn't solve all the problems of debugging FP programs on a non-FPU machine (e.g., emulating flags doesn't work).

<P>
<P> | <A HREF="#Emulation"> Previous </A> | <A HREF="#OS2 emulation"> Next </A> | <A HREF="#Floating point"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Other emulators">

11.2 Other FP emulators cannot be used with DJGPP </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I have an 80387 emulator installed in my <samp>AUTOEXEC.BAT</samp>, but DJGPP-compiled floating point programs still doesn't work.  Why? </em> <p>
<hr> <strong>A</strong>:  DJGPP switches the CPU to <em>protected</em> mode, and the information needed to emulate the 80387 is different.  Not to mention that the exceptions never get to the
real-mode handler.  You <em>must</em> use emulators which are designed for DJGPP.  Apart of <samp>emu387</samp> and <samp>WMEMU</samp>, the only other emulator known to work with DJGPP is
<samp>Q87</samp> from QuickWare.  <samp>Q87</samp> is shareware and is available <a href="http://www.weblane.com/quickware">from the QuickWare Web site</a>.

<P>
<P> | <A HREF="#Other emulators"> Previous </A> | <A HREF="#-msoft-float"> Next </A> | <A HREF="#Floating point"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="OS2 emulation">

11.3 Floating-point emulation under OS/2 </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I run DJGPP in an OS/2 DOS box, and I'm told that OS/2 will install its own emulator library if the CPU has no FPU, and will transparently execute FPU instructions.  So why
won't DJGPP run floating-point code under OS/2 on my machine? </em> <p>
<hr> <strong>A</strong>:  OS/2 installs an emulator for native OS/2 images, but does not provide FPU emulation for DOS sessions.

<P>
<P> | <A HREF="#OS2 emulation"> Previous </A> | <A HREF="#Numeric exceptions"> Next </A> | <A HREF="#Floating point"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="-msoft-float">

11.4 DJGPP doesn't support <samp>-msoft-float</samp> </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I've read in the GCC Info file that gcc has a <samp>-msoft-float</samp> option which is said to generate library calls for floating point support.  Can this facility be used
for FP emulation on a machine without x87? </em> <p>
<hr> <strong>A</strong>:  The GCC Info file also says that the library required by <samp>-msoft-float</samp> is <strong>not</strong> part of the GNU C compiler.  As nobody wrote such a library for
DJGPP (yet), this option currently isn't supported.

<P>
<P> | <A HREF="#-msoft-float"> Previous </A> | <A HREF="#Emulator accuracy"> Next </A> | <A HREF="#Floating point"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Numeric exceptions">

11.5 Numeric exceptions--sometimes </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I have a program which works with FP emulation, but dies with "Numeric Exception" when run on a machine with a co-processor.  It also runs OK when compiled with Microsoft C.
Can't you people make your floating-point code right? </em> <p>
<hr> <strong>A</strong>: This might be still a problem with your program.  Under DJGPP, the 80x87 control word is set up so that it generates an exception when your program feeds it with a
<dfn>NaN</dfn> ("Not a Number"), while the emulator doesn't have this behavior.  You should make sure that your program doesn't generate NaNs, or set the 80x87 control word to a different value.  A
library function called <code>_control87</code> can be used from within a program to set the coprocessor to a non-default state.

<P>
<P> | <A HREF="#Numeric exceptions"> Previous </A> | <A HREF="#SIGFPE with ObjC"> Next </A> | <A HREF="#Floating point"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Emulator accuracy">

11.6 Floating point inaccuracies when using emulator </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I am experiencing inaccurate results in some floating point calculations, sometimes in the 2nd or 3rd significant digit (like getting 118.401 instead of 120.0).  This is
really unacceptable!  (And no, I'm <strong>not</strong> using a buggy Pentium CPU.) </em> <p>
<hr> <strong>A</strong>:  Are you using the emulator?  If so, it might be that the emulator isn't as accurate as you expect.  One particular known problem is that it does a bad job when computing the
<code>atan</code> function.  So if you use <code>atan(1.)</code> to get the value of <samp>Pi</samp>, that might be your problem.  Solution: make <samp>Pi</samp> a constant, as God intended.  The
header file <code>&lt;math.h&gt;</code> includes the constant <code>M_PI</code> which you can use; or get the value of <a href="http://www.diku.dk/~terra/pi.html"><b>Pi</b> from the net</a>.

<P>
<P> | <A HREF="#Emulator accuracy"> Previous </A> | <A HREF="#SIGFPE in ldexp"> Next </A> | <A HREF="#Floating point"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="SIGFPE with ObjC">

11.7 Floating point exception in Objective-C programs </A></H3><P>
</CENTER>
<em><strong>Q</strong>: When I run my Objective-C programs on a machine without an FPU, it dies with a floating point exception, even though I installed the emulator as the docs say... </em> <p>
<hr> <strong>A</strong>: There is a bug in GCC 2.7.2 whereby it sometimes emits Objective-C code that crashes ObjC programs.  A patch that fixes it was posted to the DJGPP news group; get it
<a href="http://www.delorie.com/djgpp/mail-archives/djgpp/1996/05/05/11:05:21">via the Web</a>.

You will have to get the GCC source distribution <samp>gcc2721s.zip</samp>, install the above patch, rebuild <samp>cc1obj.exe</samp>, and then recompile <samp>libobjc.a</samp> to make the problem go
away.

<P>
<P> | <A HREF="#SIGFPE with ObjC"> Previous </A> | <A HREF="#Floating point"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="SIGFPE in ldexp">

11.8 Floating point exception in libm functions </A></H3><P>
</CENTER>
<em><strong>Q</strong>: When I use the <code>ldexp</code> function, my program crashes with SIGFPE.  What's wrong? </em> <p>
<hr> <strong>A</strong>: There is a bug in the scaling code in <samp>libm.a</samp> library released with DJGPP v2.0 which affects several library functions such as <code>ldexp</code>.  A work-around
is to link without <samp>-lm</samp> switch; this will cause <samp>GCC</samp> to use math functions from <samp>libc.a</samp>.  If you need math functions which are only in <samp>libm.a</samp>, or if
you need <samp>libm.a</samp> for better numerical performance, <a href="ftp://ftp.lstm.ruhr-uni-bochum.de/pub/djgpp/libm.zip">a patched version of libm is available</a>, courtesy of
<a href="mailto:Demmer@LStM.Ruhr-Uni-Bochum.De">Tom Demmer</a>.  DJGPP v2.01 corrects this bug, so upgrade to that version if you can.

<P>
<P> | <A HREF="#Floating point"> Previous </A> | <A HREF="#Profiling"> Next </A> | <A HREF="#Top"> Up </A> | <P>
<P>
<P>
<CENTER>
<H2>

<A NAME="Debugging">

12. Debugging DJGPP Programs </A></H2><P>
</CENTER>
  This chapter discusses the debuggers you can use with DJGPP and answers some of the questions you might have when debugging DJGPP programs.

<p>
<ul>
<li><A HREF="#How to debug"> 12.1 How to debug--What should you do to debug a program.  </A>
<li><A HREF="#Crash dump"> 12.2 Crash dump--How to use the crash dump info.  </A>
<li><A HREF="#Old QDPMI"> 12.3 Old QDPMI--Some QDPMI versions will crash the debugger.  </A>
<li><A HREF="#GDB needs COFF"> 12.4 GDB needs COFF--GDB can't use the <b>.exe</b> program.  </A>
<li><A HREF="#Debug graphics"> 12.5 Debug graphics--Debugging GUI programs.  </A>
<li><A HREF="#GDB and C++ source"> 12.6 GDB and C++ source--Problems with non-<b>.cc</b> extensions.  </A>
<li><A HREF="#C++ classes in GDB"> 12.7 C++ classes in GDB--Class members' names in GDB.  </A>
<li><A HREF="#Included source"> 12.8 Included source--Debuggers have problems with included files.  </A>
<li><A HREF="#Static vars"> 12.9 Static vars--GDB might not let you debug them.  </A>
<li><A HREF="#Debugging woes"> 12.10 Debugging woes--Some programs which cannot be debugged.  </A>
</ul>
<P>
<P> | <A HREF="#Debugging"> Previous </A> | <A HREF="#Crash dump"> Next </A> | <A HREF="#Debugging"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="How to debug">

12.1 How to run a DJGPP program under debugger </A></H3><P>
</CENTER>
<em><strong>Q</strong>: How do I debug my programs? </em> <p>
<hr> <strong>A</strong>: First, remember to use the <samp>-g</samp> switch when you compile and link.  This puts debugging information into your executable.  When linking, don't use the
<samp>-s</samp> switch.  Here are a few examples of compilation and link command lines when you intend to debug a program:

<pre>

      gcc -Wall -c -g -O myfile.c
     
      gcc -Wall -O2 -g -o myprog.exe mymain.c mysub1.c mysub2.c -lm
     
      gcc -g -o myprog myprog.o mysub.o

</pre>
Note that with <samp>gcc</samp>, you can use optimization switches when compiling with <samp>-g.</samp>  To use stabs debugging, compile with <samp>-gstabs3</samp> or <samp>-gstabs+</samp> instead of
<samp>-g</samp>.  <p>

Then, to debug the program, use a command line like this (here for <samp>gdb</samp>):

<pre>

      gdb myprog.exe

</pre>
Beginning with v2.01, DJGPP debuggers can debug both unstubbed COFF images and DOS-style .exe executables (v2.0 only supported COFF files).  To debug a COFF file, name it without the .exe extension,
like so:

<pre>

      gdb myprog

</pre>
You can use one of several available debuggers with DJGPP:

<ol>
<li> <b><tt>RHIDE</tt></b>, the DJGPP IDE by Robert Hoehne is available <a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2apps/rhide14b.zip">from the DJGPP archives</a>.  It includes an
integrated source-level debugger based on GDB code and presents a user interface like that of Borland's IDE or Turbo Debugger.

<li> <samp>RHGDB</samp>, a stand-alone version of GDB with a Turbo Vision user interface.  <samp>RHGDB</samp> is part of the <b><tt>RHIDE</tt></b> distribution; it only supports part of GDB features.

<li> <samp>FSDB</samp>, the full-screen debugger, from the <samp>djdev</samp> distribution.  This presents a user interface like that of Borland's Turbo Debugger, but unlike TD, <strong>it isn't a
source-level debugger</strong> (although it will show the source code together with the machine instructions).  It also supports data-write breakpoints: a powerful feature for hunting down code which
overwrites data it shouldn't touch.  Another advantage of <samp>FSDB</samp> is that you can easily debug programs that grab the screen, because it can switch between the debugger screen and the
application screen.  Also, it allows to examine the FPU registers.  The main disadvantage of <samp>FSDB</samp> is that you cannot easily examine the contents of complex data structures.  Remember to
prepend an underscore <kbd>_</kbd> to the names of C identifiers when you use them with <samp>FSDB</samp>; for C<tt>++</tt> programs you will have to find out the mangled names of static class
variables and methods to make <samp>FSDB</samp> understand them.

<li> <a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2gnu/gdb416b.zip"><samp>GDB</samp></a>, the GNU Debugger.  This is a powerful source-level debugger, but it uses a line-oriented user
interface.  People who are familiar with using <samp>GDB</samp> on Unix should know about the following important differences in its operation on MS-DOS:

<ul>
<li> The command-line arguments can be only passed to the debuggee(<i><b>Note: </b>That's the program being debugged, in case you didn't know.</i>) from within the debugger (use the <samp>set
args</samp> or <samp>run</samp> commands), not from the <samp>GDB</samp> command line.

<li> <samp>GDB</samp> is currently configured for DJGPP in a way that makes loading a program and reading a source file when a breakpoint is hit <strong>exceedingly</strong> slow: it can take more
than a minute for a very large program.  Be patient and don't decide that <samp>GDB</samp> is wedged unless you've waited several minutes.  A source-level patch to GDB was posted to the DJGPP News
group, which corrects this problem; you can get this patch by searching the DJGPP mail archives.

<li> <samp>GDB</samp> doesn't know about PC-specific keys, so you cannot use the arrow keys for command history editing.  Use ASCII control keys instead (<kbd>^F</kbd> for forward character,
<kbd>^B</kbd> for backward character, <kbd>^P</kbd> for previous line, <kbd>^N</kbd> for next line, etc.).

<li> The debugger and the debuggee share their file handles.  This means, for example, that if your program redirects or closes its <code>stdin</code> or <code>stdout</code>, you will be unable to
communicate with <samp>GDB</samp>.

<li> The initial commands are read from a file named <samp>gdb.ini</samp> instead of <samp>.gdbinit</samp>, because MS-DOS doesn't allow file names with leading dots.

<li> <samp>GDB</samp> uses the GNU <samp>readline</samp> package for its input.  The <samp>readline</samp> init file (<samp>~/.inputrc</samp> on Unix) is called <samp>/inputrc</samp> on MS-DOS and
should be in the root directory of the current drive.
</ul>
<li> <samp>EDEBUG32</samp> is the most basic debugger you can use with DJGPP.  One case when you would need to use it is when you debug a DXE module (see <A HREF="#DXE">explanation of what a DXE
is</A>), because <samp>GDB</samp> doesn't support debugging DXEs.

</ol>
You invoke any debugger like this:

<pre>

      &lt;debugger-name&gt; &lt;program&gt; &lt;args...&gt;

</pre>
<P>
<P> | <A HREF="#How to debug"> Previous </A> | <A HREF="#Old QDPMI"> Next </A> | <A HREF="#Debugging"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Crash dump">

12.2 How to begin debugging using the crash dump info </A></H3><P>
</CENTER>
<em><strong>Q</strong>: My program crashed with SIGSEGV, but I'm unsure how to begin debugging it... </em> <p>
<em><strong>Q</strong>: Can you help me figure out all those funny numbers printed when my program crashes? </em> <p>
<hr> <strong>A</strong>: Debugging should always begin with examining the message printed when the program crashes.  That message includes crucial information which usually proves invaluable during
debugging.  So the first thing you should do is carefully save the entire message.  On plain DOS, use the &lt;PrintScreen&gt; key to get a hard copy of the message.  On Windows, use the clipboard to
copy the message to a text editor or the Notepad, and save it to a file.  If you can easily reproduce the crash, try running the program after redirecting the standard error stream, where the crash
dump is printed, to a file, e.g. like this:

<pre>

       redir -e crash.txt myprog [arguments to the program go here]

</pre>
(here I used the <code>redir</code> program supplied with DJGPP; the <samp>-e</samp> switch tells it to redirect the standard error stream to the named file).  <p>

After you've saved the crash message, look at the name of the crashed program, usually printed on the 4th line.  Knowing which program crashed is important when one program calls another, like if you
run a program from <b><tt>RHIDE</tt></b>.  Without this step, you might erroneously try to debug the wrong program.  <p>

The next step in the debugging is to find out where in the code did the program crash.  The <code>SYMIFY</code> program will help you translate the call frame traceback, which is the last portion of
the crash message, into a list of function names, source files and line numbers which describe the sequence of function calls that led to the crash.  The top-most line in the call frame traceback is
the place where the program crashed, the one below it is the place that called the function which crashed, etc.  The last line will usually be in the startup code, in a function called
<code>__crt1_startup</code>, but if the screen is too small to print the entire traceback without scrolling, the traceback will be truncated before it gets to the startup.  See
<A HREF="#Crash traceback">how to use <code>SYMIFY</code></A>, for more details about the call frame traceback and <code>SYMIFY</code> usage.  <p>

If you compiled your program without the <samp>-g</samp> switch, or if you stripped the debugging symbols (e.g., using the <samp>-s</samp> linker switch), you will have to rebuild the program with
<samp>-g</samp> and without <samp>-s</samp>, before you continue.  <p>

Next, you need to get an idea about the cause of the crash.  To this end, look at the first two lines of the crash message.  There you will find a description of the type of the crash, like this:

<pre>

      Exiting due to signal SIGSEGV
      Page Fault at eip=00008e89, error=0004

</pre>
(the actual text in your case will be different).  The following table lists common causes for each type of crash:

<dl>
<dt> Page Fault
<dd> This usually means the program tried to access some data via a NULL or uninitialized pointer.  A NULL pointer is a pointer which holds an address that is zero; it can come from a failed call to
<code>malloc</code> (did your code check for that?).  An uninitialized pointer holds some random garbage value; it can come from a missing call to <code>malloc</code>.  <p>

If the message says <samp>Page Fault in RMCB</samp>, then it usually means that the program installed an interrupt handler or a real-mode callback (a.k.a. RMCB), but failed to lock all the memory
accessed by the handler or functions it calls.  See <A HREF="#HW Int pitfalls">installing hardware interrupt handlers</A>, for more about this.  <p>

<dt> General Protection Fault
<dd> This can be caused by a variety of reasons:

<ul>
<li> use of an uninitialized or a garbled pointer (beyond the limit of the DS segment printed at the time of crash);

<li> overwriting the stack, e.g. by writing (assigning values) to array elements beyond the array limits, or due to incorrect argument list passed to a function, like passing an <code>int</code> to a
function that expects a <code>double</code>, or passing buffers to a library function without sufficient space to hold the results;

<li> stack overflow.
</ul>
<p>

Overrunning the stack frame usually manifests itself by abnormal values of the <b><tt>EBP</tt></b> or <b><tt>ESP</tt></b> registers, printed right below the first two lines.  The normal case is when
<b><tt>ESP</tt></b> is <em>slightly smaller</em> than <b><tt>EBP</tt></b>, smaller than the limit of the <b><tt>SS</tt></b> segment, and usually <em>larger</em> than <b><tt>EIP</tt></b>(<i><b>Note:
</b>Programs that create machine code in <code>malloc</code>ed storage and then jump into it could have their <b><tt>EIP</tt></b> above <b><tt>EBP</tt></b>.  The Allegro library utilizes this
technique in some of its functions.</i>); anything else is a clear sign of a disaster.  <p>

Another telltale sign of an overrun stack frame is that the symified traceback points to a line where the function returns, or to its closing brace.  <p>

Suspect a stack overflow if the <b><tt>EBP</tt></b> and <b><tt>ESP</tt></b> values are close to one another, but both very low (the stack grows <em>downwards</em>), or if the call frame traceback
includes many levels, which is a sign of deep recursion.  Stubediting the program to enlarge its stack size might solve such problems.  See <A HREF="#Stack size">changing stack size</A>, for a
description of how to enlarge the stack.  If you use large automatic arrays, try to make their dimension smaller, or make them global, or allocate them at run time using <code>malloc</code>.  <p>

<dt> Stack Fault
<dd> Usually means a stack overflow, but can also happen if your code overruns the stack frame (see above).  <p>

<dt> Floating Point exception
<dt> Coprocessor overrun
<dt> Overflow
<dt> Division by Zero
<dd> These (and some additional) messages, printed when the program crashes due to signal <code>SIGFPE</code>, mean some error in floating-point computations, like division by zero or overflow.
Sometimes such errors happen when an <code>int</code> is passed to a function that expects a <code>float</code> or a <code>double</code>.  <p>

<dt> Cannot continue from exception, exiting due to signal 0123
<dd> This message is printed if your program installed a handler for a fatal signal such as <code>SIGSEGV</code> (0123 in hex is the numeric code of <code>SIGSEGV</code>; see the header
<samp>signal.h</samp> for the other codes), and that handler attempted to return.  This is not allowed, since returning to the locus of the exception will just trigger the same exception again and
again, so the DJGPP signal-handling machinery aborts the program after printing this message.  <p>

If you indeed wanted <code>SIGSEGV</code> to be generated in that case, the way to solve such problems is to modify your signal handler so that it calls either <code>exit</code> or
<code>longjmp</code>.  If <code>SIGSEGV</code> should not have been triggered, debug this as described below.  <p>

<dt> Invalid TSS in RMCB
<dd> This usually means that a program failed to uninstall its interrupt handler or RMCB when it exited.  If you are using DJGPP v2.0, one case where this happens is when a nested program exits by
calling <code>abort</code>: v2.0 had a bug in its library whereby calling <code>abort</code> would bypass the cleanup code that restored the keyboard interrupt hooked by the DJGPP startup code; v2.01
solves this bug.  <p>

Using the <code>itimer</code> facility can also cause such crashes if the program exits abnormally, or doesn't disable the timer before it exits.  <p>

<dt> Double Fault
<dd> If this message appears when you run your program under CWSDPR0 and press the Interrupt key (<kbd>Ctrl-&lt;C&gt;</kbd> or <kbd>Ctrl-&lt;BREAK&gt;</kbd>), then this is expected behavior (the
<code>SIGINT</code> generation works by invalidating the <b><tt>DS/SS</tt></b> selector, but since CWSDPR0 doesn't switch stacks on exceptions there's no place to put the exception frame for the
exception this triggers, so the program double faults and bails out).  Otherwise, treat this as <code>Page Fault</code>.  <p>

<dt> Control-Break Pressed
<dd> <dt> Control-C Pressed
<dd> These are not real crashes, but are listed here for completeness.  They are printed when <kbd>Ctrl-&lt;BREAK&gt;</kbd> or <kbd>Ctrl-&lt;C&gt;</kbd> is pressed, and by default abort the program
due to signal <code>SIGINT</code>.
</dl>
<p>

If you are lucky, and the crash happened inside your function (as opposed to some library function), then the above info and the symified call frame traceback should almost immediately suggest
where's the bug.  You need to analyze the source line corresponding to the top-most <b><tt>EIP</tt></b> in the call frame traceback, and look for the variable(s) that could provide one of the reasons
listed above.  If you cannot figure it out by looking at the source code, run the program under a debugger until it gets to the point of the crash, then examine the variables involved in the crashed
computation, to find those which trigger the problem.  Finally, use the debugger to find out how did those variables come to get those buggy values.  <p>

People which are less lucky have their programs crash inside library functions for which <code>SYMIFY</code> will only print their names, since the libraries are usually compiled without the debug
info.  You have several possible ways to debug these cases:

<ul>
<li> Begin with the last call frame that <code>SYMIFY</code> succeeded to convert to a pointer to a line number in a source file.  This line should be a call to some function in some library you used
to link your program.  Re-read the docs for that function and examine all the arguments you are passing to it under a debugger, looking for variables that could cause the particular type of crash you
have on your hands, as described above.

<li> Link your program against a version of the library that includes the debug info.  You can either (a) download such a library from the net (see <A HREF="#Patched libc">libc with debug info</A>),
or (b) get the sources of the library, and recompile it with the <samp>-g</samp> compiler switch.  After re-linking the program, cause it to crash and run <code>SYMIFY</code> to get a full
description of the place where it dies.

<li> A variation of the previous technique is to paste into your program the source of the library function(s) whose names you see in the symified traceback, and recompile your program with
<samp>-g</samp> switch.  Then run your program again, and when it crashes, <code>SYMIFY</code> should be able to find the line number info for the entire traceback.

<li> If you cannot get hold of the sources for the library, you could still use assembly-level commands of the debugger to find out the reason for the crash.  Here's how:

<ul>
<li> Load the program into a debugger.

<li> Display the instruction at <b><tt>EIP</tt></b> whose value is printed on the second line of the crash message.  For example, with GDB, use the <kbd>x/i eip-value</kbd> command.

<li> Find out which registers are relevant to the crash.  For example, if the instruction dereferences a pointer, the register that holds that pointer is one possible candidate for scrutiny.

<li> Look at the values for the relevant registers as printed in the crash message, and find the register(s) which hold abnormal values.  Common cases include:

<ol>
<li> A pointer whose value is below 4096 (1000 hex), or above the limit of the <b><tt>DS</tt></b> segment.

<li> An index of an array element or an offset into a struct whose value is negative, or beyond the last array element, or more than the offset of the last struct member.

<li> A linear address of a buffer in conventional memory whose value is more than 10FFFFh, or an offset into the transfer buffer which is larger than the transfer buffer size (16K by default).
</ol>
<li> Once you've found the register whose value is abnormal, find out what variables in your program caused that abnormal value, e.g. by stepping through the machine code from the point where your
code called the library function.
</ul>
</ul>
<P>
<P> | <A HREF="#Crash dump"> Previous </A> | <A HREF="#GDB needs COFF"> Next </A> | <A HREF="#Debugging"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Old QDPMI">

12.3 You need QEMM 7.53 or later </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Whenever I call any DJGPP debugger to debug my program, it crashes immediately. </em> <p>
<hr> <strong>A</strong>:  Are you running under Quarterdeck's QDPMI?  Then you should upgrade to QEMM 7.5 patch-level #3 or later.  That patch corrects a subtle problem in QDPMI which was triggered
by DJGPP debuggers.  If you cannot or wouldn't upgrade, for money or love, turn OFF the DPMI services of QDPMI and use <samp>CWSDPMI</samp> as your DPMI host.  To disable QEMM DPMI services either
uninstall QDPMI, or go to the QEMM directory and issue the following command:

<pre>

      qdpmi off

</pre>
<P>
<P> | <A HREF="#Old QDPMI"> Previous </A> | <A HREF="#Debug graphics"> Next </A> | <A HREF="#Debugging"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="GDB needs COFF">

12.4 GDB would not debug unless it sees COFF output </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I try invoking GDB on my program, but it says: "not in executable format: File format not recognized."  Huh? </em> <p>
<hr> <strong>A</strong>:  Most probably, you've invoked GDB from DJGPP v2.0 on a <samp>.exe</samp> program.  That version of GDB needs to be called with the name of un-stubbed COFF executable as its
argument.  To get both a <samp>.exe</samp> and a COFF file, you should make your link command line look this way:

<pre>

      gcc -o foo foo.o

</pre>
instead of

<pre>

      gcc -o foo.exe foo.o

</pre>
(the latter will only produce <samp>foo.exe</samp>, while the former produces both <samp>foo</samp>, the COFF executable which gdb needs, and <samp>foo.exe</samp>).  <p>

To produce a COFF file from a <samp>.exe</samp> program, use the <samp>EXE2COFF</samp> program which comes with DJGPP, like this:

<pre>

      exe2coff foo.exe

</pre>
Debuggers which come with DJGPP v2.01 can debug COFF and .exe programs alike, so upgrading to v2.01 should solve this problem.

<P>
<P> | <A HREF="#GDB needs COFF"> Previous </A> | <A HREF="#GDB and C++ source"> Next </A> | <A HREF="#Debugging"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Debug graphics">

12.5 How to debug a graphics program </A></H3><P>
</CENTER>
<em><strong>Q</strong>: How can I debug a graphics program?  The debugger runs my program fine, but when a breakpoint is hit with the screen in a graphics mode I can't read the text printed by the
debugger. </em> <p>
<hr> <strong>A</strong>:  Redirect the debugger output to your printer, like this:

<pre>

      gdb myprog &gt; prn

</pre>
This will only work if the program itself doesn't write to stdout (graphics programs usually don't); otherwise the debugger output will get mixed up with your program's output.  <p>

Beginning with version 1.1, <b><tt>RHIDE</tt></b> and <samp>RHGDB</samp> support debugging graphics programs, so upgrade to latest version of <b><tt>RHIDE</tt></b> and use its built-in debugger or
the stand-alone <samp>RHGDB</samp> subset.  This support doesn't work for all video modes, but the standard VGA modes and VESA modes are supported.  <p>

The FSDB debugger can switch between the application screen and the debugger screen, so you might use it, at a price of working with a low-level debugger.  Press <kbd>Alt-&lt;F5&gt;</kbd> to switch
between the two screens.  Stock FSDB as distributed with DJGPP can only do this with text screens, but a modified version of
<a href="ftp://ftp.delorie.com/pub/djgpp/contrib/gnudebug.zip">FSDB with graphics support</a> is available that knows about many graphics modes.  The same distribution can also be found
<a href="ftp://x2ftp.oulu.fi/pub/msdos/programming/djgpp2/gnudebug.zip">on the Oulu repository</a>.  <p>

As yet another possibility, consider using the <samp>MSHELL</samp> program which will redirect I/O from any program to the monochrome monitor at the BIOS level, so you can use it even with GDB.
<samp>MSHELL</samp> was written by <a href="mailto:dj@delorie.com">DJ Delorie</a> and is available <a href="ftp://ftp.delorie.com/pub/djgpp/ofc/mshell10.zip">from DJ's server</a>.  Be sure that you
don't have some other TSR installed that catches screen writes and bypasses the BIOS functions, or else <samp>MSHELL</samp> won't help you.  For example, changing the code page (with the DOS
<samp>CHCP</samp> or <samp>MODE</samp> commands) might do this.  <p>

<b><tt>RHIDE</tt></b> also supports dual-monitor systems for debugging, it allows you to use the monochrome monitor for interface with the debugger, while leaving the color screen for your program's
display, with no need to swap between them.  <p>

If you have any problems with dual-monitor support, in particular with <b><tt>RHIDE</tt></b>, make sure your memory manager doesn't grab the <code>B000</code> segment for its own purposes.  This
region should be available for the mono adapter, or your system might crash when you try using it.  <p>

Another way to redirect the output of a program to a monochrome monitor is by using the MDA display driver from BinaryInfosys.  It is a true DOS device driver, and so can be opened as a file--handy
for sending debug info, for example.  This driver is free and is available from <a href="http://www.binaryinfosys.com/bis/files/mda.exe">BinaryInfosys' home page</a>.

<P>
<P> | <A HREF="#Debug graphics"> Previous </A> | <A HREF="#C++ classes in GDB"> Next </A> | <A HREF="#Debugging"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="GDB and C++ source">

12.6 GDB finds only <samp>.cc</samp> source </A></H3><P>
</CENTER>
<em><strong>Q</strong>: When I try to debug my C<tt>++</tt> programs, the debugger claims it can't find the source file: </em> <p>
<pre>

      file.cc: No such file or directory.

</pre>
<em>The source file <strong>is</strong> there, but it's called <samp>file.cpp</samp>, not <samp>file.cc.</samp>  Why does this happen?</em>

<hr> <strong>A</strong>:  It's a bug in GCC 2.7.2 and earlier.  It erroneously assumes that a C<tt>++</tt> source always has a <samp>.cc</samp> extension.  If you are using GCC 2.7.2.1 or earlier,
you'd better call your C<tt>++</tt> files <samp>*.cc</samp>.  If this is unacceptable, you can work around this bug by invoking <samp>cc1plus</samp> and the assembler pass manually.  The bug in GCC
manifests itself in that <samp>cc1plus</samp> is called with the option <samp>-dumpbase file.cc.</samp>  If you replace this with <samp>-dumpbase file.cpp</samp> (or whatever your extension is), the
debugger will happily find your sources.  <p>

GCC 2.8.0 and later corrects this bug, so upgrading is also a solution.

<P>
<P> | <A HREF="#GDB and C++ source"> Previous </A> | <A HREF="#Included source"> Next </A> | <A HREF="#Debugging"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="C++ classes in GDB">

12.7 Can GDB print class members? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: It seems that GDB doesn't recognize C<tt>++</tt> class members by their original, unmangled names.  Do I really need to figure out the mangled names of all my class variables
and methods to be able to debug them? </em> <p>
<hr> <strong>A</strong>:  No, you don't.  <samp>GDB</samp> <em>does</em> allow you to use the original names, it's just that it usually treats the <kbd>::</kbd> in their names as word delimiters.
Include the name of the method or a class static variable in single quotes, and <samp>GDB</samp> will recognize them as a single word.  For example, if your class <code>CMPForward</code> has a method
named <code>go</code> which you need to put a breakpoint in, use the following command:

<pre>

       b 'CMPForward::go'

</pre>
Other <samp>GDB</samp> features that might be useful in this context are the various demangling options, like <samp>set print demangle</samp>, <samp>set demangle-style</samp> etc.; look them up in
the GDB on-line docs.  <p>

However, there are some cases where you won't be able to get GDB to demangle C<tt>++</tt> function names no matter how hard you try.  This is due to a lack of sufficient debugging information in the
COFF files with SDB debug data.  There's simply not enough info there for GDB to detect the source language and use C<tt>++</tt>-specific support.  If you need a description of the GNU style of
mangling C<tt>++</tt> names (so you could demangle them yourself), look in the GDB or Libg++ source distribution, in the libiberty directory, for a file named <samp>cplus-demangle.c</samp>.  If you
really need full C<tt>++</tt> support in DJGPP, you will have to use the stabs debugging support.  GCC 2.8.0 and later are distributed with built-in stabs support, so upgrade if you need this.
Caveat emptor: <samp>FSDB</samp>, <samp>EDEBUG32</samp> and <samp>SYMIFY</samp> don't understand stabs, so you will have to compile with <samp>-gcoff</samp> option to use these utilities
(<b><tt>RHIDE</tt></b> distribution includes a utility called <samp>gsymify</samp> that can be used instead of <samp>SYMIFY</samp> with stabs debugging info).  <p>

Note that, as the debugger built into <b><tt>RHIDE</tt></b> uses GDB code, it will also sometimes have such problems with debugging C<tt>++</tt> programs.

<P>
<P> | <A HREF="#C++ classes in GDB"> Previous </A> | <A HREF="#Static vars"> Next </A> | <A HREF="#Debugging"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Included source">

12.8 GDB cannot list source that was #include'd </A></H3><P>
</CENTER>
<em><strong>Q</strong>: My source file #include's another source file, but I cannot set a breakpoint in that included code, because GDB says there is no such line, or no such source file... </em> <p>
<em><strong>Q</strong>: I cannot debug code produced by Flex, or Bison, or F2C, because GDB somehow messes up all the source file and line number info! </em> <p>
<em><strong>Q</strong>: Why can't I step with a debugger into an inline function defined in a header file? </em> <p>
<hr> <strong>A</strong>:  This is a genuine limitation of the COFF format used by DJGPP.  It can only handle a single source file for a given object file.  It does include correct line numbers, but
the name of the source file is wrong, so debugging such files just doesn't work.  Using stabs debugging info (see the previous section) doesn't have this limitation, so upgrade to GCC 2.8.0 or later
if you can.

For source files that include other source files, you can work around this even with COFF debugging, by just inserting the included source with your editor while you debug the program.  For code
produced by other programs, like <samp>F2C</samp> or <samp>Bison</samp>, <a href="mailto:D.J.Murdoch@bristol.ac.uk">Duncan Murdoch</a> suggests a work-around: to copy the original source file
(<samp>.y</samp>, <samp>.f</samp>, etc.) over the generated C file.  For example, here's how you should go about debugging a Fortran program <samp>myprog.f</samp> using <samp>GCC</samp>,
<samp>F2C</samp> and <samp>GDB</samp>:

<ol>
<li> Run <samp>f2c</samp> with the <samp>-g</samp> option:

<pre>

      f2c -g myprog.f

</pre>
<li> Compile using <samp>gcc</samp> with the <samp>-g</samp> option:

<pre>

      gcc -g myprog.c -o myprog.exe -lf2c -lm

</pre>
<li> Copy the original Fortran source over the generated C:

<pre>

      copy myprog.f myprog.c

</pre>
<li> Debug with <samp>gdb</samp>:

<pre>

      gdb myprog.exe

</pre>
</ol>
<P>
<P> | <A HREF="#Included source"> Previous </A> | <A HREF="#Debugging woes"> Next </A> | <A HREF="#Debugging"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Static vars">

12.9 GDB cannot display or set static uninitialized variables </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Why can't I set or display the values of some static variables in my program? </em> <p>
<hr> <strong>A</strong>:  This seems to be a limitation of the COFF debugging information currently used by GDB and its derivatives (RHGDB and the debugger built into RHIDE): they cannot display or
set the value of an uninitialized static variables (those who are in the <code>.bss</code> section of the program).  A work-around is to initialize these variables, which causes the linker to put
them into the <code>.data</code> section.  Another solution is to use the stabs debugging support; latest versions of GCC include this support, so upgrade.

<P>
<P> | <A HREF="#Static vars"> Previous </A> | <A HREF="#Debugging"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Debugging woes">

12.10 Debuggers choke on some programs ... </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I cannot debug Emacs (or any program that requests raw keyboard input): when I press Ctrl-C, any debugger I tried reported SIGINT.  But I cannot operate the debugged program
without Ctrl-C (in Emacs, it's necessary to exit the editor)! </em> <p>
<em><strong>Q</strong>: I cannot debug any program which catches signals!!?? </em> <p>
<em><strong>Q</strong>: I compiled my program with <samp>-pg</samp> switch, and now I cannot debug it... </em> <p>
<em><strong>Q</strong>: When my program hits a breakpoint in GDB, the debugger reports SIGSEGV, but only under Windows... </em> <p>
<hr> <strong>A</strong>: There are currently a few limitations in debugging programs which use interrupts or exceptions.  Programs compiled for profiling may crash under a debugger with SIGSEGV or a
GPF, with no addresses that <code>symify</code> can identify; programs using <code>alarm</code> or <code>setitimer</code> can't be debugged, either.  You can't hook the keyboard interrupt in a
debugged program, and you can't debug a program which uses floating point on a machine without FP hardware (unless you use <samp>WMEMU</samp> as your emulator, but even <samp>WMEMU</samp> doesn't
solve all the problems).  The reason for all these problems is that any exceptions or signals that happen when your program runs under a debugger will be caught by the debugger instead, and they
won't get passed to the debuggee.  To debug programs which hook hardware interrupts, you will have to chain the old real-mode interrupt handler to your new handler, which requires to write special
debug version of the program.  <p>

At least some of these limitations will be fixed in future versions of DJGPP.  In case you need a <kbd>Ctrl-&lt;C&gt;</kbd> key-press to go to the debuggee instead of the debugger, a work-around is
available: use the <kbd>Alt-Numeric-3</kbd> (that is, press the &lt;Alt&gt; key, the press and release the &lt;3&gt; key on the numeric keypad.  Some programs (but not Emacs) will also treat the
<kbd>Ctrl-&lt;2&gt;</kbd> key-press as <kbd>Ctrl-&lt;C&gt;</kbd>.  <p>

Beginning with version 1.1, the debugger built into <b><tt>RHIDE</tt></b> supports debugging programs that hook keyboard and/or timer hardware interrupts, so if you need e.g. to debug programs built
with the Allegro library or programs compiled for profiling, you can use <b><tt>RHIDE</tt></b>.  <p>

Another known problem is that <samp>GDB</samp> GP Faults when the program hits a breakpoint under Windows 3.X (Windows 9X doesn't have this problem).  This is because the breakpoint instruction
causes a software interrupt (as opposed to an exception) under Windows 3.X, and the DJGPP debug support currently only catches debug exceptions.  The only work-around is to use the <em>hardware</em>
breakpoints (which use the special debug registers of the i386 and higher CPUs, and which do work with DJGPP on Windows 3), and never have more than 4 of them active at the same time.
<samp>FSDB</samp> will automatically use the hardware breakpoints for the first 4 breakpoints (so it works on Windows 3.X unless you set more than 4 breakpoints simultaneously), but with
<samp>GDB</samp>, you will have to explicitly use the <samp>hbreak</samp> and <samp>thbreak</samp> (instead of <samp>break</samp> and <samp>tbreak</samp>) commands which set hardware breakpoints.
This works with DJGPP ports of GDB 4.16 and later.  Note that <samp>GDB</samp> uses the ordinary breakpoints to implement the <samp>step</samp>, <samp>next</samp> and similar commands, so you can't
use these on Windows 3.X; use the temporary hardware breakpoints instead.  The above is also true for watchpoints (which watch for variables to change value): you need to use hardware watchpoints
with GDB (the total number of breakpoints and watchpoints cannot exceed 4).  Same considerations apply to the debugger built into <b><tt>RHIDE</tt></b> under Windows 3.X.

<P>
<P> | <A HREF="#Debugging"> Previous </A> | <A HREF="#Performance"> Next </A> | <A HREF="#Top"> Up </A> | <P>
<P>
<P>
<CENTER>
<H2>

<A NAME="Profiling">

13. Profiling DJGPP Programs </A></H2><P>
</CENTER>
  This chapter explains how to optimize your program for speed using the profiler, and discusses some problems you might have with it.

<p>
<ul>
<li><A HREF="#How to profile"> 13.1 How to profile--What should you do to profile a program.  </A>
<li><A HREF="#Profiled crash"> 13.2 Profiled crash--Programs compiled with -pg crash.  </A>
<li><A HREF="#Gprof needs COFF"> 13.3 Gprof needs COFF--Gprof doesn't like <b>.exe</b> executable.  </A>
<li><A HREF="#Gprof docs"> 13.4 Gprof docs--Look on Gprof man page for its docs.  </A>
<li><A HREF="#IO bound programs"> 13.5 IO bound programs--How their profiles look.  </A>
<li><A HREF="#No profile"> 13.6 No profile--Where is the profile?  </A>
</ul>
<P>
<P> | <A HREF="#Profiling"> Previous </A> | <A HREF="#Profiled crash"> Next </A> | <A HREF="#Profiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="How to profile">

13.1 How to profile a DJGPP program </A></H3><P>
</CENTER>
<em><strong>Q</strong>: How can I profile my program to see where it spends most of its run time? </em> <p>
<hr> <strong>A</strong>:  DJGPP includes a profiling facility.  To use it, compile and link with <samp>-pg</samp> option, run your program as you usually would, then run a program called
<samp>gprof</samp>:

<pre>

      gprof myprog

</pre>
(change <samp>myprog</samp> to whatever name your program is).  This will print an execution profile.  You can now look at the profile and try to optimize the functions which take a large proportion
of the execution time.  <p>

<samp>Gprof</samp> is further documented in the Binutils docs as part of the <a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2gnu/bnu281b.zip">GNU Binutils distribution</a>.

<P>
<P> | <A HREF="#How to profile"> Previous </A> | <A HREF="#Gprof needs COFF"> Next </A> | <A HREF="#Profiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Profiled crash">

13.2 Programs compiled with -pg crash when run </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I cannot profile my program: when I compile it with -pg, it crashes or wedges my machine! </em> <p>
<em><strong>Q</strong>: When I compile my program with -pg, it runs much slower.  Does the profiling code have such a huge overhead? </em> <p>
<em><strong>Q</strong>: I profiled my program, but the profile contains an entry <code>_mono_putc</code> which I don't use, and which eats up about 70% of execution time! </em> <p>
<em><strong>Q</strong>: When I run a profiled program on my dual (VGA+MDA) display system, the mono screen shows loads of meaningless numbers.  Is there a way to stop this behavior? </em> <p>
<hr> <strong>A</strong>: DJGPP v2.01 has a bug in one of its library functions which is linked into your program when it is compiled with the <samp>-pg</samp> option.  The bug is that the profiled
program tries to write to the secondary mono screen, which caused the profiled programs to crash in many environments, in particular when a memory manager remaps some of the high memory.  On systems
which actually have the additional mono display, the profiled programs won't crash, but would run significantly slower and print debugging info on the mono display.  <p>

A patch which corrects this bug was posted to the DJGPP News group; you can find it by searching the DJGPP mail archives.  The patched library (see <A HREF="#Patched libc">a better library</A>)
includes a fixed version of the offending function, so using the patched libc will solve these crashes (as will upgrading to v2.02, when that is available).  A work-around is to run the program
compiled with <samp>-pg</samp> on vanilla DOS configuration (no memory managers such as EMM386 or QEMM, and no Windows).  However, when you use this work-around, your program might run much slower,
although the profile that you get is not affected.

<P>
<P> | <A HREF="#Profiled crash"> Previous </A> | <A HREF="#Gprof docs"> Next </A> | <A HREF="#Profiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Gprof needs COFF">

13.3 Gprof won't work unless it can find COFF executable </A></H3><P>
</CENTER>
<em><strong>Q</strong>: When I run <samp>Gprof</samp>, it complains that it cannot find my program.  But I've just run it!! </em> <p>
<em><strong>Q</strong>: I run <samp>Gprof</samp> on my program, and it says: "bad format". </em> <p>
<hr> <strong>A</strong>:  <samp>Gprof</samp> from DJGPP v2.0 needs the original COFF file the linker produced.  If you delete it, or feed <samp>Gprof</samp> with the <samp>.exe</samp> file instead,
it will be most unhappy.  The way to produce the COFF output is explained in <A HREF="#GDB needs COFF">section dealing with GDB</A>, above.  Alternatively, upgrade to DJGPP v2.01, where all Binutils
programs know about .exe executables.

<P>
<P> | <A HREF="#Gprof needs COFF"> Previous </A> | <A HREF="#IO bound programs"> Next </A> | <A HREF="#Profiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Gprof docs">

13.4 Where is Gprof docs? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: What about all those <samp>Gprof</samp> options?  Where can I find their docs? </em> <p>
<em><strong>Q</strong>: I can't figure out some of the info in the <samp>Gprof</samp> report ... </em> <p>
<hr> <strong>A</strong>:  <samp>Gprof</samp> documentation, <samp>gprof.inf</samp>, was accidentally left out of the Binutils binary distribution, <samp>bnu27b.zip</samp> in DJGPP v2.01.  If you
don't have <samp>gprof.inf</samp> in your info subdirectory, you will have to look for it in the
<a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2gnu/bnu281s.zip">latest Binutils source distribution</a>.

<P>
<P> | <A HREF="#Gprof docs"> Previous </A> | <A HREF="#No profile"> Next </A> | <A HREF="#Profiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="IO bound programs">

13.5 Why is <code>__dpmi_int</code> so heavily used? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I've profiled my program and found that the routine which takes 60% of the running time is some obscure library function called <code>__dpmi_int.</code>  Can't you guys make
your library right? </em> <p>
<hr> <strong>A</strong>:  Does your program use I/O or other real-mode services (like BIOS) extensively?  All those services are invoked through a DPMI service call which is issued by
<code>__dpmi_int.</code>  So what the profile really says is that the running time of your program is governed by time-consuming operations such as disk I/O.

<P>
<P> | <A HREF="#IO bound programs"> Previous </A> | <A HREF="#Profiling"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="No profile">

13.6 <samp>gprof</samp> doesn't produce output </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Every time I run the profiler it says "gmon.out: no such file or directory" and no profile is produced.  What is this <samp>gmon.out</samp> and why won't <samp>gprof</samp>
compute the profile? </em> <p>
<hr> <strong>A</strong>:  <samp>gmon.out</samp> is the file with raw execution counts and timing info that <samp>gprof</samp> needs to produce the profile.  The file is written by the profiled
program when it exits.  If the file isn't created, it might be because one of the following reasons:

<ul>
<li> You didn't compile and/or link your program with the <samp>-pg</samp> switch.  Note that <strong>both</strong> compilation and link need to be done with <samp>-pg</samp>, because the functions
that actually write the results to <samp>gmon.out</samp> are only linked in when <samp>gcc</samp> sees <samp>-pg</samp> on the link command line.

<li> You have called <samp>ld.exe</samp> directly to link your program and forgot to mention the files and switches necessary for the profiled program operation.  You should use <samp>gcc</samp> to
link your program instead of calling the linker directly; a <samp>-pg</samp> switch to <samp>gcc</samp> is all that it takes to make sure that the linker will get all the necessary
arguments(<i><b>Note: </b>If you absolutely need to call <samp>ld.exe</samp> directly, invoke <samp>gcc</samp> once with a <samp>-v</samp> switch and you will see what are the arguments that you
should pass to the linker in your case.</i>).

<li> Your program exited abnormally.  The function which generates <samp>gmon.out</samp> is registered with the <code>atexit</code> library function, and won't be called if the program was terminated
in an abnormal way.  Make sure that your program exits with a call to <code>exit</code> library function or with a <code>return</code> statement in your <code>main</code> function.  For example, if
your program dies with an exception or a signal, install a signal handler and make it call <code>exit.</code>
</ul>
<P>
<P> | <A HREF="#Profiling"> Previous </A> | <A HREF="#Memory"> Next </A> | <A HREF="#Top"> Up </A> | <P>
<P>
<P>
<CENTER>
<H2>

<A NAME="Performance">

14. Run-time Performance of DJGPP Programs </A></H2><P>
</CENTER>
  This chapter deals with issues pertinent to run-time performance of DJGPP programs.

<p>
<ul>
<li><A HREF="#How fast"> 14.1 How fast--What code quality should you expect.  </A>
<li><A HREF="#Older is faster"> 14.2 Older is faster--Are older versions faster than newer ones?  </A>
<li><A HREF="#Pentium"> 14.3 Pentium--DJGPP programs on a Pentium.  </A>
<li><A HREF="#IO speed"> 14.4 IO speed--Is I/O <em>really</em> so slow in protected mode?  </A>
<li><A HREF="#Slow-down"> 14.5 Slow-down--What if your ported program runs slower?  </A>
</ul>
<P>
<P> | <A HREF="#Performance"> Previous </A> | <A HREF="#Older is faster"> Next </A> | <A HREF="#Performance"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="How fast">

14.1 How efficient is DJGPP-generated code? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: How does DJGPP compare with other DOS-based C compilers in terms of efficiency of generated code? </em> <p>
<em><strong>Q</strong>: Won't my program run <strong>much</strong> slower when compiled by DJGPP, due to all those CPU cycles wasted in switches between protected and real mode? </em> <p>
<hr> <strong>A</strong>:  The quality of code generated by GCC with optimization turned on (<samp>-O2</samp> switch to the compiler) is generally at least as good as what you will get from top
commercial products, like Borland, Microsoft and Watcom.  Mode switches indeed have a certain performance hit, but in most programs it is negligibly small, because only DOS and BIOS services require
such a switch, and most programs spend most of their time doing other things.

<P>
<P> | <A HREF="#How fast"> Previous </A> | <A HREF="#Pentium"> Next </A> | <A HREF="#Performance"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Older is faster">

14.2 Comparing newer versions with old ones </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I switched to v2 and my programs now run slower than when compiled with v1.x... </em> <p>
<em><strong>Q</strong>: I timed a test program and it seems that GCC 2.8.1 produces slower executables than GCC 2.7.2.1 was, which in turn was slower than DJGPP v1.x.  Why are we giving up so much
speed as we get newer versions? </em> <p>
<em><strong>Q</strong>: I installed Binutils 2.8.1, and my programs are now much slower than when they are linked with Binutils 2.7! </em> <p>
<hr> <strong>A</strong>: In general, newer versions of GCC generate tighter, faster code, than older versions.  Comparison between different versions of GCC shows that they all optimize reasonably
well, but it takes a different combination of the optimization-related options to achieve the greatest speed in each compiler version.  The default optimization options can also change; for example,
<samp>-force-mem</samp> is switched on by <samp>-O2</samp> in 2.7.2.1; it wasn't before.  GCC offers a plethora of optimization options which might make your code faster or slower (see the GCC docs
for a complete list); the best way to find the correct combination for a given program is to profile and experiment.  Here are some tips:

<ul>
<li> Compile your code using the GCC switches <samp>-O2 -mpentium -fomit-frame-pointer -ffast-math</samp>.  (For PGCC use <samp>-O6</samp> instead of <samp>-O2</samp>.)  Omit <samp>-ffast-math</samp>
if you link with <samp>-lm</samp> and need the <code>errno</code> variable to be set or the <code>matherr</code> function to be called in case of errors.

<li> Profile your code and check which functions are "hot spots".  Disassemble them, or compile with <samp>-S</samp> (see <A HREF="#Assembly output">getting assembly listing</A>), and examine the
machine code.

<li> If the disassembly shows there aren't too many memory accesses inside the inner loops, try adding <samp>-fforce-addr</samp> option.  This option helps a lot if a couple of pointers are used
heavily within a single loop.  If there are a lot of memory references, try adding <samp>-fno-force-mem</samp>, to prevent GCC from repeatedly copying variables from memory into registers.

<li> Try adding <samp>-funroll-loops</samp> and <samp>-funroll-all-loops</samp> and profile the effect.

<li> Try compiling with <samp>-fno-strength-reduce</samp>.  In some cases where GCC is in dire need of registers, this could be a substantial win, since strength reduction typically results in using
additional registers to replace multiplication with addition.

<li> Sometimes, <samp>-fomit-frame-pointer</samp> might make things worse, since it uses stack-relative addresses which have longer encoding and could therefore overflow the CPU cache.  So try with
and without this switch.

<li> If different time-critical functions exhibit different behavior under some of the optimization options, try compiling them with the best combination for each one of them.
</ul>
I'm told that the PGCC version of GCC has bugs in its optimizer which show when you use level 7 or higher.  Until that is solved in some future version, you are advised to stick with -O6.  <p>

Programs which manipulate multi-dimensional arrays inside their innermost loops can sometimes gain speed by switching from dynamically allocated arrays to static ones.  This can speed up code because
the size of a static array is known to GCC at compile time, which allows it to avoid dedicating a CPU register to computing offsets.  This register is then available for general-purpose use.  <p>

Another problem that is related to C<tt>++</tt> programs which manipulate arrays happens when you fail to qualify the methods used for array manipulation as <code>inline</code>.  Each method or
function that wasn't declared <code>inline</code> will <em>not</em> be inlined by GCC, and will incur an overhead of function call at run time.  <p>

However, inlining only helps with small functions/methods; large inlined functions will overflow the CPU cache and typically slow down the code instead of speeding it up.  <p>

A bug in the startup code distributed with DJGPP versions before v2.02 can also be a reason for slow-down.  The problem is that the runtime stack of DJGPP programs is not guaranteed to be aligned on
a 4-byte boundary.  This usually only shows up on Windows (since CWSDPMI aligns the stack on its own), and even then only sometimes.  But it has been reported that switching to Binutils 2.8.1
sometimes causes such slow-down, and switching to PGCC can reveal his problem as well.  In some cases, restarting Windows would cause programs run at normal speed again.  If you experience such
problems too much, either upgrade to v2.02 or ask for a patch that solves it.  (The patch is in the stub loader, so you will need to recompile the <code>stubify</code> utility and point the
<code>STUB</code> environment variable to a program with a new stub.)

<P>
<P> | <A HREF="#Older is faster"> Previous </A> | <A HREF="#IO speed"> Next </A> | <A HREF="#Performance"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Pentium">

14.3 DJGPP programs on a Pentium </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Does DJGPP support Pentium-specific optimizations? </em> <p>
<em><strong>Q</strong>: I run the same program on a 486 and on a Pentium, and it's slower on a Pentium!! </em> <p>
<hr> <strong>A</strong>: DJGPP doesn't add to, or otherwise change, the compiler features offered by GCC.  DJGPP is just a port of GCC to MSDOS, and thus supports the same Pentium-specific
optimizations that the latest GCC release does.  <p>

Lately, the FSF has split the GCC development into two branches: one is the regular GCC, while the other is called EGCS(<i><b>Note: </b>Pronounced like "eggs".</i>), the <dfn>Experimental GNU
Compiler System</dfn>.  The latter is usually less stable than the GCC releases, but supports more advanced features, like the so-called <dfn>Haifa scheduler</dfn>, a new global subexpression
elimination engine, and multi-language stuff.  PGCC is a derivative of EGCS which supports additional optimizations specific to the x86 architecture; its optimizations for Pentium CPUs, and even for
an i486, are better than those of GCC.  So if you need to squeeze the last bits of performance from programs that target Pentium machines, use EGCS/PGCC to compile them.  One drawback of EGCS/PGCC is
that compilation is slower than with GCC and needs much more memory, sometimes an order of magnitude more, especially at higher optimization levels.  PGCC was ported by
<a href="mailto:andrewc@rosemail.rose.hp.com">Andrew Crabtree</a>, and can be downloaded from the <a href="http://www.goof.com/pcg/">PCG site</a>.  <p>

A program might sometimes run slower on a Pentium due to alignment problems in DJGPP.  GCC makes assumptions about how GAS (the assembler) handles alignment, but when GAS is built with the default
DJGPP configuration, it treats alignment in a way that's different from what GCC assumes.  The outcome of this is that longs are word-aligned, doubles are dword-aligned, etc.  Depending on the DJGPP
version, link order, library differences, you might get lucky (or unlucky) with a 50/50 chance to get an improper alignment.  Different CPUs have different penalties for unaligned accesses, which may
explain differences in speed.  DJGPP v2.01 has a bug in the startup code, whereby the runtime stack isn't aligned; this could also be a reason for slow-down, especially in programs compiled by
EGCS/PGCC.  <p>

You might consider adding some slack static variables to induce changes in alignment; if any of the changes suddenly cause a significant change in the runtime performance, then alignment might be the
reason.

<P>
<P> | <A HREF="#Pentium"> Previous </A> | <A HREF="#Slow-down"> Next </A> | <A HREF="#Performance"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="IO speed">

14.4 My program's I/O is so slow! </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I measured the time required to read a 2 MByte file in DJGPP and in Borland C.  It took the DJGPP program 2.5 seconds to do it, while Borland did it in just under 2.  This is
<strong>horribly</strong> slow: its 25% slower than Borland! </em> <p>
<em><strong>Q</strong>: I tried to improve DJGPP I/O throughput by defining a 64KB-large buffer for buffered I/O with a call to <code>setvbuf</code>, but that had no effect.  Why is that? </em> <p>
<em><strong>Q</strong>: It is obvious that disk-bound programs compiled with DJGPP will run <strong>awfully</strong> slow, since FAT is such a lousy filesystem! </em> <p>
<hr> <strong>A</strong>: First, I would like to point out that waiting another 0.5sec for reading a 2 MByte file isn't that bad: it is indeed about 25% longer than you can do under DOS, but it's only
half a second...  Besides, most programs read and write files which are only a few hundreds of kilobytes, and those will suffer only a negligible slow-down.  <p>

Doing I/O from protected-mode programs requires that low-level library functions move the data between the extended memory and low memory under the 1 MByte mark, where real-mode DOS can get at it.
That area in the low memory is called the <dfn>transfer buffer</dfn>(<i><b>Note: </b>Here's a more detailed explanation.  DOS cannot access memory above 1MB mark, where your DJGPP program lives,
since real-mode addresses are 20-bit wide, which covers only the first megabyte.  So, each time a DJGPP program needs to call a DOS function (or any other real-mode service, like some BIOS interrupt)
and needs to pass data to or from that service, we must use some buffer in conventional memory to communicate.  The transfer buffer is a block of conventional memory that the DJGPP startup code
allocates for this purpose.  When a real-mode service is called, the data that needs to be submitted to it is copied to the transfer buffer, and the address of the transfer buffer is passed to the
real-mode service.  If the service returns some data (e.g., if you want to read a portion of a file), data is copied from the transfer buffer when the service returns.  <p>

The transfer buffer primarily exists for library functions, but it can also be used by an application, if it needs to invoke real-mode services.</i>).  This data shuffling means that some I/O speed
degradation is inevitable in any protected-mode program which runs on top of DOS (including, for example, Windows programs when Windows 3.X is set to 386-Enhanced mode).  By default, DJGPP moves data
in chunks of 16 KB, so defining a buffer larger than that won't gain anything.  The size of the transfer buffer is customizable up to a maximum of 64 KB(<i><b>Note: </b>Actually, the maximum possible
value is FEF0h, or 65254 in decimal, because the transfer buffer is created by the startup code by resizing the PSP memory block.  Since the resized block needs to leave 256 bytes for the PSP, and
needs to be aligned on a 16-byte boundary, you cannot have the entire 65535 bytes for the transfer buffer.  If you invoke <code>stubedit</code> with a <samp>bufsize=64k</samp> parameter, what you
actually get is a 2KB buffer, since the combined size of the PSP and the transfer buffer will wrap around in a 16-bit variable when the startup code computes it.  The version of <code>stubedit</code>
which will come with DJGPP v2.02 will explicitly warn you about this case and will reset any value that is too large to the maximum allowed size of FE00h (65024 decimal) bytes--this is less than
FEF0h because the latter is not aligned on the 512-byte DOS sector size, which could slow down disk I/O.</i>), so if your program really reads a lot of large files, you might be better off enlarging
it (with the <samp>STUBEDIT</samp> program).  <p>

Some people think that FAT is such a lousy filesystem, that programs which do a lot of disk I/O <em>must</em> run terribly slow when compiled with DJGPP.  This is a common misconception.  The speed
of disk I/O is determined primarily by how efficient is the code in the operating system kernel that handles the filesystem, and the device drivers for the I/O-related devices like the hard disk, not
by the disk layout.  It is true that DOS and BIOS don't implement I/O too efficiently (they use too many tight loops waiting for low-level I/O to complete), but a large disk cache can help them
tremendously.  In addition, Windows 9X bypasses DOS and BIOS I/O code entirely, and uses much more efficient protected-mode code instead.  Experience shows that DJGPP programs on plain DOS systems
with a large (8MB and up) disk cache installed run about 30% slower than a Linux system on the same machine; and Windows 9X will run the same programs at roughly the same speed as Linux.  If you get
much slower performance on DOS/Windows, chances are that your system is not configured optimally.  <p>

Some programs which only copy data between two files might gain significantly if you write your custom low-level I/O functions that avoid moving data to extended memory (only to move them back to the
transfer buffer).  However, these cases are rare.

<P>
<P> | <A HREF="#IO speed"> Previous </A> | <A HREF="#Performance"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Slow-down">

14.5 My ported program runs much slower! </A></H3><P>
</CENTER>
<em><strong>Q</strong>: How come my program, which I ported from Borland/MS C and which doesn't use much I/O, still runs much slower under DJGPP?  </em> <p>
<hr> <strong>A</strong>:  Explore the following possible causes for this:

<ol>
<li> Your program extensively calls services other than I/O which require mode switch (like BIOS Int 10h, mouse services, etc.).  <p>

You can tell how much your program switches to real mode by profiling your program.  In the profile, look at the proportion of time your program spends in low-level library functions called
<code>__dpmi_int</code> (which calls real-mode DOS/BIOS services) and <code>__dj_movedata</code> (which moves data between the transfer buffer and your program).  If this proportion is large, try
rewriting your program to minimize use of those functions which require a mode switch, even at a price of more computation (a mode switch usually eats up hundreds of CPU cycles).  <p>

<li> Your program uses a lot of floating-point math, and you run it on a machine without an FPU.  A telltale sign of this is that a function called <code>__djgpp_exception_processor</code> is high on
the execution profile printed by <samp>Gprof</samp>.  Due to the way FP emulation is implemented in DJGPP(<i><b>Note: </b>Without a real x87 FPU, an exception is generated by the CPU each time a
floating-point instruction is seen in the code.  <code>__djgpp_exception_processor</code> is called for each such exception and services it by calling the emulator, <samp>emu387.dxe</samp>, or
functions from the emulator library <samp>libemu.a</samp> (if the program was linked with <samp>-lemu</samp>), to emulate the instruction.  Since exception processing incurs a lot of overhead, this
emulation is slow.</i>), it might be significantly slower than the way real-mode DOS compilers handle it.  The solution is either to rewrite your code so that it doesn't use floating-point code in
its inner loops, or buy an FPU.  <p>

<li> Your program uses library functions/classes which are implemented less efficiently by DJGPP libc and the GNU C<tt>++</tt> libraries.  Or you might be a heavy user of functions which other
compilers convert to inline code, while GCC doesn't inline most library functions.  If this is the case, you will see those functions as "hot spots" on the program histogram produced by the
<samp>Gprof</samp> profiler.  If you find this to be the problem, write your own, optimized versions of those functions.  It's best to write them as inline assembly functions, for maximum
performance.  If you find library functions which are inefficient, please inform the DJGPP news group by posting to the <a href="news:comp.os.msdos.djgpp">comp.os.msdos.djgpp</a> news group, so this
could be fixed by people who maintain the library.  <p>

<li> If your program spends most of its time in a certain innermost loop, you should try enabling some of the optimization options which aren't enabled by default.  Some of these are described in
this FAQ, see <A HREF="#Older is faster">speed-related optimization options</A>.  <p>

<li> The size of the code/data in the innermost loop might be close to the size of the CPU cache (either L1 on-chip cache, or L2 cache on the motherboard).  Compiling your program with a different
compiler or a different combination of optimization options can cause the code to overflow the cache, which will dramatically affect the performance (usually, by a factor of 2).  Running your program
with the cache disabled will be instrumental to see whether this is your problem.  If it is, try to rearrange your data/code, or use a different combination of optimization options.  <p>

<li> If the slow program was compiled for profiling (with he <samp>-pg</samp> switch), the slow-down might be due to a bug in he DJGPP library.  See <A HREF="#Profiled crash">slow-down in profiled
programs</A>, for more about this.  <p>

<li> Sometimes, some device driver that uses extended memory takes up a significant portion of it, and leaves less for DJGPP programs, which then begin to page and slow down.  For example, Novell
Netware's VLM redirector and client software can use up to 0.5 MB of extended memory, even if you don't log into the network.  A solution is not to load such resident software, or to buy more memory.
</ol>
<P>
<P> | <A HREF="#Performance"> Previous </A> | <A HREF="#Command line"> Next </A> | <A HREF="#Top"> Up </A> | <P>
<P>
<P>
<CENTER>
<H2>

<A NAME="Memory">

15. Run-Time Memory Issues </A></H2><P>
</CENTER>
  This chapter answers questions which are related to DJGPP run-time memory allocation.

<p>
<ul>
<li><A HREF="#How much memory"> 15.1 How much memory--How much can you use?  </A>
<li><A HREF="#Confusing alloc"> 15.2 Confusing alloc--Allocation mechanism peculiarities.  </A>
<li><A HREF="#QDPMI VM"> 15.3 QDPMI VM--QDPMI doesn't provide virtual memory.  </A>
<li><A HREF="#QDPMI alloc"> 15.4 QDPMI alloc--QDPMI/Windows 9X memory allocation peculiarities.  </A>
<li><A HREF="#Windows alloc"> 15.5 Windows alloc--VM issues under Windows 3.X.  </A>
<li><A HREF="#Windows9X alloc"> 15.6 Windows9X alloc--VM peculiarities under Windows 9X.  </A>
<li><A HREF="#EMM386 alloc"> 15.7 EMM386 alloc--Some versions of EMM386 are limited to 32 MBytes.  </A>
<li><A HREF="#Swap out"> 15.8 Swap out--How much VM do spawned program have?  </A>
<li><A HREF="#Stack size"> 15.9 Stack size--How large is the stack and how to enlarge it?  </A>
</ul>
<P>
<P> | <A HREF="#Memory"> Previous </A> | <A HREF="#Confusing alloc"> Next </A> | <A HREF="#Memory"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="How much memory">

15.1 How much virtual memory do you have? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: How much virtual memory can I use in DJGPP programs? </em> <p>
<hr> <strong>A</strong>:  That depends on the DPMI host you are using.  CWSDPMI (the free DPMI host which comes with DJGPP) will let you use all available conventional and extended memory (up to
256MB) and up to 256MB of disk space, for a grand total of 512MB of virtual memory for your application.  Try a <code>malloc(50*1024*1024)</code> some day.  <p>

With other DPMI hosts, your mileage may vary.  Quarterdeck's QDPMI, for instance, has a bug in some of its versions which effectively disables virtual memory under DJGPP (described in
<A HREF="#QDPMI VM">QDPMI VM bug</A>, below), so you only have whatever free physical RAM is left.  Under Windows 3.X, the amount of virtual memory you get depends on various virtual memory settings
in the Control Panel and on the <samp>.pif</samp> file settings for the program you run (see <A HREF="#Windows alloc">Windows allocation subtleties</A>, below).  Under Windows 9X, the memory settings
of the DOS Box Property Sheets define how much virtual memory a DJGPP program will get (see <A HREF="#Windows9X alloc">Windows 9X allocation details</A>, below).  OS/2  reportedly can be configured
to support up to 512MB of DPMI memory.

<P>
<P> | <A HREF="#How much memory"> Previous </A> | <A HREF="#QDPMI VM"> Next </A> | <A HREF="#Memory"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Confusing alloc">

15.2 It seems <code>malloc</code>/<code>free</code> don't affect virtual memory... </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I did <code>malloc(50*1024*1024)</code>, but didn't see any paging happen, and I only have 8 MBytes of RAM on my machine.  Is this virtual memory thing for real? </em> <p>
<em><strong>Q</strong>: I <code>malloc</code>'ed a large chunk of memory, but when I check values returned by <code>_go32_remaining_physical_memory</code> or
<code>__dpmi_get_memory_information</code>, I don't see any change! </em> <p>
<em><strong>Q</strong>: When I <code>free</code> allocated RAM, <code>_go32_remaining_physical_memory</code> reports there was no change in the available RAM... </em> <p>
<em><strong>Q</strong>: I'm looking for a way to tell how much memory is available, something like <code>coreleft</code> in Borland C? </em> <p>
<hr> <strong>A</strong>:  CWSDPMI (and, possibly, other DPMI hosts) only pages in memory when it is actually accessed.  If you only <code>malloc</code> it, but don't actually access it, it won't grab
those pages.  Try <code>calloc</code> and see the <strong>big</strong> difference.  <p>

When you call <code>free</code>, DJGPP library doesn't return memory to the system, it just adds it to its internal pool of free pages.  So, from the system point of view, these pages are not "free".
<p>

In addition, several widely-used DPMI servers, such as those built into Windows, have their own quirks related to memory allocation.  For example, some of them won't let you allocate more than half
the available memory in a single chunk.  As another example, under OS/2 <code>_go32_remaining_physical_memory</code> reports a constant very big value that doesn't change in the course of the program.
<p>

Because of these peculiarities, there's no convenient and easy way to return the amount of free memory available at any given moment.  Some programs only care about available physical RAM (they don't
want to page to disk, since that causes a considerable slow-down); for these, I recommend to call the <code>_go32_remaining_physical_memory</code> library function at program startup, and then track
memory usage with <code>sbrk(0);</code>.  Alternatively, disabling virtual memory altogether (by using CWSDPR0 or by loading CWSDPMI with <samp>-s-</samp> parameter), and checking values returned by
<code>malloc</code> against <code>NULL</code>, might be all you need to know when you are about to run out of free physical memory.  Programs that need to know when they are about to run out of
<em>virtual</em> memory should call <code>_go32_remaining_virtual_memory</code> instead.

<P>
<P> | <A HREF="#Confusing alloc"> Previous </A> | <A HREF="#QDPMI alloc"> Next </A> | <A HREF="#Memory"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="QDPMI VM">

15.3 Failure to get more memory than is physically installed </A></H3><P>
</CENTER>
<em><strong>Q</strong>: When I try to access more memory than the free physical RAM, <code>malloc</code> returns a <code>NULL</code> pointer, or I get some cryptic error message, like "Memory Paging
Violation" or "Unrecoverable Exception: 000Eh". </em> <p>
<hr> <strong>A</strong>: This is typical of Quarterdeck's DPMI host called QDPMI which comes with QEMM386 version 7.53 and earlier.  Some versions of QDPMI (those which come with QEMM v6.x) fail to
resize memory blocks when the new size is more than the available physical RAM, even though virtual memory services are enabled; other versions (those which come with QEMM v7.x) just don't let you
allocate more memory than is physically available.  If you must use more RAM than is physically available, disable or uninstall QDPMI, as described in <A HREF="#Old QDPMI">virtual memory with
QEMM</A>, and use CWSDPMI instead.  <p>

This bug was corrected in QDPMI version 1.10 or later, distributed with QEMM beginning with version 8.0, so upgrading to the latest version of QEMM might also be a solution.  With QEMM 6.x, make sure
your programs don't override the default type of <code>sbrk</code> behavior by setting <code>_crt0_startup_flags</code> to <code>_CRT0_FLAG_UNIX_SBRK</code> (QEMM 8.0 and later can allocate virtual
memory with both types of <code>sbrk</code> algorithm).  <p>

If you use another DPMI host, make sure that virtual memory is enabled.  E.g., for 386Max, include the <samp>swapfile=</samp> parameter to establish a virtual memory swap file; you can make it
permanent (this will speed up DJGPP start-up) with the <samp>/p</samp> option.

<P>
<P> | <A HREF="#QDPMI VM"> Previous </A> | <A HREF="#Windows alloc"> Next </A> | <A HREF="#Memory"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="QDPMI alloc">

15.4 Memory allocation fails before all memory is used </A></H3><P>
</CENTER>
<em><strong>Q</strong>: OK, I've changed my program to never allocate more memory than is physically available, to work around that QDPMI VM bug, described in <A HREF="#QDPMI VM">previous
section</A>, but my program still gets a <code>NULL</code> pointer from <code>malloc/calloc</code>! </em> <p>
<em><strong>Q</strong>: Why is my program dying with SIGSEGV under CWSDPMI when allocating a chunk of memory? </em> <p>
<hr> <strong>A</strong>:  Another peculiarity of QDPMI which came with QEMM before version 8.0: it will never let you allocate a chunk which is larger than half of what's available.  Windows 3.X
behaves in the same way, and several people reported the same to be true under Windows 9X.  <p>

With some DPMI providers, this behavior might be triggered by a small overhead of each <code>malloc</code> call: you might ask for half of available memory, but the DJGPP implementation of
<code>malloc</code> adds the overhead and then rounds the amount of memory to the next power of 2 before calling <code>sbrk</code>; thus <code>malloc(8MB)</code> will actually request 16MBytes from
the DPMI host.  When in doubt, call <code>sbrk</code> directly, especially if you don't plan to free that memory during execution.  <p>

If your program asks for memory in lots of small allocations, then it might crash when you use CWSDPMI as your DPMI host.  This is because CWSDPMI runs out of its tables, allocated in the heap, where
it tracks memory allocations.  Beginning with release 2, CWSDPMI defines a 6KB-large default heap that is configurable by CWSPARAM program to be anywhere between 3K and 40K bytes, without recompiling
CWSDPMI.  The default heap size is enough for about 21MBytes in small chunks.  You should upgrade to the latest CWSDPMI if you experience such problems, and bump up its heap size as needed.

<P>
<P> | <A HREF="#QDPMI alloc"> Previous </A> | <A HREF="#Windows9X alloc"> Next </A> | <A HREF="#Memory"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Windows alloc">

15.5 Memory allocation fails under Windows </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I'm running under Windows 3.X DOS box, but DJGPP complains about there not being enough DPMI memory, although virtual memory is enabled. </em> <p>
<hr> <strong>A</strong>:  You must make sure the size of your Windows swap file can be at least 2 times the largest virtual memory size you need.  Check if you have enough free disk space; if you do,
run a defragger (Windows needs the swap file to be contiguous).  This size is normally limited by the "virtual = 4 times free physical" rule, but you can change that by inserting the line

<pre>

      PageOverCommit=n

</pre>
in the <samp>[386Enh]</samp> section of your <samp>SYSTEM.INI</samp> file.  The parameter <samp>n</samp> is 4 by default, but can be set to be as large as 20.

<P>
<P> | <A HREF="#Windows alloc"> Previous </A> | <A HREF="#EMM386 alloc"> Next </A> | <A HREF="#Memory"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Windows9X alloc">

15.6 Memory allocation peculiarities under Windows 9X </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I seem to be unable to get more than 16 MBytes of virtual memory under Windows 9X, even though I have 32 MBytes of RAM installed on my machine, and a lot of disk space... </em>
<p>
<hr> <strong>A</strong>:  You must set the maximum amount of DPMI memory to 65535K in the DOS applications' Property Sheets.  Click on the <samp>Properties</samp> button of the DOS box toolbar, then
click on the <samp>Memory</samp> tab, and type the number <samp>65535</samp> in the box under <samp>DOS Protected Mode Memory</samp>.  If you leave that setting at the default "Auto", your programs
are at Windows' mercy, and in many cases will get only 16 MBytes.  You must actually type 65535 inside the dialog box, as checking out the values from the list Windows offers will never get you past
16384 (i.e., 16MB).  <p>

If you have more than 64MB of physical memory installed, you can specify the amount of memory on the <code>EMM386</code> command line in your <samp>CONFIG.SYS</samp>, like this:

<pre>

      DEVICE=C:\WINDOWS\EMM386.EXE NOEMS L=131072

</pre>
I'm told that this line (here for 128MB of installed memory) together with an "Auto" setting of the DPMI memory for the DOS box allows DJGPP programs to use up to 117MB of memory when running from
the DOS box under Windows 9X.  <p>

Note that you cannot allocate more than half the available memory in one chunk under Windows 9X, exactly as the things are under Windows3.X, and you cannot have more than 64 MBytes of virtual memory
available to DJGPP programs running on Windows, unless you have more than 64MB physical memory installed.

<P>
<P> | <A HREF="#Windows9X alloc"> Previous </A> | <A HREF="#Swap out"> Next </A> | <A HREF="#Memory"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="EMM386 alloc">

15.7 Memory allocation fails under EMM386 or HIMEM </A></H3><P>
</CENTER>
<em><strong>Q</strong>: My machine has 48 MBytes of RAM, but when I run DJGPP programs, they start paging after 32 MBytes have been used... </em> <p>
<em><strong>Q</strong>: I have 5 MBytes of free RAM on my machine, but DJGPP programs start paging after only 256KBytes of memory were used?? </em> <p>
<hr> <strong>A</strong>:  This might be caused by some old versions of the memory manager installed in your machine (like HIMEM or EMM386 from an old version of DOS), which were limited to 32 MBytes
of expanded memory.  Try running without them (CWSDPMI can use raw extended memory), or upgrade to a newer version of DOS.  <p>

If your programs start paging after only 256KBytes of memory were used, most probably you are using EMM386 and CWSDPMI, and your <samp>CONFIG.SYS</samp> specifies no amount of memory when it installs
EMM386.  Some versions of EMM386 default to 256K in this case; you should tell EMM386 explicitly how much memory it should take over.  You can use the <samp>go32-v2</samp> program to see what amount
of extended memory your DJGPP programs will get.

<P>
<P> | <A HREF="#EMM386 alloc"> Previous </A> | <A HREF="#Stack size"> Next </A> | <A HREF="#Memory"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Swap out">

15.8 How much memory do parent DJGPP programs leave for their child? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: How much memory is available when I call the <code>system</code> library function? </em> <p>
<hr> <strong>A</strong>:  In the conventional (below 640K mark) memory, you are left with everything which was free before your program started, except what the DPMI host uses.  The amount of
conventional memory required by the DPMI host depends heavily on the host you use.  For the first DJGPP program, QDPMI uses about 97K, CWSDPMI uses about 70K, Windows 3.X only 18 KBytes.  Each
subsidiary call to <code>system</code> (like in recursive invocation of <samp>Make</samp>) eats up about 18K (16K for the transfer buffer and 2K for the PSP and environment) for most DPMI servers; a
notable exception is QDPMI which needs 97K bytes of low memory for the subsequent calls too.  If you change the size of the transfer buffer (with <code>STUBEDIT</code>), the amount of free
conventional RAM left when shelling out of it will change accordingly.  <p>

Extended memory management is left to the DPMI server; DJGPP does nothing special about XMS when <code>system</code> is called.  This means that all the extended memory used by the parent program is
<strong>not</strong> freed when the child program starts; if the child requests more memory than is physically free, the DPMI server is expected to page some of the parent out to honor the request.
(This is unlike DJGPP v1.x, where the <code>go32</code> extender would completely page out the parent before starting the child.)  The advantage of this is that spawning a child or shelling out is
much faster in v2 than it used to be with v1.x, except on machines with low amounts of installed RAM.  A disadvantage is that if you spawn a real-mode program that uses XMS, the extended memory used
up by your DJGPP program will be unavailable to it, unless you use a memory manager (as opposed to when CWSDPMI uses raw XMS or HIMEM).  The only way around this problem is to buy more RAM, or to
install a real memory manager.  <p>

Note that if you use a memory manager such as EMM386 or QEMM386 with the NOEMS and NOVCPI parameters, CWSDPMI will use the XMS (as opposed to VCPI) services to allocate extended memory, and will
allocate all of the available XMS memory for itself.  So if, while your DJGPP program runs, some resident software such as device driver or TSR will try to allocate XMS, the allocation will fail.

<P>
<P> | <A HREF="#Swap out"> Previous </A> | <A HREF="#Memory"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Stack size">

15.9 How much stack can I have in DJGPP programs? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: My program bombs when I use very large automatic arrays. </em> <p>
<em><strong>Q</strong>: How much stack space do I have in my program? </em> <p>
<em><strong>Q</strong>: My program seems to overflow the stack, but only when I run it under a debugger... </em> <p>
<em><strong>Q</strong>: My program crashes with SIGSEGV, but the traceback makes no sense: it points to something called ___djgpp_exception_table...  When I try to debug this, the traceback
mysteriously changes to some innocent library function, like getc().  The same program works flawlessly when compiled with DJGPP v1.x  What is going on?? </em> <p>
<hr> <strong>A</strong>: DJGPP v2 programs get fixed-size stack which is allocated by the startup code and then stays fixed for the entire lifetime of the program; this is a bug/feature of the DPMI
0.9 specification.  By default, you have a 256KB-long stack, but some programs which use large automatic arrays, or are deeply recursive, might need more.  If the default stack size is not enough,
you can change it with the <samp>STUBEDIT</samp> program (change the parameter "Minimum amount of stack space"), or by setting the global variable <code>_stklen</code> in your program.  Example:

<pre>

      unsigned _stklen = 1048576;  /* need a 1MB stack */

</pre>
The DJGPP startup code checks both the value in the stub info and the value of <code>_stklen</code>, and uses the larger of these two.  Therefore, programs that are known to require large stack size
should set <code>_stklen</code> to make sure they will always work, even if somebody stub-edits them to a lower value.  This technique is also safer when you need to debug your program with
<code>gdb</code> (see below).  However, you might need to use <samp>STUBEDIT</samp> with programs for which you don't have the sources.  <p>

Programs which need an unusually large stack might crash with bogus stack traces, because part of the heap gets overwritten by the overflowing stack.  To see if that is the cause of such crashes, run
<samp>STUBEDIT</samp> on your program and crank up the stack size to a large value (like 4MBytes).  If that makes the problem go away, tune the stack limit to the minimum value your program can live
with, then set <code>_stklen</code> to an appropriate value as explained above and recompile the program.  (Some DPMI hosts will actually allocate the entire stack, even if not all of it is used, so
leaving it at unnecessarily large value will hurt the program on low-memory machines.)  <p>

Some users have reported that they needed to enlarge the stack size of the C<tt>++</tt> compiler, <samp>cc1plus.exe</samp>, to prevent it from crashing when compiling some exceedingly large and
complex C<tt>++</tt> programs.  Another program that was reported to need a stack larger than the default is <samp>bccbgi.exe</samp> from the <samp>BCC2GRX</samp> package.  <p>

After you've used <samp>STUBEDIT</samp> to change the stack size, run it again to make sure it displays as default the value you thought you entered.  This is because <samp>STUBEDIT</samp> will
sometimes silently set the stack size to 0 (and then you will get the default 256K stack) if it doesn't like the value you type (e.g. if it has a wrong syntax).  <p>

When you run a program under a debugger, the stack size field in the stub info is ignored, so the only way to change the default stack size is to set <code>_stklen</code>.  <p>

Under Windows 3.X, be sure you've allocated a sufficiently large swap file (let's say, 40MBytes) from the Windows' Control Panel, and make sure the <samp>.PIF</samp> file for your program doesn't
have too low limit on EMS/XMS usage (better make them both -1).  What's that?  You don't have a <samp>.PIF</samp> file for this program?  Then Windows uses the default file <samp>DOSPRMPT.PIF</samp>,
which almost surely defines very low limits on these two, and your program might have problems getting the memory it needs for its stack.  <p>

DJGPP v2.0 has a subtle bug in its startup code that is seen very rarely, and that manifests itself by a program crashing with Page Fault or SIGSEGV.  If you are using v2.0 and enlarging the stack
and the CWSDPMI heap size didn't help, try adding some (e.g., 4KB) static data to your program and see if that helps.  But the best way to overcome this is to upgrade to DJGPP v2.01 or later.

<P>
<P> | <A HREF="#Memory"> Previous </A> | <A HREF="#Converting"> Next </A> | <A HREF="#Top"> Up </A> | <P>
<P>
<P>
<CENTER>
<H2>

<A NAME="Command line">

16. Command-line Arguments Handling in DJGPP </A></H2><P>
</CENTER>
  DJGPP handles command-line arguments differently from most DOS-based compilers, to make it closer to Unix platforms (so that porting of Unix programs will be easier).  This chapter answers some
questions about this aspect of DJGPP.

<p>
<ul>
<li><A HREF="#Filename globbing"> 16.1 Filename globbing--Wildcard expansion under DJGPP  </A>
<li><A HREF="#Disable globbing"> 16.2 Disable globbing--You can disable globbing if you don't need it.  </A>
<li><A HREF="#Special chars"> 16.3 Special chars--How to pass arguments with special chars.  </A>
<li><A HREF="#Long commands"> 16.4 Long commands--DJGPP can pass very long command lines.  </A>
<li><A HREF="#How long"> 16.5 How long--Look here to find out how long.  </A>
<li><A HREF="#Makefiles"> 16.6 Makefiles--Makefiles can disable long command lines.  </A>
</ul>
<P>
<P> | <A HREF="#Command line"> Previous </A> | <A HREF="#Disable globbing"> Next </A> | <A HREF="#Command line"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Filename globbing">

16.1 Filename wildcards expansion under DJGPP </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Can I do filename globbing with DJGPP? </em> <p>
<em><strong>Q</strong>: I call my program with an argument <samp>x*y</samp> and it complains about something called <samp>xyzzy</samp>??... </em> <p>
<em><strong>Q</strong>: I cannot find a way to use the <samp>/?</samp> switch with my programs! </em> <p>
<hr> <strong>A</strong>:  The filename globbing in DJGPP is done by the start-up code, before your <code>main</code> function is called.  Unlike other DOS-based compilers, where you must link your
program with a special object module if you want the program to get expanded filenames, in DJGPP this is considered normal behavior and performed by default on behalf of every DJGPP program.  The
<samp>x*y</samp> above was expanded to a file called <samp>xyzzy</samp> which was probably present in the current working directory; and <samp>/?</samp> is by default expanded to the list of
one-letter files/directories you happen to have in the root directory of the current drive.  (If you don't want the default expansion, see <A HREF="#Disable globbing">how to disable globbing</A>.)
<p>

In DJGPP, filename globbing works like in Unix, which is more general than the usual DOS wildcard expansion.  It understands the following constructs with special meta-characters:

<dl>
<dt> ?
<dd> any single character.

<dt> *
<dd> zero or more arbitrary characters, including a dot `.'

<dt> [aA_]
<dd> any one of characters `a', `A', or `_'.

<dt> [a-d]
<dd> any one of characters `a', `b', `c', or `d'.

<dt> [!a-z]
<dd> anything <em>but</em> a lowercase letter.

<dt> ...
<dd> all the subdirectories, recursively (VMS aficionados, rejoice!).

<dt> .../*
<dd> all the files in all subdirectories, recursively.
</dl>
Unlike DOS, the <samp>*</samp> and <samp>?</samp> meta-characters can appear <em>anywhere</em> in the filename pattern, like in <samp>[a-z]*[0-9].*pp.</samp> You can also use <samp>*</samp> instead
of directories, like in <samp>*/*/*.c</samp>, but <strong>not</strong> on drive letters (e.g., <samp>[a-c]:/</samp> won't work).  <p>

Note that <samp>*.*</samp> only picks up files that actually have an extension.  This is contrary to the usual DOS practice where it means <em>all</em> the files, with or without extension.  <p>

An argument which cannot be expanded (no filenames matching that particular pattern) will be passed to the program verbatim.  This is different from what you might see under Unix, where some shells
(like <samp>csh</samp>) would say something like "No match" and won't call your program at all.  DJGPP's behavior in this case is like shells of the Bourne legacy (<samp>sh</samp>, <samp>ksh</samp>,
and <samp>bash</samp>).  <p>

If the wildcards include upper-case or mixed upper- and lower-case letters, the letter-case of the files is not ignored on Windows 9X when expanding the wildcards.  For example, <samp>[A-D]*</samp>
will <strong>not</strong> match a file called <samp>aFileName</samp>.  Upper-case letters in wildcards also disable automatic down-casing of short 8+3 file names returned by the code that expand
wildcards (even on plain DOS).  If the wildcards include only lower-case letters, the letter-case is ignored during expansion, and short 8+3 file names are automatically down-cased, unless the
environment variable <code>FNCASE</code> is set to <samp>y</samp>.  The effect of setting <code>FNCASE</code> is fully described in the <cite>DJGPP C Library reference</cite>, under the
<code>_preserve_fncase</code> function; type <kbd>info libc alpha _preserve_fncase</kbd> from the DOS prompt.

<P>
<P> | <A HREF="#Filename globbing"> Previous </A> | <A HREF="#Special chars"> Next </A> | <A HREF="#Command line"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Disable globbing">

16.2 How to disable filename wildcards expansion </A></H3><P>
</CENTER>
<em><strong>Q</strong>: OK, but I don't want my program to glob its arguments (they aren't files at all, but they include characters like <samp>*</samp> and <samp>?</samp>).  What should I do? </em>
<p>
<hr> <strong>A</strong>:  You have these alternatives:

<ul>
<li> Surround your arguments with single or double quotes (this is what you would do under a Unix shell).

<li> Disable globbing for your program by linking it with your custom version of the function with the special name <code>__crt0_glob_function</code> and make it always return a <code>NULL</code>
pointer.  See the documentation of this function in the library reference, for more details.  Here's an example:

<pre>

      char **__crt0_glob_function (char *arg)
      {
        return 0;
      }

</pre>
</ul>
<P>
<P> | <A HREF="#Disable globbing"> Previous </A> | <A HREF="#Long commands"> Next </A> | <A HREF="#Command line"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Special chars">

16.3 How to pass command-line arguments with quotes or <samp>@</samp> </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I have a file with a single quote in its name, but the quote seems to be stripped away when I pass it to my program ... </em> <p>
<em><strong>Q</strong>: How do I pass a command-line argument which contains double quotes?  </em> <p>
<em><strong>Q</strong>: How do I pass an argument which begins with the <samp>@</samp> character? </em> <p>
<hr> <strong>A</strong>: These special characters on the command-line arguments are handled by the filename expansion ("globbing") code before they are passed to the <code>main</code> function (see
<A HREF="#Filename globbing">description of filename expansion</A>), and the quote characters serve to protect the arguments from expansion.  You should escape-protect the quote characters with a
backslash in order for them to be treated as literal characters.  For example, if you have a file called <samp>myfile.c'v</samp>, type it as <samp>myfile.c\'v</samp> when you call your program.  If
you have single quotes in your program arguments <em>and</em> you don't want those arguments to be expanded, then surround them by double quotes, like this: <samp>"*.c'v".</samp>  The program will
get the string <samp>*.c'v</samp> with the double quotes stripped away.  <p>

Note that backslashes are only special if they are in front of a quote, whitespace, or backslash (they also serve as DOS directory separators, remember?).  This is also different from what you get
under a Unix shell.  <p>

The <samp>@</samp> character serves to signal a <dfn>response file</dfn> (see <A HREF="#Long commands">the description of response file method</A>), so it's also special.  To pass an argument whose
first character is <samp>@</samp>, surround that argument with single or double quotes, otherwise it will be taken as a name of a response file which holds the actual command line.  <p>

Note that you can quote parts of the wildcard to protect only those parts from expansion; the unquoted parts will still be expanded.  This allows to use wildcards with embedded whitespace and expand
file names with special characters which need to be quoted, like in <samp>c:/Prog*' 'F*</samp> (which should expand into <samp>c:/Program Files</samp>) and <samp>*.c"'"v</samp> (which should expand
into all files with the <samp>*.c'v</samp> extension).

<P>
<P> | <A HREF="#Special chars"> Previous </A> | <A HREF="#How long"> Next </A> | <A HREF="#Command line"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Long commands">

16.4 How to pass command lines longer than 126 characters </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Can I invoke my program with a command line longer than the infamous DOS 126-character limit? </em> <p>
<em><strong>Q</strong>: I have a Makefile of Unix origin which contains some <strong>very</strong> long command lines.  Will it work with DJGPP? </em> <p>
<hr> <strong>A</strong>:  Yes and yes.  DJGPP supports several methods of passing command-line arguments which allow it to work around the DOS 126-character limit.  These are:

<ul>
<li> The <samp>!proxy</samp> method.  If you invoke the program from within another DJGPP program (like Make or Gcc compilation driver), it gets the address of the memory block where the actual
command line is stored.  The start-up code will detect this and use that info to retrieve the command-line arguments.  <p>

This method is suitable only for invoking DJGPP programs from other DJGPP programs.  You don't have to do anything special to use this method, it is all done automagically for you by the library
functions like <code>system</code>, <code>spawnXX</code> and <code>execXX</code> on the parent program side, and by the start-up code on the child side(<i><b>Note: </b>In case you wonder, the name
<samp>!proxy</samp> comes from the string which identifies the use of this method: instead of getting the actual command line, the program gets <samp>!proxy</samp> followed by the address of the
actual command line.</i>).  <p>

<li> The environment method.  This is the same as the <samp>!proxy</samp> method above, but the information about the long command line is stored in an environment variable called "<tt>!proxy</tt>"
(with the leading blank and in lower-case).  The reason for two similar, but different methods is that command-line arguments passed by <code>system</code> library functions should be globbed by the
child, while the arguments passed by <code>spawnXX</code> and <code>execXX</code> family of functions should not; thus the former uses the environment method while the latter use the
<samp>!proxy</samp> method.  <p>

<li> The response file method.  Any argument which starts with a <samp>@</samp> character (like in <samp>myprog @file</samp>) will cause the named <samp>file</samp> to be read and its contents used
as command-line arguments, like in many DOS-based compilers and linkers.  If you invoke your DJGPP program from the DOS command line, this would be the only method available for you to pass long
command lines (like when calling <samp>Gawk</samp> or <b><tt>SED</tt></b> without <samp>-f</samp> option).  <p>

Note that this method makes <samp>@</samp> special when it is the first (or the only) character of a command-line argument, which should be escape-protected if you want to use it verbatim (see
<A HREF="#Special chars">how to pass the <b>@</b> character</A>).
</ul>
Of course, if the start-up code doesn't see any of the above methods, it will use the command line by default.  <p>

Since the long command lines are a very important feature, DJGPP's version of the <code>system</code> library function avoids calling the DOS command processor, <samp>COMMAND.COM</samp>, unless it
needs to run a batch file or an internal command of <samp>COMMAND.COM</samp>.  Other features of the command processor, like redirection and pipes, are emulated internally by <code>system</code>.
See the library reference for <code>system</code>, for more details about its extended functionality.

<P>
<P> | <A HREF="#Long commands"> Previous </A> | <A HREF="#Makefiles"> Next </A> | <A HREF="#Command line"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="How long">

16.5 What is the maximum length of command line under DJGPP </A></H3><P>
</CENTER>
<em><strong>Q</strong>: What is the longest command line I can pass to gcc when it is invoked by <samp>Make</samp>? </em> <p>
<hr> <strong>A</strong>:  The arguments are passed to DOS Exec call (Int 21h function 4Bh) via the transfer buffer which is 16KB-long.  Apart of the command line, it is also used to pass other info,
such as the <samp>!proxy</samp> parameters and the copy of the environment for the child program (let's say, less than 2000 bytes in most cases, but your mileage may vary).  This leaves at least 13K
bytes for arguments (including a separating blank between any two arguments).  So unless your arguments span more than 160 screen lines, you shouldn't worry.  However, if your environment is
<em>very</em> large (some people need as much as 6KB to accommodate for all the variables used by the various packages installed on their machine), be sure to stub-edit the programs that spawn other
programs to a larger transfer buffer, or else they could fail.  <p>

The above limit depends on the size of the transfer buffer, so check the size of the value recorded in the stub header of the <em>parent program</em> before you pass extremely long command lines to
its children.  GCC is the first program you should worry about, because the linker (<samp>ld.exe</samp>) usually gets long command lines from GCC (they include the list of all the object files and
libraries to be linked).

<P>
<P> | <A HREF="#How long"> Previous </A> | <A HREF="#Command line"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Makefiles">

16.6 Why Make passes only 126 characters to programs? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I use Make to compile with GCC, but GCC gets only the first 126 characters of its command line.  Didn't you just explain in so many words that invoking a DJGPP program (GCC)
from another DJGPP program (Make) can safely pass up to 13K characters of command-line arguments using the <samp>!proxy</samp> method? </em> <p>
<em><strong>Q</strong>: I use <b><tt>RHIDE</tt></b>, but it only passes the first 126 characters of my long command lines to the compiler! </em> <p>
<hr> <strong>A</strong>:  If you use Make 3.73, check your Makefile for <code>SHELL = command.com</code> statements, or for commands which include pipe or redirection characters like <samp>></samp>,
<samp>|</samp>, etc.  If Make sees any such statements, it will invoke <samp>COMMAND.COM</samp> to run GCC, and <samp>COMMAND.COM</samp> can't pass more than 126 characters to GCC.  To work around,
comment-out the <code>SHELL=</code> line, and change your commands to work without redirection/pipe characters.  One easy way to get rid of redirection characters without losing their effect is to
use the <samp>redir</samp> program which comes with DJGPP.  For example, the following command:

<pre>

       frobnicate foo.bar > myfile.tmp

</pre>
can be re-written instead like this:

<pre>

       redir -o myfile.tmp frobnicate foo.bar

</pre>
The ports of Make 3.75 and later doesn't call <samp>COMMAND.COM</samp> in the above cases, but rather emulates pipes and redirection internally, so upgrading to the latest version of Make will solve
such problems.  If you think about using Make 3.75 with DJGPP v2.0, don't: invoking v2.0 programs from v2.01 programs will cause subtle and hard-to-debug problems due to incompatibilities between
these two versions regarding the methods of invoking child programs (in particular, v2.0 doesn't support the environment method of passing long command lines described above).  <p>

Problems with passing long commands from <b><tt>RHIDE</tt></b> are usually caused by invoking old programs compiled with DJGPP v2.0.  Upgrade to the latest binaries.

<P>
<P> | <A HREF="#Command line"> Previous </A> | <A HREF="#Low-level"> Next </A> | <A HREF="#Top"> Up </A> | <P>
<P>
<P>
<CENTER>
<H2>

<A NAME="Converting">

17. Converting DOS Programs/Libraries to DJGPP </A></H2><P>
</CENTER>
  If you have a program or a library developed under some other DOS-based compiler, which you want to port to DJGPP, read this chapter.

<p>
<ul>
<li><A HREF="#Syntax"> 17.1 Syntax--The (AT&T) syntax of Gas is different.  </A>
<li><A HREF="#Converting ASM"> 17.2 Converting ASM--Automated conversion tool.  </A>
<li><A HREF="#ASM GPF"> 17.3 ASM GPF--When converted code crashes.  </A>
<li><A HREF="#ASM and C"> 17.4 ASM and C--Rules for assembly code called from C.  </A>
<li><A HREF="#OBJ and LIB"> 17.5 OBJ and LIB--You can't use them with GCC...  </A>
<li><A HREF="#16-bit code"> 17.6 16-bit code--...or can you?  </A>
<li><A HREF="#NEAR and FAR"> 17.7 NEAR and FAR--How to convert these to DJGPP.  </A>
<li><A HREF="#Pseudo-registers"> 17.8 Pseudo-registers--Converting _AX to DJGPP code.  </A>
</ul>
<P>
<P> | <A HREF="#Converting"> Previous </A> | <A HREF="#Converting ASM"> Next </A> | <A HREF="#Converting"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Syntax">

17.1 GCC/Gas won't accept valid assembly code ... </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I have some code written in assembly which compiles under <b><tt>MASM</tt></b> and <b><tt>TASM</tt></b>, but GCC gives me a long list of error messages. </em> <p>
<hr> <strong>A</strong>: The GNU Assembler (<samp>as.exe</samp>), or <samp>Gas</samp>, called by GCC accepts the <dfn>AT&T syntax</dfn>, which is different from the <dfn>Intel syntax</dfn>.  Notable
differences between the two syntaxes are:

<ul>
<li> AT&T immediate operands are preceded by <code>$</code>; Intel immediate operands are undelimited (Intel <code>push 4</code> is AT&T <code>pushl $4</code>).

<li> AT&T register operands are preceded by <code>%</code>; Intel register operands are undelimited.  AT&T absolute (as opposed to PC-relative) <code>jump</code>/<code>call</code> operands are
prefixed by <code>*</code>; they are undelimited in Intel syntax.

<li> AT&T and Intel syntax use the opposite order for source and destination operands.  Intel <code>add eax, 4</code> is <code>addl $4, %eax</code> in AT&T syntax.

The <code>source, dest</code> convention is maintained for compatibility with previous Unix assemblers, so that GCC won't care about the assembler with which it is configured, as some of GCC
installations (on systems other than MS-DOS) don't use GNU Binutils.

<li> In AT&T syntax, the size of memory operands is determined from the last character of the opcode name.  Opcode suffixes of <code>b</code>, <code>w</code>, and <code>l</code> specify byte (8-bit),
word (16-bit), and long (32-bit) memory references.  Intel syntax accomplishes this by prefixing memory operands (<em>not</em> the opcodes themselves) with <code>`byte ptr'</code>, <code>`word
ptr'</code>, and <code>`dword ptr'.</code>  Thus, Intel <code>mov al, byte ptr FOO</code> is <code>movb FOO, %al</code> in AT&T syntax.

<li> Immediate form long jumps and calls are <code>lcall/ljmp $SECTION, $OFFSET</code> in AT&T syntax; the Intel syntax is <code>call/jmp far SECTION:OFFSET.</code>  Also, the far return instruction
is <code>lret $STACK-ADJUST</code> in AT&T syntax; Intel syntax is <code>ret far STACK-ADJUST.</code>

<li> The AT&T assembler does not provide support for multiple-section (a.k.a.  multi-segment) programs.  Unix style systems expect all programs to be single-section.

<li> An Intel syntax indirect memory reference of the form

<pre>

      SECTION:[BASE + INDEX*SCALE + DISP]

</pre>
is translated into the AT&T syntax

<pre>

      SECTION:DISP(BASE, INDEX, SCALE)

</pre>
</ul>
Examples:

<pre>

         <strong>Intel:</strong>  [ebp - 4]         <strong>AT&T:</strong>  -4(%ebp)
         <strong>Intel:</strong>  [foo + eax*4]     <strong>AT&T:</strong>  foo(,%eax,4)
         <strong>Intel:</strong>  [foo]             <strong>AT&T:</strong>  foo(,1)
         <strong>Intel:</strong>  gs:foo            <strong>AT&T:</strong>  %gs:foo

</pre>
For a complete description of the differences, see <A HREF="http://www.delorie.com/gnu/docs/binutils-2.7/as_164.html#SEC192">the "i386-Dependent" section of the "GNU assembler documentation"</A>.  If
you don't read this FAQ with an Info browser, download <a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2gnu/bnu281b.zip">GNU Binutils</a>, unzip the files named <samp>as.iN</samp> (where
<samp>N</samp> is a digit) from it, then type at the DOS prompt:

<pre>

      info as machine i386

</pre>
You will see a menu of <samp>Gas</samp> features specific to x86 architecture.  <p>

A guide is available which was written by <a href="mailto:brennan@rt66.com">Brennan Underwood</a>; it describes how to use inline assembly programming with DJGPP and includes a tutorial on the AT&T
assembly syntax.  Check out the <a href="http://brennan.home.ml.org/djgpp/djgpp-asm.html">DJGPP inline assembly tutorial</a>.

Another useful tutorial about writing separate assembly-language modules for DJGPP was written by <a href="mailto:george.foot@merton.oxford.ac.uk">George Foot</a> and is available from
<a href="http://users.ox.ac.uk/~mert0407/asmfuncs.txt">George's home page</a>.

The DJGPP User's Guide also has a <a href="http://www.delorie.com/djgpp/doc/ug/asm/">tutorial on writing assembly-language code</a>.

Many people who used Intel syntax and then converted to the AT&T style say that they like the AT&T variant more.  However, if you prefer to stick with the Intel syntax, download and install
<a href="ftp://ftp.simtel.net/pub/simtelnet/msdos/asmutl/nasm096.zip"><b><tt>NASM</tt></b></a>, which is a free portable assembler.  It is compatible with DJGPP and accepts a syntax which is much
more similar to the Intel style.  A guide for using <b><tt>NASM</tt></b> with DJGPP was written by <a href="mailto:mmastrac@acs.ucalgary.ca">Matthew Mastracci</a> and is available from
<a href="http://www.acs.ucalgary.ca/~mmastrac/files/djgppasm.html">Matthew's Web page</a>.

<P>
<P> | <A HREF="#Syntax"> Previous </A> | <A HREF="#ASM GPF"> Next </A> | <A HREF="#Converting"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Converting ASM">

17.2 Converting between Intel ASM syntax and AT&T syntax </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Where can I find an automated conversion tool to convert my <samp>Intel</samp>-style assembly code into a code acceptable by <samp>Gas</samp>? </em> <p>
<em><strong>Q</strong>: Where can I find a converter from <samp>AT&T</samp> assembly to <samp>Intel</samp> style? </em> <p>
<hr> <strong>A</strong>:  A <b><tt>SED</tt></b> script which should do most of the conversion was posted to the
<a href="http://www.delorie.com/djgpp/mail-archives/djgpp/1995/06/06/05:48:34">DJGPP news group</a>.

A program called <samp>TA2AS</samp> which can convert <b><tt>TASM</tt></b> assembly source to AT&T style can be found
<a href="ftp://ftp.delorie.com/pub/djgpp/contrib/ta2asv08.zip">on the DJGPP server</a> and <a href="ftp://x2ftp.oulu.fi/pub/msdos/programming/convert/ta2asv08.zip">on Oulu</a>.  <samp>TA2AS</samp>
was written by Frank van Dijk of the Spirit group; if you have questions about this tool, you may contact <a href="mailto:jan@stack.nl">Jan Oonk</a>.  The authors say that the program is far from
finished, but the sources are available with the package so you can fix whatever is broken for your needs.  <p>

Alternatively, here is what you can do to make your code linkable with DJGPP programs:

<ul>
<li> Get and install <b><tt>NASM</tt></b>, a portable x86 assembler which supports most of the Intel syntax and can generate DJGPP-compatible COFF object files (as well as lots of other formats, such
as Microsoft 16-bit OBJ and Win32, a.out, and ELF).  It also supports Pentium and Pentium Pro opcodes, and MMX.  <b><tt>NASM</tt></b> is free for non-commercial use (see the docs for commercial use
restrictions) and can be compiled with DJGPP.  <a href="ftp://ftp.simtel.net/pub/simtelnet/msdos/asmutl/nasm096s.zip"><b><tt>NASM</tt></b> sources are on SimTel.NET</a>.  A pre-compiled MS-DOS
executable binary of <b><tt>NASM</tt></b> is available <a href="ftp://ftp.simtel.net/pub/simtelnet/msdos/asmutl/nasm096.zip">from SimTel.NET</a>.  The author and maintainer of <b><tt>NASM</tt></b> is
<a href="mailto:anakin@pobox.com">Simon Tatham</a>.  <p>

Be warned that <b><tt>NASM</tt></b> is <em>not</em> 100% identical to <b><tt>MASM</tt></b> or <b><tt>TASM</tt></b>.  Even experienced assembly programmers might need some time to adapt to the
slightly different flavor of <b><tt>NASM</tt></b>.  If you want something much more similar to <b><tt>TASM</tt></b>, get <b><tt>JAS</tt></b>.  <b><tt>JAS</tt></b> is available
<a href="ftp://x2ftp.oulu.fi/pub/msdos/programming/djgpp2/jas31.zip">from OULU</a>.  <p>

<li> For a small number of relatively short files, consider converting them with a smart editor (like Emacs or its work-alikes).  <p>

<li> Obtain a copy of Microsoft <b><tt>MASM</tt></b> 6.11. It has a <samp>-coff</samp> option to generate object code in COFF format which can be submitted to GCC, so you can compile your original
source.  You can also use the <samp>LIB32</samp> librarian from Microsoft C8 to convert object files to COFF by putting them into a <samp>.lib</samp> library, then extracting them as COFF files.
(<i><b>Note: </b>If you use <b><tt>MASM</tt></b> or <b><tt>LIB32</tt></b>, please post your experiences to the <a href="news:comp.os.msdos.djgpp">comp.os.msdos.djgpp</a> news group, so that I can
make the above instructions less vague.</i>) <p>

<li> Use a disassembler to disassemble the object code, then convert it to the AT&T format either by hand or using <samp>TA2AS</samp>.  One place to look for such a disassembler is
<a href="ftp://ftp.simtel.net/pub/simtelnet/msdos/disasm/">on SimTel.NET mirrors</a>.
</ul>
<p>

Keep in mind that syntax is only one of the aspects of converting code written for DOS to DJGPP.  You should also make sure your code doesn't violate any of the rules for protected-mode programming
(see <A HREF="#ASM GPF">next question</A>).  <p>

If you need to perform the opposite conversion, from the <samp>AT&T</samp> style to the <samp>Intel</samp> style, try the <samp>Att2Intl</samp> converter written by
<a href="mailto:hmaon@umiacs.umd.edu">Greg Velichansky</a>.  Its output is intended for <b><tt>NASM</tt></b> or <b><tt>TASM</tt></b>.  <samp>Att2Intl</samp> is available
<a href="http://www.wam.umd.edu/~gvelicha/a2i/">from Greg's home page</a>.

<P>
<P> | <A HREF="#Converting ASM"> Previous </A> | <A HREF="#ASM and C"> Next </A> | <A HREF="#Converting"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="ASM GPF">

17.3 Converted code GP Faults! </A></H3><P>
</CENTER>
<em><strong>Q</strong>: OK, I've succeeded in converting and compiling my assembly-language program, but when I run it, I get "Segmentation Violation" and "General Protection Fault".  This program
works when compiled with <b><tt>MASM</tt></b>, so how can this be? </em> <p>
<hr> <strong>A</strong>: In DJGPP, your program runs in <strong>protected mode</strong>.  There are certain things you can't do in protected-mode programs (that's why it is called protected mode).
This issue is too complex to describe here, so only a few of the more important aspects will be briefly mentioned.  If you are serious about writing assembly language protected-mode code, or have a
large body of existing code to convert to protected mode, you should read any of the available books about protected-mode programming with 80x86 processors.  <p>

Here is a short list of some of the techniques found in many real-mode programs, which will trigger protection violation or erratic behavior in protected mode:

<ul>
<li> Loading arbitrary values into segment registers, then using them to reference code or data.

<li> Referencing code with data segment register, or vice versa.

<li> Assuming certain locations (like BIOS area or video memory) will be found at certain absolute addresses.

<li> Calling DOS or BIOS services with <code>INT NN</code> instruction.

<li> Hooking interrupts by poking absolute addresses.
</ul>
<P>
<P> | <A HREF="#ASM GPF"> Previous </A> | <A HREF="#OBJ and LIB"> Next </A> | <A HREF="#Converting"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="ASM and C">

17.4 Which registers need to be saved in assembly code? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Which register can I safely change in my assembly code that is called from a C program? </em> <p>
<em><strong>Q</strong>: How come my program crashes with a GPF, but only if I compile it with -O2? </em> <p>
<hr> <strong>A</strong>: You can safely clobber <b><tt>EAX</tt></b>, <b><tt>ECX</tt></b>, and <b><tt>EDX</tt></b>, but must save and restore all other registers at the end of your assembly function.
Failure to preserve, e.g., <b><tt>ESI</tt></b>, <b><tt>EDI</tt></b>, or <b><tt>EBX</tt></b> in functions written in assembly can cause a C program linked with such functions to crash, since GCC
expects those registers to be preserved across function calls.

<P>
<P> | <A HREF="#ASM and C"> Previous </A> | <A HREF="#16-bit code"> Next </A> | <A HREF="#Converting"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="OBJ and LIB">

17.5 I want to use a <samp>.obj</samp> or <samp>.lib</samp> code with DJGPP </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I have a set of useful functions in a <samp>.obj</samp> format, but no source code.  Can I use them with my DJGPP program? </em> <p>
<em><strong>Q</strong>: I have this <samp>ACMELUXE.LIB</samp> library of functions which I want to use.  I've extracted all the <samp>.obj</samp> files, but when I try to link them with my program,
GCC complains: "File format not recognized".  Can't I use these object files? </em> <p>
<em><strong>Q</strong>: I've got a bunch of <samp>.obj</samp> files I want to use.  I've ran AR to make a GCC-style <samp>.a</samp> object library, but got an error message from GCC saying "couldn't
read symbols: No symbols".  How can I link them with my code? </em> <p>
<hr> <strong>A</strong>: Sorry, you probably can't.  The GNU linker called by GCC doesn't understand the format of <samp>.obj</samp> files which other DOS-based compilers/assemblers emit.  Unless you
can get the source of those functions, convert it to protected-mode, flat-address model code and compile them with GCC, you most probably won't be able to use them(<i><b>Note: </b>Note that mixing
object files from different compilers generally doesn't work at all, even if all the object files are in <samp>.obj</samp> format.</i>).  <p>

However, if you are really desperate, one conversion tool you might try is <samp>OBJ2BFD</samp>.  It was written by <a href="mailto:robert.hoehne@gmx.net">Robert Hoehne</a> based on the
<samp>EMXAOUT</samp> utility from the <samp>emx/gcc</samp> package.  <samp>OBJ2BFD</samp> requires the <samp>.obj</samp> files to be written for the flat-address memory model and will reportedly
complain if you feed it with code written for segmented memory models.  <samp>OBJ2BFD</samp> is available
<a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2apps/o2bfd01b.zip">from the DJGPP sites</a>.  <p>

Another automated conversion tool called <samp>OBJ2COFF</samp> was written by the SPiRiT team, and it can be used to convert <samp>.obj</samp> object files and <samp>.lib</samp> libraries to
<samp>COFF</samp> format, provided that the original <samp>.obj</samp> files have been written for flat-address memory model.  <p>

<samp>OBJ2COFF</samp> is available via anonymous FTP transfer <a href="ftp://x2ftp.oulu.fi/pub/msdos/programming/convert/o2cv10.arj">from the Oulu MSDOS repository</a>.  If you have any problems with
it or questions about it, send them to <a href="mailto:mb002@hi.ft.hse.nl">its author Rico</a> or to <a href="mailto:george@il.ft.hse.nl">George van Venrooij</a>.  Note that the authors of
<samp>OBJ2COFF</samp> have explicitly prohibited commercial use, so you shouldn't use <samp>OBJ2COFF</samp> for converting commercial object files.  <p>

You can also try using <b><tt>LIB32</tt></b> librarian from Microsoft C8 to convert object files to COFF.  <p>

The main problem with these conversion methods is, of course, that most object files you'd want to converted were written for real-mode programs in memory models other than flat, and without
extensive modifications would crash your program anyway... (See <A HREF="#ASM GPF">previous question</A>.)  <p>

<P>
<P> | <A HREF="#OBJ and LIB"> Previous </A> | <A HREF="#NEAR and FAR"> Next </A> | <A HREF="#Converting"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="16-bit code">

17.6 I <strong>must</strong> use my 16-bit code with DJGPP!! </A></H3><P>
</CENTER>
<em><strong>Q</strong>: If that's how it is, then I would have to give up using DJGPP.  I simply cannot live without these <samp>.obj</samp> files.  Are you <strong>really</strong> sure there is
nothing I can do?? </em> <p>
<hr> <strong>A</strong>: If you need your old code <em>that</em> badly, then there might be a way, albeit a cumbersome one.  You can write a 16-bit, real-mode program and link it with your precious
functions you can't live without.  Have this program spawn a DJGPP-compiled program and make the two communicate with each other via a buffer allocated in low memory, or via command-line parameters
passed to the 32-bit program by the <code>spawnXX</code> function call.  On the DJGPP side, you can directly call 16-bit functions from the real-mode program using the library function called
<code>__dpmi_simulate_real_mode_procedure_retf</code>, provided the 16-bit program passes the CS:IP values of these functions to the 32-bit program.  You can even put your 16-bit code as binary
instructions into a buffer allocated in low memory and call it with <code>__dpmi_simulate_real_mode_procedure_retf</code> (but if you can do that, you can probably also disassemble the code into a
source form and submit it to <samp>Gas</samp>).  <p>

<em>Now</em> will you consider sticking with DJGPP?  <em>Please??...</em>

<P>
<P> | <A HREF="#16-bit code"> Previous </A> | <A HREF="#Pseudo-registers"> Next </A> | <A HREF="#Converting"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="NEAR and FAR">

17.7 What should I do with those "near" and "far" declarations? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I have this program that I need to port to DJGPP, but it is full of pointers and functions declared with the "near" and "far" keywords which GCC doesn't grok.  What shall I
do? </em> <p>
<em><strong>Q</strong>: A program written for a 16-bit compiler uses the MK_FP or _MK_FP macro, but DJGPP doesn't seem to have it.  How should I port it? </em> <p>
<em><strong>Q</strong>: How do I compute a segment and an offset of a protected-mode address? </em> <p>
<hr> <strong>A</strong>:  In DJGPP you use a flat address space with no segmentation (it is a kind of tiny model, since <b><tt>CS = DS = SS</tt></b>, but with a <em>very</em> large segment), so you
don't need far pointers in the sense they are used in 16-bit code. Just define away those keywords and you will be fine:

<pre>

       #define far
       #define near
       #define huge
       #define _far
       #define _near
       #define _huge

</pre>
Alternatively, you could add suitable <code>-D</code> switches to the GCC command line, like this:

<pre>

       gcc -Dfar= -Dnear= -Dhuge= -c myprog.c

</pre>
Macros that create far pointers from the segment and offset (usually called <code>MK_FP</code> or <code>_MK_FP</code>) are mostly used in 16-bit code to access certain absolute addresses on
memory-mapped peripheral devices, like the video RAM.  These chores are done differently in DJGPP.  Here's one possible way to express <code>MK_FP</code> in DJGPP (courtesy of
<a href="mailto:sandmann@clio.rice.edu">Charles Sandmann</a>):

<pre>

       #include &lt;sys/nearptr.h&gt;
       #include &lt;crt0.h&gt;
     
       void * MK_FP (unsigned short seg, unsigned short ofs)
       {
         if ( !(_crt0_startup_flags & _CRT0_FLAG_NEARPTR) )
           if (!__djgpp_nearptr_enable ())
             return (void *)0;
         return (void *) (seg*16 + ofs + __djgpp_conventional_base);
       }

</pre>
The above uses the DJGPP nearptr facility; if you prefer to use farptr functions (which are safer and work with all known DPMI hosts), you will need to rewrite the code that uses these macros, so
don't bother writing a replacement for the macro itself.  The details are described in <A HREF="#Xfer">Accessing absolute addresses</A>, below.  <p>

Macros that extract the segment and the offset from a far pointer (called <code>FP_SEG</code> and <code>FP_OFF</code>) are required in 16-bit code to pass addresses in registers when calling
real-mode DOS or BIOS services, like functions of interrupt 21h.  See <A HREF="#Pointer segment">How to call real-mode interrupt functions</A>, which describes how that should be done in DJGPP; here,
too, you won't need to port the macros but instead rewrite the code that calls the DOS or BIOS service.  In particular, you <strong>cannot</strong> compute a real-mode segment and offset of a
protected-mode address, because real-mode addresses can only access the first 1MB of memory, whereas the variables of DJGPP programs all live above the 1MB mark.

<P>
<P> | <A HREF="#NEAR and FAR"> Previous </A> | <A HREF="#Converting"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Pseudo-registers">

17.8 How to convert _AX pseudo-registers? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Since DJGPP doesn't recognize Borland-style pseudo-register variables like _AX, how should I port code which uses them to DJGPP? </em> <p>
<hr> <strong>A</strong>:  These pseudo-variables are typically used in two different contexts:

<ul>
<li> When calling real-mode interrupt services.  <p>

To port such code to DJGPP, use the fields of the <code>__dpmi_regs</code> structure (declared on the <samp>dpmi.h</samp> header file) to set the register values, and library function
<code>__dpmi_int</code> to invoke the interrupt service.  For example, consider the following code snippet:

<pre>

       #include &lt;dos.h&gt;
       void _highcolor (void)
       {
         _AH = 0x10;
         _AL = 0x03;
         _BL = 0;
         geninterrupt (0x10);
       }

</pre>
Here's one way to express this in DJGPP(<i><b>Note: </b>This function calls the video BIOS interrupt 10h to allow bright background colors to be used instead of blinking characters.  DJGPP has a
library function, called <code>intensevideo</code>, to do that, but let's assume we have reasons not to use it.</i>):

<pre>

       #include &lt;dpmi.h&gt;
       void _highcolor (void)
       {
         __dpmi_regs r;
     
         r.h.ah = 0x10;
         r.h.al = 0x03;
         r.h.bl = 0;
         __dpmi_int (0x10, &r);
       }

</pre>
Please read <A HREF="#int86">how to call real-mode interrupt functions</A>, elsewhere in this document, for further details on how call real-mode services from DJGPP programs.  <p>

<li> Immediately before or after an inline assembly code.  <p>

GCC features extensive inline assembly facilities which allow you to assign values to, or read values from registers from the inline assembly code.  See <A HREF="#Inline Asm">description of inline
assembly</A>, for further info.
</ul>
<P>
<P> | <A HREF="#Converting"> Previous </A> | <A HREF="#Legalese"> Next </A> | <A HREF="#Top"> Up </A> | <P>
<P>
<P>
<CENTER>
<H2>

<A NAME="Low-level">

18. Low-level DOS/BIOS and Hardware-oriented Programming </A></H2><P>
</CENTER>
  This chapter sheds some light on a few aspects of writing DJGPP programs which interact with hardware or use interrupts.

<p>
<ul>
<li><A HREF="#int86"> 18.1 int86--It doesn't always work.  </A>
<li><A HREF="#Pointer segment"> 18.2 Pointer segment--Some interrupts require it, but how do you get it?  </A>
<li><A HREF="#Zero SP"> 18.3 Zero SP--If you don't, your program crashes.  </A>
<li><A HREF="#Xfer"> 18.4 Xfer--Moving data to and from conventional memory.  </A>
<li><A HREF="#Move structs"> 18.5 Move structs--How to move structs from conventional memory.  </A>
<li><A HREF="#Fat DS"> 18.6 Fat DS--Fast direct access to memory-mapped devices.  </A>
<li><A HREF="#Above 1MB"> 18.7 Above 1MB--Interact with memory-mapped devices above 1MB.  </A>
<li><A HREF="#RMCB"> 18.8 RMCB--How to let DOS/BIOS call your code.  </A>
<li><A HREF="#Hardware interrupts"> 18.9 Hardware interrupts--How to hook HW interrupts from DJGPP.  </A>
<li><A HREF="#_go32 vs __dpmi"> 18.10 _go32 vs __dpmi--Which functions should you use?  </A>
<li><A HREF="#HW Int pitfalls"> 18.11 HW Int pitfalls--Does your machine wedge?  Here are some reasons.  </A>
<li><A HREF="#Ports"> 18.12 Ports--Reading and writing I/O ports in DJGPP.  </A>
<li><A HREF="#Inline Asm"> 18.13 Inline Asm--How to write inline assembly with GCC.  </A>
<li><A HREF="#DMA"> 18.14 DMA--How to use DMA from DJGPP programs.  </A>
</ul>
<P>
<P> | <A HREF="#Low-level"> Previous </A> | <A HREF="#Pointer segment"> Next </A> | <A HREF="#Low-level"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="int86">

18.1 Got "Unsupported INT 0xNN" calling <code>int86</code> </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Why does my program crash with "Unsupported DOS request 0xNN" or "Unsupported INT 0xNN" when I call <code>int86</code> or <code>intdos</code> functions to invoke a software
interrupt? </em> <p>
<hr> <strong>A</strong>:  Calling real-mode DOS or BIOS services from protected-mode programs requires a switch to real mode, so the <code>int86</code> family of functions in the DJGPP library should
reissue the INT instruction after the mode switch.  However, some services require pointers to memory buffers.  Real-mode DOS/BIOS functions can only access buffers in conventional memory, so
<code>int86</code> has to move data between your program and low memory to transparently support these services.  But this means it should know about all these services to perform these chores
correctly, because each service has its own layout and size of the buffer(s).  While <code>int86</code> supports many of these services, it doesn't support all of them.  The supported functions are
listed in the library reference.  See <A HREF="http://www.delorie.com/djgpp/doc/libc-2.01/libc_411.html#SEC411">the "int86" section of the "libc.a reference"</A>.  For those it doesn't support, you
will have to call the <code>__dpmi_int</code> library function instead.  It is also documented in the library reference, see
<A HREF="http://www.delorie.com/djgpp/doc/libc-2.01/libc_208.html#SEC208">the "__dpmi_int" section of the "libc.a reference"</A>.  <code>__dpmi_int</code> requires that you set up all the data as
required by the service you are calling, including moving the data to and from low memory (see <A HREF="#Pointer segment">how to use buffers with DOS/BIOS services</A>).  <p>

Note that calling <code>int86</code> and <code>intdos</code> can sometimes cause trouble due to size (16 bits as opposed to 32 bits) of the members in the <code>union REGS</code> structure.  Do
<em>not</em> assume that e.g. <code>regs.x.ax</code> is always 16 bit!  This problem and the facilities available to specify the width of the registers are all described in the library reference; see
<A HREF="http://www.delorie.com/djgpp/doc/libc-2.01/libc_411.html#SEC411">the "int86" section of the "libc.a reference"</A>.

In particular, programs which interface with the mouse via calls to the <code>int86</code> library function, should mask off the high 16 bits of the registers which report mouse position and other
values, since the high 16 bits aren't necessarily zeroed (which will wreak havoc in any program that interfaces to the mouse).

<P>
<P> | <A HREF="#int86"> Previous </A> | <A HREF="#Zero SP"> Next </A> | <A HREF="#Low-level"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Pointer segment">

18.2 How to use buffers with DOS/BIOS services </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I want to call a DOS/BIOS function which requires a pointer to a buffer in, e.g. <b><tt>ES:DI</tt></b> (or any other) register pair.  How do I get the segment to put into the
<b><tt>ES</tt></b> register? </em> <p>
<em><strong>Q</strong>: I have some real-mode code that calls the <code>segread</code> function.  How can I make it work with DJGPP? </em> <p>
<hr> <strong>A</strong>: If you use <code>int86x</code> or <code>intdosx</code> for a DOS or BIOS function supported by them, then just put the address of your buffer into the register which expects
the offset (<code>regs.x.di</code>), forget about the segment, and call <code>int86</code> or <code>intdos</code> instead of <code>int86x</code> and <code>intdosx</code>.  The DOS/BIOS functions
supported by <code>int86</code> and <code>intdos</code> are processed specially by the library, which will take care of the rest.  Note that calling <code>int86x</code> and <code>intdosx</code> will
usually crash your program, since they expect that you pass them a real-mode segment:offset address to a buffer in conventional memory; this is done more easily with <code>__dpmi_int</code>, see
below.  <p>

If you call <code>__dpmi_int</code>, then you must put into that register pair an address of some buffer in <em>conventional</em> memory (in the first 1 MByte).  If the size of that buffer doesn't
have to be larger than the size of transfer buffer used by DJGPP (at least 2KB, 16KB by default), then the easiest way is to use the transfer buffer.  (Library functions don't assume the contents of
the transfer buffer to be preserved across function calls, so you can use it freely.)  That buffer is used for all DOS/BIOS services supported by DJGPP, it resides in conventional memory, and is
allocated  by the startup code.  DJGPP makes the address and the size of the transfer buffer available for you in the <code>_go32_info_block</code> external variable, which is documented the library
reference.  Check the size of the buffer (usually, 16K bytes, but it can be made as small as 2KB), and if it suits you, use its linear address this way:

<pre>

     dpmi_regs.x.di =
      _go32_info_block.linear_address_of_transfer_buffer & 0x0f;
     dpmi_regs.x.es =
      _go32_info_block.linear_address_of_transfer_buffer >> 4;

</pre>
For your convenience, the header file <samp>go32.h</samp> defines a macro <code>__tb</code> which is an alias for <code>_go32_info_block.linear_address_of_transfer_buffer.</code> <p>

Here's a simple example of calling a real-mode service.  This function queries DOS about the country-specific information, by calling function 38h of the DOS Interrupt 21h, then returns the local
currency symbol as a C-style null-terminated string in <code>malloc</code>ed storage.  Note how the transfer buffer is used to retrieve the info: the address of the transfer buffer is passed to DOS,
so it stores the data there, and the function then retrieves part of that data using <code>dosmemget</code>.

<pre>

      #include &lt;sys/types.h&gt;
      #include &lt;sys/movedata.h&gt;
      #include &lt;dpmi.h&gt;
      #include &lt;go32.h&gt;
     
      char * local_currency (void)
      {
        __dpmi_regs regs;
     
        regs.x.ax = 0x3800;        /* AH = 38h, AL = 00h  */
        regs.x.ds = __tb >> 4;     /* transfer buffer address in DS:DX  */
        regs.x.dx = __tb & 0x0f;
        __dpmi_int (0x21, &amp;regs);  /* call DOS  */
        if (regs.x.flags & 1)      /* is carry flag set?  */
          /* The call failed; use the default symbol.  */
          return strdup ("$");
        else
          {
            /* The call succeeded.  The local currency symbol is stored
               as an ASCIIZ string at offset 2 in the transfer buffer.  */
            char *p = (char *)malloc (2);
            if (p != 0)
              dosmemget (__tb + 2, 2, p);
            return p;
          }
       }

</pre>
If the size of the transfer buffer isn't enough, you will have to allocate your own buffer in conventional memory with a call to the <code>__dpmi_allocate_dos_memory</code> library function.  It
returns to you the segment of the allocated block (the offset is zero).  If you only need a small number of such buffers which can be allocated once, then you don't have to worry about freeing them:
they will be freed by DOS when your program calls <code>exit.</code> <p>

For bullet-proof code, you should test the size of the transfer buffer at runtime and act accordingly.  This is because its size can be changed by the <samp>STUBEDIT</samp> program without your
knowledge (however, it can never be less than 2KB, the size of the stub, because memory used by the stub is reused for the transfer buffer).  <p>

The function <code>segread</code> used by some real-mode compilers does not exist in DJGPP.  It is used in real-mode code to store the values of the <b><tt>CS</tt></b>, <b><tt>DS</tt></b>,
<b><tt>SS</tt></b>, and <b><tt>ES</tt></b> registers into a <code>struct SREGS</code> variable, when some service that needs one of these registers is called from code written for small and tiny
memory models.  DJGPP has the functions <code>_my_cs</code>, <code>_my_ds</code>, and <code>_my_ss</code> for that purpose (<b><tt>ES</tt></b> and <b><tt>DS</tt></b> always hold the same selector in
code produced by GCC from a C or C<tt>++</tt> source, so you don't need a fourth function).  However, these will not be useful if the original real-mode code used the segment registers to invoke
DOS/BIOS services.  For these cases, you will need to rewrite the code so that it copies the data to/from the transfer buffer and passes its address via <code>__dpmi_int</code>, as described above.

<P>
<P> | <A HREF="#Pointer segment"> Previous </A> | <A HREF="#Xfer"> Next </A> | <A HREF="#Low-level"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Zero SP">

18.3 How to call software interrupt functions </A></H3><P>
</CENTER>
<em><strong>Q</strong>: My program crashes/doesn't do what it should when I call <code>__dpmi_simulate_real_mode_interrupt.</code> </em> <p>
<hr> <strong>A</strong>: You should zero out some of the members of the <code>__dpmi_regs</code> structure before you call that function.  Random values in these members can cause your program to
behave erratically.  The members in point are <code>.x.ss</code>, <code>.x.sp</code>, and <code>.x.flags</code>.  When <code>.x.ss</code> and <code>.x.sp</code> are zeroed, the DPMI host will provide
a stack for the interrupt call.  This stack is locked and is 4KB-long for any handling done in protected mode (such as real-mode callbacks), and at least 512 bytes in size for interrupts reflected
into real mode.  This is usually enough, but sometimes you'll need to use your own, larger stack, e.g., if you expect interrupts to nest, or if your handler needs a lot of stack space(<i><b>Note:
</b>The DPMI spec indicates that you should <em>not</em> use the default stack if your procedure/interrupt handler uses more that 60 bytes, or 1/8 of the total stack space available by default.</i>).
In these cases you should point <code>.x.ss</code> and <code>.x.sp</code> to a larger buffer which is in conventional memory (possibly part of the transfer buffer).  <p>

If <b><tt>SS:SP</tt></b> isn't zero, it will be used as the address of the stack for the interrupt handler, so if it points to a random location, your program will most certainly crash.  A non-zero
<b><tt>FLAGS</tt></b> member can also make the processor do all kinds of weird things (e.g., imagine that the single-step or the debug bit is set!).  <p>

If you don't have any reason to set <b><tt>SS:SP</tt></b> to a user-defined stack, it's easier to call the <code>__dpmi_int</code> library function, which zeroes out the stack pointer and the
<b><tt>FLAGS</tt></b> fields for you (and also doesn't force you to type long function names!).

<P>
<P> | <A HREF="#Zero SP"> Previous </A> | <A HREF="#Move structs"> Next </A> | <A HREF="#Low-level"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Xfer">

18.4 How to move data between your program and conventional memory </A></H3><P>
</CENTER>
<em><strong>Q</strong>: How can I move data between my program and the transfer buffer? </em> <p>
<em><strong>Q</strong>: How do I access my peripheral card which is memory-mapped to an address between 640K and 1M? </em> <p>
<em><strong>Q</strong>: How can I read or change a value of one of the variables in the BIOS data area? </em> <p>
<em><strong>Q</strong>: How can I peek at an address whose far pointer I get from an INT 21h call? </em> <p>
<hr> <strong>A</strong>: Usually, memory-mapped devices or absolute addresses below 1MB mark are outside your program's address space, so you cannot access them directly.  "Direct access", when you
just dereference a pointer, means in DJGPP that you use your program's <b><tt>DS</tt></b> selector, and all the addresses are offsets relative to the base of that selector.  So first, you will need a
special selector that will allow you to access your device or absolute address.  There are several methods you can get such a selector:

<ul>
<li> Use the selector that DJGPP creates for itself to access conventional memory.  DJGPP makes this selector available to you via the <code>_dos_ds</code> macro (defined on the <samp>go32.h</samp>
header file).  This selector has base address of 0 and a limit of 1MB+64KB, so you can use it to access any address in the conventional memory, including the UMBs, but the relatively large limit
allows a buggy program to overwrite portions of DOS memory(<i><b>Note: </b>DJGPP v2.01 makes the limit of <code>_dos_ds</code> be 4GB, which effectively disables memory protection when you use that
selector.  However, since no memory outside the first 1MB is properly mapped into your program's address space without additional DPMI calls, and the DPMI host is then free to put memory-mapped
devices, such as Weitek I/O space or the linear frame buffer of an SVGA, on any address it sees fit, that huge limit is an unjustified security hole.  DJGPP v2.02 will really be limited by
1MB+64KB.</i>).  The advantage of <code>_dos_ds</code> is obviously that you don't have to create it, and that it is good for accessing every region in the first MByte range.  <p>

<li> Create your own selector that spans only the region of memory that you want to access, and use that selector instead of <code>_dos_ds</code>.  For example, here's a code snippet to set up a
selector which provides access to 32KB of text-mode video memory at <code>0xB800:0000</code>, courtesy of <a href="mailto:bill@tanihwa.tssc.co.nz">Bill Currie</a>(<i><b>Note: </b>If you want to
decipher the 8-byte structure that is passed to <code>__dpmi_set_descriptor</code> in this example, read the documentation of the <code>__dpmi_get_descriptor</code> library function in the library
reference.  This structure is the descriptor maintained by the processor for each protected-mode segment, such as those loaded into the <b><tt>CS</tt></b> and <b><tt>DS</tt></b> registers.</i>):

<pre>

       int TxtVRAMSetupSelector (void)
       {
          static char selectorData[8] = {
            0xff, 0x7f, 0x00, 0x80,
            0x0b, 0xf3, 0x40, 0x00
          };
          int screenSelector = __dpmi_allocate_ldt_descriptors (1);
          if (__dpmi_set_descriptor (screenSelector, selectorData) < 0)
            abort ();
          return screenSelector;
       }

</pre>
The advantages of this method are that (a) you can set up the selector limit such that it only covers the memory region that you need, thus protection of the rest of memory is retained; and (b) you
may set the base address to point to the beginning of the specific memory region you need to access, so that you don't have to add the base address for every access, making the access faster.  <p>

<li> Use the DPMI service which creates a selector to access a specific real-mode segment address.  The DJGPP library has a function <code>__dpmi_segment_to_descriptor</code> which is a wrapper
around that DPMI service.  It is easier to use than the <code>__dpmi_set_descriptor</code> function above, since you don't have to mess with the 8-byte descriptor buffer, but it always defines a 64KB
limit by default.  Here is an example of code which gets a selector to access 64KB of video RAM beginning at <code>0xA000:0000</code>:

<pre>

       short video = __dpmi_segment_to_descriptor(0xa000);

</pre>
Note that descriptors created by this function should never be modified or freed.  For this reason, you should use this function sparingly.  For instance, if your program needs to examine various
real mode addresses using the same selector, you should allocate a descriptor and change the base using the <code>__dpmi_set_segment_base_address</code> library function instead of using
<code>__dpmi_segment_to_descriptor</code> to allocate separate descriptor for each address.  <p>
</ul>
Once you have a selector, you can use one of three methods to access your absolute addresses using that selector:

<ul>
<li> If you want to access a byte, a 16-bit word, or a 32-bit double word, use the "far pointer" functions declared on the <code><sys/farptr.h></code> header file.  You should convert any real-mode
far pointer segment:offset pair into a <dfn>linear address</dfn> (i.e., segment*16 + offset), and use <code>_dos_ds</code> or any other selector which allows access to conventional memory, like this:

<pre>

      unsigned char value = _farpeekb(_dos_ds, segment * 16 + offset);

</pre>
For access to memory-mapped devices for which you have allocated a dedicated descriptor, use the selector of that descriptor instead of <code>_dos_ds</code> in the above example, and use the offset
into the on-board device memory as the offset.  For example, the following snippet writes a value of 3 to the 10th dword of the device:

<pre>

      long lword = 3;
      _farpokel (selector, 9, lword);

</pre>
Use <code>_farpeekw</code> to peek at 16-bit shorts and <code>_farpeekl</code> to peek at 32-bit longs.  If you need to access several (non-contiguous) values in a loop, use the corresponding
<code>_farnspeekX</code> functions which allow you to set the selector only once, as opposed to passing it with every call (but be sure the loop doesn't call any function that itself sets the
selector; see the library reference for more details).  <p>

There is a corresponding set of <code>_farpokeX</code> and <code>_farnspokeX</code> functions to poke (change the values of) such memory locations.  <p>

These functions have an advantage of emitting inline assembly code when you compile with optimizations, so they are very fast.  See the library reference Info file for further details about these
functions.  <p>

<li> If you need to access more than 4 contiguous bytes, use <code>dosmemget</code> and <code>dosmemput</code> library functions.  They also require you to convert the segment:offset pair into a
linear address, but they don't need the conventional memory selector, as they can only be used to access the conventional memory (they use <code>_dos_ds</code> internally).  <p>

Note that some memory-mapped peripheral devices might require 16-bit word accesses to work properly, so if <code>dosmemXXX</code> yields garbled results, try <code>dosmemXXXw</code> or set up a loop
which calls "farptr" functions.  <p>

<li> For moving buffers to selectors other than <code>_dos_ds</code> (e.g., created by one of the methods explained above), use the <code>movedata</code> library function.  It requires that you pass
a selector and an offset for both the memory-mapped address and for the buffer in your program's address space.  Use the <code>_my_ds()</code> function (note that it's a <strong>function</strong>,
not a variable!) to get the selector of any variable in your program, and use the address of the variable (cast to an <code>int</code>) as its "offset" or linear address.  <code>movedata</code> is
fast because it moves by 32-bit longs, but be careful with its use when moving data to and from peripheral cards: some of them only support 8- or 16-bit wide data path, so moving data 4 bytes at a
time won't gain you much, and might even get you in trouble with some buggy BIOSes.  The functions <code>movedatab</code> and <code>movedataw</code> are provided for moving by bytes and by 16-bit
words, respectively.  <p>

For example, here is a code snippet that combines one of the methods for allocating a descriptor for video RAM access with a call to <code>movedata</code> to move a buffer to the graphics screen:

<pre>

       short video = __dpmi_segment_to_descriptor(0xa000);
       movedata(_my_ds(), buffer, video, 0, 320*200);

</pre>
<li> For the fastest access to memory outside your usual address space, you might consider using the "nearptr" functions declared on the <samp>sys/nearptr.h</samp> header file; see the library
reference for more details.  Also see <A HREF="#Fat DS">description of how to get the fastest direct access to peripheral devices</A>, below.
</ul>
<P>
<P> | <A HREF="#Xfer"> Previous </A> | <A HREF="#Fat DS"> Next </A> | <A HREF="#Low-level"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Move structs">

18.5 How to move structs returned by real-mode services? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: My program uses the contents of a structure returned by a VBE function, but some of the struct members are garbled! </em> <p>
<hr> <strong>A</strong>: Most probably, this happens because of incorrect declaration of the structure in your program.  Many people copy a declaration from some real-mode program, and that is
exactly what gets them into trouble.  <p>

Here are some gotchas in this context:

<ul>
<li> The structure should be declared with <code>__attribute__((packed))</code>, to prevent GCC from inserting gaps between some members to make them properly aligned for faster access (see
<A HREF="#Struct size">how gcc aligns structs</A>).  C programs can declare the entire struct with the packed attribute, but C<tt>++</tt> programs will need to declare each member with it, see
<A HREF="#Struct size">__attribute__((packed))</A>.  <p>

<li> If the real-mode struct has members which are pointers, you need to replace each pointer with a pair of an offset and a segment (in that order, due to Intel's little-endian byte order).  This is
because real-mode far pointers cannot be used as protected-mode pointers: you cannot dereference them to get access to the object they point to.  Declaring them as a segment:offset pair will force
you into correct usage, see below.  <p>

<li> To use pointers which are members of the structure, you will have to employ some of the methods described in <A HREF="#Xfer">section about using the transfer buffer</A>.  For example, to copy
data whose real-mode address is returned in a struct, use <code>dosmemget</code> or one of the <code>_farpeekX</code> family of functions in conjunction with the <code>_dos_ds</code> selector, and
don't forget to compute the linear address as <code>segment * 16 + offset</code>.  <p>

<li> If the pointer is to a function, you will need to use the library function <code>__dpmi_simulate_real_mode_procedure_retf</code> to call it (don't forget to zero out the <code>.x.ss</code> and
<code>.x.sp</code> members of the <code>__dpmi_regs</code> structure!).  <p>

<li> Many real-mode compilers use 16-bit <code>int</code>s, whereas in DJGPP, an <code>int</code> is 32-bit wide.  You need to change the declaration of all struct members from <code>int</code> to
<code>short</code>, and from <code>unsigned</code> to <code>unsigned short</code>.
</ul>
For example, the following real-mode structure declaration:

<pre>

      struct ncb {
        unsigned ncb_command;
        int ncb_status;
        char far *ncb_buffer;  /* a far pointer to a buffer */
        char ncb_name[32];
        int far (*ncb_dispatch)();  /* a pointer to a far function */
      };

</pre>
should be converted to this in a DJGPP program:

<pre>

      struct ncb {
        unsigned short ncb_command __attribute__((packed));
        short ncb_status __attribute__((packed));
        unsigned short ncb_buf_offset __attribute__((packed));
        unsigned short ncb_buf_segment __attribute__((packed));
        char ncb_name[32] __attribute__((packed));
        unsigned short ncb_dispatch_offset __attribute__((packed));
        unsigned short ncb_dispatch_segment __attribute__((packed));
      };

</pre>
<P>
<P> | <A HREF="#Move structs"> Previous </A> | <A HREF="#Above 1MB"> Next </A> | <A HREF="#Low-level"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Fat DS">

18.6 Fast access to absolute addresses </A></H3><P>
</CENTER>
<em><strong>Q</strong>: The "farptr" functions are too slow for my application which <strong>MUST</strong> have direct access to a memory-mapped device under DPMI.  How can I have this in DJGPP?  My
entire optimized graphics library is at stake if I can't! <tt>:-(</tt> </em> <p>
<hr> <strong>A</strong>:  The following so-called <b>Fat DS</b>, or "nearptr" method was suggested by <a href="mailto:junaid@barney.eng.monash.edu.au">Junaid A. Walker</a> (he also posted a program
which uses this technique to access the video RAM; you can look it up by searching the mailing list archives).  But first, a word of warning: the method I'm about to describe effectively disables
memory protection, and so might do all kinds of damage if used by a program with a wild pointer.  It is depressingly easy, e.g., to overwrite parts of DOS code or data with "Fat DS" on.  Or, as
<a href="mailto:turnbull@shako.sk.tsukuba.ac.jp">Stephen Turnbull</a> has put it when he read the description of this trick:

<blockquote>
     <strong>Surgeon General's WARNING</strong>:  The description below uses the "Fat DS hack", a steroid derivative which gives your program great strength, a thick neck, baldness, and is known to
     be closely linked with the Alzheimer's disease.

</blockquote>
<p>

In addition to the above warning, experience shows that many programs which use the safer "farptr" functions do not sacrifice performance.  So, with the exception of a small number of programs,
"nearptr" is really a convenience trick: it allows you to treat memory-mapped devices with usual C pointers, rather than with function calls.  Therefore, I would generally advise against using
"nearptr" unless your program absolutely needs the last percent of speed.  <p>

Having said that, here is the trick: you change the limit of the segment descriptor stored in <b><tt>DS</tt></b> to <code>0xffffffff</code> (i.e., -1), using library function
<code>__djgpp_nearptr_enable</code>.  After that, you have access to all the memory which is currently mapped in.  This works due to 32-bit wrap-around in the linear address space to access memory
at, say, linear address 0xa0000 (which belongs to the VGA), or any other address on your memory-mapped device, by adding the value of the global variable <code>__djgpp_conventional_base</code> to the
target address.  <code>__djgpp_conventional_base</code> is the negated base address of the <b><tt>DS</tt></b> selector that you program is using to access its data.  By adding the value of
<code>__djgpp_conventional_base</code>, you effectively <em>subtract</em> the <b><tt>DS</tt></b> base address, which makes the result zero-based, exactly what you need to access absolute addresses.
<p>

You should know up front that this trick won't work with every DPMI host.  Linux's DOSEmu and Windows/NT won't allow you to set such a huge limit on the memory segment, because these operating
systems take memory protection seriously; in these cases <code>__djgpp_nearptr_enable</code> will return zero--a sign of a failure.  CWSDPMI, QDPMI, Windows 3.X and Windows 9X all allow this
technique (OS/2 Warp seems to allow it too, at least as of version 8.200), but some events break this scheme even for those DPMI hosts which will allow it.  A call to <code>malloc</code> or any other
library function which calls <code>sbrk</code> might sometimes change the base address of the <b><tt>DS</tt></b> selector and break this method unless the base address is recomputed after
<code>sbrk</code> call.  (The "nearptr" functions support this recomputation by providing you with the <code>__djgpp_conventional_base</code> variable, but it is <em>your</em> responsibility to
recompute the pointers using it.)  The same change can happen when you call <code>system</code>, and as a result of some other events external to the executing code thread, like multitasking or
debugger execution.  <p>

You should also know that the <code>__djgpp_nearptr_enable</code> function in DJGPP v2.0 didn't verify that the limit was properly set.  So if the DPMI server would fail the call
<strong>silently</strong>, the function won't detect it and will not return a failure indication.  DJGPP v2.01 corrects this omission by always verifying that the DPMI host has honored the request,
and returns a failure indication if it hasn't.  <p>

If you are aware of these limitations, and don't need your code to run under all DPMI hosts, it might be the fix to your problems.  <p>

Confused about how exactly should you go about using this technique in your program?  Look at the docs of the "nearptr" functions, see
<A HREF="http://www.delorie.com/djgpp/doc/libc-2.01/libc_122.html#SEC122">the "__djgpp_nearptr_enable" section of the "libc.a reference"</A>.  <p>

Another possibility is to use the DPMI function <code>0x508</code> that can map any range of physical memory addresses into a block that you allocate.  Note that this is a DPMI 1.0 functionality
which is <strong>not</strong> supported by most DPMI 0.9 hosts (CWSDPMI does support it).  There is a helper function <code>__djgpp_map_physical_memory</code> in the DJGPP C library that you can use
to call these services.

<P>
<P> | <A HREF="#Fat DS"> Previous </A> | <A HREF="#RMCB"> Next </A> | <A HREF="#Low-level"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Above 1MB">

18.7 Accessing absolute address above 1MB </A></H3><P>
</CENTER>
<em><strong>Q</strong>: How can I access memory-mapped peripheral devices (or any other absolute address) above 1 MByte mark? </em> <p>
<hr> <strong>A</strong>:  You should use DPMI functions to allocate an LDT descriptor, and map it to an absolute physical address.  This maps the physical address of the memory on the device to a
linear address, and returns that linear address to you.

Here are the DPMI calls that you will have to use:

<ul>
<li> map selector to physical address (Int 31h/AX=0800h);
<li> allocate an LDT descriptor (Int 31h/AX=0);
<li> set segment base address (Int 31h/AX=7);
<li> set segment limit (Int 31h/AX=8).
</ul>
All of these DPMI calls have <code>__dpmi__XXX</code> wrappers in the DJGPP library.  Here's a somewhat schematic example:

<pre>


      #include &lt;dpmi.h&gt;
      .
      .
      __dpmi_meminfo mi;
      int selector;
      .
      .
      /* Map the physical device address to linear memory.  */
      mi.address = physical_address;
      mi.size    = physical_address_size;
      __dpmi_physical_address_mapping (&mi);
      /* Now mi.address holds the linear address.  */
      .
      .
      /* Allocate an LDT descriptor and set it up to span the entire
         device on-board memory.  */
      selector = __dpmi_allocate_ldt_descriptor (1);
      __dpmi_set_segment_base_address (selector, mi.address);
      __dpmi_set_segment_limit (selector, mi.size - 1);

</pre>
Note that the segment limit should be one less than the size.  Also, segments over 1MB in length must be a multiple of 4KB, otherwise the DPMI server might fail the call, or silently change the limit.

You can then use the functions from the <samp>sys/farptr.h</samp> header file to access that device.  See <A HREF="#Xfer">accessing memory-mapped devices</A>, for more details about accessing
memory-mapped devices given their linear address.

<P>
<P> | <A HREF="#Above 1MB"> Previous </A> | <A HREF="#Hardware interrupts"> Next </A> | <A HREF="#Low-level"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="RMCB">

18.8 How to make DOS/BIOS call your function </A></H3><P>
</CENTER>
<em><strong>Q</strong>: How can I make any real-mode service call my function?  E.g., the mouse driver has a provision (function 0Ch) to call a user-defined handler when certain events occur, which
expects a far pointer to my function in the <b><tt>ES:DX</tt></b> register pair. </em> <p>
<hr> <strong>A</strong>:  Those services expect a real-mode function, so you should wrap your protected-mode function with a real-mode stub.  To this end, call either the
<code>_go32_dpmi_allocate_real_mode_callback_retf</code> or the <code>_go32_dpmi_allocate_real_mode_callback_iret</code> library function, as required by the real-mode service you want to hook, and
pass the `segment' and `offset' members it returns to the service you want (in the above example, Int 33h function 0Ch) by calling <code>__dpmi_int.</code> Here's a code fragment that shows how to do
this(<i><b>Note: </b>If you are using this example in your program, don't forget to disable the handler at program's exit by calling the same function 0Ch of Int 33h with a zero mask in the CX
register, and then deallocate the callback by calling the <code>_go32_dpmi_free_real_mode_callback</code> library function.  Also, remember that all code and data touched by the handler must be
locked, otherwise it will crash under some DPMI servers, such as CWSDPMI.</i>):

<pre>


       #include &lt;dpmi.h&gt;
       #include &lt;go32.h&gt;
     
       static __dpmi_regs        callback_regs;
       static _go32_dpmi_seginfo callback_info;
     
       int install_mouse_handler (unsigned mask,
                                  void (*func)(__dpmi_regs *))
       {
         __dpmi_regs r;
     
         callback_info.pm_offset = (long)func;
         if (_go32_dpmi_allocate_real_mode_callback_retf(&amp;callback_info,
                                                         &amp;callback_regs))
           return -1;  /* failure */
     
         r.x.ax = 0xc;
         r.x.cx = mask;
         r.x.es = callback_info.rm_segment;
         r.x.dx = callback_info.rm_offset;
         __dpmi_int (0x33, &amp;r);
         return (r.x.flags & 1) ? -1 : 0;
       }

</pre>
The handler (<code>func</code> in the above example) will be called with a pointer to a <code>__dpmi_regs</code> structure which is filled by values found in the CPU registers when the mouse driver
calls the handler.  See the docs in the library reference Info file for further details about allocating wrapper functions.

<P>
<P> | <A HREF="#RMCB"> Previous </A> | <A HREF="#_go32 vs __dpmi"> Next </A> | <A HREF="#Low-level"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Hardware interrupts">

18.9 How to hook hardware interrupts </A></H3><P>
</CENTER>
<em><strong>Q</strong>: How do I register my DJGPP function as a hardware interrupt handler? </em> <p>
<hr> <strong>A</strong>:  The optimal setup depends on the interrupt frequency and on the amount of processing it requires.  Therefore, only some basic considerations and techniques are listed below.
What combination of these is best for your application is up to you to decide.  <p>

First, some background.  Hardware interrupts can occur when the processor is either in real mode (like when your program calls some DOS service) or in protected mode.  When your program runs under a
DPMI host, hardware interrupts are caught by the DPMI host and passed to protected mode first; only if unhandled, they are then reflected to real mode.  Therefore, in DPMI mode you can get away with
installing only a protected-mode handler.  However, if the interrupts happen at a high frequency (say, more than 10 KHz), then the overhead of the interrupt reflection from real to protected mode
might be too painful, and you should consider installing a real-mode interrupt handler in addition to the protected-mode one.  Such a real-mode handler will be called <em>before</em> the interrupt
gets to the DPMI host, and handle the interrupt entirely in real mode, so it must be written in assembly and located in conventional memory (below the 1MB mark).  If you need to hook an interrupt
with both PM and RM handlers, you must hook the PM interrupt first, then the RM one (because hooking the PM interrupt modifies the RM one).  Also, you should know that some DPMI hosts don't allow you
to hook the RM interrupt (CWSDPMI does), and some call both handlers, no matter in what mode the interrupt arrived (CWSDPMI will only call one of them); the only way to be sure is to try.  <p>

To install a protected-mode interrupt handler, you do this: <p>

<ul>
<li> In general, your handler should be written in assembly to be bullet-proof.  You should lock(<i><b>Note: </b>Locking a region of memory means that this region should be always present in RAM.
Usually, the virtual-memory mechanism is allowed to page regions out of RAM when it needs to load another region that is not loaded.  This happens if the program uses more memory than what is
physically available to it.  When a program needs to access an address that isn't currently in RAM, the operating system will look for some memory region that wasn't accessed for quite some time, and
replace it with the block that needs to be accessed now.  Locking a region prevents that region to be paged out, for as long as the program runs.</i>) all the memory (code, data and stack) that could
be touched by your handler during interrupt processing (this is virtually impossible if the handler is written in C), explicitly issue the `STI' instruction before `IRET', and perform all the other
chores described in the DPMI spec (see <A HREF="#DPMI Spec">DOS Protected Mode Interface Specification</A>).  To install an assembly handler, you should do this: <p>

<ul>
<li> Call <code>__dpmi_get_protected_mode_interrupt_vector</code> and save the structure it returns (to restore the previous handler address before your program exits).

<li> Lock all the memory your handler touches and the code of the handler itself and any function it calls with a series of calls to <code>__dpmi_lock_linear_region</code>.  Failure to lock memory
accessed during the interrupt handling will cause your program to crash.  Alternatively, you could set the <code>_CRT0_FLAG_LOCK_MEMORY</code> bit in the <code>_crt0_startup_flags</code> variable, or
disable virtual memory by using CWSDPR0.

<li> Finally, call <code>__dpmi_set_protected_mode_interrupt_vector</code> and pass it a pointer to a <code>__dpmi_paddr</code> structure filled with the value returned by <code>_my_cs()</code> in
the <code>selector</code> field and the address of your function in the <code>offset32</code> field.
</ul>
<p>

<li> If your handler function is written in C, you should generally call the <code>_go32_dpmi_XXX</code> functions instead of the bare-bones API wrappers whose names start with <code>__dpmi_.</code>
Specifically: <p>

<ul>
<li> Call <code>_go32_dpmi_get_protected_mode_interrupt_vector.</code>  This function puts the selector and offset of the specified interrupt vector into the <code>pm_selector</code> and
<code>pm_offset</code> fields of the structure pointed to by its second argument.  This data should be saved and later passed to <code>_go32_dpmi_set_protected_mode_interrupt_vector</code> to restore
the vector on exit.

<li> Call <code>_go32_dpmi_allocate_iret_wrapper,</code> passing it the address of your function in the <code>pm_offset</code> field and the value returned by <code>_my_cs()</code> in the
<code>pm_selector</code> field.  The <code>pm_offset</code> field will get replaced with the address of the wrapper function which is a small assembler function that handles everything an interrupt
handler should do on entry and before exit (and what the code GCC generates for an ordinary C function doesn't include); the effect is similar to using the <code>interrupt</code> or
<code>_interrupt</code> keyword in some DOS-based compilers.

<li> If you want your handler to chain to the previous handler, call <code>_go32_dpmi_chain_protected_mode_interrupt_vector.</code>  This will set up a wrapper function which, when called, will call
your handler, then jump to the previous handler after your handler returns.  Put the address of your handler into the <code>pm_offset</code> field and the value of <code>_my_cs</code> into the
<code>pm_selector</code> field of the <code>_go32_dpmi_seginfo</code> structure and pass a pointer to it to this function.

<li> You then call <code>_go32_dpmi_set_protected_mode_interrupt_vector</code> with the address of the <code>_go32_dpmi_seginfo</code> structure you got from either
<code>_go32_dpmi_allocate_iret_wrapper</code> or <code>_go32_dpmi_chain_protected_mode_interrupt_vector.</code>
</ul>
<p>

The problem with writing handlers in C as above is that the wrappers' code and data aren't locked, and in practice you can't lock all of memory the handler itself uses, either.  Thus, this approach is
generally unsuitable for production-quality software and should be used only when the program is known not to page (i.e., only the physical memory is used).  You might consider disabling virtual
memory to make sure your program doesn't page.  To accomplish this, either set the <code>_CRT0_FLAG_LOCK_MEMORY</code> bit in the <code>_crt0_startup_flags</code> variable, or use CWSDPR0 or PMODE/DJ
as your DPMI host.  In fact, using one of these methods is the recommended way of debugging the first versions of a program that hooks hardware interrupts; only after you are sure that your basic
machinery works should you move to testing it in a setup when paging might happen.  <p>

Note that <code>_CRT0_FLAG_LOCK_MEMORY</code> is only recommended for small programs that run on a machine where enough physical memory is always available, because the startup code currently doesn't
test if memory is indeed locked, and if there's not enough physical memory installed to page in all of the memory your program needs, you can end up with unlocked or partially unlocked memory, which
will crash your program.  If you want to make sure all memory is locked, use a DPMI server which disables paging.
</ul>
<p>

To install a real-mode interrupt handler, you do this: <p>

<ul>
<li> Call <code>__dpmi_get_real_mode_interrupt_vector</code> and save the structure it returns (to restore the previous handler address before your program exits).

<li> Allocate some conventional memory with <code>__dpmi_allocate_dos_memory</code> and put the code of your handler there with the <code>dosmemput</code> function.  (You could also call one of the
functions which allocate a real-mode call-back, but these will cause a mode switch on every interrupt, which you want to avoid; otherwise there is no point in installing a real-mode handler, right?)

<li> Put the address which <code>__dpmi_allocate_dos_memory</code> returned into a <code>__dpmi_raddr</code> structure (the lower 4 bits into <code>offset16</code> field, the rest into
<code>segment</code> field), then call <code>__dpmi_set_real_mode_interrupt_vector.</code>
</ul>
Note that Windows 9X is reported to call both the RM and PM handlers if both are installed, at least for some interrupts (CWSDPMI only invokes one of them).  So, if you want to play safe, you will
need some kind of a semaphore variable that the two handlers could use so that only one of them actually handles the interrupt in any given case.  <p>

The DPMI spec says that 3 <em>software</em> interrupts are special, in that they also get reflected to a protected-mode handler.  These interrupts are: 1Ch (the timer tick interrupt), 23h (Keyboard
Break interrupt), and 24h (Critical Error interrupt).  This means that, to catch these interrupts, you need to install a protected-mode handler only.  Unlike hardware interrupts, it doesn't make
sense to install dual RM and PM handlers for these software interrupts.  In particular, Windows will call both RM and PM handlers if you install both, so you effectively wind up handling the same
interrupt twice.  <p>

For examples of installing and using hardware interrupt handlers, see the sources of the Allegro library, the sample code written by <a href="mailto:bill_currie@MAIL.TAIT.CO.NZ">Bill Currie</a>, the
Sound Blaster interrupt-driven functions, the <samp>mkkbd</samp> package, and the <samp>libhw</samp> library, described under <A HREF="#Samples">sample DJGPP packages</A>.
<a href="mailto:alaric@abwillms.demon.co.uk">Alaric B. Williams</a> has written a <a href="http://www.abwillms.demon.co.uk/prog/djints.txt">tutorial on interrupt handling</a>.  <p>

The file <samp>src/libc/crt0/crt0.S</samp> in the DJGPP library sources, <samp>djlsrNNN.zip</samp>, is one example of the subtleties involved with installing a real-mode interrupt handler.

<P>
<P> | <A HREF="#Hardware interrupts"> Previous </A> | <A HREF="#HW Int pitfalls"> Next </A> | <A HREF="#Low-level"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="_go32 vs __dpmi">

18.10 Should I use _go32_XXX or __dpmi_YYY functions? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: In v1.x I was used to the <code>_go32_...</code> functions, but now comes v2 which also has <code>__dpmi_...</code> functions.  Are there any differences between these two
varieties? </em> <p>
<em><strong>Q</strong>: Do I need to convert my old v1.x code to use the new <code>__dpmi_...</code> functions? </em> <p>
<hr> <strong>A</strong>: These two groups of functions have different functionality, so don't just substitute the new ones for the older ones, because it usually won't work!  The new
<code>__dpmi_...</code> functions are just bare-bones wrappers of the DPMI API calls (see <A HREF="#DPMI Spec">DPMI Specification</A>), generally unsuitable for use with handlers written in C,
whereas the old <code>_go32_...</code> functions are intelligent helper routines which only make sense if your interrupt handlers are C functions.  They save all the registers on the stack (to be
restored before return to caller), and set up <b><tt>DS</tt></b>, <b><tt>SS</tt></b>, and <b><tt>ES</tt></b> registers as GCC assumes in the code it produces for a C program.  If these assumptions
are wrong, the C functions called by an interrupt handler will crash miserably.  <p>

The problem with the <code>_go32_...</code> functions is that they don't lock all the code and data they (and your handlers) use, so they can crash on memory-tight machines and thus aren't suitable
for production-quality code.  But they are certainly useful in the initial stages of writing and debugging code that hooks hardware interrupts, and for migrating existing v1.x code to v2.  Some of
the old names were just <code>#define</code>d to the new names where the functionality is identical.  <p>

The bottom line is that it shouldn't be necessary to convert your code for it to work at least as well as it did in v1.x; but if you want it to be more stable, you should rewrite your handlers in
assembly and use the new <code>__dpmi_...</code> functions (see <A HREF="#Hardware interrupts">How to install a hardware interrupt handler</A>).

<P>
<P> | <A HREF="#_go32 vs __dpmi"> Previous </A> | <A HREF="#Ports"> Next </A> | <A HREF="#Low-level"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="HW Int pitfalls">

18.11 Hardware interrupt hooking has its subtleties </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I did all the above, but my program occasionally still hangs... </em> <p>
<em><strong>Q</strong>: From time to time my program crashes with a message "Page Fault in RMCB".  What's that? </em> <p>
<hr> <strong>A</strong>:  Hooking interrupts in DJGPP (and in protected mode in general) has a few subtle aspects.  In general, hardware interrupt handling in DJGPP v2.x is rock solid <strong>if you
play by the rules</strong>.  Unfortunately, the rules are a bit tricky.  <p>

One cause of your problems might be that your interrupt handler or some memory location it uses get paged out because of the virtual memory mechanism, or because your program spawned a child program.
In that case, the interrupt might cause a call to a non-existent service routine, with the obvious results.  You should lock all the memory pages that your handler accesses by calling the
<code>__dpmi_lock_linear_region</code> library function.  This also means in practice that you should write your handler in assembly, as described in <A HREF="#Hardware interrupts">how to set an
interrupt handler</A>, above.  You can disable virtual memory, or put <code>_CRT0_FLAG_LOCK_MEMORY</code> into <code>_crt0_startup_flags</code> to make sure nothing is paged out (but then your
program might not have enough memory to run, unless you run on memory-abundant systems).  <p>

When CWSDPMI detects that your handler accesses memory that is not locked, it aborts your program with a message saying "Page Fault in RMCB".  This can happen even if your program installs a callback
for some real-mode service, like the mouse callback, as well as if you install a hardware interrupt handler; in both of these cases you need to lock all the memory touched by your handler or by
functions it calls.  CWSDPMI aborts your program if your program attempts to page while an interrupt handler or a real-mode callback are active, because paging uses DOS file I/O.  Since DOS is
non-reentrant, if the hardware interrupt handler was called in a middle of another DOS call, paging could badly damage your hard disk(<i><b>Note: </b>Actually, it is possible to avoid reentrancy
problems in interrupt-driven programs: programs known as TSRs (<dfn>Terminate and Stay Resident</dfn>) have been doing that for years.  But doing so requires hooking and monitoring many DOS and BIOS
interrupts, to know when it is safe to page.  If CWSDPMI would use these techniques, it would take much more DOS memory to load and run.  It would also need to be updated with every new DOS release,
since some of the internal DOS structures it would need to track change their address and/or layout with new versions of DOS.</i>).  By refusing to page in these cases, CWSDPMI ensures the stability
of your system and integrity of your files.  You pay for that stability by having to lock all code and data touched by the handler.  <p>

Another problem might be that the hardware peripheral you use generates a lot of interrupts.  Due to specifics of hardware interrupts handling in protected mode, there is a substantial overhead
involved with reflection of interrupts between real and protected modes.  For instance, on a 486DX/33 this reflection might consume up to 3000 clocks; on a 386SX/16, even a 1KHz clock might eat up
1/2 of available cycles.  One user reported that a 120 MHz Pentium will be able to service up to 45-50K interrupts per second before exhausting its CPU resources, and a 486DX/50 is capable of about
half that number.  If your hardware fires too many interrupts, your CPU might not be able to keep up.  A good rule of thumb is to consider 10KHz as the breaking point, if your program needs to do
something non-trivial besides servicing interrupts.  If you are beyond that interrupt rate, consider reducing the interrupt frequency, or move some of the processing done inside the interrupt handler
to some other place.  Use a ring-0 DPMI server such as CWSDPR0 or PMODE/DJ (of these two, the latter is the faster one) which don't swap interrupt stacks--this will reduce the overhead of the
interrupt reflection to some degree.  If your handler is written in C, write it in assembly and make sure it doesn't chain.  And most important--make sure your program keeps the processor completely
in protected mode while handling high-frequency interrupts: avoid unnecessary library calls, disk I/O, BIOS calls, and anything else that could generate a mode switch.  For example, using BIOS
services to wait a certain period of time while interrupts come in is clearly a bad idea.  Preventing the program from paging (by installing enough physical RAM and using memory efficiently) will
also help keeping the CPU in protected mode, since paging is done by calling DOS in real mode.  By keeping your processor in protected mode as much as you can, you avoid the expensive mode switches
when the interrupts are reflected to your PM handler.  <p>

If all that still doesn't help, install a real-mode handler.  <p>

Some losing memory managers, notably EMM386, were reported to induce a high interrupt handling overhead.  In one case, a user reported an increase in the maximum interrupt rate his program could
support from 2 KHz to 6 KHz after uninstalling EMM386.  <p>

Still another possibility is that you use a non-default <code>sbrk</code> algorithm in your program.  Check if the header file <samp>crt0.h</samp> is included anywhere in the program, and if so, if
the <code>_CRT0_FLAG_UNIX_SBRK</code> bit in the <code>_crt0_startup_flags</code> variable is set by the program.  If it is, then a hardware interrupt which happens at the wrong time could crash your
machine, especially if you run under Windows 3.X.  <p>

You should also keep in mind that the DPMI server can decide to handle some of the interrupts itself and not pass them to your program, although this is rare.  For example, Windows 9X won't pass the
<kbd>Ctrl-Alt-Del</kbd> combination to your keyboard interrupt handler, but will rather act on it itself; QDPMI sometimes processes <kbd>Ctrl-C</kbd> keypresses so that your program never sees them,
etc.  Sometimes, but not always, you can change some configuration option to make some keys get to your handler (e.g., the Alt-TAB setting on the Windows3.X <samp>.PIF</samp> file).  <p>

If the above still doesn't explain your problem, then post your code on the <a href="mailto:djgpp@delorie.com">DJGPP mailing list</a> or the <a href="news:comp.os.msdos.djgpp">comp.os.msdos.djgpp</a>
news group, tell there how it fails and somebody will usually have a solution or a work-around for you.

<P>
<P> | <A HREF="#HW Int pitfalls"> Previous </A> | <A HREF="#Inline Asm"> Next </A> | <A HREF="#Low-level"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Ports">

18.12 How to read and write ports </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I need to read from and write to PC ports, and I'm accustomed to using the <code>inp</code> and <code>outp</code> functions.  But I hear they aren't available in DJGPP? </em>
<p>
<hr> <strong>A</strong>:  They are in v2.x.  Just  <code>#include &lt;pc.h&gt;</code>  and you get their prototypes.  The functions themselves are in the default library.  Note that there are also
size-specific versions for byte- word- and dword-long access (e.g., <code>inportl</code> for reading a 32-bit dword), as well as functions to read/write sequences of bytes and words, like
<code>inportsb</code> and <code>outportsw</code>; these are DJGPP-specific.

<P>
<P> | <A HREF="#Ports"> Previous </A> | <A HREF="#DMA"> Next </A> | <A HREF="#Low-level"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Inline Asm">

18.13 Inline Assembly code with GCC </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I am used to writing inline assembly with Borland C, but can't figure out the way to do it with GCC... </em> <p>
<em><strong>Q</strong>: How can I reference C variables from my inline assembly code? </em> <p>
<hr> <strong>A</strong>:  GCC has extensive inline assembly facilities.  They allow you to specify everything other compilers let you (like the registers where GCC will put specific results), but in
a way that doesn't interfere with the compiler's optimizations of the C code that includes inline assembly.  Because of this flexibility, the syntax of the inline assembly code is very different from
the other DOS-based compilers.  The GCC on-line docs describe these facilities in detail; to read the relevant sections, type this from the DOS prompt:

<pre>

       info gcc "C Extensions" "Extended Asm"

</pre>
(Note the quotes: they are important.)  You will, of course, need that the stand-alone Info reader be installed on your system for the above command to work.  If it is not already installed, get the
file <samp>v2gnu/txi312b.zip</samp> from the DJGPP distribution and install it.  <p>

If you read this FAQ via WWW, you can also <a href="http://www.delorie.com/gnu/docs/gcc-2.7.2.2/gcc_86.html#SEC89">read about the GCC inline assembly extensions with your Web browser</a>.  <p>

<a href="mailto:brennan@rt66.com">Brennan Underwood</a> has written <a href="http://brennan.home.ml.org/djgpp/djgpp-asm.html">a tutorial on using inline assembly</a>, which is another valuable
resource on this issue.

<P>
<P> | <A HREF="#Inline Asm"> Previous </A> | <A HREF="#Low-level"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="DMA">

18.14 Using DMA with DJGPP </A></H3><P>
</CENTER>
<em><strong>Q</strong>: How do I use DMA with DJGPP programs? </em> <p>
<em><strong>Q</strong>: I want to use DMA, but I don't know how to get the physical address of the buffer I allocate for that purpose. </em> <p>
<hr> <strong>A</strong>:  The main problem in using DMA with DJGPP is how to get the physical address of a buffer, which is required to program the DMA controller.  In protected-mode environment,
memory addresses that your program manipulates are actually offsets from the base address of the data segment.  You can obtain the base address of the data segment by calling the
<code>__dpmi_get_segment_base_address</code> library function and add it to the address of your buffer, but the resulting address is a logical address, translated into a physical address by the
memory-mapping unit which is part of the CPU.  <p>

You have two alternatives to get the physical address of your buffer:

<ul>
<li> Allocate the buffer in conventional memory, below the 1MB mark.  This memory is mapped 1:1 by all DPMI servers, so the linear address is equal to the physical one.  You can allocate a buffer in
conventional memory using the library function <code>__dpmi_allocate_dos_memory</code>.  <p>

This method has a disadvantage of using conventional memory which is at a premium, and is therefore generally ill-suited for large DMA buffers.  <p>

<li> Use <dfn>VDS</dfn>, the Virtual DMA Services API.  This is implemented by a bunch of functions of interrupt 4Bh; see Ralf Brown's Interrupt List for the details.  This method has a drawback that
it needs a real memory manager, such as <code>EMM386</code> or <code>QEMM</code>, to run, since only memory managers and Windows support the VDS API.  In other words, if you use VDS, your program
won't work on a system where CWSDPMI(<i><b>Note: </b>CWSDPMI has an experimental VDS support in its sources, but the distributed binary was compiled without it.  Contact
<a href="mailto:sandmann@clio.rice.edu">Charles Sandmann</a> if you want to try to enable VDS support in CWSDPMI.</i>) is used as the DPMI server, allocating memory by raw XMS calls or via HIMEM.
</ul>
<P>
<P> | <A HREF="#Low-level"> Previous </A> | <A HREF="#Help"> Next </A> | <A HREF="#Top"> Up </A> | <P>
<P>
<P>
<CENTER>
<H2>

<A NAME="Legalese">

19. Legal Aspects </A></H2><P>
</CENTER>
  This chapter answers some questions about various legal aspects of writing programs with DJGPP.

<p>
<ul>
<li><A HREF="#Application distribution"> 19.1 Application distribution--Legal aspects of programs written with DJGPP.  </A>
<li><A HREF="#DJGPP redistribution"> 19.2 DJGPP redistribution--Legal aspects of redistributing DJGPP itself.  </A>
</ul>
<P>
<P> | <A HREF="#Legalese"> Previous </A> | <A HREF="#DJGPP redistribution"> Next </A> | <A HREF="#Legalese"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Application distribution">

19.1 Legal (un)restrictions on DJGPP applications </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Can you explain in plain English the legal restrictions of distributing programs compiled with DJGPP? </em> <p>
<em><strong>Q</strong>: Can I write commercial programs with DJGPP? </em> <p>
<hr> <strong>A</strong>: In most cases, you don't have to worry about any legal restrictions when you compile your programs with DJGPP.  You only need to include information on how to get DJGPP in
the documentation of your products.  <p>

Using the GNU C/C<tt>++</tt> compiler doesn't make your programs subject to <em>any</em> restrictions.  The C library which comes with DJGPP is <em>free</em> (unless you change the library sources,
see below), which means you are free to use the stock <samp>libc.a</samp> in any way you like (but please try to comply with <A HREF="#DJGPP redistribution">basic rules of courtesy</A>.)  <p>

Some functions from the DJGPP C library are under the BSD copyright (their sources were taken from the Berkeley Software Distribution of Unix).  One of these functions is <code>malloc</code>, which
is by default linked into every DJGPP program (the startup code calls it), the others are time-related functions such as <code>time</code>, <code>ctime</code>, and <code>asctime</code>, and also
<code>qsort</code> and <code>random</code>.  The BSD copyright requires that your binary distribution displays the following acknowledgment somewhere in the docs, and in all ads that mention the
features and/or use of your software:

<pre>

      This product includes software developed by the University of
      California, Berkeley and its contributors.

</pre>
So, if you write C programs and link them with the stock version of the DJGPP library, you only need to tell your recipients how to get the latest versions of DJGPP, mention the BSD blurb in your
docs, and have absolutely nothing else to worry about.  <p>

The basic C<tt>++</tt> <samp>iostream</samp> class library (<samp>libiostr.a</samp>) and the Standard Template Library (<samp>libstdcxx.a</samp>) which come with DJGPP allow you to use them
binary-wise (i.e., without changing library sources) in your C<tt>++</tt> programs <em>without restrictions</em>, unless you compile your programs with a compiler other than Gcc (which won't happen
if you work with DJGPP).  So C<tt>++</tt> programs linked with <samp>-lstdcxx</samp> and/or <samp>-liostream</samp> switches are also free from any restrictions.  <p>

Only the library of additional GNU C<tt>++</tt> classes (<samp>libgpp.a</samp>) requires that you provide your customers with source or object code of the application, so they could relink the
application with future or modified versions of the C<tt>++</tt> library.  However, this library is deprecated and chances are most C<tt>++</tt> programs won't use it.  (If you intend to distribute
commercial programs linked with the <samp>libgpp.a</samp> library, you are strongly advised to read the GNU Library General Public License which comes with the library, for rigorous definition of its
terms.)  <p>

Two GNU packages, <samp>Flex</samp> and <samp>Bison</samp>, are also special in that using them to produce your programs doesn't place your programs under GPL or LGPL.  In other words, lexers
produced by <samp>Flex</samp> and parsers produced by <samp>Bison</samp> do <strong>not</strong> imply GPL/LGPL.  <p>

If you <strong>do</strong> use in your program any of the FSF sources that fall under GPL/LGPL (like some of the GCC's sources, or the GNU <samp>getopt</samp> or <samp>regex</samp> packages which
come with many GNU programs), then you must comply with the terms of GNU licenses when distributing your programs; in this case your entire application becomes GPL.  If that is unacceptable to you,
consider using the versions of <samp>regex</samp> and <samp>getopt</samp> from the DJGPP C library (which are not as powerful, but are free from any restrictions).  <p>

You may ship any of the utilities developed specifically for DJGPP (e.g., the floating-point emulator <samp>emu387.dxe</samp> or the DPMI host <samp>cwsdpmi.exe</samp>) and the C library, <em>as
distributed by DJ Delorie</em>, with your program with no other requirement besides telling your customers how to get DJGPP for themselves.  <p>

If you do change the sources of either the C library or the utilities distributed with the <samp>djdev</samp> package, they, and the programs developed with them, immediately fall under the GPL, the
GNU License.  In practice this means that you cannot distribute any binaries made with such a patched version of <samp>libc.a</samp> without offering the recipient full sources, including your own
sources.  However, if you find bugs in the library or the utilities and submit your patches to DJ Delorie, DJ allows to freely use and redistribute patched utilities and binaries made with the
patched version of <samp>libc.a</samp> (even if no official DJGPP version was released with your patches yet).  <p>

For the precise legal terms of DJGPP distribution, see the file <a href="http://www.delorie.com/djgpp/dl/ofc/simtel/v2/copying.dj"><samp>copying.dj</samp> via the Web</a> (latest versions of the
<samp>djdevNNN.zip</samp> package might also include it).  <p>

Note that the above says nothing about the legal aspects of contributed packages, like <samp>GRX</samp> and others; you will need to read their docs to find out.

<P>
<P> | <A HREF="#Application distribution"> Previous </A> | <A HREF="#Legalese"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="DJGPP redistribution">

19.2 Legal restrictions of DJGPP utilities and libraries </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Can I redistribute djgpp, and if so, how? </em> <p>
<em><strong>Q</strong>: I run a business that sells shareware for distribution costs.  Can I include djgpp on my CD-ROM? </em> <p>
<em><strong>Q</strong>: I want to include djgpp in a product that happens to need a compiler provided with it.  Can I do this? </em> <p>
<em><strong>Q</strong>: Is DJGPP public domain software? </em> <p>
<em><strong>Q</strong>: Is DJGPP shareware? </em> <p>
<hr> <strong>A</strong>:  DJGPP is <strong>not</strong> public domain, neither is it shareware (you <em>don't</em> have to pay a license fee to use DJGPP).  Parts of DJGPP (the compiler and some of
the development tools) <em>are</em> GNU software, so you must comply with GNU GPL if you distribute those parts (usually, you won't need to distribute them, because they are freely available to
everyone).  A small part of the C library is taken from the Berkeley BSD sources, and is therefore in public domain.  <p>

Other parts of DJGPP, which include most of the C library, the free DPMI host CWSDPMI, and some of the utilities, are copyrighted, but in a way that allows you to use them freely and without
restrictions.  The copyright that covers these parts of DJGPP is GPL, the GNU License, but with a special exception: if you distribute the utilities unmodified, or build programs with the unmodified
library, the GPL does not apply.  <p>

<em>Compliance with GPL is therefore all you are legally required to consider</em> when you redistribute DJGPP itself (as opposed to your programs compiled with DJGPP).  However, based on many years
of experience of DJGPP distribution, DJ Delorie requests vendors which distribute DJGPP to follow some additional rules.  These rules are generally meant to provide a better service to the DJGPP user
community:

<ul>
<li> You must redistribute DJGPP as a whole, with all its parts, including the sources to utilities and libraries that are part of DJGPP, unless other arrangements are first made with
<a href="mailto:dj@delorie.com">DJ Delorie</a>.

<li> Please make a good faith effort to stay up to date with the latest DJGPP versions, so people don't get old versions with bugs that are long ago solved, or, worse still, versions that are no
longer supported.

<li> You <strong>must</strong> call it <em>DJGPP</em> and nothing else.

<li> You may <strong>not</strong> take credit for it, and you must <strong>not</strong> remove any notices in DJGPP that give credit to those who worked on it.

<li> You must tell the recipient how to get the latest version off the Internet, or at least how to find out what the latest version is.  DJ Delorie gets a lot of questions from people who got old
versions from vendors and don't realize that they're way out of date.
</ul>
<p>

In addition, it would be a courtesy to inform DJ that you are including DJGPP in your product, in case this information is obsolete.  A token sample of your distribution would be nice also.  <p>

Note that the above are <strong>not</strong> legal restrictions (the latter are described in the file <samp>copying.dj</samp> mentioned in the previous section), they are <em>recommended
guidelines</em> for redistributing DJGPP.  These guidelines are based on many years of experience and are generally meant to make it easier for your clients to use DJGPP and get support from its
developers.  Vendors who do not follow these guidelines could risk public humiliation, verbal abuse, and boycott by the DJGPP community, but not legal action.  <p>

Note also that if you make source-level changes to DJGPP library or utilities, the changed software falls under the GNU License, GPL, unless these changes are made to fix bugs, and provided that you
also submit all such bug-fixes to DJ Delorie for inclusion in a future DJGPP release.

<P>
<P> | <A HREF="#Legalese"> Previous </A> | <A HREF="#New versions"> Next </A> | <A HREF="#Top"> Up </A> | <P>
<P>
<P>
<CENTER>
<H2>

<A NAME="Help">

20. Getting Help </A></H2><P>
</CENTER>
  This chapter tells you how to get answers to questions you didn't find in this FAQ, by asking them on DJGPP-related forums.

<p>
<ul>
<li><A HREF="#DJGPP is not GNU"> 20.1 DJGPP is not GNU--Do <strong>not</strong> post to GNU News groups.  </A>
<li><A HREF="#Mailing list"> 20.2 Mailing list--How to post to DJGPP mailing list.  </A>
<li><A HREF="#Subscribing"> 20.3 Subscribing--You can see every posted article.  </A>
<li><A HREF="#Unsubscribing"> 20.4 Unsubscribing--When it's too much to read...  </A>
</ul>
<P>
<P> | <A HREF="#Help"> Previous </A> | <A HREF="#Mailing list"> Next </A> | <A HREF="#Help"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="DJGPP is not GNU">

20.1 Don't post DJGPP-specific problems to GNU News groups </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I post my problem to the <a href="news:gnu.gcc.help">gnu.gcc.help</a> news group, but don't get any answers... </em> <p>
<hr> <strong>A</strong>:  Is your problem likely to be special to the DJGPP port or to the DOS environment?  If so, don't post to GNU Usenet groups, but to the
<a href="news:comp.os.msdos.djgpp">comp.os.msdos.djgpp</a> news group or to the <a href="mailto:djgpp@delorie.com">DJGPP mailing list</a>.  People who read GNU News groups usually neither know nor
care about DOS-specific problems.  Post there only if the problem seems to be generic to one of the FSF utilities.  For most problems, this can be deduced only after either tracing a problem in the
source code or testing it on some non-DOS platform.  As a general rule, always post to the DJGPP forums first.

<P>
<P> | <A HREF="#DJGPP is not GNU"> Previous </A> | <A HREF="#Subscribing"> Next </A> | <A HREF="#Help"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Mailing list">

20.2 How to post to the mailing list </A></H3><P>
</CENTER>
<em><strong>Q</strong>: How do I post to the DJGPP mailing list? </em> <p>
<hr> <strong>A</strong>:  Send mail to the <a href="mailto:djgpp@delorie.com">list address</a> as if it were a person.  Please use the mailing list only if you cannot access the DJGPP news group,
because reflecting the mail to and from the mailing lists incurs additional load on the DJGPP server.  The DJGPP news group, <a href="news:comp.os.msdos.djgpp">news:comp.os.msdos.djgpp</a>, is
two-way gated to the mailing list.  This means messages posted to either the mailing list or the news group will appear on both (once, let's hope <b>;-)</b>; you can read either one and post to
either one, and everybody eventually sees everything.  So please don't post to both the news group and the mailing list.  <p>

The gateway works on DJ's server, and has a very strict anti-spam filter which prevents spam from getting into the news group; it also has an additional keyword-based ant-crap filter that doesn't
pass spam to the mailing list.  The entire traffic ends up in the mail archives on the DJ's Web server within 24 hours, and is available for
<a href="http://www.delorie.com/djgpp/mail-archives/">searching</a>.  <p>

If you have a Usenet feed, now is the time to consider unsubscribing from the mailing list and switch to reading the news group instead, so that the load on the list server will get lower.

<P>
<P> | <A HREF="#Mailing list"> Previous </A> | <A HREF="#Unsubscribing"> Next </A> | <A HREF="#Help"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Subscribing">

20.3 How to become a subscriber to the mailing list </A></H3><P>
</CENTER>
<em><strong>Q</strong>: How do I subscribe to the DJGPP mailing list? </em> <p>
<hr> <strong>A</strong>:  Send mail to the <a href="mailto:listserv@delorie.com">list server</a> (NOT to djgpp@!!), leave the subject line empty and in the body write:

<blockquote>
      subscribe <your e-mail address> djgpp

</blockquote>
If you only want to receive announcements of new versions and ported software, but don't want to see any other DJGPP mail traffic, subscribe to the <samp>djgpp-announce</samp> by sending message to
the <a href="mailto:listserv@delorie.com">list server</a> which says so:

<blockquote>
      subscribe djgpp-announce

</blockquote>
(Note: no email address when subscribing to the <samp>djgpp-announce</samp> list!)

The announcements which go to <samp>djgpp-announce</samp> get reflected to <samp>djgpp</samp>, so you don't need to subscribe to both these lists.  <p>

The DJGPP mailing list is available in the daily and weekly digest forms.  To subscribe to one of these, send this one-line message to the above list server:

<blockquote>
      subscribe <your e-mail address> djgpp-digest-daily

</blockquote>
or

<blockquote>
      subscribe <your e-mail address> djgpp-digest-weekly

</blockquote>
Some mailers reject messages with too large size, so you might have trouble with the weekly digest.  If you subscribe to it and don't get the digest, try the daily one instead, or switch to another
mail software.  <p>

You can also subscribe to DJGPP-related mailing lists <a href="http://www.delorie.com/mailing-lists/subscribe.html">through DJ Delorie's WWW server</a>.  <p>

Note that you don't have to subscribe to the djgpp mailing list if you don't want to get all the traffic in your mailbox (typically, about 30 messages per day).  You can ask questions on the list
even if you are not a subscriber, because people usually answer both to your e-mail address and to the list (well, actually, the mailer program does it automatically and most people don't bother to
change that).  If you want to be sure the mail gets to you directly, say in your message that you don't subscribe to the list, and ask people to answer directly.  Be sure to provide a valid return
address (remove any anti-spam, if you use one).

<P>
<P> | <A HREF="#Subscribing"> Previous </A> | <A HREF="#Help"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Unsubscribing">

20.4 How to unsubscribe from the mailing list </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Whew!  There's too much traffic on the djgpp mailing list (at least the SysAdmin glaring over my shoulder thinks so... ;-).  How do I unsubscribe myself? </em> <p>
<em><strong>Q</strong>: I've been trying for days to unsubscribe from the djgpp mailing list.  What am I doing wrong? </em> <p>
<hr> <strong>A</strong>:  You should send your unsubscribe messages to the <a href="mailto:listserv@delorie.com">list server</a> <em>(not djgpp@delorie.com!)</em>, with the contents being just this:

<blockquote>
      unsubscribe <your e-mail address> djgpp

</blockquote>
When you unsubscribe, that stops <em>new</em> messages from being sent to you.  Messages that are already in the mail queues of various mail programs between the DJGPP list server and the machine
where you receive your mail--cannot be stopped.  Therefore, allow some time before you decide that your unsubscribe message didn't work.  In extreme cases, when one of the machines that are
forwarding mail to you is down, you can get the messages up to 5 days after you've unsubscribed.  <p>

If you think you have waited enough and the messages still keep coming, write to <a href="mailto:djgpp-request@delorie.com">listserv administrator</a> and ask him to help you.  <p>

You can also unsubscribe yourself from any DJGPP-related mailing list <a href="http://www.delorie.com/djgpp/mailing-lists/subscribe.html">through DJ Delorie's WWW server</a>.  <p>

Recently, DJ has added a mail archive browser to his Web site.  With this tool, you can list and read the messages by year, month and day, as well as search the last few days for something you might
have missed.  This service is available <a href="http://www.delorie.com/djgpp/mail-archives/browse.cgi">via World-Wide Web</a>.

<P>
<P> | <A HREF="#Help"> Previous </A> | <A HREF="#Miscellany"> Next </A> | <A HREF="#Top"> Up </A> | <P>
<P>
<P>
<CENTER>
<H2>

<A NAME="New versions">

21. Version 2 vs v1.x </A></H2><P>
</CENTER>
  This chapter is for those who want to know where are the latest updates for DJGPP software, and what's new and improved in them.  It also explains the differences between DJGPP v1.x and v2, for those
who are still using DJGPP v1.x and want to know more about v2 while they consider switching.

<p>
<ul>
<li><A HREF="#New and improved"> 21.1 New and improved--What's new in v2.0?  </A>
<li><A HREF="#Environment"> 21.2 Environment--How v2.0 environment is different from v1.  </A>
<li><A HREF="#Slow development"> 21.3 Slow development--When will the next DJGPP version be released?  </A>
<li><A HREF="#Patched libc"> 21.4 Patched libc--Where to find the best DJGPP C library.  </A>
</ul>
<P>
<P> | <A HREF="#New versions"> Previous </A> | <A HREF="#Environment"> Next </A> | <A HREF="#New versions"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="New and improved">

21.1 New features in DJGPP v2 </A></H3><P>
</CENTER>
<em><strong>Q</strong>: What exciting new features will I find in v2 as opposed to v1.x? </em> <p>
<hr> <strong>A</strong>:  DJGPP v2.x is a DPMI-only environment, and it includes a free DPMI host for those who don't have another DPMI provider installed.  In addition, v2 features the following
major improvements upon v1.1x:

<ul>
<li> much faster extender (the free DPMI host) and library functions;

<li> very low memory footprint of the DPMI host below 640KB;

<li> the DPMI server is loaded only once: no more problems with spawning child programs (e.g., almost unlimited recursive Make's);

<li> ANSI- and POSIX-compliant libraries and header files, which should make porting Unix programs a lot easier;

<li> support for signals;

<li> 387 emulation under DPMI;

<li> graphics which works in <em>any</em> setup, including under Windows;

<li> fixes of many bugs in hardware interrupts' and mixed-mode programming support;

<li> support of long filenames on Windows 9X;

<li> ability to build all of DJGPP without commercial products (like Turbo C required to compile go32 in v1.x);
</ul>
<p>

If you want to help in further v2 development, check out the list of features which have yet to be done and volunteer to implement some of them.

<P>
<P> | <A HREF="#New and improved"> Previous </A> | <A HREF="#Slow development"> Next </A> | <A HREF="#New versions"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Environment">

21.2 DJGPP environment in v2.x </A></H3><P>
</CENTER>
<em><strong>Q</strong>: There's been this talk about v2 and about <samp>go32</samp> going away in that version, but I'm confused on what the new setup will be.  Could you clarify the details of this
change? </em> <p>
<hr> <strong>A</strong>:  In v1.x of DJGPP, the <samp>go32</samp> extender was responsible for the following:

<ul>
<li> Loading and running the application in protected mode.

<li> Managing protected-mode and virtual memory.

<li> "Extending DOS" so that protected-mode programs could issue calls to real-mode DOS and BIOS services and still run.  (This is mostly done by switching to real mode and reissuing the interrupt,
but some services require special handling by the extender.)

<li> Handling of hardware interrupts which happen while the CPU is in protected mode.

<li> Loading 387 emulator (if required).

<li> Loading the graphics driver and working with VGA bank-switching to create an illusion of a linear video memory.

<li> Command-line and wild-card expansion in a Unix-like fashion.
</ul>
In v2.x, a minority of these functions are done by a DPMI host, which is a memory-resident software required to run protected-mode programs under MS-DOS.  There are a few commercial DPMI hosts (like
Quarterdeck's <samp>QDPMI</samp>, Qualitas <samp>386Max</samp>, MS-Windows 3.X and Windows 9X, OS/2, even Linux), but DJGPP v2 comes with a free DPMI host called <samp>CWSDPMI</samp> for those who
don't have one already.  Loading the application into protected-mode memory (a function done in v1.x by <samp>go32</samp>) is handled by a 2KB-long real-mode stub which runs at start-up, before the
application's <code>main</code> functions is called (the stub will also load <samp>CWSDPMI</samp> if no other DPMI host is detected).  All the other custom code required to process BIOS- and
DOS-related calls from protected-mode is now built into the library functions which your program calls, so there is no need for a special extender, because the application just issues DPMI calls
serviced by the DPMI host.  <p>

<samp>CWSDPMI</samp> can be loaded as a TSR, even loaded <samp>HIGH</samp> into the HMA/UMB, which will make applications load much faster.

<P>
<P> | <A HREF="#Environment"> Previous </A> | <A HREF="#Patched libc"> Next </A> | <A HREF="#New versions"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Slow development">

21.3 Why are new DJGPP versions released so slowly? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: It's more than a year since DJGPP vX.Y was released.  Why won't you guys upload a new version in all this time? </em> <p>
<em><strong>Q</strong>: I've been suffering from this bug for months on end!  You know there's a bug, 'cause I told you so ages ago.  So why in the world didn't you fix that in a new version?? </em>
<p>
<hr> <strong>A</strong>: DJGPP is developed by volunteers on their free time.  This sets both the schedule of new DJGPP releases and the DJGPP development agenda: they are determined by what those
volunteers think is important and doable, and by the amount of free time they can devote to DJGPP-related work.  Since the work of the development team is given away for free, you cannot demand that
they do something they've decided not to do just yet.  The only way to influence DJGPP development is to make your own contribution, by fixing a bug or adding a feature, and then submit your patches
to <a href="mailto:dj@delorie.com">DJ Delorie</a>.  <p>

You don't need to look for a large project to make your contribution.  The best way to start being involved with DJGPP development is to fix any small and minor problems you see, right when and where
you see them.  Even bugs and inaccuracies in the DJGPP documentation, like the <samp>libc.inf</samp> Info file, are a good thing to begin with.  DJ Delorie says that if everybody would correct every
small bug they see, we would run out of bugs very fast.  <p>

When you submit a bug report or code that implements a new feature that you'd like to add to DJGPP, be prepared to withstand some scrutiny and peer review from the other participants of the DJGPP
development team.  You might hear various comments, from critique of your code and design decisions to questions why your changes are at all needed, and even requests to submit the changes in certain
unified format (see <A HREF="#Changing">instructions for submitting changes</A>).  Please be ready for that review process and don't take it as a rebuttal.

<P>
<P> | <A HREF="#Slow development"> Previous </A> | <A HREF="#New versions"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Patched libc">

21.4 Where to find the best C library for DJGPP </A></H3><P>
</CENTER>
<em><strong>Q</strong>: There's been quite some time since the last DJGPP release.  Where can I get all the latest stuff where the bugs are fixed? </em> <p>
<em><strong>Q</strong>: I have heard rumors that there's a better C library for DJGPP available from the net.  Where is it? </em> <p>
<hr> <strong>A</strong>: New versions of most parts of DJGPP are released quite regularly.  For example, DJGPP ports of most GNU packages are generally released short time after a new version of
every package becomes available from the GNU FTP sites.  So for many DJGPP packages, a new release should usually be available real soon, just stick around a bit.  <p>

The single most important component of DJGPP tool-chain that might suffer from long release schedule is the <code>djdev</code> package.  This includes the C library, <samp>libc.a</samp>, which was
written specifically for DJGPP, and some DJGPP-specific development tools, like <code>redir</code> and <code>symify</code>.  However, the latter are usually stable and don't need too much fixing.  <p>

A full release of <code>djdev</code> is a lot of work, so DJ Delorie decided not to make interim releases (experience from v1.x development shows that such interim releases also generate confusion
and are hard to maintain).  <p>

In general, you are advised to constantly improve your C library by fixing any bugs in the library sources and replacing old modules with fixed ones.  All this takes is to edit the relevant source
file, compile it, and put it into the library.  For example, assuming you have made a source-level change in a file called foo.c, here's how you update your library:

<pre>

       gcc -c -O2 foo.c
       ar rvs c:/djgpp/lib/libc.a foo.o

</pre>
(This example assumes that DJGPP is installed in the <samp>C:\DJGPP</samp> directory; if not, you will need to change the pathname of <samp>libc.a</samp> accordingly.)  <p>

Patching the library like that requires that you download the DJGPP library sources, <samp>djlsrNNN.zip</samp> (where <samp>NNN</samp> is the version number).  That file includes sources to all the
DJGPP functions and utilities, and you can extract them as the need to edit them arises.  <p>

Bug reports regarding the library and patches to fix them are posted from time to time to the <a href="news:comp.os.msdos.djgpp">comp.os.msdos.djgpp</a> news group.  In addition, the DJGPP
<a href="http://www.delorie.com/djgpp/bugs/">bug-tracking system</a>, stores many known bugs and the patches required to solve them.  You can use these resources to find solutions to known bugs.
Patches are applied using the <code>patch</code> utility which is available <a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2gnu/pat25b.zip">from the DJGPP sites</a>.  <p>

For those who don't want to mess with patching library sources, but still want their library to be as bug-free as possible, a few generous DJGPP users maintain a site where you can find those patches
already applied for you and ready to be downloaded.  The patched libc at that site includes bugfixes and improvements that were tested by experienced DJGPP users, so they are relatively safe.  You
can either download one or more individual patches and then put them into your library, or download the entire <samp>libc.a</samp> with all the patches.  Every patch has a short description, in case
you'd like to decide whether it's for you.  <p>

The patched library was created by <a href="mailto:Demmer@LStM.Ruhr-Uni-Bochum.De">Tom Demmer</a>. <a href="mailto:nate@cartsys.com">Nate Eldredge</a> is the current maintainer, and the space
available for FTP is courtesy of <a href="mailto:sinan.unur@cornell.edu">A. Sinan Unur</a>, on his server.  The patched library is available
<a href="http://www.cartsys.com/eldredge/djgpp-patches.html">via WWW</a> and <a href="ftp://www-leedr.arme.cornell.edu/pub/djgpp-patches/">by ftp</a>.  Be sure to read the file
<samp>ftp.message.txt</samp> when using the FTP server above.  The file <samp>README</samp> explains how the patched library can be downloaded and used.  <p>

The above site also includes two additional versions of the C library: one compiled with the <samp>-g</samp> switch and the other compiled with the <samp>-pg</samp> switch to GCC.  These are handy if
you need to debug library functions and profile them, respectively.

<P>
<P> | <A HREF="#New versions"> Previous </A> | <A HREF="#About"> Next </A> | <A HREF="#Top"> Up </A> | <P>
<P>
<P>
<CENTER>
<H2>

<A NAME="Miscellany">

22. Miscellany </A></H2><P>
</CENTER>
  This chapter is a hodgepodge of questions which don't belong to any of the other chapters.

<p>
<ul>
<li><A HREF="#g++.exe"> 22.1 g++.exe--Unzip complains about it on DOS.  </A>
<li><A HREF="#Changing"> 22.2 Changing--How to change any DJGPP package?  </A>
<li><A HREF="#Samples"> 22.3 Samples--Where to find sample/ported code for DJGPP?  </A>
<li><A HREF="#Symlinks"> 22.4 Symlinks--Yes, DJGPP allows them (well, almost...)  </A>
<li><A HREF="#DPMI Spec"> 22.5 DPMI Spec--Where to look for DPMI specifications.  </A>
<li><A HREF="#WWW"> 22.6 WWW--The DJGPP Web site.  </A>
<li><A HREF="#Upload"> 22.7 Upload--Where to upload your DJGPP packages.  </A>
<li><A HREF="#Cross-DJGPP"> 22.8 Cross-DJGPP--You can use DJGPP for cross-development.  </A>
<li><A HREF="#0xfe+0x20"> 22.9 0xfe+0x20--Is this a bug?  </A>
<li><A HREF="#Struct size"> 22.10 Struct size--What is the size of a struct under DJGPP?  </A>
<li><A HREF="#Struct packing"> 22.11 Struct packing--C<tt>++</tt> compiler doesn't pack structs.  </A>
<li><A HREF="#Int 24h"> 22.12 Int 24h--Catching those "Abort, Retry" messages.  </A>
<li><A HREF="#go32-v2"> 22.13 go32-v2--What is go32-v2 for?  </A>
<li><A HREF="#DXE"> 22.14 DXE--What are those <samp>.dxe</samp> files?  </A>
<li><A HREF="#LFN"> 22.15 LFN--LFN support had some subtle bugs in v2.0.  </A>
<li><A HREF="#Missing separator"> 22.16 Missing separator--What does Make mean by that?  </A>
<li><A HREF="#Modification time"> 22.17 Modification time--Make says file time is in the future...  </A>
<li><A HREF="#Numeric tails"> 22.18 Numeric tails--How to turn them off.  </A>
<li><A HREF="#Zoneinfo"> 22.19 Zoneinfo--What's in that <strong>zoneinfo/</strong> directory?  </A>
<li><A HREF="#dev directory"> 22.20 dev directory--Don't use it!  </A>
<li><A HREF="#ELF vs COFF"> 22.21 ELF vs COFF--Why doesn't DJGPP switch to ELF object format?  </A>
<li><A HREF="#Random numbers"> 22.22 Random numbers--How to get them, and how to seed them.  </A>
<li><A HREF="#Lexicon"> 22.23 Lexicon--What are all these buzzwords you are using?  </A>
<li><A HREF="#void main"> 22.24 void main--Is this okay in a C program?  </A>
<li><A HREF="#FAQ format"> 22.25 FAQ format--How to convert this FAQ to other formats.  </A>
</ul>
<P>
<P> | <A HREF="#Miscellany"> Previous </A> | <A HREF="#Changing"> Next </A> | <A HREF="#Miscellany"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="g++.exe">

22.1 Unzipping gppNNb.zip complains about g++.exe </A></H3><P>
</CENTER>
<em><strong>Q</strong>: When I unzip the C<tt>++</tt> compiler distribution in gppNNb.zip, the unzip program complains about something called <samp>g++.exe</samp>.  What should I do? </em> <p>
<hr> <strong>A</strong>: If you install DJGPP on anything but Windows 9X, just ignore that error message and use <samp>gpp.exe</samp> or <samp>gxx.exe</samp> to compile C<tt>++</tt> programs.
<samp>g++.exe</samp> is an invalid file name on DOS, but is allowed on Windows 9X.  It is included for compatibility with Unix, where the C<tt>++</tt> compiler is called <samp>g++</samp>.  All
<samp>g++.exe</samp> does is just to run <samp>gxx</samp> or <samp>gpp</samp>.  So you don't lose much by not having it.  <p>

If you <em>are</em> installing DJGPP on Windows 9X, find an unzip program which supports long file names and unzip the files again.  Make sure that the DJGPP long file names support (a.k.a. LFN) is
enabled, otherwise DJGPP programs such as Make won't be able to invoke <samp>g++</samp>.  To enable LFN support, set <samp>LFN=y</samp> in the environment.

<P>
<P> | <A HREF="#g++.exe"> Previous </A> | <A HREF="#Samples"> Next </A> | <A HREF="#Miscellany"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Changing">

22.2 How to change a DJGPP package? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I want to change cc1.  How do I do this? </em> <p>
<em><strong>Q</strong>: How do I fix a bug/add a feature to one of the DJGPP programs? </em> <p>
<em><strong>Q</strong>: How should I produce patches for DJGPP programs I want to submit, and to whom should I submit them? </em> <p>
<hr> <strong>A</strong>:  First, get the sources.  These are called <samp>*s.zip</samp> in the DJGPP distribution.  The C Library sources are in <samp>djlsr201.zip</samp>.  Some sources are too big,
and might be split into multiple zips, all of which must be unzipped to get a complete source distribution, like this:

<pre>

      em1934s1.zip
      em1934s2.zip
      em1934s3.zip

</pre>
<p>

All sources are shipped in ready-to-build form.  Any diffs that come with the source distribution, like the files called <samp>DIFFS</samp>, have already been applied, and any configuration scripts
and/or batch files have been run.  <p>

Next, try to build the program without changing it.  Look for a file called <samp>README.dos</samp> or <samp>README.djgpp</samp>: it should explain the build procedure and list any optional packages
you need to install for that.  <p>

If such a <samp>README</samp> file is unavailable, you will have to poke around and figure things out for yourself; here are some hints to help you out:

<ul>
<li> A file called <samp>Makefile</samp> or <samp>makefile</samp> probably means you could just type <kbd>make</kbd>.

<li> Some packages will have a <samp>CONFIGUR.BAT</samp> file, possibly in a subdirectory called <samp>djgpp/</samp> or <samp>pc/</samp>; if so, run it first.

<li> If there is a <samp>MAKE.BAT</samp> file, run it; if not, look for a file named <samp>MAKEFILE.DJ</samp> or <samp>MAKEFILE.DJG</samp>; sometimes these will be in a subdirectory called
<samp>dos/</samp>, or <samp>msdos/</samp>, or <samp>pc/</samp>.  If there is such a file, then type, e.g., <kbd>make -f makefile.djg</kbd>, if not, just say <kbd>make</kbd> and see what happens.
</ul>
The reason for an apparent lack of a standard here is that different packages were ported to DJGPP by different people, as best as they saw fit.  <p>

After you've successfully built the program, make your fixes and build the program the same way you did before.  <p>

Note that generally to build these programs, you must have the <a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2gnu/mak377b.zip">GNU Make program</a>, installed, and some makefiles require
that you install additional development utilities, like the <a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/sed302b.zip"><b><tt>SED</tt></b> editor</a>.  Sometimes the makefiles won't even run
under <samp>COMMAND.COM</samp> (they require a smarter shell).  In that case, either get a better shell, or convert the makefile to be runnable by <samp>COMMAND.COM</samp>, or do the required steps
manually.  If the Makefile is too complex for you and you can't figure out what are the necessary commands, invoke make with <samp>-n</samp> switch and see what it would have done.  <p>

If your machine lacks floating-point hardware (like a 386 without a 387, or a 486SX), then you should know that current versions of GNU Sed and GNU Make issue floating point instructions, so you will
have to make provisions for loading an emulator, see above, <A HREF="#Emulation">FP Emulation</A>.  The port of Make 3.75 and later can be built so that it doesn't issue FP instructions, but you will
have to get the sources and recompile Make first, as the stock version wasn't configured in that way.  <p>

If you think that you found a bug in one of the programs or libraries written for DJGPP (e.g. the C library, CWSDPMI, symify, etc.) be sure to check the
<a href="http://www.delorie.com/djgpp/bugs/">list of known bugs</a>.  If your bug is not there, you can later submit it to the bug-tracking system.  <p>

Before you submit a bug report, please make every effort to verify that your bug is not caused by incorrect usage, or by problems in your DJGPP installation.  Reports such as "All DJGPP programs
crash" or "I cannot compile any program" are clearly not bugs, because these things work for many hundreds of DJGPP users every day; so either your system setup is messed up or you invoke programs
incorrectly.  <p>

If you can investigate the cause of the bug and find a solution that makes it go away, submit a bug report with all the details.  If you cannot find the cause(s), I suggest posting your problem
description to the news group and asking people to verify that it is indeed a bug, before you submit a bug report.  The bug-tracking system includes a list of all known bugs, many of them with
solutions or work-arounds; please check them before creating a new bug report.  <p>

Patches to DJGPP programs and ports should be sent to the person who maintains the relevant package.  Patches for the C library, utilities and other software which comes with the
<samp>djdevNNN.zip</samp> distribution should be sent to <a href="mailto:dj@delorie.com">DJ Delorie</a>.  If you don't know who maintains a particular package or port, post the patches to the
<a href="news:comp.os.msdos.djgpp">comp.os.msdos.djgpp</a> news group, since the maintainer is most probably reading that group.  <p>

To generate a patch, run the <code>diff</code> program (from GNU Diffutils, <samp>v2gnu/dif271b.zip</samp>) on the old and the new version of a source file.  For example:

<pre>

      diff -c src/libc/dos/dos/int86.old src/libc/dos/dos/int86.c >int86.dif

</pre>
The file <samp>int86.dif</samp> created this way should be sent to the maintainer, with a short description of the problem it solves.  It is a good idea to run the patch file through
<samp>DTOU</samp> (a utility which comes with DJGPP and converts DOS-style CR-LF pairs into Unix-style newlines), since this makes the patch work on Unix as well, in case the maintainer of the
package in question does that on Unix.  <p>

Observing the following guidelines when creating the patch will make your patches easy to apply:

<ul>
<li> Always use the <samp>-c</samp> switch to <code>diff</code>, and <strong>never</strong> use <samp>-c</samp> with an argument that is less than 3 (for example, do <em>not</em> use
<samp>-c2</samp>).

<li> Invoke <code>diff</code> from the root of the DJGPP installation, i.e. from the directory where you keep the <samp>DJGPP.ENV</samp> file, and specify the files being compared with their
pathnames relative to that directory.  This allows to concatenate related patches to several files, and apply the combined patch in a single run of the <code>patch</code> utility.

<li> Always use <em>forward</em> slashes in pathnames.  Backslashes will work on DOS/Windows, but some packages are maintained on Unix machines, where <code>patch</code> doesn't understand
backslashes.  In particular, DJ Delorie maintains DJGPP on a Unix box.

<li> It is best to let the new version of the file have the exact pathname of the file, and rename the old to some other name like <samp>foo.old</samp> or <samp>foo.bak</samp>; see the example above.

<li> Do <strong>not</strong> put together (on the same patch file) several unrelated patches for different problems: the maintainer might decide to apply only some of them, and could become confused
which parts of the patch fix what problems.  Correct one problem at a time and then make a patch file for that problem alone; then correct another problem and generate a patch for that one; etc.

<li> When you change the sources, try to preserve the programming style, including indentation, of the original.  In particular, DJ Delorie requests that the sources included in the
<samp>djlsrNNN.zip</samp> distribution follow his distinct style (that style is quite obvious from the sources, but if you are unsure, ask DJ).

<li> You should <strong>never</strong> use any switches that let <code>diff</code> ignore whitespace, like <samp>-b</samp> or <samp>-w</samp>.  In most cases, patches generated with these switches
will fail to apply.
</ul>
In addition, it would be mighty nice if every change in functionality were accompanied by a suitable change in the relevant docs (e.g., for a patch to a library function, edit the corresponding
<samp>.txh</samp> file with its docs), although you are under no obligation to do that.

<P>
<P> | <A HREF="#Changing"> Previous </A> | <A HREF="#Symlinks"> Next </A> | <A HREF="#Miscellany"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Samples">

22.3 Where to find sample DJGPP code or a package ported to DJGPP? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Where can I find an example of XXXX / a package doing YYYY ? </em> <p>
<hr> <strong>A</strong>: <a href="mailto:salvador@inti.gov.br">Salvador Eduardo Tropea (SET)</a> maintains a
<a href="http://www.geocities.com/SiliconValley/Vista/6552/dlinks.html">DJGPP Web Ring page</a>.  <a href="mailto:dj@delorie.com">DJ Delorie</a> offers another very large collection of
<a href="http://www.delorie.com/djgpp/dl/elsewhere.html">DJGPP-related links</a>.  <p>

Here is a list of places you might look into for examples of frequently needed code fragments, or for packages people keep asking about:

<ul>
<li> Interrupt-driven support of peripheral devices and hooking hardware interrupts:

<ul>
<li> The Allegro library is an excellent place to look for code that install hardware interrupt handlers and handles several peripheral devices.
<li> <a href="mailto:alaric@abwillms.demon.co.uk">Alaric B. Williams</a> maintains a library of utility functions and example handlers, useful for writing
<a href="http://www.abwillms.demon.co.uk/prog/index.html">hardware interrupt handling code</a>.
<li> <a href="mailto:bill@tanihwa.tssc.co.nz">Bill Currie</a> wrote examples of <a href="ftp://ftp.delorie.com/pub/djgpp/contrib/sample-interrupt-handlers-v2.zip">interrupt handlers</a> which should
get you off the ground if you need to write your own handlers.
<li> <a href="mailto:martynas.kunigelis@vm.ktu.lt">Martynas Kunigelis</a> donated a tutorial and a working
<a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2tk/mkkbd3.zip">code that installs a handler for the hardware keyboard interrupt 09h</a> that can also serve as a good example of handling
interrupts.
<li> you can look at the latest version of <a href="ftp://x2ftp.oulu.fi/pub/msdos/programming/djgpp2/sb05_dj2.zip">Sound Blaster support library at Oulu</a> or
<a href="ftp://ftp.delorie.com/pub/djgpp/contrib/sb05_dj2.zip">on DJGPP server</a>; this is maintained by <a href="mailto:jhunter@kendaco.telebyte.net">Joel Hunter</a>.
<li> check out the package available from SimTel.NET that <a href="ftp://ftp.simtel.net/pub/simtelnet/msdos/c/pctime14.zip">hooks the timer interrupt</a>.
<li> if you need a serial communications package, check out the <a href="ftp://ftp.delorie.com/pub/djgpp/contrib/svasync.zip">SVAsync library</a>.
<li> another package for serial communications, called <b><tt>BCSERIO</tt></b>, was written by <a href="mailto:bill@tanihwa.tssc.co.nz">Bill Currie</a>.  <b><tt>BCSERIO</tt></b> is available
<a href="http://www.tssc.co.nz/~bcurrie/serio.zip">from Bill's home page</a>.
<li> if you need serial communications from programs that use the Allegro library, try DZComm, which is available from the <samp>v2tk/allegro</samp> directory on the usual DJGPP sites.
</ul>
<li> Network support libraries:

<ul>
<li> for TCP/IP, check out the WATTCP library, which is available <a href="ftp://dark.uwaterloo.ca/pub/wattcp/tcplib-dj200/tcplib-dj200.1.tar.gz">from its home</a>, or
<a href="ftp://lab1.psy.univie.ac.at/pub/djgpp/tcplib/">from a Europe mirror</a>, it provides the TCP/IP sockets interface.  (I am told that you can safely ignore the warnings you get when compiling
the package.)
<li> as part of the DOS Lynx port done by <a href="mailto:dj@delorie.com">DJ Delorie</a>, he ported the WATTCP library as well; that port is available
<a href="ftp://ftp.delorie.com/pub/dj/lynx26s.zip">from DJ's server</a>.
<li> programs which run on Windows 9X can use the Winsock services built into Windows to establish TCP/IP connections; a C<tt>++</tt> interface to Winsock 1 was
<a href="http://triangle.dyn.ml.org/wsock/">written by Dan Hedlund</a>.
<li> another Winsock library is <samp>libsocket</samp>, originally developed by <a href="mailto:indrek@warp.edu.ee">Indrek Mandre</a>, currently maintained by
<a href="mailto:rd5718@bristol.ac.uk">R. Dawe</a>.  The latest version (0.7.3, as of this writing) is available <a href="http://libsocket.home.ml.org/">from the libsocket home page</a>, and via FTP
<a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2tk/lsck073b.zip">from the DJGPP archives</a>.  This currently doesn't support the newer Winsock2 VxD which is part of Windows 98.
<li> yet another version of Winsock interface is available at <a href="http://www.rt66.com/~brennan/djgpp/">Brennan Underwood's site</a>.
<li> if you need to program an IPX interface, you can get started by downloading <a href="http://www.rt66.com/~brennan/djgpp/jonipx.zip">examples of IPX programming</a>, and also read the
<a href="http://www.ladder.org/ddr/ipx.html">IPX Web page</a>.
</ul>
<li> Dynamically loaded code:

<ul>
<li> Check out the DLM (Dynamic Link Modules) environment for DJGPP, written by <a href="mailto:orangy@inetlab.com">Ilya Ryzhenkov</a>, available from the
<a href="http://www.iis.nsk.su/orangy/dlm/">DLM home page</a>.
<li> A dynamic linker for DJGPP, called DLX, is available <a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2tk/dkx291.zip">from the DJGPP sites</a>.
</ul>
<li> X library:

<ul>
<li> the <a href="ftp://asterix.inescn.pt/pub/PC/X/">Xlibemu library</a> includes <samp>Xt</samp> and <samp>Xmu</samp> toolkits, a 3D version of the <samp>AW</samp> toolkit, a few demo applications
(e.g. <samp>xmine</samp>), and can be used to compile <samp>Tcl/Tk</samp> and GNU Emacs with X support.  Xlibemu is based on X11R5 and was originally developed by
<a href="mailto:acc@asterix.inescn.pt">Antonio Costa</a> for DJGPP v1.x.  It is also available <a href="ftp://ftp.dei.isep.ipp.pt/pub/pc/djgpp/etc/X/">on an alternative site</a> and
<a href="ftp://ftp.delorie.com/pub/djgpp/contrib/xlibemu/">on the DJGPP server</a>.
<li> there are also the <a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v1tk/qddvx102.zip">Xlib and Xt libraries for the Quarterdeck's DV/X environment</a> (you will also need qdlib102.zip and
qdtkt102.zip from the same site).  This is also for DJGPP v1.x.
</ul>
<li> Ports of various GNU utilities not included in DJGPP:

<ul>
<li> Many of these are now part of DJGPP, so first look on SimTel.NET mirrors <a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2gnu/">with rest of DJGPP</a>.

<li> <a href="mailto:elf@netcom.com">Marc Singer</a> maintains a DJGPP port of RCS, the <a href="ftp://ftp.netcom.com/pub/el/elf/rcsdos/">Revision Control System</a>.
</ul>
<li> GUI libraries:

<ul>
<li> <b><tt>SWORD</tt></b> (the System of Windows for the ORganization of the Desktop) is a Graphic User Interface library made with C<tt>++</tt> objects, written and maintained by
<a href="mailto:nicolas@JUPITER.saclay.cea.fr">Eric Nicolas</a>.  The latest version 2.50 is available from the <a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2tk/">v2tk directory</a> as
sw21_*.zip.  <b><tt>SWORD</tt></b> is a powerful system for dedicated programmers, specifically designed to allow a programmer to learn GUI programming.  However, I'm told that its documentation
might not be clear enough for beginners.
<li> JPTUI is an object-oriented textual user interface, written by <a href="mailto:jpdelprat@teaser.fr">Jean-Pierre Delprat</a>.  It is designed for C<tt>++</tt>, and supports several languages
besides US English.  You can get <a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2tk/jptui4jd.zip">JPTUI from SimTel.NET or any of its mirrors</a>.
<li> the BCGUI package, written by <a href="mailto:bill@tanihwa.tssc.co.nz">Bill Currie</a>; you can get it from Bill upon request.
<li> If you actually have the original Borland Turbo Vision, then you might want to get patches to compile Turbo Vision under DJGPP.  For more info on this port, visit the
<a href="http://www.zeta.org.au/~grove/tvhome.html">TVPlus site</a>.
<li> Another port of TVision was done by <a href="mailto:robert.hoehne@gmx.net">Robert Hoehne</a>.  Due to copyright problems, that port cannot be distributed (at Borland's request, Robert has
removed it from his Web page).  So you will have to get the Turbo Vision sources from the Borland's site, patch them using patches included in the RHIDE distribution, and rebuild it yourself.
<li> A Turbo Vision like library for plain C, called C-Desktop, by <a href="mailto:blp01@uow.edu.au">Brett Porter</a>, is available from DJGPP sites
<a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2tk/cdesk100.zip">on SimTel.NET mirrors</a>.
<li> Another GUI library is XView-PC GUI interface, maintained by <a href="mailto:acmq@coe.ufrj.br">Antonio Carlos M. de Queiroz</a>.  XView-PC is available
<a href="http://www.coe.ufrj.br/~acmq/xview_pc.html">via the Web</a> and also <a href="ftp://coe.ufrj.br/pub/acmq/xv_pc18a.zip">via the FTP transfer</a>.
</ul>
<li> Game programming:

<ul>
<li> The best library for DOS game programming is the <a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2tk/alleg30.zip">Allegro game programming library</a>, written and maintained by
<a href="mailto:Shawn@talula.demon.co.uk">Shawn Hargreaves</a>; also available <a href="http://www.talula.demon.co.uk/allegro/">from Allegro home page</a>.
<a href="http://www.canvaslink.com/allegro/xwinallegro/">Allegro is ported to X</a>.  A tutorial for game programming, called Allegro Vivace, was written by
<a href="mailto:george.foot@merton.oxford.ac.uk">George Foot</a>, and is available <a href="http://www.canvaslink.com/gfoot/vivace/">from George's home page</a>.
<li> Also try <a href="ftp://x2ftp.oulu.fi/pub/msdos/programming/djgpp2/jlib_NNN.zip">Jlib</a> written by <a href="mailto:jpg@wave.co.nz">J P Griffiths</a>.  This library is best suited to
multi-platform game programming, since it's portable to Linux, Watcom, and X11.   Visit the <a href="http://www.wave.co.nz/pages/jpg/jlib/">Jlib Web page</a>, for the latest developments.
<li> Another popular library for game development is MGL, the <dfn>MegaGraphics Library</dfn> by SciTech Software.  MGL provides transparent support for DirectX, OpenGL, Mesa, and several other
popular graphics standards (although some of these standards reportedly only work when used with RSXNTDJ).  The latest version 4.1 has full DJGPP support.  MGL is available
<a href="ftp://ftp.scitechsoft.com/devel/beta/dj20lib.zip">from SciTech's FTP site</a>.
<li> The Mesa library itself supports DJGPP and is available <a href="http://www.ssec.wisc.edu/~brianp/Mesa.html">from the Mesa home page</a>.
<li> Yet another package that supports DirectX 5 for DJGPP and RSXNTDJ is available <a href="http://bbs.para.co.kr/~bng/drdx/drdx.html">via the Web</a>.
<li> If you need to play audio CDs, try the <a href="http://brennan.home.ml.org/programming/bcd_103.zip">Brennan Underwood's CD playing library</a>.
</ul>
<li> VGA graphics:

<ul>
<li> <a href="mailto:bg914@FreeNet.Carleton.CA">Paul Fenwick</a> wrote an X-Mode package <a href="ftp://ftp.delorie.com/pub/djgpp/contrib/xlibdj24.zip">Xlib</a> or
<a href="ftp://x2ftp.oulu.fi/pub/msdos/programming/djgpp2/xlibdj24.zip">Xlib at Oulu</a>.
<li> <a href="mailto:mrb8@waikato.ac.nz">Matthew Bentley</a> has written a C<tt>++</tt> VGA graphics library for mode 13h (and is reportedly 4 times faster than Allegro in this mode) called EZVGA.
It is available as ezvga14.zip from the <samp>v2tk</samp> directory on DJGPP sites.
</ul>
<li> Multi-tasking libraries and OS kernels:

<ul>
<li> <a href="ftp://ftp.cs.fsu.edu/pub/PART/PTHREADS/pthreads.zip">Pthreads</a>, a Posix threads library, is a portable, standard package supported on many platforms.

<li> The LWP package is a lightweight preemptive multitasking library written by <a href="mailto:snarfy@goodnet.com">Josh Turpen</a> for DJGPP.  It has an extremely simple API and is very fast.  You
can get <a href="http://www.goodnet.com/~snarfy">LWP via the Web</a>.

<li> <b><tt>PDMLWP</tt></b> is a multithreading package for DJGPP.  It is available as <samp>pdmlwpNN.zip</samp> (<samp>NN</samp> is a version number) from the <samp>v2tk</samp> directory on the
DJGPP sites.

<li> <a href="mailto:billc@blackmagic.tait.co.nz">Bill Currie</a> has written a COFF boot loader using DJGPP; you can get this
<a href="http://www.abwillms.demon.co.uk/prog/kernel2.zip">COFF boot loader from Alaric Williams' Web site</a>.

<li> Palantir is a multitasking kernel for Allegro, written and maintained by <a href="mailto:zager@post.comstar.ru">Dim Zegebart</a>.  Palantir is available
<a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2tk/allegro/plntr041.zip">from DJGPP sites</a>.
</ul>
<li> Development toolkits and packages:

<ul>
<li> MSS is a package for detecting problems with dynamic memory allocation, such as using uninitialized memory, overwriting the limits of allocated blocks, memory leaks, repeated deallocations, etc.
It is available <a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2tk/mss11b.zip">from the DJGPP sites</a>, and supports both C and C<tt>++</tt> programs.  MSS was written and is maintained by
<a href="mailto:blizzar@hem1.passagen.se">Peter Palotas</a>.
<li> Cdecl is a program for translating hairy C and C<tt>++</tt> declarations and type casts into human-readable English.  A DJGPP port by Nate Eldredge is available
<a href="http://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2apps/cdecl25b.zip">via FTP</a>.
<li> <b><tt>LCLINT</tt></b> is a Lint clone.  Lint is a program which analyses C source files, identifies unsafe or potentially buggy code and prints error/warning messages about each such case.
<samp>gcc -Wall</samp> can identify many such cases as well, due to the superior diagnostics of GCC, but for those who still want Lint, you can find
<a href="http://larch-www.lcs.mit.edu:8001/larch/lclint.html">LCLint sources on the Web</a>.
<li> <b><tt>VIM</tt></b> is a programmer's editor, mostly popular in the Unix world.  It features syntax highlighting for more than 60 different file formats, context-sensitive help, and a macro
language for writing extensions.  The sources are available <a href="ftp://ftp.fu-berlin.de/misc/editors/vim/">via ftp</a>, and should compile with DJGPP.  Binaries are available for Windows 9X and
NT, as well as for DOS.
</ul>
</ul>
<P>
<P> | <A HREF="#Samples"> Previous </A> | <A HREF="#DPMI Spec"> Next </A> | <A HREF="#Miscellany"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Symlinks">

22.4 How to create symbolic links to programs </A></H3><P>
</CENTER>
<em><strong>Q</strong>: How do I create symbolic links? </em> <p>
<em><strong>Q</strong>: I have this program that behaves differently depending on the name it's called.  Under Unix, I just create symbolic links to achieve that, but DOS doesn't support links.  Do I
have to put several identical programs under different names on my disk?? </em> <p>
<hr> <strong>A</strong>:  DJGPP allows you to simulate symbolic links to programs.  Generate a stub (which is a small DOS program attached to every DJGPP program by the <samp>stubify.exe</samp>
program), call it by the name of the link you want, then edit its header to run another program.  For example, let's say the real program is <samp>dj1.exe</samp> and we want to make a link called
<samp>dj2.exe</samp> that really calls <samp>dj1.exe.</samp>  First, generate a stub under the name <samp>dj2.exe.</samp>  Next, run <samp>STUBEDIT</samp> to modify the new program's stub info block
and change the name of the executable it runs.  In this case, we'd change it to <samp>dj1</samp>:

<pre>

      C:\USR\BIN> stubify -g dj2.exe
      C:\USR\BIN> stubedit dj2.exe runfile=dj1

</pre>
Voila!  Now, when you run <samp>dj2</samp>, it tells the stub to load the image of <samp>dj1</samp>, but pass "dj2" in <code>argv[0].</code> <p>

If you use the DJGPP port of GNU Fileutils 3.13 or later, the <samp>ln</samp> program there can do the above steps for you if you say this (like on Unix):

<pre>

      ln -s dj1.exe dj2.exe

</pre>
<P>
<P> | <A HREF="#Symlinks"> Previous </A> | <A HREF="#WWW"> Next </A> | <A HREF="#Miscellany"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="DPMI Spec">

22.5 Where to find the DPMI specification? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: What is this DPMI thing you are all talking about? </em> <p>
<em><strong>Q</strong>: Where can I find the specifications for the DPMI functions? </em> <p>
<hr> <strong>A</strong>: DPMI, the <dfn>DOS Protected-Mode Interface</dfn>, is an API that allows protected-mode programs to run on top of DOS, which is a real-mode operating system, and still be
able call real-mode DOS and BIOS services.  A special API is required because DOS code cannot be run in protected mode: if you try, your system will immediately crash, since the real-mode DOS and
BIOS code violates many restrictions of protected-mode programming.  See <A HREF="#ASM GPF">restrictions of protected mode</A>, for more details.  <p>

The DPMI API is implemented as a set of functions of Interrupt 31h which allow such chores as switch from real to protected mode and back (generally done upon startup and at exit), memory allocation,
calling real-mode services, etc.  DPMI is by far the most portable way of running protected-mode programs on MS-DOS, MS-Windows and compatible systems.  <p>

You can find the DPMI 0.9 spec by anonymous ftp to one of the following sites:

<ul>
<li> <a href="ftp://ftp.qdeck.com/pub/general/dpmispec.zip">At the Quarterdeck ftp site</a>.

<li> <a href="ftp://x2ftp.oulu.fi/pub/msdos/programming/specs/dpmispec.arj">At Oulu</a>.

<li> The DPMI 1.0 specs are available by anonymous ftp from the <a href="ftp://ftp.intel.com/pub/IAL/software_specs/dpmiv1.txt">Intel anonymous ftp site</a> (the file <samp>dpmip1.zip</samp> at the
same location is the PostScript version of this spec), and also <a href="ftp://x2ftp.oulu.fi/pub/msdos/programming/specs/dpmi100.zip">at the Oulu site</a>.

<li> A paper copy of the DPMI specifications can be ordered from Intel as document number 240977-001.

<li> Some information about the DPMI API is also found in the <a href="ftp://ftp.simtel.net/pub/simtelnet/msdos/info/inter58c.zip">Ralf Brown's Interrupt List</a>.  Look at the functions of Interrupt
31h, or search the files for the word <samp>DPMI</samp>.

<li> The DJGPP Web server allows you to use WWW to <a href="http://www.delorie.com/djgpp/doc/dpmi/">browse the DPMI spec on-line</a>.
</ul>
<P>
<P> | <A HREF="#DPMI Spec"> Previous </A> | <A HREF="#Upload"> Next </A> | <A HREF="#Miscellany"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="WWW">

22.6 The DJGPP Web site. </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Where is the DJGPP Web site? </em> <p>
<hr> <strong>A</strong>:  Yes, DJGPP has its own home on the Internet, set up and maintained by (who else?) <a href="mailto:dj@delorie.com">DJ Delorie</a>.  It has an HTML version of this FAQ list
with search capabilities, the entire set of DJGPP distribution files, a searchable archive of the DJGPP mailing list and news group traffic, plus other useful and interesting information about DJGPP.
For instance, did you ever wonder how DJGPP got started and what DJ's original goals were?  Rejoice: the Web site includes
<a href="http://www.delorie.com/djgpp/history.html">the story of DJGPP genesis</a>.  <p>

To visit, point your browser to <a href="http://www.delorie.com/djgpp/">the DJGPP Web site</a>.

<P>
<P> | <A HREF="#WWW"> Previous </A> | <A HREF="#Cross-DJGPP"> Next </A> | <A HREF="#Miscellany"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Upload">

22.7 Where to upload your contributions to DJGPP </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I wrote a program using DJGPP.  How can I make it available to others? </em> <p>
<em><strong>Q</strong>: I found and corrected a bug in one of the programs distributed with DJGPP.  Where should I put it? </em> <p>
<hr> <strong>A</strong>:  If the program/patches are small enough, consider posting it to the mailing list or the the <a href="news:comp.os.msdos.djgpp">comp.os.msdos.djgpp</a> news group.  Please do
<strong>not</strong> post binaries to the news group; only post source code as plain text, and only if it is not too large.  Many people who read the news group cannot save the MIME attachments, and
don't like to be forced to download a large message; you are requested to respect that.  <p>

If the program is larger than, say, 50K bytes, it's best to upload it to a public site where everybody can get it.  You can upload your contribution to a special directory on the
<a href="ftp://ftp.delorie.com/incoming/">DJ Delorie's FTP server</a>.  This directory is write-only, and it gets purged every couple of days, so be sure to write to
<a href="mailto:dj@delorie.com">DJ Delorie</a> about your upload; he will then move it to the <samp>/pub/djgpp/contrib</samp> directory.  <p>

If you decide to upload, please send mail to the <samp>djgpp-announce</samp> list with a brief description of your program/patch.  (The message will get reflected to both the news group and the DJGPP
mailing list, so you don't have to cross-post there, but it also goes to people who only subscribe to <samp>djgpp-announce</samp> list because they want to get such announcements and nothing else.)
<p>

If your program is more than a patch or a beta version, you might consider uploading it to the DJGPP archives on SimTel.NET.  If you decide to do it, write to
<a href="mailto:dj@delorie.com">DJ Delorie</a> and ask him for uploading instructions.  Material uploaded there gets automatically distributed to all of the SimTel.NET mirrors throughout the world,
which makes it easier to get.  <p>

DJ Delorie requests that all contributed packages uploaded to his server be source-only distributions; don't bother to include libraries or pre-compiled binaries, since DJ deletes them when he opens
the zip archive.  This is so there will be no danger of distributing programs infected by a virus.  Please avoid uploading self-extracting archives because DJ extracts them on a Unix machine which
can't run DOS executables.

<P>
<P> | <A HREF="#Upload"> Previous </A> | <A HREF="#0xfe+0x20"> Next </A> | <A HREF="#Miscellany"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Cross-DJGPP">

22.8 DJGPP as cross-compiler </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I want to use DJGPP as a cross-compiler for Motorola 68K targets.  How should I proceed about this? </em> <p>
<em><strong>Q</strong>: I want to build GCC as a Unix-to-DOS cross-compiler.  What should I do? </em> <p>
<hr> <strong>A</strong>:  If you want a cross-compiler for m68k on a DOS machine, you need DJGPP configured as <samp>host=i386-go32</samp>, and <samp>target=m68k-coff.</samp> Such a package
<a href="ftp://ftp.lysator.liu.se/pub/msdos/gnu/gcc-dos-m68k/">is already available</a>.  The binaries there are based on GCC 2.7.2.  This package is reportedly no longer supported, but if you have
questions about it, you can send them to <a href="mailto:jk55@cornell.edu">Jim Karpinski</a>.  You can also try to contact <a href="mailto:karuottu@freenet.hut.fi">Kai Ruottu</a>, who is the provider
of DOS-hosed gcc-m68k.  Note that this package has only basic support for C<tt>++</tt>: the compiler is included, but the libraries, including <samp>libstc++</samp> and <samp>libg++</samp>, and the
C<tt>++</tt> headers are missing, so even <code>cin</code> and <code>cout</code> don't work.  <p>

A <a href="http://www.calm.hw.ac.uk/davidf/coldfire.htm">Win32-hosted gcc-m68k</a> is another possibility.  It was created by David Fiddes.  The Cygwin32 port of GCC can also be configured as a
cross-compiler with m68k as the target.  See <A HREF="#Windows apps">the description of the Cygnus project</A>, for more details about the Cygwin32 port.  <p>

DJGPP can be built and installed as a cross-compiler running on a Unix machine and targeting DOS/Windows platforms.  Here are the necessary steps to do that:

<ol>
<li> Download the cross-compiler toolkit <samp>v2/djcrx201.zip</samp> from the usual DJGPP sites.  <p>

<li> Unpack <samp>djcrx201.zip</samp> on the Unix machine using <samp>unzip -a</samp>.  <p>

You <strong>must</strong> use the <samp>-a</samp> switch, to force <code>unzip</code> to convert any DOS-style text file with CR-LF pairs at the end of each line to Unix-style text files.  If you
don't, things will break for you.  <p>

<code>unzip</code> is available in source form from many FTP sites.  <p>

<li> Link or move the files in the <samp>cross</samp> directory to the top-level directory, where you unzipped <samp>djcrxNNN.zip</samp>.  <p>

<li> Download the latest GCC and Binutils distributions from your favorite GNU FTP site.  <p>

The main GNU site is <a href="ftp://ftp.gnu.org/pub/gnu/">at ftp.gnu.org</a>.  <p>

<li> Unpack GCC and Binutils from the same directory where you unzipped <samp>djcrxNNN.zip</samp>.  <p>

<li> You might need to edit the Makefile, either to choose an installation directory as appropriate for your machine, or to change the names of the directories where the GCC and Binutils
distributions are unpacked (e.g., because their version numbers are different from what the Makefile says).  <p>

<li> Follow instructions in the file <samp>cross/install</samp> that was unpacked from <samp>djcrx201.zip</samp> to build and install the cross compiler.
</ol>
The cross-compiler you build is installed as <code>dos-gcc</code>, so to compile programs with it, use <code>dos-gcc</code> rather than <code>cc</code> or <code>gcc</code>, or set
<samp>CC=dos-gcc</samp> when invoking Make.  <p>

The file <samp>cross/readme</samp> has some usage info for <code>dos-gcc</code>.  It is generally correct, except that the version numbers for the various packages might not be up to date.  You
should always use the latest releases of every package.  <p>

Another alternative is the RPM (<dfn>Redhat Package Maintenance</dfn>) distribution of the Linux to DOS cross-compiler, which is based on DJGPP v2.01 and includes everything you need to create DJGPP
binaries on Linux (without running DOSEmu).  This package has been built by <a href="mailto:cgjks1@lut.ac.uk">James Soutter</a> using the instructions above; you will need Linux and RPM 2.2.7.  The
RPM packaged cross-compiler is available <a href="ftp://ftp.redhat.com/pub/incoming/djgpp-2.1-1.i386.rpm">from Redhat site</a>; the
<a href="ftp://ftp.redhat.com/pub/incoming/djgpp-2.1-1/src.rpm">sources are also available</a>.

<P>
<P> | <A HREF="#Cross-DJGPP"> Previous </A> | <A HREF="#Struct size"> Next </A> | <A HREF="#Miscellany"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="0xfe+0x20">

22.9 GCC says "garbage at end of number" </A></H3><P>
</CENTER>
<em><strong>Q</strong>: There is a severe bug in GCC: it says "garbage at end of number" for this line: </em> <p>
<pre>

      i = 0xfe+0x20;

</pre>
<p> <em>Ain't it silly that such a great compiler would fail so miserably?</em>

<hr> <strong>A</strong>:  That's not a bug, that's a feature of the <em>ANSI C language definition.</em>  By ANSI rules, the above expression is a single <dfn>preprocessing token</dfn>, unless you
place whitespace in front of the plus sign.  The reason for this seemingly counterintuitive feature is the syntax of floating-point constants in which letters `e' and `E' followed immediately by a
sign signal a decimal exponent.  You can use the <samp>-traditional</samp> compiler switch to turn this feature off (however, it will also turn off a plethora of other ANSI features; see the GCC docs
for details).  <p>

Judging by the published draft, this is unchanged even in the forthcoming C9X standard.

<P>
<P> | <A HREF="#0xfe+0x20"> Previous </A> | <A HREF="#Struct packing"> Next </A> | <A HREF="#Miscellany"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Struct size">

22.10 What should sizeof (struct xyzzy) return? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: When I call <samp>sizeof</samp> on a struct, I sometimes get values which are larger than the sum of the sizes of the struct members, whereas in Borland C<tt>++</tt> I always
get the correct result.  Is it a bug in GCC? </em> <p>
<em><strong>Q</strong>: I have a program that reads struct contents from a binary file.  It works OK when compiled with BC, but reads garbage when compiled with DJGPP.  This must be a bug in DJGPP,
right? </em> <p>
<hr> <strong>A</strong>: No, it's not a bug.  GCC generates 32-bit code, and in that mode, there is a significant penalty (in terms of run-time performance) for unaligned accesses, like accessing a
16-bit short which isn't aligned on a word boundary, or accessing a 32-bit int which isn't aligned on a dword boundary.  To produce faster code, GCC pads struct members so that each one can be
accessed without delays; this sometimes produces struct size which is larger than the sum of the sizes of its members.  If you need to minimize this padding (e.g., if your program uses large arrays
of such structs, where padding will waste a lot of memory), lay out your structures so that the longer members are before the shorter ones.  For example, let's say that you have a struct defined thus:

<pre>

       struct my_struct {
         char name[7];
         unsigned long offset;
         double quality;
       };

</pre>
To make such a struct use the least number of bytes, rearrange the members, like this(<i><b>Note: </b>Note that this still allows the struct to be padded at the end.</i>):

<pre>

       struct my_struct {
         double quality;
         unsigned long offset;
         char name[7];
       };

</pre>
If the layout of the structure cannot be changed (e.g., when it must match some external specification, like a block of data returned by a system call), you can use the
<code>__attribute__((packed))</code> extension of GCC (see <A HREF="http://www.delorie.com/gnu/docs/gcc-2.7.2.2/gcc_84.html#SEC86">the "Type Attributes" section of the "GNU C/C++ Manual"</A>.) to
prevent GCC from padding the structure members; this will make accesses to some of the members significantly slower.  <p>

Beginning with version 2.7.0, GCC has a command-line option <samp>-fpack-struct</samp> which causes GCC to pack all members of all structs together without any holes, just as if you used
<code>__attribute__((packed))</code> on every struct declaration in the source file you compile with that switch.  If you use this switch, be sure that source files which you compile with it don't
use <strong>any</strong> of the structures defined by library functions, or you will get some members garbled (because the library functions weren't compiled with that switch).  Alternatively, you
could declare any single structure to be packed, like so:

<pre>

       struct {
         char name[7];
         unsigned long offset;
         double quality;
       } __attribute__ ((packed));

</pre>
However, note that the latter will only work when you compile it as a C source; C<tt>++</tt> doesn't allow such syntax, and you will have to fall back to declaring each struct member with the packed
attribute.  Therefore, it's best to only use declarations such as above if you are <strong>certain</strong> it won't be ever compiled as a C<tt>++</tt> source.  <p>

The padding of struct members should be considered when you read or write struct contents from or to a disk file.  In general, this should only be done if the file is read and written by the same
program, because the exact layout of the struct members depends on some subtle aspects of code generation and the compiler switches used, and these may differ between programs, even if they were
compiled by the same compiler on the same system.  If you do need this method, be aware of the struct member padding and don't assume that the number of the file bytes that the structure uses is
equal to the sum of the members' sizes, even if you instructed the compiler to pack structs: GCC still can add some padding after the last member.  So always use <code>sizeof struct foo</code> to
read and write a structure.  <p>

Another problem with porting programs that read structs from binary files is that the size of some data types might be different under different compilers.  Specifically, an <code>int</code> is
16-bit wide in most DOS-based compilers, but in DJGPP it's 32-bit wide.  <p>

The best, most robust and portable way to read and write structs is through a <code>char</code> buffer, which your code then uses to move the contents into or out of the struct members, one by one.
This way, you always know what you are doing and your program will not break down if the padding rules change one day, or if you port it to another OS/compiler.  The ANSI-standard
<code>offsetof</code> macro comes in handy in many such cases.

<P>
<P> | <A HREF="#Struct size"> Previous </A> | <A HREF="#Int 24h"> Next </A> | <A HREF="#Miscellany"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Struct packing">

22.11 C<tt>++</tt> doesn't pack structs! </A></H3><P>
</CENTER>
<em><strong>Q</strong>: When I use <code>struct ffblk</code> from the header <samp>dir.h</samp> in a C<tt>++</tt> program, I get garbage in some members of the structure! </em> <p>
<hr> <strong>A</strong>:  There is a known bug in GCC 2.7.2: the C<tt>++</tt> compiler effectively ignores the <code>__attribute__((packed))</code> directives, so the structures end up being not
packed.  DJGPP v2.01 comes with GCC 2.7.2.1 which corrected that bug, so upgrade.  As a work-around, surround the declaration of the structure that needs to be packed with <code>#pragma pack</code>,
like this:

<pre>

       #ifdef __cplusplus
       #pragma pack(1)
       #endif
       .
       .
       .
       #ifdef __cplusplus
       #pragma pack()
       #endif

</pre>
<P>
<P> | <A HREF="#Struct packing"> Previous </A> | <A HREF="#go32-v2"> Next </A> | <A HREF="#Miscellany"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Int 24h">

22.12 How to avoid "Abort, Retry, Fail" messages </A></H3><P>
</CENTER>
<em><strong>Q</strong>: How do I write a program that accesses floppy and CD-ROM drives, but avoids popping that "Abort, Retry, Fail?" message from DOS? </em> <p>
<em><strong>Q</strong>: Other DOS compilers supply a function named <code>harderr</code> or <code>_harderr</code> to hook the critical-error interrupt 24h, but DJGPP doesn't seem to have these...
</em> <p>
<hr> <strong>A</strong>:  Under DPMI, Int 24h is always hooked by the DPMI server, since Int 24h is issued by the real-mode DOS code, and it is not possible to terminate a DPMI client (like DJGPP
programs) from real mode, if you press <kbd>A</kbd> in response to that prompt.  The default handler under most DPMI servers will just set <b><tt>AL</tt></b> register to 3 and do an
<code>IRET</code>, thus silently failing the DOS call that triggered Int 24h.  The DJGPP startup code also hooks the protected-mode Int 24h with a handler that fails the DOS call as described above.
So in most circumstances you won't see that DOS prompt at all; your program will just see a failed DOS call.  <p>

However, some DPMI hosts (notably, QDPMI), will sometimes crash your program if it generates Int 24h, for instance when you access an empty floppy drive.  In such cases, or when the default action of
failing the DOS call is not good enough, you will have to hook Int 24h with your handler.  This should be done in exactly the same manner as hooking hardware interrupts (see
<A HREF="#Hardware interrupts">how to set an interrupt handler</A>), because Int 24h is one of the few software interrupts that, like all hardware interrupts, are always reflected to the
protected-mode handler first.  Note that CWSDPMI currently doesn't support hooking Int 24h; if you set an interrupt handler, it won't be called.  <p>

There are ways to avoid program crashes due to Int 24h (under those DPMI hosts that exhibit this buggy behavior) other than to install a handler for it.  For instance, you can test if the floppy
drive is empty with a BIOS call before accessing it with DOS functions; there are also similar ways to check if a CD-ROM drive is empty.  The library function <code>getmntent</code> (see
<A HREF="http://www.delorie.com/djgpp/doc/libc-2.01/libc_337.html#SEC337">the "getmntent" section of the "libc.a reference"</A>.)  can be used to detect all the drives that can be safely accessed by
DOS; or you can borrow some of the internal functions used by <code>getmntent</code> from the <a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2/djlsr201.zip">library source distribution</a>, or
from the <a href="http://www.delorie.com/djgpp/dl/ofc/">zip picker</a>.

<P>
<P> | <A HREF="#Int 24h"> Previous </A> | <A HREF="#DXE"> Next </A> | <A HREF="#Miscellany"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="go32-v2">

22.13 What is that <samp>go32-v2.exe</samp> program? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: What is go32-v2 for? </em> <p>
<hr> <strong>A</strong>:  The <code>go32-v2</code> program does the following:

<ul>
<li> With no command-line arguments, it prints the available physical and virtual memory, much like <code>go32</code> did in v1.x.

<li> It can run unstubified v2 COFF images, like this:

<pre>

      go32-v2 myprog

</pre>
<li> If you rename it to <samp>go32.exe</samp> and put on your <code>PATH</code> before the v1.x <samp>go32.exe</samp>, it can also run a v1 COFF images, by loading the v1.x <code>go32</code> and
letting it do the job.  With this setup, you can run v2 programs from v1.x programs, because the v1.x program will load <code>go32-v2</code> (since it found it first on the PATH) which knows how to
run v2 images, instead the original <code>go32</code> which cannot.
</ul>
<P>
<P> | <A HREF="#go32-v2"> Previous </A> | <A HREF="#LFN"> Next </A> | <A HREF="#Miscellany"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="DXE">

22.14 What is DXE? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: What is a DXE? </em> <p>
<em><strong>Q</strong>: Can I make a DLL using the DXE support? </em> <p>
<em><strong>Q</strong>: Where can I find information or examples about writing/loading the DXE files? </em> <p>
<em><strong>Q</strong>: Why do I get undefined references when I run <code>dxegen</code>? </em> <p>
<hr> <strong>A</strong>: DXE is a limited facility to dynamically load code which is rarely needed in DJGPP.  An example is the floating-point emulator code (see <A HREF="#Emulation">the details of
DJGPP FP emulator</A>) which is only used on those few machines that lack an FPU.  The DXE design is intentionally limited to keep it as simple as possible, so that the code that loads a DXE could be
small (it's a few hundreds bytes).  Because of this, there are a number of limitations in the DXE mechanism that prevent using it for full-fledged dynamic linking (i.e., a DLL).  For instance, the
DXE module cannot access variables or functions in the main module.  <p>

A DXE cannot link in any library functions which reference static variables (or which call other routines which reference static variables); this effectively prohibits linking in I/O functions,
allocating memory, and many other useful things.  If you do call any of these, you'll get unresolved externals from <code>dxegen</code>.  To work around this limitation, introduce an array of
function addresses which will be used from the DXE at run time to call the "special" routines you cannot link in.  Then arrange for the address of this array to be returned by <code>_dxe_load</code>
when it loads the DXE, and make the init routine fill the array with the actual addresses of those "special" functions.  <p>

Unloading a DXE is also not supported (but I'm told you can add this by making a few simple changes in the C library).  <p>

The only place you can find some docs and examples of writing and using a DXE is in the <a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2/djtst201.zip">"tests" archive</a>.  The example there
is <em>exceedingly</em> simplistic, but then so is the entire DXE mechanism...

<P>
<P> | <A HREF="#DXE"> Previous </A> | <A HREF="#Missing separator"> Next </A> | <A HREF="#Miscellany"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="LFN">

22.15 Long Filenames Don't Work! </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I cannot make Info find some of its files under Windows 9X... </em> <p>
<em><strong>Q</strong>: Why does Make behave as if some of the files were not there? </em> <p>
<hr> <strong>A</strong>: Are you running DJGPP v2.0 on Windows 9X with long filename support enabled (LFN=y in the environment)?  If so, set LFN=n from the DOS prompt and try again.  If the problems
go away, they are probably due to known bugs in some v2.0 programs wrt the LFN support.  Make and Info which came with DJGPP v2.0 are two programs which are known to reveal these bugs.  Before you
decide that you are a victim of these bugs, though, make sure that all the files that your programs need to access have been renamed to their long names.  For example, if Make needs to find a file
called <samp>ALongFileName.cc</samp> (because the Makefile tells it to build <samp>ALongFileName.o</samp>), make sure there indeed is such a file in the directory.  Sometimes people use archive tools
(like <code>PKZIP</code>) that truncate long names, even on Windows 9X, when they open an archive, which leaves you with names like <samp>alongfil.cc</samp>, which is not the same as the original
name when LFN is supported.  Be sure to use archivers that support long filenames, e.g. use <samp>DJTAR</samp> when you open <samp>.tar.gz</samp> archives, or rename all the files to their original
long names after you open the archive.  <p>

If the problems persist even though the filenames are correct, upgrade to DJGPP v2.01 or later, where all programs should support long filenames properly.  If you cannot upgrade, you will have to
disable LFN support (set LFN=n from the DOS prompt, setting it in <samp>DJGPP.ENV</samp> does not always work in DJGPP v2.0).

<P>
<P> | <A HREF="#LFN"> Previous </A> | <A HREF="#Modification time"> Next </A> | <A HREF="#Miscellany"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Missing separator">

22.16 Make says "missing separator" </A></H3><P>
</CENTER>
<em><strong>Q</strong>: When I invoke Make, it refuses to do anything and prints a cryptic message: "makefile:10: *** missing separator.  Stop."  Now what kind of excuse is that? </em> <p>
<hr> <strong>A</strong>: Unlike most other DOS Make programs which accept any whitespace character at the beginning of a command in a rule, GNU Make insists that every such line begins with a TAB.
(Most other Unix Make programs also require TABs, and the Posix standard requires it as well.)  Make sure that the line whose number is printed in the error message (in this case, line 10) begins
with a TAB.  <p>

There are editors that replace TABs with spaces, so even a Makefile that used to work can become unworkable if you edit them with such an editor.  <p>

Another, more rare, cause of the above error message is if you use static pattern rules (with the <code>%</code> character) incorrectly.  Read the documentation that comes with Make carefully and try
to find the error.

<P>
<P> | <A HREF="#Missing separator"> Previous </A> | <A HREF="#Numeric tails"> Next </A> | <A HREF="#Miscellany"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Modification time">

22.17 Make says "<samp>foo</samp> has modification time in the future" </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I keep getting messages about file modification time in the future when I compile my programs using Make... </em> <p>
<hr> <strong>A</strong>: This happens on fast machines running Windows/NT and Windows 9X.  (However, somebody even reported such a problem on a FAT32 drive under plain DOS.)  It is evidently due to a
misfeature in the way Windows reports the time a file was last modified.  Current versions of Windows 9X store this time with 2-second granularity, but the file creation time is stored with a
100-nanosecond granularity.  It seems that Windows blindly adds 2 seconds to the system clock reading when it calculates the file modification time, apparently to prevent it from being older than the
file creation time, which could happen because of the greater accuracy used to store the creation time.  On a fast machine, this 2-second add-on can very easily make the file modification time be
ahead of the system clock when Make checks the time stamp of a file it has just created/updated.  <p>

GNU Make reports such cases because inconsistencies in file times could easily defeat its decisions about which files need to be rebuilt.  In particular, if some of the files reside on a networked
drive, and there's a clock skew between the machine where Make runs and the one which exports the drive, Make could really fail to rebuild some files.  <p>

DJGPP ports of GNU Make v3.77 and later allow for up to 3 seconds of positive difference between the file timestamp and the system clock (that is, the file is allowed to be up to 3 seconds into the
future), before the above warning is printed.  So upgrading to the latest version of Make should eliminate such bogus warnings and leave you only with messages due to real clock skews.

<P>
<P> | <A HREF="#Modification time"> Previous </A> | <A HREF="#Zoneinfo"> Next </A> | <A HREF="#Miscellany"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Numeric tails">

22.18 How to Set Up a Dual DOS/Windows Installation </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I want to be able to run DJGPP both under Windows 9X with long file names, and when I boot into plain DOS, where long file names aren't supported.  How can I set that up? </em>
<p>
<hr> <strong>A</strong>: Such a setup is possible, but it involves a few special actions, and some vigilance on your part during routine operations.  <p>

First, you must set the option in the Windows registry which prevents it from using numeric tails when it invents short 8+3 aliases for long file names.  When numeric tails are enabled, and a file
with a long name is created, Windows generates a short 8+3 alias for that long name by attaching a numeric tail <samp>~N</samp> to the first 6 characters of the basename.  For example, a file called
<samp>ALongFileName.LongExtension</samp> will get a short alias <samp>alongf~1.lon</samp>.  When you then reboot into plain DOS, your programs will see this short version only, which will almost
certainly break them, since, when a program running under DOS asks for a file with the above long name, DOS transparently truncates it to <samp>alongfil.lon</samp>, and such a file does not exist.
Disabling the numeric tails forces Windows not to use numeric tails unless there is another file in the same directory whose short alias clashes with that of the new file.  If no such clash happens,
Windows will simply truncate the long name as DOS would, which is exactly what you want.

Here is how you disable the numeric tails on Windows 9X:

<ul>
<li> From the "Start" menu select "Run" and type <samp>regedit</samp>, to start the Registry Editor.

<li> Expand the <code>HKEY_LOCAL_MACHINE</code> branch of the registry until you see in the left pane an item called <code>HKEY_LOCAL_MACHINE\System\CurrentControlSet\Control\FileSystem</code>, then
click on it.

<li> The right pane now shows the list of values assigned to the <code>FileSystem</code> key.  If you don't see an item there called <code>NameNumericTail</code>, select "New", "Binary Value" from the
"Edit" menu, then type <samp>NameNumericTail</samp> and it will appear.  Now double-click on <code>NameNumericTail</code> and enter a value of 0.

<li> Exit <samp>regedit</samp> and restart Windows 9X.
</ul>
If setting <code>NameNumericTail</code> to 0 breaks some programs, you can restore its original setting temporarily, while you run those programs.  <code>NameNumericTail</code> only affects the short
names of new files being created, it has no effect on the files that already exist.(<i><b>Note: </b>For some reason, Microsoft doesn't like it when users disable numeric tails.  Several Microsoft
publications warn against doing that, and I'm told that Windows 98 has made it harder to disable them.  I'm not sure why do they object so much.  Presumably, some programs rely on certain directories
to have numeric tails, so that they could be found even in plain DOS mode.  Apparently, some of those programs have short aliases such as <samp>PROGRA~1</samp> (the short version of the <samp>Program
Files</samp> directory) hard-wired into them, and Microsoft is afraid you could reinstall or move those directories when numeric tails are disabled, and thus cause such programs not to find their
"home".  It is obvious that such programs are badly broken (e.g., the short alias could easily be <samp>PROGRA~2</samp>), and you have every right to yell at the vendor who sells them to you.  But
even if you have no other way than to live with them, my experience shows that you have nothing real to worry about.  Remember: numeric tails only have effect when files are created or renamed.  So,
if you want to be on the safe side, re-enable them before installing Windows software, especially if the programs you install need to run in DOS mode as well (a typical example would be a
disk-recovery package such as Norton Utilities).  Then disable numeric tails again, once the installation is over.  <p>

For what it's worth, I always run my system with numeric tails disabled, and I have yet to see a single real problem.</i>) <p>

Besides the numeric tails, you need to make sure any files and directories you create have unique 8+3 aliases which are true truncations of the long names to 8+3 limits.  This means that you should
avoid file names with leading dots, such as <samp>.emacs</samp> and <samp>.bashrc</samp>, file names with more than a single dot, like <samp>make-3.77.tar.gz</samp>, or file names which include
characters not allowed by DOS, like <samp>libg++.a</samp>.  <p>

One other problem is to avoid using programs which create numeric tails even if they are disabled in Windows.  One such program is <samp>pkunzip</samp> version 2.50.  Don't use it, if you want to
keep your dual DOS/Windows installation in working order.  <p>

The most simple method of deciding at boot time which configuration (DOS or Windows) to start is to edit the (hidden) file <samp>MSDOS.SYS</samp>, which is a text file in Windows 9X, and force the
Windows boot process to present a menu where one menu item, called "Command Prompt Only", allows you to start DOS 7 without the Windows GUI.  To this end, change the line of <samp>MSDOS.SYS</samp>
that reads "BootMenu=0" to say "BootMenu=1" instead, and reboot.

<P>
<P> | <A HREF="#Numeric tails"> Previous </A> | <A HREF="#dev directory"> Next </A> | <A HREF="#Miscellany"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Zoneinfo">

22.19 What is in that <samp>zoneinfo</samp> directory? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: When I installed DJGPP v2, it created a directory named <samp>zoneinfo</samp> with a lot of small files that take up 3.5MB of my disk space.  What are they for?  Can I delete
them? </em> <p>
<hr> <strong>A</strong>:  These files exist so that time-related library functions can correctly calculate the offset between the local time and the <dfn>UTC</dfn> (Universal Coordinated Time).  This
offset is required when you get files from another time-zone, like from the Internet, or when you download an archive that was compressed in another time-zone.  <p>

One case where the time stamps might be very important is when you need to rebuild some package with Make.  Make uses file time stamps to decide which files need to be rebuilt.  Another case is if
you distribute some files compressed with <samp>Zip</samp> and want your recipients to be able to restore the correct time stamps of your files when they unzip them.  <p>

If you don't care about file time stamps being incorrect in such cases, you can delete all those files and never look back.  <p>

You might wonder why we need all these zoneinfo files when the UTC offset <em>is</em> required.  Well, the simplest way to tell programs what the UTC offset is, is to have the user specify a single
number which is the offset; but then this number needs to be changed twice a year, to accommodate for the daylight saving time.  Another, not-quite-so-simple way is to have the user specify the
current UTC offset and the DST rules; but this is a tedious and error-prone process, and many users get it wrong.  Both of these methods have the drawback that if the rules change, programs
misinterpret old time-stamps, since they treat them according to new rules.  Using a table that is read from a file and includes the offset calculation rules for every year avoids all these problems
and requires the user to point the <code>TZ</code> environment variable to the file that is pertinent to his/her time zone, which is easy:

<pre>

      set TZ=c:/djgpp/zoneinfo/israel

</pre>
<em>or</em>

<pre>

      set TZ=c:/djgpp/zoneinfo/us/alaska

</pre>
To find the rule suitable for your location, look into the <samp>src</samp> subdirectory of <samp>zoneinfo</samp> and browse the file whose name is your continent/part of the world.  If no binary
file exists with the name of your zone, you can create one with using the time-zone compiler <samp>zic</samp>, whose source is available in the <samp>v2/djlsr201.zip</samp> file, with the rest of
DJGPP.  <p>

A public domain time-zone database exists, and is updated from time to time with the latest world-wide changes to the offset calculation rules.  (The rules change because politicians in different
countries make laws that change the local clock settings.)  The contents of the <samp>zoneinfo</samp> directory which comes with DJGPP is based on this database, but if you want the latest rules, you
can <a href="ftp://elsie.nci.nih.gov/pub/">download them from the net</a> as <samp>tzdata*.tar.gz</samp>; <samp>tzcode*.tar.gz</samp> in the same directory includes the programs that can be used to
generate the offset tables from their source in <samp>tzdata*.tar.gz</samp>, the latest implementations of POSIX library functions that use time-zone information, and the man pages that document the
rules and the software.  The last update as of this writing was in May 1998.  <p>

On any single machine, you don't need more than a single file from that directory, which is the file for your time zone; once you find that file, you can safely delete the rest.  But if you
distribute a program that uses the TZ setting, you will have to include all of the files, or tell your users how to get and install them.  <p>

<P>
<P> | <A HREF="#Zoneinfo"> Previous </A> | <A HREF="#ELF vs COFF"> Next </A> | <A HREF="#Miscellany"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="dev directory">

22.20 The Secrets of the /dev/ Directory... </A></H3><P>
</CENTER>
<em><strong>Q</strong>: All DJGPP programs cannot find files in the <samp>d:\dev</samp> directory, but work okay in other directories.  What is going on here?? </em> <p>
<hr> <strong>A</strong>: This is an unfortunate side-effect of the special treatment given to the <samp>\dev</samp> directory on each drive.  DJGPP transparently supports Unix-style devices such as
<samp>/dev/null</samp> and <samp>/dev/tty</samp>, so that programs ported from Unix that refer to these devices will work.  Unfortunately, due to a half-hearted way DOS and Windows support devices,
the DJGPP library must treat the <samp>\dev</samp> directory specially.  The net effect is that if you have a real directory by that name, you will get erratic behavior.

A work-around is either to rename that directory to some other name, like <samp>\devel</samp>, or to move it down the directory hierarchy, for example make it <samp>d:\software\dev</samp>.  (The
special treatment is only reserved to the <samp>\dev</samp> directories immediately under the root of every drive.)

<P>
<P> | <A HREF="#dev directory"> Previous </A> | <A HREF="#Random numbers"> Next </A> | <A HREF="#Miscellany"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="ELF vs COFF">

22.21 How about switching to ELF as DJGPP's object file format? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: I hear all that stuff about the limitations of the COFF format, and I don't understand why won't DJGPP switch to a modern standard such as ELF? </em> <p>
<hr> <strong>A</strong>:  DJGPP uses COFF for historical reasons: at the time it was developed ELF was not available yet.  There are several grave reasons why DJGPP didn't switch to ELF yet:

<ul>
<li> Changing the binary format requires many changes to several packages that are central to DJGPP:

<ul>
<li> The Binutils should be configured for ELF, which requires that the parts of Binutils that deal with ELF be ported to DJGPP.  GCC also needs to be configured differently.

<li> The DJGPP stub loader (<samp>stub.asm</samp> in the library sources) needs to be partially rewritten to be able to load an ELF executable and set it up for execution.  Since the stub loader is
written in assembly and optimized for size, this is a formidable task.

<li> All stub-related programs, like <code>go32-v2</code>, <code>stubify</code> and <code>stubedit</code>, need to be changed as well.

<li> The DJGPP debugger support (functions in the <samp>src/debug/</samp> directory in the <samp>djlsr</samp> distribution) need to be changed to support ELF.

<li> The ported GDB needs to be built with ELF support instead of COFF.  Again, this means that the GDB ELF-specific code needs to be ported to DJGPP.
</ul>
<li> Since ELF requires that external symbols have the same name in C and in object files, the DJGPP prepending of underscores to C object names needs to be abandoned.  This means that any assembly
code that refers to C symbols or calls C functions needs to be rewritten.  In particular, this involves rewriting some C library functions and a significant portion of Allegro.

<li> Because of the above, switching to ELF will totally break back-compatibility with old libraries and object files.
</ul>
None of the above is a show-stopper, so such a switch <em>is</em> possible.  But it is a large project, and without several devoted volunteers, chances are it will never happen.

<P>
<P> | <A HREF="#ELF vs COFF"> Previous </A> | <A HREF="#Lexicon"> Next </A> | <A HREF="#Miscellany"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Random numbers">

22.22 How to produce random numbers? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: How do I produce random numbers with DJGPP? </em> <p>
<em><strong>Q</strong>: I keep getting the same random numbers each time I run my program.  How do I get a different series on every run? </em> <p>
<hr> <strong>A</strong>: DJGPP has in its library two functions to produce series of <dfn>pseudo-random</dfn>(<i><b>Note: </b>Since these series are computed using a deterministic algorithm, they are
not <em>really</em> random.  Real random numbers can only be a result of unpredictable physical processes such as radioactive decay etc.  However, a good algorithm for pseudo-random numbers produces
a series of numbers that pass many tests for randomality.</i>) numbers: <code>rand</code> and <code>random</code>.  The former is part of the ANSI C Standard, and is therefore very portable to other
environments.  The latter is available on almost every Unix platform, but is generally unsupported by DOS/Windows compilers.  On the other hand, series produced by <code>random</code> have better
qualities than those produced by <code>rand</code>.  In particular, the least-significant bits in the numbers produced by <code>random</code> are much more random than those you get from
<code>rand</code>, so if you need, say, a random number between 0 and 4, and portability is not an issue, you will get better results with <code>random () % 5</code>.  However, the DJGPP
implementation of <code>rand</code> is quite good, so when portability <em>is</em> important, you should use <code>rand</code>.  <p>

Both <code>rand</code> and <code>random</code> return a pseudo-random integer in the range <code>[0..RAND_MAX]</code>, where <code>RAND_MAX</code> is defined in the <samp>stdlib.h</samp> header.  <p>

By default, every time you restart a program, you get the same series of pseudo-random numbers.  This is important in some applications, because it allows to reproduce exactly the results of running
a program which used random series, and thus makes debugging easier.  But sometimes, e.g. in a game, you will want a different series every time.  To achieve that, you need to initialize the random
series with a different <dfn>seed</dfn>.  Two functions provided for this purpose, <code>srand</code> and <code>srandom</code>, will seed the series generated, respectively, by <code>rand</code> and
<code>random</code>.  You seed the series with a single call to <code>srand</code> or <code>srandom</code>, and then proceed by calling <code>rand</code> or <code>random</code> as usual.  <p>

A popular way of getting a different seed every run is to use the current system clock as the seed, like this:

<pre>

       srand (time (NULL));

</pre>
If the 1-second granularity of the values returned by <code>time</code> is not enough for you (e.g., if you need to generate more than one series every second), use <code>gettimeofday</code> or
<code>uclock</code>, or use the values returned by <code>rand</code> as an argument to <code>srandom</code> (or vice versa).

<P>
<P> | <A HREF="#Random numbers"> Previous </A> | <A HREF="#void main"> Next </A> | <A HREF="#Miscellany"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="Lexicon">

22.23 What are all these buzzwords I see? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: All your FAQs and tutorials seem to take for granted that I know what words like "compile", "link", "makefile" etc. mean.  Where can I find all these buzzwords explained??
</em> <p>
<hr> <strong>A</strong>: The DJGPP docs use some basic computer lexicon, without which it would be impossible to communicate.  If you find yourself completely lost in terminology you don't
understand, and this FAQ doesn't explain it, try looking them up in the <a href="http://www.delorie.com/djgpp/doc/lexicon/">DJGPP Lexicon page</a>.  Another excellent resource for computer-related
terminology is the <a href="http://www.ccil.org/jargon/">Jargon File</a>, also available from the <a href="ftp://ftp.gnu.org/pub/gnu/">GNU FTP site</a> as an Info file and in several other formats.

<P>
<P> | <A HREF="#Lexicon"> Previous </A> | <A HREF="#FAQ format"> Next </A> | <A HREF="#Miscellany"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="void main">

22.24 What should the <code>main</code> function return in a C program? </A></H3><P>
</CENTER>
<em><strong>Q</strong>: Why does everybody tell me that <code>void main</code> is bad? </em> <p>
<em><strong>Q</strong>: If <code>void main</code> is incorrect, how come the compiler lets it compile? </em> <p>
<hr> <strong>A</strong>: The ANSI/ISO C Standard specifies that the <code>main</code> function be declared in one of the following two ways:

<pre>

      int main (void);

</pre>
or

<pre>

      int main (int argc, char **argv);

</pre>
In both cases the return type is an <code>int</code>, and your <code>main</code> function should therefore either return an <code>int</code> or call the library function <code>exit</code>, when the
program ends.  <p>

Since the runtime environment assumes that <code>main</code> returns an <code>int</code>, declaring <code>main</code> with any other return type, including <code>void</code>, invites trouble.  The
compiler might compile such a program, since the ANSI Standard doesn't <em>require</em> it to fail, but the behavior of such a program is, in the Standard's parlance, "undefined" (read: anything can
happen).  That is why GCC will print a warning in these cases if you use the <samp>-Wall</samp> switch.  <p>

To summarize, using <code>void main</code> is <em>unsafe</em> and can potentially do evil things to your program.  It is best to avoid it.

<P>
<P> | <A HREF="#void main"> Previous </A> | <A HREF="#Miscellany"> Up </A> | <A HREF="#Top"> Top </A> | <P>
<P>
<P>
<CENTER>
<H3>

<A NAME="FAQ format">

22.25 Generating the FAQ in your favorite format </A></H3><P>
</CENTER>
<em><strong>Q</strong>: How can I generate the FAQ list in a format I'm used to? </em> <p>
<hr> <strong>A</strong>: First, I suggest to check whether the FAQ is already available in your format.  The <a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2/faq211b.zip">FAQ distribution</a>
includes the Info, plain-ASCII (text), and HTML (one large <samp>.html</samp> file) versions of the FAQ list.  (Personally, I recommend to use the Info version, because Info readers generally have
superior search facilities.)  More formats will be available as the tools for their generation are developed/tested.  <p>

If you prefer to read the FAQ list as hard-copy, get <samp>faqNNNp.zip</samp> from the same place.  It includes the FAQ in PostScript and PCL formats; the former is for printing on a PostScript
printer, the latter is for the LaserJet series.  Be warned: the FAQ is a large document, more than 200 printed pages.  <samp>faqNNNp.zip</samp> also includes a <samp>.dvi</samp> file which you can
print or view using one of the available DVI drivers and previewers, such as Ghostscript or <samp>dvivga</samp>.  <p>

If none of these formats is good enough for you, you will need to get the FAQ sources and convert them into the format of your liking.  The sources of the latest version of this FAQ list are
<a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2/faq211s.zip">on SimTel</a>.  This includes the FAQ sources themselves (written in Texinfo), and all the auxiliary tools required to produce
all the formats in <samp>faqNNNb.zip</samp> and <samp>faqNNNp.zip</samp>.  <p>

Once you download the sources, you will need one or more of the tools listed below to generate the FAQ list in other formats.  <p>

A program called <samp>Makertf</samp> can reportedly be used to convert a Texinfo sources of this FAQ to the <dfn>Rich File Format</dfn> which can then either be browsed by an RTF browser (such as
Adobe Acrobat) or converted into a Windows Help file with a Windows Help compiler.  The Windows Help Compiler is available via anonymous ftp
<a href="ftp://ftp.microsoft.com/Softlib/MSLFILES/HC505.EXE">from the Microsoft ftp site</a>.  <p>

A derivative of <i>T</i>e<i>X</i> called PDF<i>T</i>e<i>X</i> can be used to generate a PDF file from <i>T</i>e<i>X</i> sources.  This means that a Texinfo source can also be submitted to
PDF<i>T</i>e<i>X</i>, but I didn't try that.  PDF<i>T</i>e<i>X</i> was port to DJGPP and can be downloaded from its home site
<a href="ftp://ftp.cstug.cz/pub/tex/local/cstug/thanh/pdftex-testing/">via FTP</a>.  <p>

There's also a program called <samp>INFNG</samp> that can be used to convert the Info (<strong>not</strong> Texinfo) version of the FAQ to the Norton Guide format.  <samp>INFNG</samp> is available
from <a href="ftp://ftp.simtel.net/pub/simtelnet/gnu/djgpp/v2misc/infng100.zip">the DJGPP archives</a>.  <p>

If you know about any format not mentioned above that can be generated using widely available tools, please drop me a note so I could update this list and consider that format or those tools for
inclusion in a future release of the FAQ.  If you develop any such tools, consider uploading them to a site where they will be publicly available, and tell me about that site.  <p>

Note that the FAQ sources are heavy users of the Texinfo macro facility, so any conversion program that doesn't support Texinfo macros will probably have hard time coping with the FAQ.  When
confronted with this problem, try feeding the converter with the macro-expanded version of the FAQ (the Makefile in the source distribution has a special target for such cases).  <p>

<P>
<P> | <A HREF="#Miscellany"> Previous </A> | <A HREF="#Topic Index"> Next </A> | <A HREF="#Top"> Up </A> | <P>
<P>
<P>
<CENTER>
<H2>

<A NAME="About">

23. About this FAQ </A></H2><P>
</CENTER>
  Maintainer: <a href="mailto:eliz@is.elta.co.il">Eli Zaretskii</a>.  <p>

  Copyright (C) 1994, 1995, 1996, 1997, 1998 by <a href="mailto:eliz@is.elta.co.il">Eli Zaretskii</a>.  This FAQ may be freely redistributed with the DJGPP package or any part thereof, provided that
you don't prevent anybody else from redistributing it on the same terms, and that this copyright notice is left intact.  <p>

  Comments about, suggestions for, or corrections to this FAQ list are welcome.  Please make sure to include in your mail the version number of the document to which your comments apply (you can find
the version at the beginning of this FAQ list).  <p>

  Much of the info in this FAQ list was taken from the DJGPP mailing list/news group traffic, so many of you have (unbeknownst to you) contributed to this list.  The following people deserve special
credit for reading this list in its previous versions and providing useful feedback, comments, information and/or suggestions:

<pre>

     <a href="mailto:fighteer@cs.net">John M. Aldrich</a>
     <a href="mailto:A.APPLEYARD@fs2.mt.umist.ac.uk">Anthony Appleyard</a>
     <a href="mailto:grbhat@unigoa.ernet.in">Gurunandan R Bhat</a>
     <a href="mailto:bodfish@austen.notis.com">John Bodfish</a>
     <a href="mailto:deef@pobox.oleane.com">Francois Charton</a>
     <a href="mailto:Alain.Culos@bigfoot.com">Alain CULOS</a>
     <a href="mailto:bill@tanihwa.tssc.co.nz">Bill Currie</a>
     <a href="mailto:bdavidson@ra.isisnet.com">Bill Davidson</a>
     <a href="mailto:dj@delorie.com">DJ Delorie</a>
     <a href="mailto:Demmer@LStM.Ruhr-Uni-Bochum.De">Tom Demmer</a>
     <a href="mailto:nate@cartsys.com">Nate Eldredge</a>
     <a href="mailto:jae@laden.ilk.de">Juergen Erhard</a>
     <a href="mailto:x-aes@telelogic.com">Andy Eskilsson</a>
     <a href="mailto:prime@UDel.Edu">Jeremy Filliben</a>
     <a href="mailto:peter@agnes.dida.physik.uni-essen.de">Peter Gerwinski</a>
     <a href="mailto:harbaum@ibr.cs.tu-bs.de">Till Harbaum</a>
     <a href="mailto:Jim@anolis.bnr.usu.edu">James W. Haefner</a>
     <a href="mailto:kheidens@actrix.gen.nz">Kris Heidenstrom</a>
     <a href="mailto:kvhk@barco.com">Koen Van Herck</a>
     <a href="mailto:Vik.Heyndrickx@rug.ac.be">Vik Heyndrickx</a>
     <a href="mailto:robert.hoehne@gmx.net">Robert Hoehne</a>
     <a href="mailto:ghogenso@u.washington.edu">Gordon Hogenson</a>
     <a href="mailto:omega@es.co.nz">Harry Johnston</a>
     <a href="mailto:martynas.kunigelis@vm.ktu.lt">Martynas Kunigelis</a>
     <a href="mailto:kunst@prl.philips.nl">Pieter Kunst</a>
     <a href="mailto:yitzg@haven.ios.com">Y. Lazarovitch</a>
     <a href="mailto:lehmann@mathematik.th-darmstadt.de">Alexander Lehmann</a>
     <a href="mailto:leisner@sdsp.mc.xerox.com">Marty Leisner</a>
     <a href="mailto:d.love@dl.ac.uk">Dave Love</a>
     <a href="mailto:randym@acm.org">Randy Maas</a>
     <a href="mailto:mallory@wcug.vwu.edu">Cameron Mallory</a>
     <a href="mailto:csmiller@iname.com">Colin S. Miller</a>
     <a href="mailto:D.J.Murdoch@bristol.ac.uk">Duncan Murdoch</a>
     <a href="mailto:naderr@topaz.cqu.edu.au">Rob Nader</a>
     <a href="mailto:nicolas@JUPITER.saclay.cea.fr">Eric Nicolas</a>
     <a href="mailto:ash@cinf.usm.md">Adrian Oboroc</a>
     <a href="mailto:jan@stack.nl">Jan Oonk</a>
     <a href="mailto:e.oti@stud.warande.ruu.nl">Elliott Oti</a>
     <a href="mailto:bpaddock@execpc.com">Bob Paddock</a>
     <a href="mailto:peuha@cc.helsinki.fi">Esa A E Peuha</a>
     <a href="mailto:prins@quark.cs.sun.ac.za">Walter Prins</a>
     <a href="mailto:salters@admin.fanshawec.on.ca">Steve Salter</a>
     <a href="mailto:sandmann@clio.rice.edu">Charles Sandmann</a>
     <a href="mailto:Shumw001@Cerritos.edu">Terrel Shumway</a>
     <a href="mailto:aes@solia.gsfc.nasa.gov">Andrew Szymkowiak</a>
     <a href="mailto:ljt@sierrasemi.com">Launey Thomas</a>
     <a href="mailto:C.J.Tilbury@estate.warwick.ac.uk">Chris Tilbury</a>
     <a href="mailto:nedu@ee.washington.edu">Ned Ulbricht</a>
     <a href="mailto:turnbull@shako.sk.tsukuba.ac.jp">Stephen Turnbull</a>
     <a href="mailto:sanvila@pizarro.unex.es">Santiago Vila</a>
     <a href="mailto:waider@waider.ie">Ronan Waide</a>
     <a href="mailto:terra@diku.dk">Morten Welinder</a>
     <a href="mailto:awesley@galaxy.anutech.com.au">Anthony Edward Wesley</a>
     <a href="mailto:Kbwms@aol.com">K.B. Williams</a>
     <a href="mailto:mwood@mhw.OIT.IUPUI.EDU">Mark H. Wood</a>

</pre>
<P>
<P> | <A HREF="#About"> Previous </A> | <A HREF="#Program Index"> Next </A> | <A HREF="#Top"> Up </A> | <P>
<P>
<P>
<CENTER>
<H2>

<A NAME="Topic Index">

24. Topic Index </A></H2><P>
</CENTER>
  This is an alphabetical list of all the topics covered in this FAQ.  Use it to search for a description of your problem and follow the link to find the answer(s).

<p>
<ul>
<li><A HREF="#Long commands"> !proxy method of passing long command lines </A>  [section 16.4]
<li><A HREF="#Filename globbing"> * character in command lines </A>  [section 16.1]
<li><A HREF="#C++ comments"> -ansi switch and C++-style comments in C programs </A>  [section 8.3]
<li><A HREF="#Large image"> -fconserve-space switch </A>  [section 8.12]
<li><A HREF="#Libraries"> -lfoo, linker switch </A>  [section 8.22]
<li><A HREF="#Unresolved externals"> -lstdcx, linker cannot find </A>  [section 8.7]
<li><A HREF="#-msoft-float"> -msoft-float switch to GCC </A>  [section 11.4]
<li><A HREF="#C++ comments"> -traditional switch and C++-style comments in C programs </A>  [section 8.3]
<li><A HREF="#OBJ and LIB"> .lib libraries, using with GCC </A>  [section 17.5]
<li><A HREF="#OBJ and LIB"> .o files from EMXAOUT can't be put into a library </A>  [section 17.5]
<li><A HREF="#OBJ and LIB"> .obj object files, using with GCC </A>  [section 17.5]
<li><A HREF="#Bash crashes"> /bin/sh in shell scripts </A>  [section 6.11]
<li><A HREF="#dev directory"> /dev/ directory, problems with DJGPP programs </A>  [section 22.20]
<li><A HREF="#16-bit code"> 16-bit code, using with DJGPP </A>  [section 17.6]
<li><A HREF="#Make hangs"> 16-bit DPMI programs cannot run under DJGPP </A>  [section 6.8]
<li><A HREF="#Cross-DJGPP"> 68K targets, cross-compiling with DJGPP </A>  [section 22.8]
<li><A HREF="#Filename globbing"> ? character in command lines </A>  [section 16.1]
<li><A HREF="#Special chars">  character, how to pass it to programs </A>  [section 16.3]
<li><A HREF="#Info crashes"> ^Z character at end of DJGPP.ENV </A>  [section 6.10]
<li><A HREF="#Disable globbing"> __crt0_glob_function, disable filename globbing </A>  [section 16.2]
<li><A HREF="#DJGPP-specific"> __DJGPP__ pre-processor symbol </A>  [section 8.6]
<li><A HREF="#DJGPP-specific"> __DJGPP_MINOR__ pre-processor symbol </A>  [section 8.6]
<li><A HREF="#Confusing alloc"> __dpmi_get_memory_information, doesn't change after free/malloc </A>  [section 15.2]
<li><A HREF="#Hardware interrupts"> __dpmi_get_protected_mode_interrupt_vector </A>  [section 18.9]
<li><A HREF="#Hardware interrupts"> __dpmi_get_real_mode_interrupt_vector </A>  [section 18.9]
<li><A HREF="#int86"> __dpmi_int, calling DOS/BIOS services </A>  [section 18.1]
<li><A HREF="#IO bound programs"> __dpmi_int, high in program's profile </A>  [section 13.5]
<li><A HREF="#Pointer segment"> __dpmi_int, how to pass buffers </A>  [section 18.2]
<li><A HREF="#Zero SP"> __dpmi_int, use to invoke software interrupts </A>  [section 18.3]
<li><A HREF="#Zero SP"> __dpmi_simulate_real_mode_interrupt, need zero SS, SP and FLAGS </A>  [section 18.3]
<li><A HREF="#_go32 vs __dpmi"> __dpmi_YYY vs _go32_XXX, which one to use </A>  [section 18.10]
<li><A HREF="#C++ exceptions"> __EH_FRAME_BEGIN__, undefined references </A>  [section 8.19]
<li><A HREF="#Still unresolved"> __eh_pc and __throw, undefined references </A>  [section 8.10]
<li><A HREF="#DJGPP-specific"> __GO32__ pre-processor symbol </A>  [section 8.6]
<li><A HREF="#Pointer segment"> __tb, an alias for the address of transfer buffer </A>  [section 18.2]
<li><A HREF="#Still unresolved"> __throw and __eh_pc, undefined references </A>  [section 8.10]
<li><A HREF="#Pseudo-registers"> _AX variable, porting to DJGPP </A>  [section 17.8]
<li><A HREF="#Pseudo-registers"> _BP variable, porting to DJGPP </A>  [section 17.8]
<li><A HREF="#Pseudo-registers"> _BX variable, porting to DJGPP </A>  [section 17.8]
<li><A HREF="#Numeric exceptions"> _control87, change coprocessor setup </A>  [section 11.5]
<li><A HREF="#Hardware interrupts"> _CRT0_FLAG_LOCK_MEMORY, silent failure </A>  [section 18.9]
<li><A HREF="#QDPMI VM"> _crt0_startup_flags settings and QDPMI </A>  [section 15.3]
<li><A HREF="#HW Int pitfalls"> _crt0_startup_flags, setting to lock memory </A>  [section 18.11]
<li><A HREF="#HW Int pitfalls"> _crt0_startup_flags, Unix sbrk is incompatible with HW interrupts </A>  [section 18.11]
<li><A HREF="#Pseudo-registers"> _CX variable, porting to DJGPP </A>  [section 17.8]
<li><A HREF="#Pseudo-registers"> _DI variable, porting to DJGPP </A>  [section 17.8]
<li><A HREF="#Xfer"> _dos_ds, a selector to access conventional memory </A>  [section 18.4]
<li><A HREF="#Pseudo-registers"> _DS variable, porting to DJGPP </A>  [section 17.8]
<li><A HREF="#Pseudo-registers"> _DX variable, porting to DJGPP </A>  [section 17.8]
<li><A HREF="#Pseudo-registers"> _ES variable, porting to DJGPP </A>  [section 17.8]
<li><A HREF="#Hardware interrupts"> _go32_dpmi_allocate_iret_wrapper </A>  [section 18.9]
<li><A HREF="#Hardware interrupts"> _go32_dpmi_chain_protected_mode_interrupt_vector </A>  [section 18.9]
<li><A HREF="#Confusing alloc"> _go32_remaining_physical_memory, doesn't change after free/malloc </A>  [section 15.2]
<li><A HREF="#Confusing alloc"> _go32_remaining_physical_memory, under OS/2 </A>  [section 15.2]
<li><A HREF="#_go32 vs __dpmi"> _go32_XXX vs __dpmi_YYY, which one to use </A>  [section 18.10]
<li><A HREF="#Pseudo-registers"> _SI variable, porting to DJGPP </A>  [section 17.8]
<li><A HREF="#Stack size"> _stklen, setting stack size </A>  [section 15.9]
<li><A HREF="#Internal error"> Abort! message during compilation </A>  [section 6.6]
<li><A HREF="#C++ exceptions"> Abort! message in C++ programs that use exceptions </A>  [section 8.19]
<li><A HREF="#Above 1MB"> Accessing absolute addresses above 1MB </A>  [section 18.7]
<li><A HREF="#Xfer"> Accessing absolute addresses in conventional memory </A>  [section 18.4]
<li><A HREF="#Xfer"> Accessing absolute addresses with dedicated selector </A>  [section 18.4]
<li><A HREF="#Inline Asm"> Accessing C variables from inline assembly </A>  [section 18.13]
<li><A HREF="#Direct access"> Accessing VBE 2.0 linear frame buffer </A>  [section 10.2]
<li><A HREF="#Direct access"> Accessing video memory </A>  [section 10.2]
<li><A HREF="#Pentium"> Alignment of data by GAS can slow-down code </A>  [section 14.3]
<li><A HREF="#Allegro"> Allegro library, failure to compile </A>  [section 8.17]
<li><A HREF="#What to download"> Allegro, home page and mailing list </A>  [section 4.5]
<li><A HREF="#Older is faster"> Alternate stub, how to use </A>  [section 14.2]
<li><A HREF="#Subscribing"> Announcements, mailing list </A>  [section 20.3]
<li><A HREF="#Deja vu"> Archives, DJGPP mailing list/News group, how to search </A>  [section 6.15]
<li><A HREF="#Older is faster"> Arrays, and code speed </A>  [section 14.2]
<li><A HREF="#Totally lost"> Asking for help </A>  [section 6.16]
<li><A HREF="#ASM and C"> Assembly code crashes when linked with optimized C code </A>  [section 17.4]
<li><A HREF="#Assembly output"> Assembly code, generating with GCC </A>  [section 8.20]
<li><A HREF="#ASM and C"> Assembly functions, which registers to save </A>  [section 17.4]
<li><A HREF="#Converting ASM"> Assembly source, converting from AT&T to Intel </A>  [section 17.2]
<li><A HREF="#Converting ASM"> Assembly source, converting to AT&T syntax </A>  [section 17.2]
<li><A HREF="#ASM GPF"> Assembly source, converting to protected mode </A>  [section 17.3]
<li><A HREF="#Syntax"> Assembly source, GCC/Gas syntax </A>  [section 17.1]
<li><A HREF="#Syntax"> Assembly syntax </A>  [section 17.1]
<li><A HREF="#Samples"> Asynchronous communications packages for DJGPP </A>  [section 22.3]
<li><A HREF="#Syntax"> AT&T vs Intel assembly syntax </A>  [section 17.1]
<li><A HREF="#Converting ASM"> AT&T-style assembly, converting to Intel </A>  [section 17.2]
<li><A HREF="#Emulator accuracy"> atan, inaccuracies with FP emulator </A>  [section 11.6]
<li><A HREF="#DJGPP Fatware"> Automated downloading from a PC </A>  [section 4.7]
<li><A HREF="#DJGPP Fatware"> Automated downloading from a Unix box </A>  [section 4.7]
<li><A HREF="#DJGPP Fatware"> Automated FTP from a Unix box </A>  [section 4.7]
<li><A HREF="#Stack size"> Automatic variables, how much memory </A>  [section 15.9]
<li><A HREF="#Gprof needs COFF"> Bad format, profiler error message </A>  [section 13.3]
<li><A HREF="#File data corrupted"> Binary data I/O </A>  [section 9.3]
<li><A HREF="#Older is faster"> Binutils 2.8.x, slower than 2.7 </A>  [section 14.2]
<li><A HREF="#int86"> BIOS service calls </A>  [section 18.1]
<li><A HREF="#Pointer segment"> BIOS service calls which need buffers </A>  [section 18.2]
<li><A HREF="#Slow compiler"> BIOS setup, influence on compilation speed </A>  [section 7.1]
<li><A HREF="#Debugging woes"> Breakpoints don't work in GDB under Windows </A>  [section 12.10]
<li><A HREF="#Where is the docs"> Browsing documentation </A>  [section 5.1]
<li><A HREF="#IO speed"> Buffered I/O, effect of buffer size on I/O speed </A>  [section 14.4]
<li><A HREF="#Changing"> Bug report, how to submit </A>  [section 22.2]
<li><A HREF="#Changing"> Bug-tracking system for DJGPP </A>  [section 22.2]
<li><A HREF="#Slow development"> Bugfixes, how to ensure they are done </A>  [section 21.3]
<li><A HREF="#Changing"> Bugs, how to browse a list of known DJGPP problems </A>  [section 22.2]
<li><A HREF="#Internal error"> C compiler overflows its stack for large programs </A>  [section 6.6]
<li><A HREF="#DJGPP redistribution"> C library, legal restrictions </A>  [section 19.2]
<li><A HREF="#Patched libc"> C Library, the latest release </A>  [section 21.4]
<li><A HREF="#Minimum"> C programs compilation, recommended system RAM </A>  [section 3.1]
<li><A HREF="#Application distribution"> C++ class libraries, legal restrictions </A>  [section 19.1]
<li><A HREF="#C++ classes in GDB"> C++ class variables under GDB </A>  [section 12.7]
<li><A HREF="#Stack size"> C++ compiler crashes for large programs </A>  [section 15.9]
<li><A HREF="#Internal error"> C++ compiler overflows its stack for large programs </A>  [section 6.6]
<li><A HREF="#C++ classes in GDB"> C++ debugging with stabs information </A>  [section 12.7]
<li><A HREF="#C++ exceptions"> C++ exceptions, support by GCC </A>  [section 8.19]
<li><A HREF="#Still unresolved"> C++ libraries compiled with v2.8.0 don't mix with 2.8.1 </A>  [section 8.10]
<li><A HREF="#C++ classes in GDB"> C++ method names under GDB </A>  [section 12.7]
<li><A HREF="#Minimum"> C++ programs compilation, recommended system RAM </A>  [section 3.1]
<li><A HREF="#Large image"> C++ programs, large executable </A>  [section 8.12]
<li><A HREF="#Still unresolved"> C++ programs, linking with C functions </A>  [section 8.10]
<li><A HREF="#Struct packing"> C++ programs, problems with packed structs </A>  [section 22.11]
<li><A HREF="#GDB and C++ source"> C++ source, debugger cannot find </A>  [section 12.6]
<li><A HREF="#Unresolved externals"> C++ STL library, not in lgp271b distribution </A>  [section 8.7]
<li><A HREF="#Missing C++ headers"> C++, missing header files </A>  [section 8.2]
<li><A HREF="#C++ comments"> C++-style comments in C programs, GCC won't compile </A>  [section 8.3]
<li><A HREF="#Buggy DPMI"> Caldera OpenDOS, DPMI services crash DJGPP </A>  [section 6.3]
<li><A HREF="#16-bit code"> Calling 16-bit code from DJGPP </A>  [section 17.6]
<li><A HREF="#Move structs"> Calling real-mode functions </A>  [section 18.5]
<li><A HREF="#EMM386 alloc"> calloc fails under EMM386 or HIMEM </A>  [section 15.7]
<li><A HREF="#QDPMI alloc"> calloc fails under QDPMI or Windows </A>  [section 15.4]
<li><A HREF="#Windows alloc"> calloc fails under Windows 3.X </A>  [section 15.5]
<li><A HREF="#Windows9X alloc"> calloc fails under Windows 9X </A>  [section 15.6]
<li><A HREF="#Fat DS"> calloc, effect on "Fat DS" </A>  [section 18.6]
<li><A HREF="#Info cannot find Top"> Can't find node "Top", Info message </A>  [section 6.9]
<li><A HREF="#Crash dump"> Cannot continue from exception message </A>  [section 12.2]
<li><A HREF="#Missing subprograms"> Cannot exec as, GCC message </A>  [section 6.5]
<li><A HREF="#Missing subprograms"> Cannot exec cpp, GCC message </A>  [section 6.5]
<li><A HREF="#Filename globbing"> Case-sensitivity, while expanding wildcards </A>  [section 16.1]
<li><A HREF="#CCT"> CCT mirrors' list </A>  [section 4.2]
<li><A HREF="#Samples"> CD-playing library </A>  [section 22.3]
<li><A HREF="#Linker accesses other drives"> CD-ROM, accessed by the linker </A>  [section 6.12]
<li><A HREF="#DJGPP by WWW"> CD-ROM, getting DJGPP </A>  [section 4.4]
<li><A HREF="#Hardware interrupts"> Chaining interrupt </A>  [section 18.9]
<li><A HREF="#Changing"> Changing GNU/DJGPP programs </A>  [section 22.2]
<li><A HREF="#OS2"> Child processes, spawning under OS/2 </A>  [section 3.2]
<li><A HREF="#Swap out"> Child programs, how much memory is left </A>  [section 15.8]
<li><A HREF="#C++ classes in GDB"> Class method name in GDB </A>  [section 12.7]
<li><A HREF="#C++ classes in GDB"> Class static variable name in GDB </A>  [section 12.7]
<li><A HREF="#Pentium"> Code is slow due to incorrect alignment by GAS </A>  [section 14.3]
<li><A HREF="#Debug graphics"> Code page change might prevent MSHELL from working </A>  [section 12.5]
<li><A HREF="#How fast"> Code quality, GCC </A>  [section 14.1]
<li><A HREF="#Older is faster"> Code speed, slower in v2.x </A>  [section 14.2]
<li><A HREF="#DJGPP-specific"> Code, DJGPP-specific </A>  [section 8.6]
<li><A HREF="#GDB needs COFF"> COFF output from linker, how to get </A>  [section 12.4]
<li><A HREF="#Gprof needs COFF"> COFF output, required for profiling </A>  [section 13.3]
<li><A HREF="#ELF vs COFF"> COFF, why is DJGPP using it </A>  [section 22.21]
<li><A HREF="#Screen IO"> Color text cannot be printed with `printf' </A>  [section 9.4]
<li><A HREF="#Filename globbing"> Command line, * and ? characters </A>  [section 16.1]
<li><A HREF="#Disable globbing"> Command line, disabling filename expansion/globbing </A>  [section 16.2]
<li><A HREF="#Special chars"> Command line, escaping special characters </A>  [section 16.3]
<li><A HREF="#Filename globbing"> Command line, filename expansion/globbing </A>  [section 16.1]
<li><A HREF="#Long commands"> Command lines, longer than 126 characters </A>  [section 16.4]
<li><A HREF="#Command line"> Command-line arguments </A>  [chapter 16]
<li><A HREF="#C++ comments"> Comments, C++-style in C programs </A>  [section 8.3]
<li><A HREF="#Application distribution"> Commercial programs, writing with DJGPP </A>  [section 19.1]
<li><A HREF="#Requirements"> Compatibility, hardware, general </A>  [chapter 3]
<li><A HREF="#Minimum"> Compatibility, Linux </A>  [section 3.1]
<li><A HREF="#Minimum"> Compatibility, Novell NWDOS 7 </A>  [section 3.1]
<li><A HREF="#Requirements"> Compatibility, operating systems, general </A>  [chapter 3]
<li><A HREF="#Minimum"> Compatibility, OS/2 </A>  [section 3.1]
<li><A HREF="#Minimum"> Compatibility, Warp </A>  [section 3.1]
<li><A HREF="#Minimum"> Compatibility, Windows 3.X </A>  [section 3.1]
<li><A HREF="#Minimum"> Compatibility, Windows 9X </A>  [section 3.1]
<li><A HREF="#Minimum"> Compatibility, Windows/NT </A>  [section 3.1]
<li><A HREF="#How to debug"> Compilation for debugging </A>  [section 12.1]
<li><A HREF="#Which language"> Compilation messages, bogus </A>  [section 8.4]
<li><A HREF="#GCC optimizations"> Compilation progress, GCC switch </A>  [section 6.4]
<li><A HREF="#Slow compiler"> Compilation speed </A>  [section 7.1]
<li><A HREF="#Compiling"> Compile-time problems </A>  [chapter 8]
<li><A HREF="#General trouble"> Compiler crashes, which subprogram of </A>  [section 6.13]
<li><A HREF="#Compiler performance"> Compiler speed </A>  [chapter 7]
<li><A HREF="#Make hangs"> Compiler, non-DJGPP, crashes under Make </A>  [section 6.8]
<li><A HREF="#Reasonable hardware"> Compiling GCC and CPP </A>  [section 3.8]
<li><A HREF="#Config"> Compiling GCC and CPP, RAM disk </A>  [section 3.9]
<li><A HREF="#DOSEmu"> Compiling large programs on DOSEmu </A>  [section 3.4]
<li><A HREF="#Reasonable hardware"> Compiling large programs, disk cache settings </A>  [section 3.8]
<li><A HREF="#Reasonable hardware"> Compiling large programs, RAM disk settings </A>  [section 3.8]
<li><A HREF="#Reasonable hardware"> Compiling large source files </A>  [section 3.8]
<li><A HREF="#Objective C"> Compiling Objective C sources </A>  [section 8.5]
<li><A HREF="#GCC optimizations"> Compiling, on machines without a co-processor </A>  [section 6.4]
<li><A HREF="#Still unresolved"> complex.h functions, linker can't find </A>  [section 8.10]
<li><A HREF="#Missing C++ headers"> Complex.h, GCC can't find </A>  [section 8.2]
<li><A HREF="#Large executable"> Compressing DJGPP executables </A>  [section 8.13]
<li><A HREF="#Config"> Configuration, for optimal performance </A>  [section 3.9]
<li><A HREF="#Reasonable hardware"> Configuration, reasonable </A>  [section 3.8]
<li><A HREF="#Optimal hardware"> Configuration, the best </A>  [section 3.7]
<li><A HREF="#Xfer"> Conventional memory, moving data to/from </A>  [section 18.4]
<li><A HREF="#FAQ format"> Conversion of the FAQ to different formats </A>  [section 22.25]
<li><A HREF="#OBJ and LIB"> Converting DOS .obj/.lib files to GCC </A>  [section 17.5]
<li><A HREF="#Converting"> Converting DOS code to DJGPP </A>  [chapter 17]
<li><A HREF="#Numeric exceptions"> Coprocessor setup, change with _control87 </A>  [section 11.5]
<li><A HREF="#Application distribution"> Copyleft, effect on DJGPP </A>  [section 19.1]
<li><A HREF="#Legalese"> Copyright issues </A>  [chapter 19]
<li><A HREF="#Crash dump"> Crash message, how to interpret </A>  [section 12.2]
<li><A HREF="#Crash traceback"> Crash traceback, how to read </A>  [section 9.2]
<li><A HREF="#Crash dump"> Crash traceback, saving to a file </A>  [section 12.2]
<li><A HREF="#Trouble"> Crash, DJGPP programs </A>  [chapter 6]
<li><A HREF="#Numeric exceptions"> Crash, numeric exception </A>  [section 11.5]
<li><A HREF="#General trouble"> Crashes, general troubleshooting </A>  [section 6.13]
<li><A HREF="#v2.x crash"> Crashes, v2.0 programs </A>  [section 9.1]
<li><A HREF="#Int 24h"> Critical error handling in DJGPP </A>  [section 22.12]
<li><A HREF="#Cross-DJGPP"> Cross-compiling with DJGPP </A>  [section 22.8]
<li><A HREF="#Missing headers or libraries"> crt0.o, GCC can't find </A>  [section 8.1]
<li><A HREF="#Debugging woes"> Ctrl-C in debugged programs </A>  [section 12.10]
<li><A HREF="#What to download"> Curses library for DJGPP </A>  [section 4.5]
<li><A HREF="#WindowsNT"> Cygnus GCC port to Windows </A>  [section 3.3]
<li><A HREF="#Windows apps"> Cygnus port of GCC for Windows 9X and NT </A>  [section 3.6]
<li><A HREF="#v2.x crash"> DEADBEEF, use to spot uninitialized memory </A>  [section 9.1]
<li><A HREF="#GDB and C++ source"> Debugger cannot find C++ source </A>  [section 12.6]
<li><A HREF="#Stack size"> Debugger causes programs to overflow the stack </A>  [section 15.9]
<li><A HREF="#Debugging woes"> Debugger crashes on programs compiled for profiling </A>  [section 12.10]
<li><A HREF="#Debugging woes"> Debugger crashes on programs which use exceptions </A>  [section 12.10]
<li><A HREF="#Old QDPMI"> Debugger crashes under QEMM/QDPMI </A>  [section 12.3]
<li><A HREF="#Included source"> Debugger doesn't know about #include'd source </A>  [section 12.8]
<li><A HREF="#Debugging woes"> Debugger doesn't pass signals to debuggee </A>  [section 12.10]
<li><A HREF="#Debugging woes"> Debugger GP Faults on Windows 3.X </A>  [section 12.10]
<li><A HREF="#How to debug"> Debugger, usage </A>  [section 12.1]
<li><A HREF="#How to debug"> Debuggers for DJGPP programs </A>  [section 12.1]
<li><A HREF="#GDB and C++ source"> Debugging C++ programs </A>  [section 12.6]
<li><A HREF="#Included source"> Debugging C/C++ code generated by another program </A>  [section 12.8]
<li><A HREF="#Debug graphics"> Debugging graphics programs </A>  [section 12.5]
<li><A HREF="#Debugging"> Debugging issues </A>  [chapter 12]
<li><A HREF="#Crash dump"> Debugging programs which crash </A>  [section 12.2]
<li><A HREF="#Large executable"> Debugging symbols, how to strip from executables </A>  [section 8.13]
<li><A HREF="#GDB needs COFF"> Debugging with GDB, needs COFF output </A>  [section 12.4]
<li><A HREF="#Patched libc"> Debugging, library functions </A>  [section 21.4]
<li><A HREF="#Uninstall"> Deleting a package </A>  [section 4.8]
<li><A HREF="#Samples"> Development environments for DJGPP </A>  [section 22.3]
<li><A HREF="#Slow development"> Development of DJGPP, how to contribute </A>  [section 21.3]
<li><A HREF="#Where to find"> Differences between SimTel and CCT ftp sites </A>  [section 4.1]
<li><A HREF="#WindowsNT"> Direct hardware access on Windows/NT </A>  [section 3.3]
<li><A HREF="#Linker accesses other drives"> Directories accessed by the linker </A>  [section 6.12]
<li><A HREF="#Samples"> DirectX programming </A>  [section 22.3]
<li><A HREF="#Disable globbing"> Disabling globbing in filenames </A>  [section 16.2]
<li><A HREF="#Old QDPMI"> Disabling QDPMI </A>  [section 12.3]
<li><A HREF="#Slow compiler"> Disabling virtual memory for CWSDPMI </A>  [section 7.1]
<li><A HREF="#Disable globbing"> Disabling wildcard expansion </A>  [section 16.2]
<li><A HREF="#Slow compiler"> Disk cache, influence on compilation speed </A>  [section 7.1]
<li><A HREF="#Config"> Disk cache, recommended settings </A>  [section 3.9]
<li><A HREF="#Reasonable hardware"> Disk cache, when compiling large programs </A>  [section 3.8]
<li><A HREF="#IO speed"> Disk I/O, compared with Linux </A>  [section 14.4]
<li><A HREF="#Minimum"> Disk space, required for installation </A>  [section 3.1]
<li><A HREF="#DJGPP Fatware"> Disk space, using less of it </A>  [section 4.7]
<li><A HREF="#Linker accesses other drives"> Disks, accessed by the linker </A>  [section 6.12]
<li><A HREF="#Static vars"> Display or set static variables inside debugger </A>  [section 12.9]
<li><A HREF="#Distributing"> Distributing DJGPP programs </A>  [section 9.5]
<li><A HREF="#Emulation"> Distributing DJGPP programs, FP emulator </A>  [section 11.1]
<li><A HREF="#Application distribution"> DJGPP applications, legal restrictions </A>  [section 19.1]
<li><A HREF="#Deja vu"> DJGPP archives, how to search </A>  [section 6.15]
<li><A HREF="#Cross-DJGPP"> DJGPP as cross-compiler </A>  [section 22.8]
<li><A HREF="#What to download"> DJGPP distribution, list of </A>  [section 4.5]
<li><A HREF="#Docs"> DJGPP Documentation </A>  [chapter 5]
<li><A HREF="#Man pages"> DJGPP documentation, in man page format </A>  [section 5.5]
<li><A HREF="#Printed docs"> DJGPP documentation, in PostScript format </A>  [section 5.3]
<li><A HREF="#Cannot find docs"> DJGPP documentation, look in source distributions </A>  [section 5.4]
<li><A HREF="#Printed docs"> DJGPP documentation, printing </A>  [section 5.3]
<li><A HREF="#No Info"> DJGPP documentation, reading as ASCII file </A>  [section 5.2]
<li><A HREF="#Printed docs"> DJGPP documentation, reading with a Web browser </A>  [section 5.3]
<li><A HREF="#Last resort"> DJGPP documentation, see source files </A>  [section 5.6]
<li><A HREF="#Where is the docs"> DJGPP documentation, where to find it </A>  [section 5.1]
<li><A HREF="#Missing headers or libraries"> DJGPP environment variable, how to set and test </A>  [section 8.1]
<li><A HREF="#Missing headers or libraries"> DJGPP environment variable, setting under LFN </A>  [section 8.1]
<li><A HREF="#Mailing list"> DJGPP mailing list, how to post </A>  [section 20.2]
<li><A HREF="#Subscribing"> DJGPP mailing list, how to subscribe </A>  [section 20.3]
<li><A HREF="#Unsubscribing"> DJGPP mailing list, how to unsubscribe </A>  [section 20.4]
<li><A HREF="#Subscribing"> DJGPP mailing list, in digest form </A>  [section 20.3]
<li><A HREF="#Unsubscribing"> DJGPP mailing list/news group, read via WWW </A>  [section 20.4]
<li><A HREF="#Trouble"> DJGPP programs, problems with </A>  [chapter 6]
<li><A HREF="#Buggy DPMI"> DJGPP programs, problems with DPMI host </A>  [section 6.3]
<li><A HREF="#How to profile"> DJGPP programs, profiling </A>  [section 13.1]
<li><A HREF="#Slow development"> DJGPP release schedule </A>  [section 21.3]
<li><A HREF="#Upload"> DJGPP software, where to upload </A>  [section 22.7]
<li><A HREF="#Totally lost"> DJGPP users, asking for help </A>  [section 6.16]
<li><A HREF="#DJGPP redistribution"> DJGPP utilities, legal restrictions </A>  [section 19.2]
<li><A HREF="#Environment"> DJGPP v2.x, alternative DPMI hosts </A>  [section 21.2]
<li><A HREF="#No DPMI"> DJGPP won't run, prints "No DPMI" </A>  [section 6.2]
<li><A HREF="#What to download"> DJGPP, a list of packages </A>  [section 4.5]
<li><A HREF="#DJGPP by WWW"> DJGPP, downloading via e-mail </A>  [section 4.4]
<li><A HREF="#How to download"> DJGPP, downloading with FTP </A>  [section 4.3]
<li><A HREF="#DJGPP by WWW"> DJGPP, downloading with Gopher </A>  [section 4.4]
<li><A HREF="#DJGPP by WWW"> DJGPP, downloading with WWW </A>  [section 4.4]
<li><A HREF="#WWW"> DJGPP, history of the project </A>  [section 22.6]
<li><A HREF="#Getting DJGPP"> DJGPP, how to get it </A>  [chapter 4]
<li><A HREF="#Samples"> DJGPP, sample code </A>  [section 22.3]
<li><A HREF="#DJGPP"> DJGPP, what it is </A>  [chapter 2]
<li><A HREF="#Where to find"> DJGPP, where to download </A>  [section 4.1]
<li><A HREF="#Subscribing"> DJGPP-ANNOUNCE mailing list </A>  [section 20.3]
<li><A HREF="#Distributing"> DJGPP-compiled programs can't find DPMI </A>  [section 9.5]
<li><A HREF="#DJGPP-specific"> DJGPP-specific code </A>  [section 8.6]
<li><A HREF="#Programs hang"> DJGPP.ENV file causes GCC 2.8 to hang </A>  [section 6.1]
<li><A HREF="#Missing headers or libraries"> DJGPP.ENV syntax explained </A>  [section 8.1]
<li><A HREF="#Buggy DPMI"> DJGPP.ENV, trailing junk crashes Info </A>  [section 6.3]
<li><A HREF="#djgpp_first_ctor"> djgpp_first_ctor, unresolved by linker </A>  [section 8.11]
<li><A HREF="#djgpp_first_ctor"> djgpp_first_dtor, unresolved by linker </A>  [section 8.11]
<li><A HREF="#DMA"> DMA, using from DJGPP programs </A>  [section 18.14]
<li><A HREF="#No Info"> Documentation, converting to plain ASCII </A>  [section 5.2]
<li><A HREF="#Printed docs"> Documentation, converting to PostScript format </A>  [section 5.3]
<li><A HREF="#Man pages"> Documentation, in man page format </A>  [section 5.5]
<li><A HREF="#Printed docs"> Documentation, in PostScript format </A>  [section 5.3]
<li><A HREF="#Cannot find docs"> Documentation, inside source distribution archives </A>  [section 5.4]
<li><A HREF="#Where is the docs"> Documentation, reading </A>  [section 5.1]
<li><A HREF="#Gprof docs"> Documentation, the profiler </A>  [section 13.4]
<li><A HREF="#16-bit code"> DOS code, using with GCC </A>  [section 17.6]
<li><A HREF="#OBJ and LIB"> DOS libraries, using with GCC </A>  [section 17.5]
<li><A HREF="#Graphics and Windows"> DOS Mode, Windows suggests for graphics programs </A>  [section 10.3]
<li><A HREF="#OBJ and LIB"> DOS object files, using with GCC </A>  [section 17.5]
<li><A HREF="#Converting"> DOS programs, converting to DJGPP </A>  [chapter 17]
<li><A HREF="#int86"> DOS service calls </A>  [section 18.1]
<li><A HREF="#Pointer segment"> DOS service calls which need buffers </A>  [section 18.2]
<li><A HREF="#DOSEmu"> DOSEmu, incompatibilities with DJGPP </A>  [section 3.4]
<li><A HREF="#DOSEmu"> DOSEmu, slow response to interactive programs </A>  [section 3.4]
<li><A HREF="#Crash dump"> Double Fault message, after Ctrl-C, Ctrl-BREAK </A>  [section 12.2]
<li><A HREF="#Where to find"> Downloading DJGPP </A>  [section 4.1]
<li><A HREF="#How to download"> Downloading DJGPP via e-mail </A>  [section 4.3]
<li><A HREF="#How to download"> Downloading DJGPP with FTP </A>  [section 4.3]
<li><A HREF="#DJGPP by WWW"> Downloading DJGPP with WWW </A>  [section 4.4]
<li><A HREF="#What to download"> Downloading, individual DJGPP files </A>  [section 4.5]
<li><A HREF="#Buggy DPMI"> DPMI host bugs, might crash DJGPP programs </A>  [section 6.3]
<li><A HREF="#Environment"> DPMI hosts, commercially available </A>  [section 21.2]
<li><A HREF="#Minimum"> DPMI services, problems with Novell NWDOS 7 </A>  [section 3.1]
<li><A HREF="#Minimum"> DPMI services, required to run DJGPP </A>  [section 3.1]
<li><A HREF="#DPMI Spec"> DPMI spec, where to get it </A>  [section 22.5]
<li><A HREF="#Distributing"> DPMI, required to run DJGPP programs </A>  [section 9.5]
<li><A HREF="#DPMI Spec"> DPMI, what it is </A>  [section 22.5]
<li><A HREF="#Linker accesses other drives"> Drives, accessed by the linker </A>  [section 6.12]
<li><A HREF="#How to debug"> DXE can be debugged with EDEBUG32 </A>  [section 12.1]
<li><A HREF="#DXE"> DXE description </A>  [section 22.14]
<li><A HREF="#DXE"> DXE docs and examples </A>  [section 22.14]
<li><A HREF="#DXE"> DXE, undefined references </A>  [section 22.14]
<li><A HREF="#Samples"> Dynamically loaded code for DJGPP </A>  [section 22.3]
<li><A HREF="#DJGPP by WWW"> E-mail, downloading DJGPP </A>  [section 4.4]
<li><A HREF="#ELF vs COFF"> ELF, switching DJGPP to </A>  [section 22.21]
<li><A HREF="#Floating point"> Emulation, floating-point </A>  [chapter 11]
<li><A HREF="#Emulation"> Emulator library </A>  [section 11.1]
<li><A HREF="#Emulator accuracy"> Emulator, floating-point inaccuracies </A>  [section 11.6]
<li><A HREF="#How long"> Environment size affects spawning child programs </A>  [section 16.5]
<li><A HREF="#Internal error"> Environment variable DJGPP is not defined message </A>  [section 6.6]
<li><A HREF="#Internal error"> Environment variable DJGPP point to file which does not exist message </A>  [section 6.6]
<li><A HREF="#Internal error"> Environment variable DJGPP points to a wrong or corrupt file message </A>  [section 6.6]
<li><A HREF="#Optimal hardware"> Environment variables, DJGPP </A>  [section 3.7]
<li><A HREF="#Libraries order"> Environment variables, linker </A>  [section 8.9]
<li><A HREF="#Redirect"> Error messages, redirecting to a file </A>  [section 6.14]
<li><A HREF="#C++ exceptions"> Exceptions, C++, support by GCC </A>  [section 8.19]
<li><A HREF="#C++ exceptions"> Exceptions, with -fsjlj-exceptions </A>  [section 8.19]
<li><A HREF="#Config"> Excessive paging, tuning CWSDPMI </A>  [section 3.9]
<li><A HREF="#Large executable"> EXE compressor for DJGPP </A>  [section 8.13]
<li><A HREF="#Large executable"> Executable size, how to make smaller </A>  [section 8.13]
<li><A HREF="#Large image"> Executable, bloated by static array </A>  [section 8.12]
<li><A HREF="#Large executable"> Executable, how to strip off debugging symbols </A>  [section 8.13]
<li><A HREF="#Still unresolved"> extern "C" qualifier </A>  [section 8.10]
<li><A HREF="#FAQ format"> FAQ, conversion to different formats </A>  [section 22.25]
<li><A HREF="#Direct access"> Far pointer memory access </A>  [section 10.2]
<li><A HREF="#NEAR and FAR"> far, declaration, porting to DJGPP </A>  [section 17.7]
<li><A HREF="#DOSEmu"> FAT32 support under DOSEmu </A>  [section 3.4]
<li><A HREF="#Which language"> File format not recognized by GCC </A>  [section 8.4]
<li><A HREF="#File handles"> File handles, under Windows </A>  [section 9.6]
<li><A HREF="#IO speed"> File I/O, compared with Linux </A>  [section 14.4]
<li><A HREF="#Filename globbing"> Filename globbing </A>  [section 16.1]
<li><A HREF="#Disable globbing"> Filename globbing, disabling </A>  [section 16.2]
<li><A HREF="#Filename globbing"> Filename wildcards expansion </A>  [section 16.1]
<li><A HREF="#Disable globbing"> Filename wildcards, disabling expansion </A>  [section 16.2]
<li><A HREF="#File handles"> Files, max open simultaneously </A>  [section 9.6]
<li><A HREF="#What to download"> Files, minimum set to download </A>  [section 4.5]
<li><A HREF="#What to download"> Files, missing, where to download </A>  [section 4.5]
<li><A HREF="#File data corrupted"> Files, reading and writing </A>  [section 9.3]
<li><A HREF="#Disk space"> Files, required disk space </A>  [section 4.6]
<li><A HREF="#File handles"> FILES= directive </A>  [section 9.6]
<li><A HREF="#Unresolved externals"> Flex programs, linking </A>  [section 8.7]
<li><A HREF="#Crash dump"> Floating Point exception message </A>  [section 12.2]
<li><A HREF="#Floating point"> Floating-point emulation </A>  [chapter 11]
<li><A HREF="#Emulation"> Floating-point emulation doesn't work </A>  [section 11.1]
<li><A HREF="#Debugging woes"> Floating-point emulation under debugger </A>  [section 12.10]
<li><A HREF="#-msoft-float"> Floating-point emulation, -msoft-float switch </A>  [section 11.4]
<li><A HREF="#Other emulators"> Floating-point emulation, non-DJGPP emulators </A>  [section 11.2]
<li><A HREF="#OS2 emulation"> Floating-point emulation, under OS/2 </A>  [section 11.3]
<li><A HREF="#SIGFPE with ObjC"> Floating-point exception in Objective-C program </A>  [section 11.7]
<li><A HREF="#DOSEmu"> Floating-point instructions and GNU Make </A>  [section 3.4]
<li><A HREF="#Floating point"> Floating-point issues </A>  [chapter 11]
<li><A HREF="#Unresolved externals"> Floating-point math functions, standard and high-quality </A>  [section 8.7]
<li><A HREF="#How to debug"> Floating-point, debugger support </A>  [section 12.1]
<li><A HREF="#Filename globbing"> FNCASE variable and wildcard expansion </A>  [section 16.1]
<li><A HREF="#NEAR and FAR"> FP_SEG and FP_OFF, porting to DJGPP </A>  [section 17.7]
<li><A HREF="#Slow-down"> FPU emulation slows down programs </A>  [section 14.5]
<li><A HREF="#Confusing alloc"> free doesn't change virtual memory </A>  [section 15.2]
<li><A HREF="#File data corrupted"> fstream truncates files open for read/write </A>  [section 9.3]
<li><A HREF="#How to download"> FTP, downloading DJGPP </A>  [section 4.3]
<li><A HREF="#DJGPP Fatware"> FTP, downloading DJGPP in batch mode </A>  [section 4.7]
<li><A HREF="#SIGFPE in ldexp"> Functions from libm.a crash with SIGFPE </A>  [section 11.8]
<li><A HREF="#Which library"> Functions, which is in what library </A>  [section 8.8]
<li><A HREF="#Samples"> Game programming, libraries and techniques for DJGPP </A>  [section 22.3]
<li><A HREF="#0xfe+0x20"> Garbage at end of number, GCC message </A>  [section 22.9]
<li><A HREF="#Missing subprograms"> GCC aborts with "Installation problem, cannot exec as" </A>  [section 6.5]
<li><A HREF="#Missing subprograms"> GCC aborts with "Installation problem, cannot exec cpp" </A>  [section 6.5]
<li><A HREF="#Internal error"> GCC aborts with "Internal compiler error" </A>  [section 6.6]
<li><A HREF="#Which language"> GCC can't recognize file format </A>  [section 8.4]
<li><A HREF="#Which language"> GCC can't recognize source language </A>  [section 8.4]
<li><A HREF="#General trouble"> GCC crashes, which subprogram of </A>  [section 6.13]
<li><A HREF="#Make hangs"> GCC hangs/crashes under Make </A>  [section 6.8]
<li><A HREF="#Internal error"> GCC says "Abort!" during compilation </A>  [section 6.6]
<li><A HREF="#Crash dump"> General Protection Fault message </A>  [section 12.2]
<li><A HREF="#Getting DJGPP"> Getting DJGPP </A>  [chapter 4]
<li><A HREF="#DJGPP by WWW"> Getting DJGPP from a CD-ROM </A>  [section 4.4]
<li><A HREF="#Where is the docs"> Getting documentation </A>  [section 5.1]
<li><A HREF="#Help"> Getting more help </A>  [chapter 20]
<li><A HREF="#Filename globbing"> Globbing and file name letter-case </A>  [section 16.1]
<li><A HREF="#Filename globbing"> Globbing in filenames </A>  [section 16.1]
<li><A HREF="#Disable globbing"> Globbing in filenames, disabling </A>  [section 16.2]
<li><A HREF="#Application distribution"> GNU Copyleft, effect on DJGPP </A>  [section 19.1]
<li><A HREF="#Samples"> GNU development utilities, port to DJGPP </A>  [section 22.3]
<li><A HREF="#DJGPP is not GNU"> GNU News groups, don't post DJGPP problems </A>  [section 20.1]
<li><A HREF="#Changing"> GNU packages, how to change </A>  [section 22.2]
<li><A HREF="#DJGPP by WWW"> Gopher, downloading DJGPP </A>  [section 4.4]
<li><A HREF="#Screen IO"> gotoxy doesn't work with `printf' </A>  [section 9.4]
<li><A HREF="#Application distribution"> GPL, effect on DJGPP </A>  [section 19.1]
<li><A HREF="#Which driver"> Graphics driver setup </A>  [section 10.1]
<li><A HREF="#Graphics"> Graphics issues </A>  [chapter 10]
<li><A HREF="#What to download"> Graphics print-out, using GRX </A>  [section 4.5]
<li><A HREF="#Graphics and Windows"> Graphics programs, and Windows DOS Mode </A>  [section 10.3]
<li><A HREF="#Debug graphics"> Graphics programs, debugging </A>  [section 12.5]
<li><A HREF="#Graphics and Windows"> Graphics screen messed up under Windows </A>  [section 10.3]
<li><A HREF="#Direct access"> Graphics, direct video access </A>  [section 10.2]
<li><A HREF="#WindowsNT"> Graphics, limitations on Windows/NT </A>  [section 3.3]
<li><A HREF="#Samples"> GUI libraries for DJGPP </A>  [section 22.3]
<li><A HREF="#Totally lost"> Gurus, asking for help </A>  [section 6.16]
<li><A HREF="#File handles"> Handles, maximum available number </A>  [section 9.6]
<li><A HREF="#Buggy DPMI"> Hang, all DJGPP programs </A>  [section 6.3]
<li><A HREF="#Trouble"> Hang, DJGPP programs </A>  [chapter 6]
<li><A HREF="#Int 24h"> harderr function, emulating under DJGPP </A>  [section 22.12]
<li><A HREF="#HW Int pitfalls"> Hardware interrupt handler crashes </A>  [section 18.11]
<li><A HREF="#Hardware interrupts"> Hardware interrupts, hooking </A>  [section 18.9]
<li><A HREF="#HW Int pitfalls"> Hardware interrupts, subtleties </A>  [section 18.11]
<li><A HREF="#Requirements"> Hardware requirements </A>  [chapter 3]
<li><A HREF="#Minimum"> Hardware requirements, minimal </A>  [section 3.1]
<li><A HREF="#Low-level"> Hardware-oriented programming </A>  [chapter 18]
<li><A HREF="#Missing C++ headers"> Header files, C++, GCC can't find </A>  [section 8.2]
<li><A HREF="#Missing headers or libraries"> Header files, GCC can't find </A>  [section 8.1]
<li><A HREF="#Totally lost"> Help, asking for </A>  [section 6.16]
<li><A HREF="#WWW"> History of DJGPP </A>  [section 22.6]
<li><A HREF="#Printed docs"> HTML format, DJGPP documentation </A>  [section 5.3]
<li><A HREF="#NEAR and FAR"> huge, declaration, porting to DJGPP </A>  [section 17.7]
<li><A HREF="#IO speed"> I/O speed, DJGPP programs </A>  [section 14.4]
<li><A HREF="#i286"> i286 </A>  [section 3.5]
<li><A HREF="#Minimum"> i386SX </A>  [section 3.1]
<li><A HREF="#Emulator accuracy"> Inaccuracies, using emulator </A>  [section 11.6]
<li><A HREF="#Included source"> Including source code, problems with debugging </A>  [section 12.8]
<li><A HREF="#i286"> Incompatibilities, i286 </A>  [section 3.5]
<li><A HREF="#DOSEmu"> Incompatibilities, Linux DOSEmu </A>  [section 3.4]
<li><A HREF="#OS2"> Incompatibilities, OS/2 </A>  [section 3.2]
<li><A HREF="#OS2"> Incompatibilities, Warp </A>  [section 3.2]
<li><A HREF="#WindowsNT"> Incompatibilities, Windows/NT </A>  [section 3.3]
<li><A HREF="#Info cannot find Top"> Info hangs for non-existent topics </A>  [section 6.9]
<li><A HREF="#Info crashes"> Info viewer crashes at startup </A>  [section 6.10]
<li><A HREF="#Info cannot find Top"> Info waits for 15 seconds </A>  [section 6.9]
<li><A HREF="#Info cannot find Top"> Info won't display a file </A>  [section 6.9]
<li><A HREF="#File handles"> Inheritance, file handles </A>  [section 9.6]
<li><A HREF="#Inline Asm"> Inline assembly, how to write </A>  [section 18.13]
<li><A HREF="#Crash traceback"> Inline assembly, inaccurate SYMIFY output </A>  [section 9.2]
<li><A HREF="#Still unresolved"> Inline functions, linker won't find </A>  [section 8.10]
<li><A HREF="#Ports"> inp function </A>  [section 18.12]
<li><A HREF="#What to download"> Installation of Info docs, a utility </A>  [section 4.5]
<li><A HREF="#Numeric tails"> Installation, dual, DOS/Windows </A>  [section 22.18]
<li><A HREF="#Config"> Installing DJGPP on networked drives </A>  [section 3.9]
<li><A HREF="#Int 24h"> Int 24h crashes DJGPP programs </A>  [section 22.12]
<li><A HREF="#int86"> int86 crashes program </A>  [section 18.1]
<li><A HREF="#int86"> int86, problems with mouse interface </A>  [section 18.1]
<li><A HREF="#int86"> int86/intdos, garbled results in registers </A>  [section 18.1]
<li><A HREF="#int86"> int86/intdos, registers' width </A>  [section 18.1]
<li><A HREF="#Pointer segment"> int86x/intdosx, how to pass a buffer </A>  [section 18.2]
<li><A HREF="#int86"> intdos crashes program </A>  [section 18.1]
<li><A HREF="#Syntax"> Intel vs AT&T assembly syntax </A>  [section 17.1]
<li><A HREF="#Converting ASM"> Intel-style assembly code, using with DJGPP </A>  [section 17.2]
<li><A HREF="#Screen IO"> Interactive programs, screen I/O </A>  [section 9.4]
<li><A HREF="#Internal error"> Internal compiler error, when compiling C++ programs </A>  [section 6.6]
<li><A HREF="#Int 24h"> Interrupt 24h handling </A>  [section 22.12]
<li><A HREF="#Hardware interrupts"> Interrupt chaining </A>  [section 18.9]
<li><A HREF="#HW Int pitfalls"> Interrupt frequency, maximum </A>  [section 18.11]
<li><A HREF="#HW Int pitfalls"> Interrupt handlers, locking memory </A>  [section 18.11]
<li><A HREF="#Hardware interrupts"> Interrupt reflection </A>  [section 18.9]
<li><A HREF="#HW Int pitfalls"> Interrupt reflection overhead </A>  [section 18.11]
<li><A HREF="#Hardware interrupts"> Interrupts 1Ch, 23h, 24h </A>  [section 18.9]
<li><A HREF="#Hardware interrupts"> Interrupts handlers in DJGPP </A>  [section 18.9]
<li><A HREF="#Crash dump"> Invalid TSS in RMCB message </A>  [section 12.2]
<li><A HREF="#go32-v2"> Invoking v2 programs from v1.x programs </A>  [section 22.13]
<li><A HREF="#Still unresolved"> iostream functions, linker can't find </A>  [section 8.10]
<li><A HREF="#Unresolved externals"> iostream library, why use it </A>  [section 8.7]
<li><A HREF="#Missing C++ headers"> iostream.h, GCC can't find </A>  [section 8.2]
<li><A HREF="#Missing C++ headers"> iostreamP.h, GCC can't find </A>  [section 8.2]
<li><A HREF="#Lexicon"> Jargon, used by DJGPP documentation </A>  [section 22.23]
<li><A HREF="#Debugging woes"> Keyboard interrupt cannot be hooked under debugger </A>  [section 12.10]
<li><A HREF="#HW Int pitfalls"> Keystrokes don't get to keyboard handler </A>  [section 18.11]
<li><A HREF="#Changing"> Known bugs in DJGPP, how to browse </A>  [section 22.2]
<li><A HREF="#SIGFPE in ldexp"> ldexp crashes programs with FP exception </A>  [section 11.8]
<li><A HREF="#Legalese"> Legal aspects of DJGPP programming </A>  [chapter 19]
<li><A HREF="#Application distribution"> Legal restrictions on DJGPP apps </A>  [section 19.1]
<li><A HREF="#DJGPP redistribution"> Legal restrictions, DJGPP utilities </A>  [section 19.2]
<li><A HREF="#How long"> Length of command line </A>  [section 16.5]
<li><A HREF="#Which language"> Letter case in filenames submitted to GCC </A>  [section 8.4]
<li><A HREF="#Lexicon"> Lexicon for DJGPP documentation </A>  [section 22.23]
<li><A HREF="#WindowsNT"> LFN API, not supported by Windows/NT </A>  [section 3.3]
<li><A HREF="#WindowsNT"> LFN driver for NT, alpha version </A>  [section 3.3]
<li><A HREF="#LFN"> LFN problems, in DJGPP v2.0 </A>  [section 22.15]
<li><A HREF="#Application distribution"> LGPL, effect on DJGPP </A>  [section 19.1]
<li><A HREF="#Patched libc"> libc for DJGPP, patched version </A>  [section 21.4]
<li><A HREF="#Printed docs"> libc2.tex, missing file </A>  [section 5.3]
<li><A HREF="#Unresolved externals"> libg++ library </A>  [section 8.7]
<li><A HREF="#Still unresolved"> libgcc.a, should be in sync with the compiler </A>  [section 8.10]
<li><A HREF="#Unresolved externals"> libgpp library </A>  [section 8.7]
<li><A HREF="#Application distribution"> libgpp.a, legal restrictions </A>  [section 19.1]
<li><A HREF="#Application distribution"> libiostream.a, legal restrictions </A>  [section 19.1]
<li><A HREF="#Converting"> Libraries, converting to DJGPP </A>  [chapter 17]
<li><A HREF="#Libraries"> Libraries, creating with RHIDE </A>  [section 8.22]
<li><A HREF="#Missing headers or libraries"> Libraries, GCC can't find </A>  [section 8.1]
<li><A HREF="#Libraries"> Libraries, object, how to create/update </A>  [section 8.22]
<li><A HREF="#Unresolved externals"> Libraries, optional, how to link </A>  [section 8.7]
<li><A HREF="#Libraries order"> Libraries, order on compilation/link command line </A>  [section 8.9]
<li><A HREF="#Which library"> Libraries, searching for functions </A>  [section 8.8]
<li><A HREF="#Patched libc"> Library compiled for debugging/profiling </A>  [section 21.4]
<li><A HREF="#Printed docs"> Library docs, missing libc2.tex </A>  [section 5.3]
<li><A HREF="#Printed docs"> Library docs, problems in generating printed version </A>  [section 5.3]
<li><A HREF="#Still unresolved"> Library functions, C++, linker won't find </A>  [section 8.10]
<li><A HREF="#Unresolved externals"> Library functions, linker won't find </A>  [section 8.7]
<li><A HREF="#Libraries order"> Library functions, linker won't find in non-default directories </A>  [section 8.9]
<li><A HREF="#Libraries order"> Library functions, linker won't find, libraries' order </A>  [section 8.9]
<li><A HREF="#Emulation"> Library, floating-point emulation </A>  [section 11.1]
<li><A HREF="#Patched libc"> Library, updated, where to get </A>  [section 21.4]
<li><A HREF="#Unresolved externals"> libstdc++ standard templates library </A>  [section 8.7]
<li><A HREF="#Direct access"> Linear frame buffer access </A>  [section 10.2]
<li><A HREF="#Compiling"> Link-time problems </A>  [chapter 8]
<li><A HREF="#Unresolved externals"> Linker can't find library functions </A>  [section 8.7]
<li><A HREF="#Still unresolved"> Linker can't find some C++ library functions </A>  [section 8.10]
<li><A HREF="#Unresolved externals"> Linker cannot find -lstdcx </A>  [section 8.7]
<li><A HREF="#Linker script"> Linker fails because of Windows 9X shortcut files </A>  [section 8.14]
<li><A HREF="#Large object files"> Linker fails for a.out files in a library </A>  [section 8.16]
<li><A HREF="#Large object files"> Linker fails for large libraries or object files </A>  [section 8.16]
<li><A HREF="#Large object files"> Linker fails for obj files converted by EMXAOUT </A>  [section 8.16]
<li><A HREF="#Missing headers or libraries"> Linker fails to find crt0.o under Novell </A>  [section 8.1]
<li><A HREF="#No EXE"> Linker fails to produce executable under Novell </A>  [section 8.15]
<li><A HREF="#Compiler performance"> Linker speed </A>  [chapter 7]
<li><A HREF="#djgpp_first_ctor"> Linker won't find djgpp_first_dtor symbol </A>  [section 8.11]
<li><A HREF="#Linker accesses other drives"> Linker, accesses random drives </A>  [section 6.12]
<li><A HREF="#Windows apps"> Linker, from RSXNTDJ, and unresolved externals </A>  [section 3.6]
<li><A HREF="#Unresolved externals"> Linking against optional libraries </A>  [section 8.7]
<li><A HREF="#Still unresolved"> Linking C functions with C++ programs </A>  [section 8.10]
<li><A HREF="#Unresolved externals"> Linking C++ programs, use the GXX driver </A>  [section 8.7]
<li><A HREF="#Unresolved externals"> Linking Flex programs </A>  [section 8.7]
<li><A HREF="#Still unresolved"> Linking programs, unresolved C++ library functions </A>  [section 8.10]
<li><A HREF="#Unresolved externals"> Linking programs, unresolved library functions </A>  [section 8.7]
<li><A HREF="#Libraries order"> Linking programs, unresolved library functions, libraries' order </A>  [section 8.9]
<li><A HREF="#Slow linker"> Linking speed, improve by stub-editing ld.exe </A>  [section 7.2]
<li><A HREF="#Symlinks"> Links, symbolic, simulation with DJGPP </A>  [section 22.4]
<li><A HREF="#Cross-DJGPP"> Linux-to-DOS cross-compiling with DJGPP </A>  [section 22.8]
<li><A HREF="#What to download"> List of DJGPP packages </A>  [section 4.5]
<li><A HREF="#Assembly output"> Listing, assembly and source code </A>  [section 8.20]
<li><A HREF="#No DPMI"> Load error-no DPMI </A>  [section 6.2]
<li><A HREF="#Hardware interrupts"> Locking memory for hardware interrupt handlers </A>  [section 18.9]
<li><A HREF="#HW Int pitfalls"> Locking memory for interrupt handlers </A>  [section 18.11]
<li><A HREF="#Hardware interrupts"> Locking memory, silent failure </A>  [section 18.9]
<li><A HREF="#Long commands"> Long command lines </A>  [section 16.4]
<li><A HREF="#Makefiles"> Long command lines, from Makefile </A>  [section 16.6]
<li><A HREF="#How long"> Long command lines, maximum length </A>  [section 16.5]
<li><A HREF="#Makefiles"> Long command lines, problems with RHIDE </A>  [section 16.6]
<li><A HREF="#LFN"> long filename support, bugs in DJGPP v2.0 </A>  [section 22.15]
<li><A HREF="#WindowsNT"> Long Filenames aren't supported on Windows/NT </A>  [section 3.3]
<li><A HREF="#Missing headers or libraries"> Long filenames in setting DJGPP env. variable </A>  [section 8.1]
<li><A HREF="#Low-level"> Low-level programming issues </A>  [chapter 18]
<li><A HREF="#Config"> Machines with low extended RAM, tuning CWSDPMI </A>  [section 3.9]
<li><A HREF="#Missing separator"> Makefile, first character of every command must be TAB </A>  [section 22.16]
<li><A HREF="#Makefiles"> Makefile, passing long command lines </A>  [section 16.6]
<li><A HREF="#Long commands"> Makefiles with long command lines </A>  [section 16.4]
<li><A HREF="#Confusing alloc"> malloc doesn't change virtual memory </A>  [section 15.2]
<li><A HREF="#EMM386 alloc"> malloc fails under EMM386 or HIMEM </A>  [section 15.7]
<li><A HREF="#QDPMI alloc"> malloc fails under QDPMI or Windows </A>  [section 15.4]
<li><A HREF="#Windows alloc"> malloc fails under Windows 3.X </A>  [section 15.5]
<li><A HREF="#Windows9X alloc"> malloc fails under Windows 9X </A>  [section 15.6]
<li><A HREF="#QDPMI alloc"> malloc in small chunks fails </A>  [section 15.4]
<li><A HREF="#Samples"> malloc, debugging </A>  [section 22.3]
<li><A HREF="#Fat DS"> malloc, effect on "Fat DS" </A>  [section 18.6]
<li><A HREF="#Man pages"> Man pages, how to read </A>  [section 5.5]
<li><A HREF="#C++ classes in GDB"> Mangling C++ identifiers, GNU style </A>  [section 12.7]
<li><A HREF="#SIGFPE in ldexp"> Math functions crash with SIGFPE </A>  [section 11.8]
<li><A HREF="#Unresolved externals"> Math library, default ANSI/ISO and high-quality functions </A>  [section 8.7]
<li><A HREF="#C++ exceptions"> math.h, conflicts with C++ programs </A>  [section 8.19]
<li><A HREF="#HW Int pitfalls"> Maximum interrupt frequency </A>  [section 18.11]
<li><A HREF="#How long"> Maximum length of command line </A>  [section 16.5]
<li><A HREF="#EMM386 alloc"> Memory allocation fails under EMM386 or HIMEM </A>  [section 15.7]
<li><A HREF="#QDPMI alloc"> Memory allocation fails under QDPMI or Windows 9X </A>  [section 15.4]
<li><A HREF="#Windows alloc"> Memory allocation fails under Windows 3.X </A>  [section 15.5]
<li><A HREF="#Windows9X alloc"> Memory allocation fails under Windows 9X </A>  [section 15.6]
<li><A HREF="#QDPMI alloc"> Memory allocation in small chunks fails </A>  [section 15.4]
<li><A HREF="#Samples"> Memory allocations, debugging packages </A>  [section 22.3]
<li><A HREF="#Memory"> Memory at run time </A>  [chapter 15]
<li><A HREF="#Hardware interrupts"> Memory locking for hardware interrupt handlers </A>  [section 18.9]
<li><A HREF="#Hardware interrupts"> Memory locking, silent failure </A>  [section 18.9]
<li><A HREF="#Config"> Memory manager, settings for optimal performance </A>  [section 3.9]
<li><A HREF="#Config"> Memory managers, recommended for use with DJGPP </A>  [section 3.9]
<li><A HREF="#Disk space"> Memory size reported by go32-v2 </A>  [section 4.6]
<li><A HREF="#Swap out"> Memory, how much is left for spawned programs </A>  [section 15.8]
<li><A HREF="#QDPMI VM"> Memory, virtual, failure to allocate </A>  [section 15.3]
<li><A HREF="#Confusing alloc"> Memory, virtual, free doesn't change </A>  [section 15.2]
<li><A HREF="#Confusing alloc"> Memory, virtual, malloc doesn't change </A>  [section 15.2]
<li><A HREF="#How much memory"> Memory, virtual, maximum available </A>  [section 15.1]
<li><A HREF="#QDPMI VM"> Memory, virtual, QDPMI failure </A>  [section 15.3]
<li><A HREF="#Above 1MB"> Memory-mapped devices above 1MB </A>  [section 18.7]
<li><A HREF="#Xfer"> Memory-mapped devices, accessing with dedicated selector </A>  [section 18.4]
<li><A HREF="#Fat DS"> Memory-mapped devices, fast access </A>  [section 18.6]
<li><A HREF="#Xfer"> Memory-mapped devices, moving data to/from </A>  [section 18.4]
<li><A HREF="#Samples"> Mesa programming </A>  [section 22.3]
<li><A HREF="#C++ classes in GDB"> Method name in C++, how to pass to GDB </A>  [section 12.7]
<li><A HREF="#Minimum"> Minimal hardware requirements </A>  [section 3.1]
<li><A HREF="#Minimum"> Minimum system RAM </A>  [section 3.1]
<li><A HREF="#Minimum"> Minimum system RAM, CWSDPMI </A>  [section 3.1]
<li><A HREF="#Missing C++ headers"> Missing C++ header files </A>  [section 8.2]
<li><A HREF="#Missing headers or libraries"> Missing crt0.o </A>  [section 8.1]
<li><A HREF="#What to download"> Missing DJGPP files, downloading </A>  [section 4.5]
<li><A HREF="#Missing headers or libraries"> Missing header files </A>  [section 8.1]
<li><A HREF="#Missing headers or libraries"> Missing libraries </A>  [section 8.1]
<li><A HREF="#Missing separator"> Missing separator, Make error message </A>  [section 22.16]
<li><A HREF="#Unknown filetype"> Mixing v2.0 GCC with CC1PLUS from v1.x </A>  [section 6.7]
<li><A HREF="#Make hangs"> Mixing v2.x Make with v1.x programs hangs the machine </A>  [section 6.8]
<li><A HREF="#NEAR and FAR"> MK_FP macro, porting to DJGPP </A>  [section 17.7]
<li><A HREF="#How fast"> Mode switches, effect on program speed </A>  [section 14.1]
<li><A HREF="#Modification time"> Modification time in the future, message from Make </A>  [section 22.17]
<li><A HREF="#Profiled crash"> Monochrome display and profiling </A>  [section 13.2]
<li><A HREF="#Debug graphics"> Monochrome monitor device driver </A>  [section 12.5]
<li><A HREF="#Debug graphics"> Monochrome monitor, redirecting screen output </A>  [section 12.5]
<li><A HREF="#Debug graphics"> Monochrome monitor, support in RHIDE </A>  [section 12.5]
<li><A HREF="#Help"> More help, how to get </A>  [chapter 20]
<li><A HREF="#Cross-DJGPP"> Motorola 68K targets, cross-compiling with DJGPP </A>  [section 22.8]
<li><A HREF="#HW Int pitfalls"> Mouse callback crashes with Page Fault in RMCB </A>  [section 18.11]
<li><A HREF="#RMCB"> Mouse handler, how to install with DJGPP </A>  [section 18.8]
<li><A HREF="#int86"> Mouse interface, problems with int86 </A>  [section 18.1]
<li><A HREF="#DOSEmu"> Mouse usage crashes RHIDE on DOSEmu </A>  [section 3.4]
<li><A HREF="#movedata.h"> movedata.h header, compilation problems </A>  [section 8.21]
<li><A HREF="#Xfer"> Moving data to and from conventional memory </A>  [section 18.4]
<li><A HREF="#Xfer"> Moving data to and from transfer buffer </A>  [section 18.4]
<li><A HREF="#Windows apps"> MS-Windows programming under DJGPP </A>  [section 3.6]
<li><A HREF="#Samples"> Multitasking packages for DJGPP </A>  [section 22.3]
<li><A HREF="#Numeric tails"> NameNumericTail </A>  [section 22.18]
<li><A HREF="#NEAR and FAR"> near, declaration, porting to DJGPP </A>  [section 17.7]
<li><A HREF="#Fat DS"> Nearptr functions </A>  [section 18.6]
<li><A HREF="#Xfer"> nearptr method of direct memory access </A>  [section 18.4]
<li><A HREF="#Swap out"> Nested programs, how much memory is left </A>  [section 15.8]
<li><A HREF="#Config"> Network installation </A>  [section 3.9]
<li><A HREF="#Slow linker"> Network installation makes linking slow </A>  [section 7.2]
<li><A HREF="#Samples"> Network interface libraries for DJGPP </A>  [section 22.3]
<li><A HREF="#New and improved"> New features in v2 </A>  [section 21.1]
<li><A HREF="#No DPMI"> No DPMI error message </A>  [section 6.2]
<li><A HREF="#Swap out"> No free XMS memory when NOEMS parameter is used </A>  [section 15.8]
<li><A HREF="#Other emulators"> Non-DJGPP floating-point emulators </A>  [section 11.2]
<li><A HREF="#Unknown filetype"> Not COFF error message from DJGPP programs </A>  [section 6.7]
<li><A HREF="#Buggy DPMI"> Novell NDOS, buggy DPMI services crash DJGPP </A>  [section 6.3]
<li><A HREF="#No EXE"> Novell, linker or STUBIFY don't produce executable </A>  [section 8.15]
<li><A HREF="#Crash dump"> NULL pointer </A>  [section 12.2]
<li><A HREF="#v2.x crash"> Null pointer dereference crashes v2.0 programs </A>  [section 9.1]
<li><A HREF="#NULL redefined"> NULL, redefinition in C++ header files </A>  [section 8.18]
<li><A HREF="#Numeric exceptions"> Numeric exception, program crash </A>  [section 11.5]
<li><A HREF="#Numeric tails"> Numeric tails, created by PKUNZIP v2.50 </A>  [section 22.18]
<li><A HREF="#Numeric tails"> Numeric tails, turning off </A>  [section 22.18]
<li><A HREF="#Libraries"> Object libraries, creating with RHIDE </A>  [section 8.22]
<li><A HREF="#Libraries"> Object libraries, how to create/update </A>  [section 8.22]
<li><A HREF="#Objective C"> Objective C, compiling </A>  [section 8.5]
<li><A HREF="#SIGFPE with ObjC"> Objective-C programs crash with FP exception </A>  [section 11.7]
<li><A HREF="#Unresolved externals"> obstack package </A>  [section 8.7]
<li><A HREF="#Samples"> OpenGL programming </A>  [section 22.3]
<li><A HREF="#Config"> Optimal performance, CWSDPMI tuning </A>  [section 3.9]
<li><A HREF="#Config"> Optimal performance, disk cache settings </A>  [section 3.9]
<li><A HREF="#Config"> Optimal performance, RAM disk settings </A>  [section 3.9]
<li><A HREF="#Config"> Optimal performance, system configuration </A>  [section 3.9]
<li><A HREF="#Older is faster"> Optimization bugs, in PGCC with -O7 and higher </A>  [section 14.2]
<li><A HREF="#GCC optimizations"> Optimization crashes GCC </A>  [section 6.4]
<li><A HREF="#Older is faster"> Optimization, GCC switches </A>  [section 14.2]
<li><A HREF="#How to profile"> Optimizing DJGPP programs </A>  [section 13.1]
<li><A HREF="#More than 64MB"> OS/2 supports up to 512MB of DPMI memory </A>  [section 3.10]
<li><A HREF="#Ports"> outp function </A>  [section 18.12]
<li><A HREF="#HW Int pitfalls"> Overhead, interrupt reflection to protected mode </A>  [section 18.11]
<li><A HREF="#What to download"> Packages, DJGPP, list of </A>  [section 4.5]
<li><A HREF="#Samples"> Packages, ported to DJGPP </A>  [section 22.3]
<li><A HREF="#Disk space"> Packages, required disk space </A>  [section 4.6]
<li><A HREF="#What to download"> Packages, which to download </A>  [section 4.5]
<li><A HREF="#Struct packing"> Packed structs, C++ bug </A>  [section 22.11]
<li><A HREF="#Struct size"> Packing the structs </A>  [section 22.10]
<li><A HREF="#v2.x crash"> Page fault error message from CWSDPMI </A>  [section 9.1]
<li><A HREF="#HW Int pitfalls"> Page Fault in RMCB message </A>  [section 18.11]
<li><A HREF="#Crash dump"> Page Fault message </A>  [section 12.2]
<li><A HREF="#EMM386 alloc"> Paging starts before all RAM is used </A>  [section 15.7]
<li><A HREF="#Hardware interrupts"> Paging, how to disable </A>  [section 18.9]
<li><A HREF="#Patched libc"> Patched libc, where to find </A>  [section 21.4]
<li><A HREF="#Changing"> Patches for DJGPP, how to submit </A>  [section 22.2]
<li><A HREF="#Make hangs"> PATH, non-DJGPP binaries can crash GCC </A>  [section 6.8]
<li><A HREF="#Xfer"> Peek/poke absolute address </A>  [section 18.4]
<li><A HREF="#Pentium"> Pentium-optimized code </A>  [section 14.3]
<li><A HREF="#Performance"> Performance issues </A>  [chapter 14]
<li><A HREF="#Above 1MB"> Peripheral devices above 1MB </A>  [section 18.7]
<li><A HREF="#Fat DS"> Peripheral devices, fast access </A>  [section 18.6]
<li><A HREF="#Ports"> Peripheral devices, reading/writing ports </A>  [section 18.12]
<li><A HREF="#Xfer"> Peripherals, moving data to/from </A>  [section 18.4]
<li><A HREF="#File handles"> PerVMFiles= directive </A>  [section 9.6]
<li><A HREF="#More than 64MB"> Physical memory, more than 64MB </A>  [section 3.10]
<li><A HREF="#Emulator accuracy"> Pi, accurate computation </A>  [section 11.6]
<li><A HREF="#Bash crashes"> Pipe errors in shell scripts </A>  [section 6.11]
<li><A HREF="#Windows apps"> Platform SDK, for RSXNTDJ </A>  [section 3.6]
<li><A HREF="#Ports"> Port reading/writing </A>  [section 18.12]
<li><A HREF="#Slow-down"> Ported programs run much slower </A>  [section 14.5]
<li><A HREF="#DJGPP is not GNU"> Posting problems, not to GNU News groups </A>  [section 20.1]
<li><A HREF="#Mailing list"> Posting to DJGPP mailing list </A>  [section 20.2]
<li><A HREF="#Printed docs"> PostScript documentation </A>  [section 5.3]
<li><A HREF="#DJGPP-specific"> Pre-processor symbols, DJGPP-specific </A>  [section 8.6]
<li><A HREF="#Screen IO"> printf cannot print color text </A>  [section 9.4]
<li><A HREF="#Printed docs"> Printing DJGPP documentation </A>  [section 5.3]
<li><A HREF="#What to download"> Printing graphics, using GRX </A>  [section 4.5]
<li><A HREF="#Trouble"> Problems with DJGPP programs </A>  [chapter 6]
<li><A HREF="#Totally lost"> Problems, asking for help </A>  [section 6.16]
<li><A HREF="#Deja vu"> Problems, searching for solution in DJGPP archives </A>  [section 6.15]
<li><A HREF="#Debugging woes"> Profiled programs crash under debugger </A>  [section 12.10]
<li><A HREF="#Gprof docs"> Profiler documentation </A>  [section 13.4]
<li><A HREF="#No profile"> Profiler produces no output </A>  [section 13.6]
<li><A HREF="#How to profile"> Profiling DJGPP programs </A>  [section 13.1]
<li><A HREF="#Gprof needs COFF"> Profiling DJGPP programs, need COFF output </A>  [section 13.3]
<li><A HREF="#Profiling"> Profiling issues </A>  [chapter 13]
<li><A HREF="#No profile"> Profiling programs that terminate abnormally </A>  [section 13.6]
<li><A HREF="#Patched libc"> Profiling, library functions </A>  [section 21.4]
<li><A HREF="#IO bound programs"> Profiling, library routines </A>  [section 13.5]
<li><A HREF="#Profiled crash"> Profiling, program crashes or runs slowly </A>  [section 13.2]
<li><A HREF="#Crash traceback"> Program counter, converting to source lines </A>  [section 9.2]
<li><A HREF="#Int 24h"> Program crashes accessing empty floppy/CD-ROM drives </A>  [section 22.12]
<li><A HREF="#Int 24h"> Program crashes because of Int 24h </A>  [section 22.12]
<li><A HREF="#int86"> Program crashes in int86/intdos </A>  [section 18.1]
<li><A HREF="#v2.x crash"> Program crashes in v2.0, but not in v1.x </A>  [section 9.1]
<li><A HREF="#QDPMI alloc"> Program crashes while allocating memory </A>  [section 15.4]
<li><A HREF="#Profiled crash"> Programs crash when compiled for profiling </A>  [section 13.2]
<li><A HREF="#Stack size"> Programs crash with SIGSEGV due to small stack size </A>  [section 15.9]
<li><A HREF="#General trouble"> Programs crash, general troubleshooting </A>  [section 6.13]
<li><A HREF="#Numeric exceptions"> Programs crash, numeric exception </A>  [section 11.5]
<li><A HREF="#Redirect"> Programs crash, saving debugging output </A>  [section 6.14]
<li><A HREF="#Deja vu"> Programs crash, searching DJGPP archives </A>  [section 6.15]
<li><A HREF="#Profiled crash"> Programs run slowly when compiled with -pg </A>  [section 13.2]
<li><A HREF="#No profile"> Programs that exit abnormally, how to profile </A>  [section 13.6]
<li><A HREF="#WindowsNT"> Programs using nearptr fail on Windows/NT </A>  [section 3.3]
<li><A HREF="#ASM GPF"> Protected mode and converted assembly code </A>  [section 17.3]
<li><A HREF="#Hardware interrupts"> Protected-mode interrupt vector </A>  [section 18.9]
<li><A HREF="#Random numbers"> Pseudo-random numbers </A>  [section 22.22]
<li><A HREF="#Pseudo-registers"> Pseudo-register variables, porting to DJGPP </A>  [section 17.8]
<li><A HREF="#Special chars"> Quotes, how to pass them to programs </A>  [section 16.3]
<li><A HREF="#Slow compiler"> RAM disk, influence on compilation speed </A>  [section 7.1]
<li><A HREF="#Config"> RAM disk, recommended settings </A>  [section 3.9]
<li><A HREF="#Reasonable hardware"> RAM disk, when compiling large programs </A>  [section 3.8]
<li><A HREF="#Random numbers"> rand and random functions, comparison </A>  [section 22.22]
<li><A HREF="#Random numbers"> Random numbers, how to produce </A>  [section 22.22]
<li><A HREF="#Samples"> RCS port to DJGPP </A>  [section 22.3]
<li><A HREF="#Unsubscribing"> Read DJGPP traffic via WWW </A>  [section 20.4]
<li><A HREF="#Struct size"> Reading an int from a binary file </A>  [section 22.10]
<li><A HREF="#Where is the docs"> Reading documentation </A>  [section 5.1]
<li><A HREF="#No Info"> Reading documentation with a Web browser </A>  [section 5.2]
<li><A HREF="#No Info"> Reading documentation with text editor/viewer </A>  [section 5.2]
<li><A HREF="#No Info"> Reading documentation, converting to plain ASCII </A>  [section 5.2]
<li><A HREF="#Struct size"> Reading structs from disk files </A>  [section 22.10]
<li><A HREF="#RMCB"> Real-mode call-back </A>  [section 18.8]
<li><A HREF="#Move structs"> Real-mode functions, how to call </A>  [section 18.5]
<li><A HREF="#Hardware interrupts"> Real-mode interrupt vector </A>  [section 18.9]
<li><A HREF="#RMCB"> Real-mode services, calling DJGPP functions </A>  [section 18.8]
<li><A HREF="#Fat DS"> realloc, effect on "Fat DS" </A>  [section 18.6]
<li><A HREF="#Buggy DPMI"> Reboot, every DJGPP program </A>  [section 6.3]
<li><A HREF="#Trouble"> Reboot, when running DJGPP programs </A>  [chapter 6]
<li><A HREF="#Minimum"> Recommended system RAM, for C programs compilation </A>  [section 3.1]
<li><A HREF="#Minimum"> Recommended system RAM, for C++ programs compilation </A>  [section 3.1]
<li><A HREF="#Changing"> Recompiling GCC </A>  [section 22.2]
<li><A HREF="#C++ exceptions"> Redefinition of class exception, compiler message </A>  [section 8.19]
<li><A HREF="#NULL redefined"> Redefinition of NULL in C++ headers </A>  [section 8.18]
<li><A HREF="#Redirect"> Redirecting GCC messages to a file </A>  [section 6.14]
<li><A HREF="#Makefiles"> Redirection in Makefile, effect on long command lines </A>  [section 16.6]
<li><A HREF="#Makefiles"> Redirection, using the REDIR program </A>  [section 16.6]
<li><A HREF="#Unresolved externals"> regex package from GNU </A>  [section 8.7]
<li><A HREF="#Missing C++ headers"> Regex.h, GCC can't find </A>  [section 8.2]
<li><A HREF="#ASM and C"> Registers, which ones to save in assembly code </A>  [section 17.4]
<li><A HREF="#Slow development"> Release schedule, how to influence </A>  [section 21.3]
<li><A HREF="#Uninstall"> Removing a package </A>  [section 4.8]
<li><A HREF="#Requirements"> Required hardware, general </A>  [chapter 3]
<li><A HREF="#Windows apps"> Resource compiler, doesn't work in RSXNTDJ </A>  [section 3.6]
<li><A HREF="#Long commands"> Response file, passing long command lines </A>  [section 16.4]
<li><A HREF="#Environment"> Run-time environment in v2.x </A>  [section 21.2]
<li><A HREF="#Performance"> Run-time performance </A>  [chapter 14]
<li><A HREF="#Running"> Run-time problems </A>  [chapter 9]
<li><A HREF="#Older is faster"> Runtime speed, slower in v2.x </A>  [section 14.2]
<li><A HREF="#QDPMI VM"> sbrk algorithm and QDPMI </A>  [section 15.3]
<li><A HREF="#Fat DS"> sbrk, effect on "Fat DS" </A>  [section 18.6]
<li><A HREF="#HW Int pitfalls"> sbrk, Unix-like algorithm is incompatible with HW interrupts </A>  [section 18.11]
<li><A HREF="#Graphics and Windows"> Screen contents not restored under Windows </A>  [section 10.3]
<li><A HREF="#Screen IO"> Screen I/O </A>  [section 9.4]
<li><A HREF="#Windows apps"> SDK, for RSXNTDJ </A>  [section 3.6]
<li><A HREF="#Deja vu"> Searching DJGPP archives </A>  [section 6.15]
<li><A HREF="#Random numbers"> Seed for random numbers </A>  [section 22.22]
<li><A HREF="#Pointer segment"> segread function, how to port to DJGPP </A>  [section 18.2]
<li><A HREF="#Config"> Setting up DJGPP with EMM386 </A>  [section 3.9]
<li><A HREF="#IO speed"> setvbuf, effect on I/O speed </A>  [section 14.4]
<li><A HREF="#Bash crashes"> Shell scripts, failures and crashes </A>  [section 6.11]
<li><A HREF="#Makefiles"> SHELL= variable in Makefile, effect on long command lines </A>  [section 16.6]
<li><A HREF="#Linker script"> Shortcut files under Windows 9X fail DJGPP linker </A>  [section 8.14]
<li><A HREF="#Debugging woes"> Signals in debugged programs </A>  [section 12.10]
<li><A HREF="#Where to find"> SimTel mirrors' list </A>  [section 4.1]
<li><A HREF="#Debugging woes"> Single-stepping doesn't work in GDB on Windows 3.X </A>  [section 12.10]
<li><A HREF="#Debugging woes"> Single-stepping doesn't work in RHIDE on Windows 3.X </A>  [section 12.10]
<li><A HREF="#Struct size"> Size of a struct under DJGPP </A>  [section 22.10]
<li><A HREF="#Struct size"> sizeof, result when called on a structure </A>  [section 22.10]
<li><A HREF="#Pentium"> Slow code, due to bad alignment by GAS </A>  [section 14.3]
<li><A HREF="#Slow compiler"> Slow compilation </A>  [section 7.1]
<li><A HREF="#Config"> Slow compilation, tuning CWSDPMI </A>  [section 3.9]
<li><A HREF="#Slow linker"> Slow linking, possible reasons </A>  [section 7.2]
<li><A HREF="#Slow-down"> Slow-down, programs ported from other compilers </A>  [section 14.5]
<li><A HREF="#Slow-down"> Slow-down, when resident software uses XMS </A>  [section 14.5]
<li><A HREF="#Zero SP"> Software interrupts, need zero SS, SP and FLAGS </A>  [section 18.3]
<li><A HREF="#Deja vu"> Solved problems, searching in DJGPP archives </A>  [section 6.15]
<li><A HREF="#Samples"> Sound Blaster code for DJGPP </A>  [section 22.3]
<li><A HREF="#Last resort"> Source files, using as the best docs </A>  [section 5.6]
<li><A HREF="#C++ classes in GDB"> Source language is not recognized by GDB in C++ programs </A>  [section 12.7]
<li><A HREF="#Crash traceback"> Source line from the EIP, using GDB </A>  [section 9.2]
<li><A HREF="#Swap out"> Spawned programs, how much memory is left </A>  [section 15.8]
<li><A HREF="#OS2"> Spawning child processes, OS/2 </A>  [section 3.2]
<li><A HREF="#WindowsNT"> Spawning child programs on Windows/NT and 9X </A>  [section 3.3]
<li><A HREF="#How long"> Spawning programs, effect of environment size </A>  [section 16.5]
<li><A HREF="#go32-v2"> Spawning v2 programs from v1.x programs </A>  [section 22.13]
<li><A HREF="#Make hangs"> Spawning v2.x programs from v1.x programs doesn't work </A>  [section 6.8]
<li><A HREF="#Older is faster"> Speed of array-based programs </A>  [section 14.2]
<li><A HREF="#Older is faster"> Speed of code, recommended GCC switches </A>  [section 14.2]
<li><A HREF="#Slow compiler"> Speed of compilation </A>  [section 7.1]
<li><A HREF="#Crash traceback"> Stack dump, how to read </A>  [section 9.2]
<li><A HREF="#Crash dump"> Stack Fault message </A>  [section 12.2]
<li><A HREF="#Stack size"> Stack overflow under debugger </A>  [section 15.9]
<li><A HREF="#Stack size"> Stack size under DJGPP </A>  [section 15.9]
<li><A HREF="#Windows apps"> Stack size, in RSXNTDJ programs </A>  [section 3.6]
<li><A HREF="#Stack size"> Stack size, insufficient, causes programs to crash </A>  [section 15.9]
<li><A HREF="#Older is faster"> Stack, misalignment causes slow-down </A>  [section 14.2]
<li><A HREF="#Distributing"> Stand-alone DJGPP programs that don't need DPMI </A>  [section 9.5]
<li><A HREF="#Redirect"> Standard output/error stream, redirecting to a file </A>  [section 6.14]
<li><A HREF="#Large image"> Static array enlarges C++ executable </A>  [section 8.12]
<li><A HREF="#Static vars"> Static uninitialized variables, failure debugging </A>  [section 12.9]
<li><A HREF="#Missing C++ headers"> stdiostream.h, GCC can't find </A>  [section 8.2]
<li><A HREF="#Unresolved externals"> STL library, not in lgp271b distribution </A>  [section 8.7]
<li><A HREF="#Missing C++ headers"> streambuf.h, GCC can't find </A>  [section 8.2]
<li><A HREF="#Missing C++ headers"> String.h, GCC can't find </A>  [section 8.2]
<li><A HREF="#Move structs"> Struct declaration, for real-mode services </A>  [section 18.5]
<li><A HREF="#Struct size"> struct reading from a disk file </A>  [section 22.10]
<li><A HREF="#Struct size"> Struct, size in bytes under DJGPP </A>  [section 22.10]
<li><A HREF="#Struct packing"> Structure packing, C++ bug </A>  [section 22.11]
<li><A HREF="#Struct size"> Structure padding </A>  [section 22.10]
<li><A HREF="#Older is faster"> STUB, environment variable </A>  [section 14.2]
<li><A HREF="#Older is faster"> Stub, how to use non-default one </A>  [section 14.2]
<li><A HREF="#Subscribing"> Subscription to DJGPP mailing list </A>  [section 20.3]
<li><A HREF="#Swap out"> Subsidiary programs, how much memory is left </A>  [section 15.8]
<li><A HREF="#Which driver"> SVGA types supported by GRX </A>  [section 10.1]
<li><A HREF="#Symlinks"> Symbolic links, simulation with DJGPP </A>  [section 22.4]
<li><A HREF="#movedata.h"> sys/movedata.h header, compilation errors </A>  [section 8.21]
<li><A HREF="#Optimal hardware"> System configuration, the best </A>  [section 3.7]
<li><A HREF="#Long commands"> system function doesn't call COMMAND.COM </A>  [section 16.4]
<li><A HREF="#Minimum"> System RAM, minimum </A>  [section 3.1]
<li><A HREF="#Low-level"> Systems programming issues </A>  [chapter 18]
<li><A HREF="#Missing separator"> TAB, must be the first character of every command </A>  [section 22.16]
<li><A HREF="#Missing separator"> TABs replaced with spaces by a text editor </A>  [section 22.16]
<li><A HREF="#Samples"> TCP/IP library for DJGPP </A>  [section 22.3]
<li><A HREF="#Lexicon"> Terminology in DJGPP </A>  [section 22.23]
<li><A HREF="#Direct access"> Text-mode video memory access </A>  [section 10.2]
<li><A HREF="#Samples"> Timer interrupts code for DJGPP </A>  [section 22.3]
<li><A HREF="#Crash traceback"> Traceback, how to read </A>  [section 9.2]
<li><A HREF="#GCC optimizations"> Tracing compilation progress with -Q </A>  [section 6.4]
<li><A HREF="#Xfer"> Transfer buffer, moving data </A>  [section 18.4]
<li><A HREF="#Pointer segment"> Transfer buffer, using to call DOS/BIOS </A>  [section 18.2]
<li><A HREF="#IO speed"> Transfer buffer, what it is </A>  [section 14.4]
<li><A HREF="#File data corrupted"> Truncation of files when using fstream </A>  [section 9.3]
<li><A HREF="#Config"> Tuning CWSDPMI for optimal performance </A>  [section 3.9]
<li><A HREF="#Samples"> Turbo Vision, DJGPP port </A>  [section 22.3]
<li><A HREF="#Syntax"> Tutorials on AT&T syntax and NASM </A>  [section 17.1]
<li><A HREF="#Zoneinfo"> TZ database updates, where to get </A>  [section 22.19]
<li><A HREF="#Zoneinfo"> TZ variable, how to set </A>  [section 22.19]
<li><A HREF="#Windows apps"> Undefined externals, with stdio functions and RSXNTDJ </A>  [section 3.6]
<li><A HREF="#C++ exceptions"> Undefined references to __EH_FRAME_BEGIN__ </A>  [section 8.19]
<li><A HREF="#Windows apps"> Undefined references, and the RSXNTDJ linker </A>  [section 3.6]
<li><A HREF="#DXE"> Undefined references, in a DXE </A>  [section 22.14]
<li><A HREF="#Unresolved externals"> Undefined references, when linking Flex programs </A>  [section 8.7]
<li><A HREF="#v2.x crash"> Uninitialized memory crashes v2.0 programs </A>  [section 9.1]
<li><A HREF="#Uninstall"> Uninstalling a package </A>  [section 4.8]
<li><A HREF="#HW Int pitfalls"> Unix-like sbrk algorithm considered harmful for HW interrupts </A>  [section 18.11]
<li><A HREF="#Cross-DJGPP"> Unix-to-DOS cross-compiling with DJGPP </A>  [section 22.8]
<li><A HREF="#Unknown filetype"> Unknown filetype, GCC message </A>  [section 6.7]
<li><A HREF="#Unresolved externals"> Unresolved externals </A>  [section 8.7]
<li><A HREF="#Unresolved externals"> Unresolved externals in C++ programs, use GXX </A>  [section 8.7]
<li><A HREF="#Still unresolved"> Unresolved externals, C++ </A>  [section 8.10]
<li><A HREF="#djgpp_first_ctor"> Unresolved externals, djgpp_first_ctor </A>  [section 8.11]
<li><A HREF="#Unsubscribing"> Unsubscribing from the DJGPP mailing list </A>  [section 20.4]
<li><A HREF="#int86"> Unsupported DOS request message </A>  [section 18.1]
<li><A HREF="#int86"> Unsupported INT message </A>  [section 18.1]
<li><A HREF="#g++.exe"> Unzipping and running g++.exe produces an error message </A>  [section 22.1]
<li><A HREF="#Upload"> Uploading DJGPP software </A>  [section 22.7]
<li><A HREF="#Older is faster"> v2 code slower than v1.x </A>  [section 14.2]
<li><A HREF="#New versions"> V2, new features and bug fixes </A>  [chapter 21]
<li><A HREF="#v2.x crash"> v2.0, program crashes </A>  [section 9.1]
<li><A HREF="#Older is faster"> v2.01 code slower than v2.0 </A>  [section 14.2]
<li><A HREF="#Environment"> V2.x, new environment </A>  [section 21.2]
<li><A HREF="#Direct access"> VBE 2.0 linear frame buffer access </A>  [section 10.2]
<li><A HREF="#Move structs"> VBE services, struct declaration </A>  [section 18.5]
<li><A HREF="#DMA"> VDS, not supported by CWSDPMI (yet) </A>  [section 18.14]
<li><A HREF="#Which driver"> VESA support by GRX </A>  [section 10.1]
<li><A HREF="#DOSEmu"> VFAT32 support under DOSEmu </A>  [section 3.4]
<li><A HREF="#Samples"> VGA Mode-X graphics for DJGPP </A>  [section 22.3]
<li><A HREF="#Direct access"> Video memory, direct access </A>  [section 10.2]
<li><A HREF="#Memory"> Virtual memory </A>  [chapter 15]
<li><A HREF="#GCC optimizations"> Virtual memory exhausted, during compilation </A>  [section 6.4]
<li><A HREF="#Windows9X alloc"> Virtual memory under Windows 9X </A>  [section 15.6]
<li><A HREF="#Hardware interrupts"> Virtual memory, disabling with startup flags </A>  [section 18.9]
<li><A HREF="#QDPMI VM"> Virtual memory, failure to allocate </A>  [section 15.3]
<li><A HREF="#Confusing alloc"> Virtual memory, free doesn't change </A>  [section 15.2]
<li><A HREF="#Slow compiler"> Virtual memory, how to disable it for CWSDPMI </A>  [section 7.1]
<li><A HREF="#Confusing alloc"> Virtual memory, malloc doesn't change </A>  [section 15.2]
<li><A HREF="#How much memory"> Virtual memory, maximum available </A>  [section 15.1]
<li><A HREF="#QDPMI VM"> Virtual memory, QDPMI failure </A>  [section 15.3]
<li><A HREF="#Unknown filetype"> Virus infection cause "Not COFF" message </A>  [section 6.7]
<li><A HREF="#void main"> void main, in a C program </A>  [section 22.24]
<li><A HREF="#Debugging woes"> Watchpoints don't work in GDB under Windows </A>  [section 12.10]
<li><A HREF="#WWW"> Web site for DJGPP </A>  [section 22.6]
<li><A HREF="#Subscribing"> Weekly digest, problems in receiving </A>  [section 20.3]
<li><A HREF="#Special chars"> Whitespace in wildcards </A>  [section 16.3]
<li><A HREF="#Filename globbing"> Wildcards expansion </A>  [section 16.1]
<li><A HREF="#Disable globbing"> Wildcards expansion, disabling </A>  [section 16.2]
<li><A HREF="#Filename globbing"> Wildcards, and letter-case in file names </A>  [section 16.1]
<li><A HREF="#Special chars"> Wildcards, and whitespace in file names </A>  [section 16.3]
<li><A HREF="#Windows apps"> Win32 programming with GCC </A>  [section 3.6]
<li><A HREF="#Windows apps"> Windows 9X/NT programming with Cygnus GCC port </A>  [section 3.6]
<li><A HREF="#Windows apps"> Windows applications with DJGPP </A>  [section 3.6]
<li><A HREF="#Samples"> Winsock interface for DJGPP </A>  [section 22.3]
<li><A HREF="#WWW"> WWW services for DJGPP </A>  [section 22.6]
<li><A HREF="#DJGPP by WWW"> WWW, downloading DJGPP </A>  [section 4.4]
<li><A HREF="#Samples"> X emulation for DJGPP </A>  [section 22.3]
<li><A HREF="#Linker accesses other drives"> Zip drive, accessed by the linker </A>  [section 6.12]
<li><A HREF="#Zoneinfo"> Zoneinfo directory </A>  [section 22.19]
</ul>
<P>
<P> | <A HREF="#Topic Index"> Previous </A> | <A HREF="#Top"> Up </A> | <P>
<P>
<P>
<CENTER>
<H2>

<A NAME="Program Index">

25. Program Index </A></H2><P>
</CENTER>
  This index lists the problems and solutions by the program/package to which they pertain.  If you know what program or package gives you the trouble, look it up here.

<p>
<ul>
<li><A HREF="#QDPMI VM"> 386Max, how to ensure virtual memory </A>  [section 15.3]
<li><A HREF="#QDPMI VM"> 386Max, speeding up DJGPP start-up </A>  [section 15.3]
<li><A HREF="#Redirect"> 4DOS, redirecting GCC messages to a file </A>  [section 6.14]
<li><A HREF="#DOSEmu"> Allegro, compiling on DOSEmu </A>  [section 3.4]
<li><A HREF="#Converting ASM"> ATT2INTL, a converter from AT&T to Intel assembly </A>  [section 17.2]
<li><A HREF="#Bash crashes"> Bash crashes </A>  [section 6.11]
<li><A HREF="#Programs hang"> Bash hangs on Windows 9X </A>  [section 6.1]
<li><A HREF="#DJGPP Fatware"> BatchFTP, automated downloading from a Unix box </A>  [section 4.7]
<li><A HREF="#Stack size"> BCCBGI (from BCC2GRX) crashes with the default stack </A>  [section 15.9]
<li><A HREF="#Samples"> BCSERIO, async communications package for DJGPP </A>  [section 22.3]
<li><A HREF="#Large executable"> Binutils, incompatibilities with DJP </A>  [section 8.13]
<li><A HREF="#Application distribution"> Bison doesn't imply GPL/LGPL </A>  [section 19.1]
<li><A HREF="#Included source"> Bison, debugging generated code </A>  [section 12.8]
<li><A HREF="#Samples"> Boot loader for an operating system </A>  [section 22.3]
<li><A HREF="#Man pages"> Cawf, using to read man pages </A>  [section 5.5]
<li><A HREF="#Stack size"> CC1PLUS crashes with SIGSEGV </A>  [section 15.9]
<li><A HREF="#Debug graphics"> CHCP DOS command might prevent MSHELL from working </A>  [section 12.5]
<li><A HREF="#Reasonable hardware"> CPP, compiling, memory requirements </A>  [section 3.8]
<li><A HREF="#Config"> CPP, compiling, RAM disk </A>  [section 3.9]
<li><A HREF="#Fat DS"> CWSDPMI allows "Fat DS" </A>  [section 18.6]
<li><A HREF="#QDPMI alloc"> CWSDPMI crashes programs allocating memory is small chunks </A>  [section 15.4]
<li><A HREF="#v2.x crash"> CWSDPMI crashes programs which dereference NULL pointers </A>  [section 9.1]
<li><A HREF="#Int 24h"> CWSDPMI doesn't support hooking Int 24h </A>  [section 22.12]
<li><A HREF="#Internal error"> CWSDPMI runs out of virtual memory </A>  [section 6.6]
<li><A HREF="#Environment"> CWSDPMI, alternative DPMI hosts </A>  [section 21.2]
<li><A HREF="#Slow compiler"> CWSDPMI, disabling virtual memory </A>  [section 7.1]
<li><A HREF="#DJGPP redistribution"> CWSDPMI, legal restrictions </A>  [section 19.2]
<li><A HREF="#How much memory"> CWSDPMI, maximum available virtual memory </A>  [section 15.1]
<li><A HREF="#Swap out"> CWSDPMI, memory usage for nested programs </A>  [section 15.8]
<li><A HREF="#Minimum"> CWSDPMI, minimum required system RAM </A>  [section 3.1]
<li><A HREF="#EMM386 alloc"> CWSDPMI, pages too early under EMM386 </A>  [section 15.7]
<li><A HREF="#Config"> CWSDPMI, setting parameters for optimal performance </A>  [section 3.9]
<li><A HREF="#Distributing"> CWSDPMI, should be distributed with DJGPP programs </A>  [section 9.5]
<li><A HREF="#HW Int pitfalls"> CWSDPR0 reduces interrupt reflection overhead </A>  [section 18.11]
<li><A HREF="#Hardware interrupts"> CWSDPR0, use for testing HW interrupt handlers </A>  [section 18.9]
<li><A HREF="#Config"> CWSPARAM, a program to tune CWSDPMI performance </A>  [section 3.9]
<li><A HREF="#Info crashes"> DISPLAY.SYS and EMM386, conflict with Info </A>  [section 6.10]
<li><A HREF="#Missing headers or libraries"> DJGPP.ENV syntax explained </A>  [section 8.1]
<li><A HREF="#Missing headers or libraries"> DJGPP.ENV, beware of blanks when setting </A>  [section 8.1]
<li><A HREF="#Missing headers or libraries"> DJGPP.ENV, compiler environment variables </A>  [section 8.1]
<li><A HREF="#Libraries order"> DJGPP.ENV, linker environment variables </A>  [section 8.9]
<li><A HREF="#Large executable"> DJP compressor supports DLM </A>  [section 8.13]
<li><A HREF="#Large executable"> DJP, an executable compressor for DJGPP </A>  [section 8.13]
<li><A HREF="#Large executable"> DJP, incompatibilities with Binutils </A>  [section 8.13]
<li><A HREF="#Large executable"> DLM compression, with DJP </A>  [section 8.13]
<li><A HREF="#Samples"> DLM, a facility to load code at run time </A>  [section 22.3]
<li><A HREF="#Fat DS"> DOSEMU doesn't allow "Fat DS" </A>  [section 18.6]
<li><A HREF="#DOSEmu"> DOSEmu, problems with FAT32 volumes </A>  [section 3.4]
<li><A HREF="#DOSEmu"> DOSEmu, RHIDE conflicts with mouse support </A>  [section 3.4]
<li><A HREF="#DXE"> DXEGEN, undefined references </A>  [section 22.14]
<li><A HREF="#How to debug"> EDEBUG32 can debug a DXE </A>  [section 12.1]
<li><A HREF="#Pentium"> EGCS, a DJGPP port </A>  [section 14.3]
<li><A HREF="#Programs hang"> Emacs hangs on Windows 9X </A>  [section 6.1]
<li><A HREF="#Where is the docs"> Emacs, reading docs </A>  [section 5.1]
<li><A HREF="#Where is the docs"> Emacs, reading Info files </A>  [section 5.1]
<li><A HREF="#Man pages"> Emacs, using to read man pages </A>  [section 5.5]
<li><A HREF="#Info crashes"> EMM386 and DISPLAY.SYS, conflict with Info </A>  [section 6.10]
<li><A HREF="#EMM386 alloc"> EMM386, cannot use all free memory </A>  [section 15.7]
<li><A HREF="#Debug graphics"> EMM386, conflicts with dual-monitor systems </A>  [section 12.5]
<li><A HREF="#HW Int pitfalls"> EMM386, effect on max interrupt frequency </A>  [section 18.11]
<li><A HREF="#Config"> EMM386, getting the most memory </A>  [section 3.9]
<li><A HREF="#More than 64MB"> EMM386, how to get more than 32MB of memory </A>  [section 3.10]
<li><A HREF="#EMM386 alloc"> EMM386, malloc/calloc fails </A>  [section 15.7]
<li><A HREF="#Config"> EMM386, settings for optimal performance </A>  [section 3.9]
<li><A HREF="#Printed docs"> emTeX, printing the docs </A>  [section 5.3]
<li><A HREF="#Emulation"> emu387.dxe, distribution with DJGPP programs </A>  [section 11.1]
<li><A HREF="#Included source"> F2C, debugging generated code </A>  [section 12.8]
<li><A HREF="#Application distribution"> Flex doesn't imply GPL/LGPL </A>  [section 19.1]
<li><A HREF="#Included source"> Flex, debugging generated code </A>  [section 12.8]
<li><A HREF="#Unresolved externals"> Flex, undefined references </A>  [section 8.7]
<li><A HREF="#Old QDPMI"> FSDB crashes under QEMM/QDPMI </A>  [section 12.3]
<li><A HREF="#How to debug"> FSDB, the full-screen debugger </A>  [section 12.1]
<li><A HREF="#Libraries order"> g++ compilation driver, alternative names on DOS </A>  [section 8.9]
<li><A HREF="#g++.exe"> g++.exe, unzip complains on DOS </A>  [section 22.1]
<li><A HREF="#Internal error"> GCC aborts or crashes during compilation </A>  [section 6.6]
<li><A HREF="#Missing C++ headers"> GCC can't find C++ headers </A>  [section 8.2]
<li><A HREF="#Missing headers or libraries"> GCC can't find crt0.o </A>  [section 8.1]
<li><A HREF="#Missing headers or libraries"> GCC can't find headers </A>  [section 8.1]
<li><A HREF="#Missing headers or libraries"> GCC can't find libraries </A>  [section 8.1]
<li><A HREF="#djgpp_first_ctor"> GCC cannot resolve djgpp_first_ctor symbol when linking </A>  [section 8.11]
<li><A HREF="#GCC optimizations"> GCC crashes during optimization </A>  [section 6.4]
<li><A HREF="#General trouble"> GCC crashes, which subprogram of </A>  [section 6.13]
<li><A HREF="#Struct packing"> GCC doesn't pack structs in C++ programs </A>  [section 22.11]
<li><A HREF="#OBJ and LIB"> GCC doesn't recognize .lib libraries </A>  [section 17.5]
<li><A HREF="#OBJ and LIB"> GCC doesn't recognize .obj object files </A>  [section 17.5]
<li><A HREF="#Which language"> GCC doesn't recognize file format </A>  [section 8.4]
<li><A HREF="#GCC optimizations"> GCC exhausts virtual memory </A>  [section 6.4]
<li><A HREF="#Make hangs"> GCC from v2.x crashes under v1.x Make </A>  [section 6.8]
<li><A HREF="#Make hangs"> GCC hangs under Make </A>  [section 6.8]
<li><A HREF="#0xfe+0x20"> GCC says "garbage at end of number" </A>  [section 22.9]
<li><A HREF="#C++ comments"> GCC won't compile C++-style comments in C programs </A>  [section 8.3]
<li><A HREF="#Still unresolved"> GCC won't find inline functions without -O </A>  [section 8.10]
<li><A HREF="#Large image"> GCC, -fconserve-space switch </A>  [section 8.12]
<li><A HREF="#-msoft-float"> GCC, -msoft-float switch </A>  [section 11.4]
<li><A HREF="#Which language"> GCC, -v switch shows the compilation passes </A>  [section 8.4]
<li><A HREF="#GDB and C++ source"> GCC, assumes C++ source is .cc </A>  [section 12.6]
<li><A HREF="#How fast"> GCC, code efficiency </A>  [section 14.1]
<li><A HREF="#How to debug"> GCC, compiling for debugging </A>  [section 12.1]
<li><A HREF="#Reasonable hardware"> GCC, compiling, memory requirements </A>  [section 3.8]
<li><A HREF="#Config"> GCC, compiling, RAM disk </A>  [section 3.9]
<li><A HREF="#Missing headers or libraries"> GCC, environment variables </A>  [section 8.1]
<li><A HREF="#Which language"> GCC, file source language recognition </A>  [section 8.4]
<li><A HREF="#IO speed"> GCC, I/O speed </A>  [section 14.4]
<li><A HREF="#Inline Asm"> GCC, inline assembly facilities </A>  [section 18.13]
<li><A HREF="#How long"> GCC, maximum length of command line in Makefiles </A>  [section 16.5]
<li><A HREF="#Makefiles"> GCC, passing long command lines via Makefile </A>  [section 16.6]
<li><A HREF="#Changing"> GCC, recompiling </A>  [section 22.2]
<li><A HREF="#Redirect"> GCC, redirecting messages to a file </A>  [section 6.14]
<li><A HREF="#Slow compiler"> GCC, slow compilation </A>  [section 7.1]
<li><A HREF="#Stack size"> GDB causes stack overflow in a debuggee </A>  [section 15.9]
<li><A HREF="#Old QDPMI"> GDB crashes under QEMM/QDPMI </A>  [section 12.3]
<li><A HREF="#How to debug"> GDB doesn't pass command-line arguments to debuggee </A>  [section 12.1]
<li><A HREF="#C++ classes in GDB"> GDB doesn't recognize source language </A>  [section 12.7]
<li><A HREF="#Static vars"> GDB fails to set or display static variables </A>  [section 12.9]
<li><A HREF="#Debugging woes"> GDB GP Faults on breakpoint/watchpoint under Windows </A>  [section 12.10]
<li><A HREF="#GDB needs COFF"> GDB needs COFF output </A>  [section 12.4]
<li><A HREF="#How to debug"> GDB, conflicts with file redirection </A>  [section 12.1]
<li><A HREF="#How to debug"> GDB, debugging DJGPP programs </A>  [section 12.1]
<li><A HREF="#Debug graphics"> GDB, debugging graphics programs </A>  [section 12.5]
<li><A HREF="#How to debug"> GDB, how is it different on MS-DOS </A>  [section 12.1]
<li><A HREF="#C++ classes in GDB"> GDB, how to use C++ class variables' names </A>  [section 12.7]
<li><A HREF="#C++ classes in GDB"> GDB, how to use C++ method names </A>  [section 12.7]
<li><A HREF="#How to debug"> GDB, init file name </A>  [section 12.1]
<li><A HREF="#How to debug"> GDB, name of the READLINE init file </A>  [section 12.1]
<li><A HREF="#How to debug"> GDB, slow loading of symbols and sources </A>  [section 12.1]
<li><A HREF="#Disk space"> go32-v2 reports the amount of memory and swap space </A>  [section 4.6]
<li><A HREF="#go32-v2"> go32-v2 usage </A>  [section 22.13]
<li><A HREF="#EMM386 alloc"> go32-v2, use to find out how much memory is available to DJGPP </A>  [section 15.7]
<li><A HREF="#Gprof needs COFF"> Gprof cannot find program </A>  [section 13.3]
<li><A HREF="#Gprof docs"> Gprof documentation </A>  [section 13.4]
<li><A HREF="#No profile"> gprof produces no output </A>  [section 13.6]
<li><A HREF="#Gprof needs COFF"> Gprof says "bad format" </A>  [section 13.3]
<li><A HREF="#Cannot find docs"> Gprof, documentation </A>  [section 5.4]
<li><A HREF="#How to profile"> Gprof, the GNU profiler </A>  [section 13.1]
<li><A HREF="#Man pages"> Groff, port to DJGPP </A>  [section 5.5]
<li><A HREF="#Man pages"> Groff, using to read man pages </A>  [section 5.5]
<li><A HREF="#Which driver"> GRX, supported SVGA types </A>  [section 10.1]
<li><A HREF="#C++ classes in GDB"> gsymify, a substitute for SYMIFY for stabs debugging </A>  [section 12.7]
<li><A HREF="#Unresolved externals"> gxx driver, not in gcc272b distribution </A>  [section 8.7]
<li><A HREF="#Unresolved externals"> gxx driver, searches C++ libraries automatically </A>  [section 8.7]
<li><A HREF="#EMM386 alloc"> HIMEM, malloc/calloc fails </A>  [section 15.7]
<li><A HREF="#FAQ format"> INFNG, produces the FAQ in Norton Guides format </A>  [section 22.25]
<li><A HREF="#Info crashes"> Info crashes due to ^Z or whitespace at end of DJGPP.ENV </A>  [section 6.10]
<li><A HREF="#Info crashes"> Info crashes immediately upon startup </A>  [section 6.10]
<li><A HREF="#Buggy DPMI"> Info crashes under QDPMI </A>  [section 6.3]
<li><A HREF="#Programs hang"> Info hangs on Windows 9X </A>  [section 6.1]
<li><A HREF="#Info cannot find Top"> Info won't display a file </A>  [section 6.9]
<li><A HREF="#Where is the docs"> Info, a stand-alone docs browser </A>  [section 5.1]
<li><A HREF="#Info crashes"> Info, conflicts with DISPLAY.SYS, EMM386 </A>  [section 6.10]
<li><A HREF="#Man pages"> Info, using to read man pages </A>  [section 5.5]
<li><A HREF="#What to download"> install-info, a program to install Info docs </A>  [section 4.5]
<li><A HREF="#DJGPP by WWW"> Internet Explorer, downloading DJGPP </A>  [section 4.4]
<li><A HREF="#Converting ASM"> JAS, a free assembler with Intel-like syntax </A>  [section 17.2]
<li><A HREF="#Printed docs"> LaTeX, printing the docs </A>  [section 5.3]
<li><A HREF="#Windows apps"> lcc-win32 compiler for Windows </A>  [section 3.6]
<li><A HREF="#Large object files"> ld fails for a.out files in a library </A>  [section 8.16]
<li><A HREF="#Large object files"> ld fails for large libraries and object files </A>  [section 8.16]
<li><A HREF="#Large object files"> ld fails for obj files converted by EMXAOUT </A>  [section 8.16]
<li><A HREF="#djgpp_first_ctor"> LD linker, linker script defines djgpp_first_ctor </A>  [section 8.11]
<li><A HREF="#Slow linker"> ld, how to improve linking speed </A>  [section 7.2]
<li><A HREF="#Windows apps"> ld.exe, from RSXNTDJ </A>  [section 3.6]
<li><A HREF="#Programs hang"> Less hangs on Windows 9X </A>  [section 6.1]
<li><A HREF="#Man pages"> Less, using to read man pages </A>  [section 5.5]
<li><A HREF="#Included source"> Lex, debugging generated code </A>  [section 12.8]
<li><A HREF="#Emulation"> libemu.a FP emulation library </A>  [section 11.1]
<li><A HREF="#Libraries order"> Linker can't find library functions in non-default directories </A>  [section 8.9]
<li><A HREF="#Libraries order"> Linker, environment variables </A>  [section 8.9]
<li><A HREF="#GDB needs COFF"> Linker, how to get COFF output </A>  [section 12.4]
<li><A HREF="#Libraries order"> Linker, order of libraries in the command line </A>  [section 8.9]
<li><A HREF="#Fat DS"> Linux doesn't allow "Fat DS" </A>  [section 18.6]
<li><A HREF="#Minimum"> Linux, compatibility </A>  [section 3.1]
<li><A HREF="#DOSEmu"> Linux, needs a patch to run nested programs </A>  [section 3.4]
<li><A HREF="#DOSEmu"> Linux, slow response to interactive programs </A>  [section 3.4]
<li><A HREF="#Samples"> LWP multitasking for DJGPP </A>  [section 22.3]
<li><A HREF="#DOSEmu"> Make crashes on DOSEmu </A>  [section 3.4]
<li><A HREF="#OS2"> Make crashes on OS/2 </A>  [section 3.2]
<li><A HREF="#Missing separator"> Make error message "missing separator" </A>  [section 22.16]
<li><A HREF="#Changing"> Make requires floating point </A>  [section 22.2]
<li><A HREF="#DOSEmu"> Make, can be built to not issue FP instructions </A>  [section 3.4]
<li><A HREF="#Make hangs"> Make, GCC hangs when invoked from it </A>  [section 6.8]
<li><A HREF="#How long"> Make, maximum length of command line to pass to GCC </A>  [section 16.5]
<li><A HREF="#Makefiles"> Make, passing long command lines via Makefile </A>  [section 16.6]
<li><A HREF="#Modification time"> Make, warning "file modification time in the future". </A>  [section 22.17]
<li><A HREF="#No Info"> Makeinfo, using to convert Info files to plain ASCII </A>  [section 5.2]
<li><A HREF="#FAQ format"> MAKERTF, produces the FAQ in RTF format </A>  [section 22.25]
<li><A HREF="#Man pages"> Man program for DJGPP docs </A>  [section 5.5]
<li><A HREF="#Debug graphics"> MDA device driver for redirecting debug output </A>  [section 12.5]
<li><A HREF="#Windows apps"> Mingw32 port of GCC </A>  [section 3.6]
<li><A HREF="#Man pages"> More, using to read man pages </A>  [section 5.5]
<li><A HREF="#Debug graphics"> MSHELL fails because of TSR programs </A>  [section 12.5]
<li><A HREF="#Debug graphics"> MSHELL, redirecting screen output </A>  [section 12.5]
<li><A HREF="#Converting ASM"> NASM, a portable assembler with Intel syntax support </A>  [section 17.2]
<li><A HREF="#Syntax"> NASM, a tutorial on usage with DJGPP </A>  [section 17.1]
<li><A HREF="#DJGPP by WWW"> Netscape, downloading DJGPP </A>  [section 4.4]
<li><A HREF="#Which library"> NM, printing library contents </A>  [section 8.8]
<li><A HREF="#Missing headers or libraries"> Novell 3.X, linker doesn't find crt0.o </A>  [section 8.1]
<li><A HREF="#Minimum"> Novell NWDOS 7, buggy DPMI services </A>  [section 3.1]
<li><A HREF="#Minimum"> Novell NWDOS 7, compatibility </A>  [section 3.1]
<li><A HREF="#Slow-down"> Novell VLM causes slow-down of DJGPP programs </A>  [section 14.5]
<li><A HREF="#Buggy DPMI"> NWDOS, buggy DPMI services crash DJGPP </A>  [section 6.3]
<li><A HREF="#OBJ and LIB"> OBJ2BFD converter from .obj to COFF format </A>  [section 17.5]
<li><A HREF="#OBJ and LIB"> OBJ2COFF converter from .obj to COFF format </A>  [section 17.5]
<li><A HREF="#OBJ and LIB"> OBJ2COFF, commercial use is prohibited </A>  [section 17.5]
<li><A HREF="#Objective C"> Objective C, compilation problems </A>  [section 8.5]
<li><A HREF="#SIGFPE with ObjC"> Objective-C, cannot run on machines without FPU </A>  [section 11.7]
<li><A HREF="#Buggy DPMI"> OpenDOS, bug in DPMI services crash DJGPP </A>  [section 6.3]
<li><A HREF="#OS2"> OS/2 and RHIDE </A>  [section 3.2]
<li><A HREF="#Fat DS"> OS/2 Warp allows "Fat DS" </A>  [section 18.6]
<li><A HREF="#Confusing alloc"> OS/2, and _go32_remaining_physical_memory </A>  [section 15.2]
<li><A HREF="#Minimum"> OS/2, compatibility </A>  [section 3.1]
<li><A HREF="#OS2 emulation"> OS/2, floating point emulation </A>  [section 11.3]
<li><A HREF="#OS2"> OS/2, incompatibilities </A>  [section 3.2]
<li><A HREF="#Pentium"> PGCC </A>  [section 14.3]
<li><A HREF="#GCC optimizations"> PGCC exhausts virtual memory </A>  [section 6.4]
<li><A HREF="#Older is faster"> PGCC, bugs with optimization levels -O7 and higher </A>  [section 14.2]
<li><A HREF="#Numeric tails"> PKUNZIP v2.50, creates numeric tails </A>  [section 22.18]
<li><A HREF="#HW Int pitfalls"> PMODE/DJ reduces interrupt reflection overhead </A>  [section 18.11]
<li><A HREF="#Distributing"> PMODE/DJ, can be used to produce stand-alone programs </A>  [section 9.5]
<li><A HREF="#Large object files"> POVRAY, linker fails to link the library </A>  [section 8.16]
<li><A HREF="#Samples"> Pthreads for DJGPP </A>  [section 22.3]
<li><A HREF="#Other emulators"> Q87, an emulator compatible with DJGPP </A>  [section 11.2]
<li><A HREF="#Fat DS"> QDPMI allows "Fat DS" </A>  [section 18.6]
<li><A HREF="#QDPMI VM"> QDPMI and _crt0_startup_flags settings </A>  [section 15.3]
<li><A HREF="#Old QDPMI"> QDPMI crashes debugger </A>  [section 12.3]
<li><A HREF="#Int 24h"> QDPMI crashes DJGPP programs when they cause Int 24h </A>  [section 22.12]
<li><A HREF="#Buggy DPMI"> QDPMI crashes Info and debuggers </A>  [section 6.3]
<li><A HREF="#QDPMI VM"> QDPMI fails to provide virtual memory </A>  [section 15.3]
<li><A HREF="#Old QDPMI"> QDPMI, how to disable </A>  [section 12.3]
<li><A HREF="#QDPMI alloc"> QDPMI, malloc/calloc failure </A>  [section 15.4]
<li><A HREF="#Swap out"> QDPMI, memory usage for nested programs </A>  [section 15.8]
<li><A HREF="#Old QDPMI"> QEMM crashes debugger </A>  [section 12.3]
<li><A HREF="#More than 64MB"> QEMM, how to get more than 64MB of memory </A>  [section 3.10]
<li><A HREF="#Config"> QEMM386, settings for optimal performance </A>  [section 3.9]
<li><A HREF="#Samples"> RCS port to DJGPP </A>  [section 22.3]
<li><A HREF="#Redirect"> REDIR, redirecting GCC messages to a file </A>  [section 6.14]
<li><A HREF="#Crash traceback"> REDIR, redirecting stack dump to a file </A>  [section 9.2]
<li><A HREF="#Makefiles"> REDIR, use to get redirection and long command lines </A>  [section 16.6]
<li><A HREF="#Static vars"> RHGDB fails to set or display static variables </A>  [section 12.9]
<li><A HREF="#OS2"> RHIDE aborts on OS/2 </A>  [section 3.2]
<li><A HREF="#Debugging woes"> RHIDE debugger GP Faults on breakpoints under Windows </A>  [section 12.10]
<li><A HREF="#Static vars"> RHIDE fails to set or display static variables </A>  [section 12.9]
<li><A HREF="#Programs hang"> RHIDE hangs on Windows 9X </A>  [section 6.1]
<li><A HREF="#Debug graphics"> RHIDE, and monochrome display </A>  [section 12.5]
<li><A HREF="#How to debug"> RHIDE, includes an integrated debugger </A>  [section 12.1]
<li><A HREF="#Makefiles"> RHIDE, long command lines </A>  [section 16.6]
<li><A HREF="#DOSEmu"> RHIDE, mouse problems on DOSEmu </A>  [section 3.4]
<li><A HREF="#Where is the docs"> RHIDE, reading docs </A>  [section 5.1]
<li><A HREF="#Windows apps"> RSXNTDJ toolkit for developing Win32 applications </A>  [section 3.6]
<li><A HREF="#Windows apps"> RSXNTDJ, MS Platform SDK </A>  [section 3.6]
<li><A HREF="#Windows apps"> RSXNTDJ, using with GCC 2.8.1 and later </A>  [section 3.6]
<li><A HREF="#Redirect"> SCRIPT, redirecting GCC messages to a file </A>  [section 6.14]
<li><A HREF="#Changing"> Sed requires floating point </A>  [section 22.2]
<li><A HREF="#Converting ASM"> Sed script to convert ASM to AT&T syntax </A>  [section 17.2]
<li><A HREF="#Cannot find docs"> Sed, documentation </A>  [section 5.4]
<li><A HREF="#Man pages"> Sed, using to convert formatted man pages to plain text </A>  [section 5.5]
<li><A HREF="#File handles"> SHARE, limits available file handles </A>  [section 9.6]
<li><A HREF="#Large executable"> STRIP makes executables smaller </A>  [section 8.13]
<li><A HREF="#Stack size"> STUBEDIT, changing stack size </A>  [section 15.9]
<li><A HREF="#Swap out"> STUBEDIT, effect on memory left to spawned programs </A>  [section 15.8]
<li><A HREF="#No EXE"> STUBIFY fails to produce .EXE under Novell </A>  [section 8.15]
<li><A HREF="#Unknown filetype"> STUBIFY.EXE, infected by a virus </A>  [section 6.7]
<li><A HREF="#Crash traceback"> SYMIFY, a program to read crash traceback </A>  [section 9.2]
<li><A HREF="#Crash traceback"> SYMIFY, inaccurate report for inline assembly </A>  [section 9.2]
<li><A HREF="#Converting ASM"> TA2AS, a converter from Intel to AT&T assembly syntax </A>  [section 17.2]
<li><A HREF="#Printed docs"> TeX, printing the docs </A>  [section 5.3]
<li><A HREF="#Printed docs"> TEXI2PS, converting docs to crude PostScript </A>  [section 5.3]
<li><A HREF="#Where is the docs"> TkInfo, a Win32 tool to read Info files </A>  [section 5.1]
<li><A HREF="#Which driver"> UNIVBE, software VESA 2.0 emulation </A>  [section 10.1]
<li><A HREF="#Minimum"> Warp, compatibility </A>  [section 3.1]
<li><A HREF="#OS2"> Warp, incompatibilities </A>  [section 3.2]
<li><A HREF="#Fat DS"> Windows 3.X allows "Fat DS" </A>  [section 18.6]
<li><A HREF="#Minimum"> Windows 3.X, compatibility </A>  [section 3.1]
<li><A HREF="#Windows alloc"> Windows 3.X, malloc/calloc fails </A>  [section 15.5]
<li><A HREF="#Fat DS"> Windows 9X allows "Fat DS" </A>  [section 18.6]
<li><A HREF="#Windows9X alloc"> Windows 9X doesn't allow more than 16MB virtual memory </A>  [section 15.6]
<li><A HREF="#WindowsNT"> Windows 9X DPMI server loses selectors calling spawnXX </A>  [section 3.3]
<li><A HREF="#Missing C++ headers"> Windows 9X long filenames and C++ headers </A>  [section 8.2]
<li><A HREF="#Minimum"> Windows 9X, compatibility </A>  [section 3.1]
<li><A HREF="#More than 64MB"> Windows 9X, how to get more than 64MB of DPMI memory </A>  [section 3.10]
<li><A HREF="#Missing headers or libraries"> Windows 9X, setting DJGPP environment variable </A>  [section 8.1]
<li><A HREF="#Linker script"> Windows 9X, shortcut files conflict with ld </A>  [section 8.14]
<li><A HREF="#Graphics and Windows"> Windows messes up graphics screen </A>  [section 10.3]
<li><A HREF="#QDPMI alloc"> Windows, malloc/calloc failure </A>  [section 15.4]
<li><A HREF="#Swap out"> Windows, memory usage for nested programs </A>  [section 15.8]
<li><A HREF="#Config"> Windows, setting memory parameters for DJGPP </A>  [section 3.9]
<li><A HREF="#Stack size"> Windows, stack size control </A>  [section 15.9]
<li><A HREF="#Graphics and Windows"> Windows, wants to run graphics programs in DOS Mode </A>  [section 10.3]
<li><A HREF="#Fat DS"> Windows/NT doesn't allow "Fat DS" </A>  [section 18.6]
<li><A HREF="#WindowsNT"> Windows/NT doesn't allow port I/O </A>  [section 3.3]
<li><A HREF="#WindowsNT"> Windows/NT DPMI server loses selectors calling spawnXX </A>  [section 3.3]
<li><A HREF="#WindowsNT"> Windows/NT LFN driver </A>  [section 3.3]
<li><A HREF="#Minimum"> Windows/NT, compatibility </A>  [section 3.1]
<li><A HREF="#Missing headers or libraries"> WindowsNT, setting DJGPP environment variable </A>  [section 8.1]
<li><A HREF="#Emulation"> WMEMU causes undefined references when linking </A>  [section 11.1]
<li><A HREF="#Emulation"> WMEMU, an alternative floating-point emulator </A>  [section 11.1]
<li><A HREF="#Debugging woes"> WMEMU, use when debugging FP programs on non-FPU machine </A>  [section 12.10]
<li><A HREF="#Included source"> Yacc, debugging generated code </A>  [section 12.8]
</ul>
</body>
</html>


